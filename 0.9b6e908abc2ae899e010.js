(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{"5xlC":function(n,e,l){"use strict";var t=l("mrSG").__decorate,i=l("mrSG").__metadata,o=l("CcnG"),a=l("UpIn"),r=function(){function n(n){this.onFileSelected=new o.EventEmitter,this.element=n}return n.prototype.getOptions=function(){return this.uploader.options},n.prototype.getFilters=function(){return{}},n.prototype.isEmptyAfterSelection=function(){return!!this.element.nativeElement.attributes.multiple},n.prototype.onChange=function(){var n=this.element.nativeElement.files,e=this.getOptions(),l=this.getFilters();this.uploader.addToQueue(n,e,l),this.onFileSelected.emit(n),this.isEmptyAfterSelection()&&(this.element.nativeElement.value="")},n}();t([o.Input(),i("design:type",a.FileUploader)],r.prototype,"uploader",void 0),t([o.Output(),i("design:type",o.EventEmitter)],r.prototype,"onFileSelected",void 0),t([o.HostListener("change"),i("design:type",Function),i("design:paramtypes",[]),i("design:returntype",Object)],r.prototype,"onChange",null),r=t([o.Directive({selector:"[ng2FileSelect]"})],r),e.FileSelectDirective=r},"6QML":function(n,e,l){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t=function(n){return n&&"string"==typeof n&&null!==n.trim().match(/^{[\s\S]*?}$/)};e.isJsonLikeString=t;var i=function(n){return n&&("NamedNodeMap"===n.constructor.name||n instanceof NamedNodeMap)};e.isNamedNodeMap=i;var o=function(n){var e={};return Object.keys(n).forEach(function(l){e[n[l].name]=n[l].value}),e};e.namedNodeMapToObject=o;var a=function(n){var e=n;return t(n)?e=JSON.parse(n):i(n)&&(e=o(n)),Array.isArray(e)?e=e.map(function(n){return a(n)}):"object"==typeof e&&Object.keys(e).forEach(function(n){var l=n.replace(/-/g,"_").toLocaleLowerCase().replace(/^cld(-|_)?/,""),t=a(e[n]);delete e[n],e[l]=t}),e};e.transformKeyNames=a;var r=function(){function n(n,e){this._cloudinaryInstance=n.CloudinaryJQuery?new n.CloudinaryJQuery(e):new n.Cloudinary(e)}return Object.defineProperty(n.prototype,"cloudinaryInstance",{get:function(){return this._cloudinaryInstance},enumerable:!0,configurable:!0}),n.prototype.config=function(){return this._cloudinaryInstance.config()},n.prototype.url=function(){for(var n,e=[],l=0;l<arguments.length;l++)e[l]=arguments[l];return(n=this._cloudinaryInstance).url.apply(n,e)},n.prototype.imageTag=function(){for(var n,e=[],l=0;l<arguments.length;l++)e[l]=arguments[l];return(n=this._cloudinaryInstance).imageTag.apply(n,e)},n.prototype.videoTag=function(){for(var n,e=[],l=0;l<arguments.length;l++)e[l]=arguments[l];return(n=this._cloudinaryInstance).videoTag.apply(n,e)},n.prototype.responsive=function(n,e){this._cloudinaryInstance.cloudinary_update(n,e),this._cloudinaryInstance.responsive(e,!1)},n.prototype.toCloudinaryAttributes=function(n,e){var l=this,t=a(n);return e&&e.length>0&&(t.transformation=[],e.forEach(function(n){t.transformation.push(l.toCloudinaryAttributes(n.getAttributes()))})),""!==t.responsive&&"true"!==t.responsive&&!0!==t.responsive||(t.responsive=!0),t},n}();e.Cloudinary=r,e.provideCloudinary=function(n,e){return{provide:r,useFactory:function(){return new r(n,e)}}},e.isBrowser=function(){return"undefined"!=typeof window}},"6rTD":function(n,e,l){"use strict";var t=l("mrSG").__decorate,i=l("mrSG").__metadata;Object.defineProperty(e,"__esModule",{value:!0});var o=l("CcnG"),a=(l("6QML"),l("BHEk")),r=l("6QML");e.CloudinaryImageSourceDirective=function(){function n(n,e){this.el=n,this.cloudinary=e}return n.prototype.ngAfterViewInit=function(){if(r.isBrowser()){var n=void 0,e=void 0;this.clHref?(n="href",e=this.clHref):this.clSrc?(n="src",e=this.clSrc):this.clSrcset&&(n="srcset",e=this.clSrcset);var l=!1;if(this.clHref&&toString.call("[object SVGAnimatedString]"===this.el.nativeElement.href)&&(this.el.nativeElement.setAttribute("xlinkHref","xlink:href"),l=!0),!n||!e)throw new Error("Directive value is missing for clHref/clSrc/clSrcset");var t=this.cloudinary.toCloudinaryAttributes(this.el.nativeElement.attributes,this.transformations),i=this.cloudinary.url(e,t);this.el.nativeElement.setAttribute(n,i),this.el.nativeElement.ownerDocument.documentMode&&!l&&(this.el.nativeElement[n]=i)}},t([o.Input(),i("design:type",String)],n.prototype,"clHref",void 0),t([o.Input(),i("design:type",String)],n.prototype,"clSrc",void 0),t([o.Input(),i("design:type",String)],n.prototype,"clSrcset",void 0),t([o.ContentChildren(a.CloudinaryTransformationDirective),i("design:type",o.QueryList)],n.prototype,"transformations",void 0),t([o.Directive({selector:"[clHref], [clSrc], [clSrcset]"})],n)}()},BHEk:function(n,e,l){"use strict";var t=l("mrSG").__decorate;Object.defineProperty(e,"__esModule",{value:!0});var i=l("CcnG");e.CloudinaryTransformationDirective=function(){function n(n){this.el=n}return n.prototype.getAttributes=function(){return this.el.nativeElement.attributes},t([i.Directive({selector:"cl-transformation"})],n)}()},BJTO:function(n,e,l){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(n){for(var l in n)e.hasOwnProperty(l)||(e[l]=n[l])}(l("O/bx"))},NQJK:function(n,e,l){"use strict";var t=l("mrSG").__decorate,i=l("mrSG").__metadata;Object.defineProperty(e,"__esModule",{value:!0});var o=l("CcnG"),a=(l("6QML"),l("BHEk")),r=l("6QML");e.CloudinaryImage=function(){function n(n,e){this.el=n,this.cloudinary=e,this.onLoad=new o.EventEmitter,this.onError=new o.EventEmitter}return n.prototype.ngOnInit=function(){var n=this;r.isBrowser()&&(this.observer=new MutationObserver(function(){n.loadImage()}),this.observer.observe(this.el.nativeElement,{attributes:!0,childList:!0}))},n.prototype.ngOnChanges=function(n){n.publicId&&!n.publicId.isFirstChange()&&this.loadImage()},n.prototype.ngOnDestroy=function(){this.observer&&this.observer.disconnect&&this.observer.disconnect()},n.prototype.ngAfterViewInit=function(){this.loadImage()},n.prototype.loadImage=function(){var n=this;if(r.isBrowser()){if(!this.publicId)throw new Error("You must set the public id of the image to load, e.g. <cl-image public-id={{photo.public_id}}...></cl-image>");var e=this.el.nativeElement,l=e.children[0];l.onload=function(e){n.onLoad.emit(e)},l.onerror=function(e){n.onError.emit(e)};var t=this.cloudinary.toCloudinaryAttributes(e.attributes,this.transformations),i=this.cloudinary.imageTag(this.publicId,t);this.setElementAttributes(l,i.attributes()),t.responsive&&this.cloudinary.responsive(l,t)}},n.prototype.setElementAttributes=function(n,e){Object.keys(e).forEach(function(l){n.setAttribute(l,e[l])})},t([o.Input("public-id"),i("design:type",String)],n.prototype,"publicId",void 0),t([o.ContentChildren(a.CloudinaryTransformationDirective),i("design:type",o.QueryList)],n.prototype,"transformations",void 0),t([o.Output(),i("design:type",o.EventEmitter)],n.prototype,"onLoad",void 0),t([o.Output(),i("design:type",o.EventEmitter)],n.prototype,"onError",void 0),t([o.Component({selector:"cl-image",template:"<img>"})],n)}()},"O/bx":function(n,e,l){"use strict";var t=l("mrSG").__decorate;Object.defineProperty(e,"__esModule",{value:!0});var i=l("CcnG"),o=l("6QML"),a=l("NQJK"),r=l("fylK"),u=l("BHEk"),s=l("6rTD"),c=l("mb0K"),d=l("NQJK");e.CloudinaryImage=d.CloudinaryImage;var p=l("fylK");e.CloudinaryVideo=p.CloudinaryVideo;var f=l("BHEk");e.CloudinaryTransformationDirective=f.CloudinaryTransformationDirective;var m=l("6rTD");e.CloudinaryImageSourceDirective=m.CloudinaryImageSourceDirective;var h=l("mb0K");e.CloudinaryBackgroundImageDirective=h.CloudinaryBackgroundImageDirective;var g=l("6QML");function v(n,e){return new o.Cloudinary(n,e)}e.Cloudinary=g.Cloudinary,e.provideCloudinary=g.provideCloudinary,e.CLOUDINARY_LIB=new i.InjectionToken("CLOUDINARY_LIB"),e.CLOUDINARY_CONFIGURATION=new i.InjectionToken("CLOUDINARY_CONFIGURATION"),e.createCloudinary=v,e.CloudinaryModule=function(){function n(){}return l=n,n.forRoot=function(n,t){return{ngModule:l,providers:[{provide:e.CLOUDINARY_LIB,useValue:n},{provide:e.CLOUDINARY_CONFIGURATION,useValue:t},{provide:o.Cloudinary,useFactory:v,deps:[e.CLOUDINARY_LIB,e.CLOUDINARY_CONFIGURATION]}]}},l=t([i.NgModule({declarations:[s.CloudinaryImageSourceDirective,c.CloudinaryBackgroundImageDirective,a.CloudinaryImage,r.CloudinaryVideo,u.CloudinaryTransformationDirective],exports:[s.CloudinaryImageSourceDirective,c.CloudinaryBackgroundImageDirective,a.CloudinaryImage,r.CloudinaryVideo,u.CloudinaryTransformationDirective]})],n);var l}()},QGqX:function(n,e,l){"use strict";var t=function(){function n(){}return n.getMimeClass=function(n){var e="application";return-1!==this.mime_psd.indexOf(n.type)?e="image":n.type.match("image.*")?e="image":n.type.match("video.*")?e="video":n.type.match("audio.*")?e="audio":"application/pdf"===n.type?e="pdf":-1!==this.mime_compress.indexOf(n.type)?e="compress":-1!==this.mime_doc.indexOf(n.type)?e="doc":-1!==this.mime_xsl.indexOf(n.type)?e="xls":-1!==this.mime_ppt.indexOf(n.type)&&(e="ppt"),"application"===e&&(e=this.fileTypeDetection(n.name)),e},n.fileTypeDetection=function(n){var e={jpg:"image",jpeg:"image",tif:"image",psd:"image",bmp:"image",png:"image",nef:"image",tiff:"image",cr2:"image",dwg:"image",cdr:"image",ai:"image",indd:"image",pin:"image",cdp:"image",skp:"image",stp:"image","3dm":"image",mp3:"audio",wav:"audio",wma:"audio",mod:"audio",m4a:"audio",compress:"compress",zip:"compress",rar:"compress","7z":"compress",lz:"compress",z01:"compress",pdf:"pdf",xls:"xls",xlsx:"xls",ods:"xls",mp4:"video",avi:"video",wmv:"video",mpg:"video",mts:"video",flv:"video","3gp":"video",vob:"video",m4v:"video",mpeg:"video",m2ts:"video",mov:"video",doc:"doc",docx:"doc",eps:"doc",txt:"doc",odt:"doc",rtf:"doc",ppt:"ppt",pptx:"ppt",pps:"ppt",ppsx:"ppt",odp:"ppt"},l=n.split(".");if(l.length<2)return"application";var t=l[l.length-1].toLowerCase();return void 0===e[t]?"application":e[t]},n}();t.mime_doc=["application/msword","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.openxmlformats-officedocument.wordprocessingml.template","application/vnd.ms-word.document.macroEnabled.12","application/vnd.ms-word.template.macroEnabled.12"],t.mime_xsl=["application/vnd.ms-excel","application/vnd.ms-excel","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.openxmlformats-officedocument.spreadsheetml.template","application/vnd.ms-excel.sheet.macroEnabled.12","application/vnd.ms-excel.template.macroEnabled.12","application/vnd.ms-excel.addin.macroEnabled.12","application/vnd.ms-excel.sheet.binary.macroEnabled.12"],t.mime_ppt=["application/vnd.ms-powerpoint","application/vnd.ms-powerpoint","application/vnd.ms-powerpoint","application/vnd.ms-powerpoint","application/vnd.openxmlformats-officedocument.presentationml.presentation","application/vnd.openxmlformats-officedocument.presentationml.template","application/vnd.openxmlformats-officedocument.presentationml.slideshow","application/vnd.ms-powerpoint.addin.macroEnabled.12","application/vnd.ms-powerpoint.presentation.macroEnabled.12","application/vnd.ms-powerpoint.presentation.macroEnabled.12","application/vnd.ms-powerpoint.slideshow.macroEnabled.12"],t.mime_psd=["image/photoshop","image/x-photoshop","image/psd","application/photoshop","application/psd","zz-application/zz-winassoc-psd"],t.mime_compress=["application/x-gtar","application/x-gcompress","application/compress","application/x-tar","application/x-rar-compressed","application/octet-stream"],e.FileType=t},"RjY/":function(n,e,l){"use strict";function t(n){for(var l in n)e.hasOwnProperty(l)||(e[l]=n[l])}Object.defineProperty(e,"__esModule",{value:!0}),t(l("hMlM")),t(l("euAv")),t(l("wfqj"))},S6T7:function(n,e,l){"use strict";var t=l("mrSG").__decorate,i=l("Ip0R"),o=l("CcnG"),a=l("pKD1"),r=l("5xlC"),u=function(){};u=t([o.NgModule({imports:[i.CommonModule],declarations:[a.FileDropDirective,r.FileSelectDirective],exports:[a.FileDropDirective,r.FileSelectDirective]})],u),e.FileUploadModule=u},UpIn:function(n,e,l){"use strict";var t=l("CcnG"),i=l("oQam"),o=l("b6v0"),a=l("QGqX");e.FileUploader=function(){function n(n){this.isUploading=!1,this.queue=[],this.progress=0,this._nextIndex=0,this.options={autoUpload:!1,isHTML5:!0,filters:[],removeAfterUpload:!1,disableMultipart:!1,formatDataFunction:function(n){return n._file},formatDataFunctionIsAsync:!1},this.setOptions(n),this.response=new t.EventEmitter}return n.prototype.setOptions=function(n){this.options=Object.assign(this.options,n),this.authToken=this.options.authToken,this.authTokenHeader=this.options.authTokenHeader||"Authorization",this.autoUpload=this.options.autoUpload,this.options.filters.unshift({name:"queueLimit",fn:this._queueLimitFilter}),this.options.maxFileSize&&this.options.filters.unshift({name:"fileSize",fn:this._fileSizeFilter}),this.options.allowedFileType&&this.options.filters.unshift({name:"fileType",fn:this._fileTypeFilter}),this.options.allowedMimeType&&this.options.filters.unshift({name:"mimeType",fn:this._mimeTypeFilter});for(var e=0;e<this.queue.length;e++)this.queue[e].url=this.options.url},n.prototype.addToQueue=function(n,e,l){for(var t=this,a=[],r=0,u=n;r<u.length;r++)a.push(u[r]);var s=this._getFilters(l),c=this.queue.length,d=[];a.map(function(n){e||(e=t.options);var l=new i.FileLikeObject(n);if(t._isValidFile(l,s,e)){var a=new o.FileItem(t,n,e);d.push(a),t.queue.push(a),t._onAfterAddingFile(a)}else t._onWhenAddingFileFailed(l,s[t._failFilterIndex],e)}),this.queue.length!==c&&(this._onAfterAddingAll(d),this.progress=this._getTotalProgress()),this._render(),this.options.autoUpload&&this.uploadAll()},n.prototype.removeFromQueue=function(n){var e=this.getIndexOfItem(n),l=this.queue[e];l.isUploading&&l.cancel(),this.queue.splice(e,1),this.progress=this._getTotalProgress()},n.prototype.clearQueue=function(){for(;this.queue.length;)this.queue[0].remove();this.progress=0},n.prototype.uploadItem=function(n){var e=this.getIndexOfItem(n),l=this.queue[e],t=this.options.isHTML5?"_xhrTransport":"_iframeTransport";l._prepareToUploading(),this.isUploading||(this.isUploading=!0,this[t](l))},n.prototype.cancelItem=function(n){var e=this.getIndexOfItem(n),l=this.queue[e];l&&l.isUploading&&(this.options.isHTML5?l._xhr:l._form).abort()},n.prototype.uploadAll=function(){var n=this.getNotUploadedItems().filter(function(n){return!n.isUploading});n.length&&(n.map(function(n){return n._prepareToUploading()}),n[0].upload())},n.prototype.cancelAll=function(){this.getNotUploadedItems().map(function(n){return n.cancel()})},n.prototype.isFile=function(n){return function(n){return File&&n instanceof File}(n)},n.prototype.isFileLikeObject=function(n){return n instanceof i.FileLikeObject},n.prototype.getIndexOfItem=function(n){return"number"==typeof n?n:this.queue.indexOf(n)},n.prototype.getNotUploadedItems=function(){return this.queue.filter(function(n){return!n.isUploaded})},n.prototype.getReadyItems=function(){return this.queue.filter(function(n){return n.isReady&&!n.isUploading}).sort(function(n,e){return n.index-e.index})},n.prototype.destroy=function(){},n.prototype.onAfterAddingAll=function(n){return{fileItems:n}},n.prototype.onBuildItemForm=function(n,e){return{fileItem:n,form:e}},n.prototype.onAfterAddingFile=function(n){return{fileItem:n}},n.prototype.onWhenAddingFileFailed=function(n,e,l){return{item:n,filter:e,options:l}},n.prototype.onBeforeUploadItem=function(n){return{fileItem:n}},n.prototype.onProgressItem=function(n,e){return{fileItem:n,progress:e}},n.prototype.onProgressAll=function(n){return{progress:n}},n.prototype.onSuccessItem=function(n,e,l,t){return{item:n,response:e,status:l,headers:t}},n.prototype.onErrorItem=function(n,e,l,t){return{item:n,response:e,status:l,headers:t}},n.prototype.onCancelItem=function(n,e,l,t){return{item:n,response:e,status:l,headers:t}},n.prototype.onCompleteItem=function(n,e,l,t){return{item:n,response:e,status:l,headers:t}},n.prototype.onCompleteAll=function(){},n.prototype._mimeTypeFilter=function(n){return!(this.options.allowedMimeType&&-1===this.options.allowedMimeType.indexOf(n.type))},n.prototype._fileSizeFilter=function(n){return!(this.options.maxFileSize&&n.size>this.options.maxFileSize)},n.prototype._fileTypeFilter=function(n){return!(this.options.allowedFileType&&-1===this.options.allowedFileType.indexOf(a.FileType.getMimeClass(n)))},n.prototype._onErrorItem=function(n,e,l,t){n._onError(e,l,t),this.onErrorItem(n,e,l,t)},n.prototype._onCompleteItem=function(n,e,l,t){n._onComplete(e,l,t),this.onCompleteItem(n,e,l,t);var i=this.getReadyItems()[0];this.isUploading=!1,i?i.upload():(this.onCompleteAll(),this.progress=this._getTotalProgress(),this._render())},n.prototype._headersGetter=function(n){return function(e){return e?n[e.toLowerCase()]||void 0:n}},n.prototype._xhrTransport=function(n){var e,l=this,t=this,i=n._xhr=new XMLHttpRequest;if(this._onBeforeUploadItem(n),"number"!=typeof n._file.size)throw new TypeError("The file specified is no longer valid");if(this.options.disableMultipart)e=this.options.formatDataFunction(n);else{e=new FormData,this._onBuildItemForm(n,e);var o=function(){return e.append(n.alias,n._file,n.file.name)};this.options.parametersBeforeFiles||o(),void 0!==this.options.additionalParameter&&Object.keys(this.options.additionalParameter).forEach(function(t){var i=l.options.additionalParameter[t];"string"==typeof i&&i.indexOf("{{file_name}}")>=0&&(i=i.replace("{{file_name}}",n.file.name)),e.append(t,i)}),this.options.parametersBeforeFiles&&o()}if(i.upload.onprogress=function(e){var t=Math.round(e.lengthComputable?100*e.loaded/e.total:0);l._onProgressItem(n,t)},i.onload=function(){var e=l._parseHeaders(i.getAllResponseHeaders()),t=l._transformResponse(i.response,e),o=l._isSuccessCode(i.status)?"Success":"Error";l["_on"+o+"Item"](n,t,i.status,e),l._onCompleteItem(n,t,i.status,e)},i.onerror=function(){var e=l._parseHeaders(i.getAllResponseHeaders()),t=l._transformResponse(i.response,e);l._onErrorItem(n,t,i.status,e),l._onCompleteItem(n,t,i.status,e)},i.onabort=function(){var e=l._parseHeaders(i.getAllResponseHeaders()),t=l._transformResponse(i.response,e);l._onCancelItem(n,t,i.status,e),l._onCompleteItem(n,t,i.status,e)},i.open(n.method,n.url,!0),i.withCredentials=n.withCredentials,this.options.headers)for(var a=0,r=this.options.headers;a<r.length;a++)i.setRequestHeader((c=r[a]).name,c.value);if(n.headers.length)for(var u=0,s=n.headers;u<s.length;u++){var c;i.setRequestHeader((c=s[u]).name,c.value)}this.authToken&&i.setRequestHeader(this.authTokenHeader,this.authToken),i.onreadystatechange=function(){i.readyState==XMLHttpRequest.DONE&&t.response.emit(i.responseText)},this.options.formatDataFunctionIsAsync?e.then(function(n){return i.send(JSON.stringify(n))}):i.send(e),this._render()},n.prototype._getTotalProgress=function(n){if(void 0===n&&(n=0),this.options.removeAfterUpload)return n;var e=this.getNotUploadedItems().length,l=100/this.queue.length;return Math.round((e?this.queue.length-e:this.queue.length)*l+n*l/100)},n.prototype._getFilters=function(n){if(!n)return this.options.filters;if(Array.isArray(n))return n;if("string"==typeof n){var e=n.match(/[^\s,]+/g);return this.options.filters.filter(function(n){return-1!==e.indexOf(n.name)})}return this.options.filters},n.prototype._render=function(){},n.prototype._queueLimitFilter=function(){return void 0===this.options.queueLimit||this.queue.length<this.options.queueLimit},n.prototype._isValidFile=function(n,e,l){var t=this;return this._failFilterIndex=-1,!e.length||e.every(function(e){return t._failFilterIndex++,e.fn.call(t,n,l)})},n.prototype._isSuccessCode=function(n){return n>=200&&n<300||304===n},n.prototype._transformResponse=function(n,e){return n},n.prototype._parseHeaders=function(n){var e,l,t,i={};return n?(n.split("\n").map(function(n){t=n.indexOf(":"),e=n.slice(0,t).trim().toLowerCase(),l=n.slice(t+1).trim(),e&&(i[e]=i[e]?i[e]+", "+l:l)}),i):i},n.prototype._onWhenAddingFileFailed=function(n,e,l){this.onWhenAddingFileFailed(n,e,l)},n.prototype._onAfterAddingFile=function(n){this.onAfterAddingFile(n)},n.prototype._onAfterAddingAll=function(n){this.onAfterAddingAll(n)},n.prototype._onBeforeUploadItem=function(n){n._onBeforeUpload(),this.onBeforeUploadItem(n)},n.prototype._onBuildItemForm=function(n,e){n._onBuildForm(e),this.onBuildItemForm(n,e)},n.prototype._onProgressItem=function(n,e){var l=this._getTotalProgress(e);this.progress=l,n._onProgress(e),this.onProgressItem(n,e),this.onProgressAll(l),this._render()},n.prototype._onSuccessItem=function(n,e,l,t){n._onSuccess(e,l,t),this.onSuccessItem(n,e,l,t)},n.prototype._onCancelItem=function(n,e,l,t){n._onCancel(e,l,t),this.onCancelItem(n,e,l,t)},n}()},YNBZ:function(n,e,l){"use strict";function t(n){for(var l in n)e.hasOwnProperty(l)||(e[l]=n[l])}t(l("5xlC")),t(l("pKD1")),t(l("UpIn")),t(l("b6v0")),t(l("oQam"));var i=l("S6T7");e.FileUploadModule=i.FileUploadModule},b6v0:function(n,e,l){"use strict";var t=l("oQam");e.FileItem=function(){function n(n,e,l){this.url="/",this.headers=[],this.withCredentials=!0,this.formData=[],this.isReady=!1,this.isUploading=!1,this.isUploaded=!1,this.isSuccess=!1,this.isCancel=!1,this.isError=!1,this.progress=0,this.index=void 0,this.uploader=n,this.some=e,this.options=l,this.file=new t.FileLikeObject(e),this._file=e,n.options&&(this.method=n.options.method||"POST",this.alias=n.options.itemAlias||"file"),this.url=n.options.url}return n.prototype.upload=function(){try{this.uploader.uploadItem(this)}catch(n){this.uploader._onCompleteItem(this,"",0,{}),this.uploader._onErrorItem(this,"",0,{})}},n.prototype.cancel=function(){this.uploader.cancelItem(this)},n.prototype.remove=function(){this.uploader.removeFromQueue(this)},n.prototype.onBeforeUpload=function(){},n.prototype.onBuildForm=function(n){return{form:n}},n.prototype.onProgress=function(n){return{progress:n}},n.prototype.onSuccess=function(n,e,l){return{response:n,status:e,headers:l}},n.prototype.onError=function(n,e,l){return{response:n,status:e,headers:l}},n.prototype.onCancel=function(n,e,l){return{response:n,status:e,headers:l}},n.prototype.onComplete=function(n,e,l){return{response:n,status:e,headers:l}},n.prototype._onBeforeUpload=function(){this.isReady=!0,this.isUploading=!0,this.isUploaded=!1,this.isSuccess=!1,this.isCancel=!1,this.isError=!1,this.progress=0,this.onBeforeUpload()},n.prototype._onBuildForm=function(n){this.onBuildForm(n)},n.prototype._onProgress=function(n){this.progress=n,this.onProgress(n)},n.prototype._onSuccess=function(n,e,l){this.isReady=!1,this.isUploading=!1,this.isUploaded=!0,this.isSuccess=!0,this.isCancel=!1,this.isError=!1,this.progress=100,this.index=void 0,this.onSuccess(n,e,l)},n.prototype._onError=function(n,e,l){this.isReady=!1,this.isUploading=!1,this.isUploaded=!0,this.isSuccess=!1,this.isCancel=!1,this.isError=!0,this.progress=0,this.index=void 0,this.onError(n,e,l)},n.prototype._onCancel=function(n,e,l){this.isReady=!1,this.isUploading=!1,this.isUploaded=!1,this.isSuccess=!1,this.isCancel=!0,this.isError=!1,this.progress=0,this.index=void 0,this.onCancel(n,e,l)},n.prototype._onComplete=function(n,e,l){this.onComplete(n,e,l),this.uploader.options.removeAfterUpload&&this.remove()},n.prototype._prepareToUploading=function(){this.index=this.index||++this.uploader._nextIndex,this.isReady=!0},n}()},euAv:function(n,e,l){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MovementType=function(n){return n[n.attack=0]="attack",n[n.support=1]="support",n[n.return=2]="return",n}(e.MovementType||{}),e.MovementTypeName=function(n){return n[n.Attack=0]="Attack",n[n.Support=1]="Support",n[n.Return=2]="Return",n}(e.MovementTypeName||{})},fylK:function(n,e,l){"use strict";var t=l("mrSG").__decorate,i=l("mrSG").__metadata,o=l("mrSG").__param;Object.defineProperty(e,"__esModule",{value:!0});var a=l("CcnG"),r=l("Ip0R"),u=(l("6QML"),l("BHEk"));e.CloudinaryVideo=function(){function n(n,e,l){this.el=n,this.cloudinary=e,this.platformId=l}return n.prototype.ngOnInit=function(){var n=this;"undefined"!=typeof MutationObserver&&(this.observer=new MutationObserver(function(){n.loadVideo(n.publicId)}),this.observer.observe(this.el.nativeElement,{attributes:!0,childList:!0}))},n.prototype.ngOnChanges=function(n){n.publicId&&!n.publicId.isFirstChange()&&this.loadVideo(n.publicId.currentValue)},n.prototype.ngOnDestroy=function(){this.observer&&this.observer.disconnect&&this.observer.disconnect()},n.prototype.ngAfterViewInit=function(){if(!this.publicId)throw new Error("You must set the public id of the video to load, e.g. <cl-video public-id={{video.public_id}}...></cl-video>");this.loadVideo(this.publicId)},n.prototype.loadVideo=function(n){if(r.isPlatformBrowser(this.platformId)){var e=this.el.nativeElement,l=e.children[0],t=this.cloudinary.toCloudinaryAttributes(e.attributes,this.transformations),i=this.cloudinary.videoTag(n,t);this.appendSourceElements(l,i.content()),this.setElementAttributes(l,i.attributes())}},n.prototype.setElementAttributes=function(n,e){Object.keys(e).forEach(function(l){n.setAttribute(l,e[l])})},n.prototype.appendSourceElements=function(n,e){var l=document.createDocumentFragment();for(n.innerHTML=e;n.childNodes[0];)l.appendChild(n.childNodes[0]);n.appendChild(l)},t([a.Input("public-id"),i("design:type",String)],n.prototype,"publicId",void 0),t([a.ContentChildren(u.CloudinaryTransformationDirective),i("design:type",a.QueryList)],n.prototype,"transformations",void 0),t([a.Component({selector:"cl-video",template:"<video></video>"}),o(2,a.Inject(a.PLATFORM_ID))],n)}()},hMlM:function(n,e,l){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DiplomacyType=function(n){return n[n.alliance=0]="alliance",n[n.war=1]="war",n[n.nap=2]="nap",n}(e.DiplomacyType||{}),e.DiplomacyStatus=function(n){return n[n.pending=0]="pending",n[n.ongoing=1]="ongoing",n}(e.DiplomacyStatus||{}),e.EventType=function(n){return n[n.diplomacy=0]="diplomacy",n[n.invitation=1]="invitation",n[n.membership=2]="membership",n[n.roles=3]="roles",n[n.management=4]="management",n[n.profile=5]="profile",n[n.forum=6]="forum",n}(e.EventType||{});var t=e.EventStatus=function(n){return n[n.proposeAlliance=0]="proposeAlliance",n[n.cancelAlliance=1]="cancelAlliance",n[n.rejectAlliance=2]="rejectAlliance",n[n.startAlliance=3]="startAlliance",n[n.endAlliance=4]="endAlliance",n[n.proposeNap=5]="proposeNap",n[n.cancelNap=6]="cancelNap",n[n.rejectNap=7]="rejectNap",n[n.startNap=8]="startNap",n[n.endNap=9]="endNap",n[n.startWar=10]="startWar",n[n.endWar=11]="endWar",n[n.join=12]="join",n[n.leave=13]="leave",n[n.remove=14]="remove",n[n.update=15]="update",n[n.updateMember=16]="updateMember",n[n.reject=17]="reject",n[n.cancel=18]="cancel",n[n.updateProfile=19]="updateProfile",n[n.create=20]="create",n}(e.EventStatus||{});e.diplomacyTypeToEventStatus={0:t.proposeAlliance,2:t.proposeNap},e.diplomacyTypeName={0:"Alliance",2:"Nap"},e.ALLIANCE_PERMISSIONS=["viewInvites","editInvites","manageForum","editProfile","viewManagement","manageRoles","manageAlliance"]},mb0K:function(n,e,l){"use strict";var t=l("mrSG").__decorate,i=l("mrSG").__metadata;Object.defineProperty(e,"__esModule",{value:!0});var o=l("CcnG"),a=(l("6QML"),l("BHEk"));e.CloudinaryBackgroundImageDirective=function(){function n(n,e,l){this.renderer=n,this.el=e,this.cloudinary=l}return n.prototype.isBrowser=function(){return"undefined"!=typeof window},n.prototype.ngAfterViewInit=function(){if(this.isBrowser()){var n=this.el.nativeElement,e=this.cloudinary.toCloudinaryAttributes(n.attributes,this.transformations),l=this.cloudinary.url(this.clBackgroundImage,e);this.renderer.setStyle(n,"background-image","url('"+l+"')"),this.renderer.setStyle(n,"background-repeat","no-repeat"),this.renderer.setStyle(n,"background-position","center")}},t([o.Input(),i("design:type",String)],n.prototype,"clBackgroundImage",void 0),t([o.ContentChildren(a.CloudinaryTransformationDirective),i("design:type",o.QueryList)],n.prototype,"transformations",void 0),t([o.Directive({selector:"[clBackgroundImage]"})],n)}()},oQam:function(n,e,l){"use strict";e.FileLikeObject=function(){function n(n){this.rawFile=n;var e,l=(e=n)&&(e.nodeName||e.prop&&e.attr&&e.find)?n.value:n;this["_createFrom"+("string"==typeof l?"FakePath":"Object")](l)}return n.prototype._createFromFakePath=function(n){this.lastModifiedDate=void 0,this.size=void 0,this.type="like/"+n.slice(n.lastIndexOf(".")+1).toLowerCase(),this.name=n.slice(n.lastIndexOf("/")+n.lastIndexOf("\\")+2)},n.prototype._createFromObject=function(n){this.size=n.size,this.type=n.type,this.name=n.name},n}()},pKD1:function(n,e,l){"use strict";var t=l("mrSG").__decorate,i=l("mrSG").__metadata,o=l("CcnG"),a=l("UpIn"),r=function(){function n(n){this.fileOver=new o.EventEmitter,this.onFileDrop=new o.EventEmitter,this.element=n}return n.prototype.getOptions=function(){return this.uploader.options},n.prototype.getFilters=function(){return{}},n.prototype.onDrop=function(n){var e=this._getTransfer(n);if(e){var l=this.getOptions(),t=this.getFilters();this._preventAndStop(n),this.uploader.addToQueue(e.files,l,t),this.fileOver.emit(!1),this.onFileDrop.emit(e.files)}},n.prototype.onDragOver=function(n){var e=this._getTransfer(n);this._haveFiles(e.types)&&(e.dropEffect="copy",this._preventAndStop(n),this.fileOver.emit(!0))},n.prototype.onDragLeave=function(n){this.element&&n.currentTarget===this.element[0]||(this._preventAndStop(n),this.fileOver.emit(!1))},n.prototype._getTransfer=function(n){return n.dataTransfer?n.dataTransfer:n.originalEvent.dataTransfer},n.prototype._preventAndStop=function(n){n.preventDefault(),n.stopPropagation()},n.prototype._haveFiles=function(n){return!!n&&(n.indexOf?-1!==n.indexOf("Files"):!!n.contains&&n.contains("Files"))},n}();t([o.Input(),i("design:type",a.FileUploader)],r.prototype,"uploader",void 0),t([o.Output(),i("design:type",o.EventEmitter)],r.prototype,"fileOver",void 0),t([o.Output(),i("design:type",o.EventEmitter)],r.prototype,"onFileDrop",void 0),t([o.HostListener("drop",["$event"]),i("design:type",Function),i("design:paramtypes",[Object]),i("design:returntype",void 0)],r.prototype,"onDrop",null),t([o.HostListener("dragover",["$event"]),i("design:type",Function),i("design:paramtypes",[Object]),i("design:returntype",void 0)],r.prototype,"onDragOver",null),t([o.HostListener("dragleave",["$event"]),i("design:type",Function),i("design:paramtypes",[Object]),i("design:returntype",Object)],r.prototype,"onDragLeave",null),r=t([o.Directive({selector:"[ng2FileDrop]"})],r),e.FileDropDirective=r},rZCR:function(n,e,l){"use strict";l.r(e);var t={};l.d(t,"AllianceActionTypes",function(){return $}),l.d(t,"AllianceSuccessActions",function(){return V}),l.d(t,"AllianceFailActions",function(){return U}),l.d(t,"SetData",function(){return z}),l.d(t,"Create",function(){return H}),l.d(t,"CreateSuccess",function(){return B}),l.d(t,"CreateFail",function(){return W}),l.d(t,"Destroy",function(){return Z}),l.d(t,"DestroySuccess",function(){return G}),l.d(t,"DestroyFail",function(){return Y}),l.d(t,"LeaveAlliance",function(){return X}),l.d(t,"LeaveAllianceSuccess",function(){return Q}),l.d(t,"LeaveAllianceFail",function(){return K}),l.d(t,"EventInvitation",function(){return J}),l.d(t,"EventMembership",function(){return nn}),l.d(t,"EventRoles",function(){return en}),l.d(t,"EventDiplomacy",function(){return ln}),l.d(t,"EventProfile",function(){return tn}),l.d(t,"CreateInvite",function(){return on}),l.d(t,"CreateInviteSuccess",function(){return an}),l.d(t,"CreateInviteFail",function(){return rn}),l.d(t,"CancelInvite",function(){return un}),l.d(t,"CancelInviteSuccess",function(){return sn}),l.d(t,"CancelInviteFail",function(){return cn}),l.d(t,"AcceptInvite",function(){return dn}),l.d(t,"AcceptInviteSuccess",function(){return pn}),l.d(t,"AcceptInviteFail",function(){return fn}),l.d(t,"RejectInvite",function(){return mn}),l.d(t,"RejectInviteSuccess",function(){return hn}),l.d(t,"RejectInviteFail",function(){return gn}),l.d(t,"UpdateRolePermissions",function(){return vn}),l.d(t,"UpdateRolePermissionsSuccess",function(){return bn}),l.d(t,"UpdateRolePermissionsFail",function(){return yn}),l.d(t,"UpdateMemberRole",function(){return _n}),l.d(t,"UpdateMemberRoleSuccess",function(){return wn}),l.d(t,"UpdateMemberRoleFail",function(){return Cn}),l.d(t,"RemoveRole",function(){return Rn}),l.d(t,"RemoveRoleSuccess",function(){return xn}),l.d(t,"RemoveRoleFail",function(){return Sn}),l.d(t,"RemoveMember",function(){return kn}),l.d(t,"RemoveMemberSuccess",function(){return In}),l.d(t,"RemoveMemberFail",function(){return On}),l.d(t,"Invited",function(){return Pn}),l.d(t,"InviteCanceled",function(){return Tn}),l.d(t,"Removed",function(){return An}),l.d(t,"UpdateSelfRole",function(){return Dn}),l.d(t,"ProposeAlliance",function(){return Fn}),l.d(t,"ProposeAllianceSuccess",function(){return jn}),l.d(t,"ProposeAllianceFail",function(){return En}),l.d(t,"RejectAlliance",function(){return Mn}),l.d(t,"RejectAllianceSuccess",function(){return Nn}),l.d(t,"RejectAllianceFail",function(){return Ln}),l.d(t,"AcceptAlliance",function(){return $n}),l.d(t,"AcceptAllianceSuccess",function(){return qn}),l.d(t,"AcceptAllianceFail",function(){return Vn}),l.d(t,"EndAlliance",function(){return Un}),l.d(t,"EndAllianceSuccess",function(){return zn}),l.d(t,"EndAllianceFail",function(){return Hn}),l.d(t,"CancelAlliance",function(){return Bn}),l.d(t,"CancelAllianceSuccess",function(){return Wn}),l.d(t,"CancelAllianceFail",function(){return Zn}),l.d(t,"ProposeNap",function(){return Gn}),l.d(t,"ProposeNapSuccess",function(){return Yn}),l.d(t,"ProposeNapFail",function(){return Xn}),l.d(t,"RejectNap",function(){return Qn}),l.d(t,"RejectNapSuccess",function(){return Kn}),l.d(t,"RejectNapFail",function(){return Jn}),l.d(t,"CancelNap",function(){return ne}),l.d(t,"CancelNapSuccess",function(){return ee}),l.d(t,"CancelNapFail",function(){return le}),l.d(t,"AcceptNap",function(){return te}),l.d(t,"AcceptNapSuccess",function(){return ie}),l.d(t,"AcceptNapFail",function(){return oe}),l.d(t,"EndNap",function(){return ae}),l.d(t,"EndNapSuccess",function(){return re}),l.d(t,"EndNapFail",function(){return ue}),l.d(t,"DeclareWar",function(){return se}),l.d(t,"DeclareWarSuccess",function(){return ce}),l.d(t,"DeclareWarFail",function(){return de}),l.d(t,"ViewProfile",function(){return pe}),l.d(t,"LoadProfile",function(){return fe}),l.d(t,"LoadProfileSuccess",function(){return me}),l.d(t,"LoadProfileFail",function(){return he}),l.d(t,"UpdateProfile",function(){return ge}),l.d(t,"UpdateProfileSuccess",function(){return ve}),l.d(t,"UpdateProfileFail",function(){return be}),l.d(t,"RemoveAvatar",function(){return ye}),l.d(t,"RemoveAvatarSuccess",function(){return _e}),l.d(t,"RemoveAvatarFail",function(){return we}),l.d(t,"AllianceEventActions",function(){return Ce});var i,o=l("CcnG"),a=l("eUd/"),r=l("mrSG"),u=l("jYNz"),s=l("6blF"),c=l("67Y/"),d=l("/PH2");!function(n){n.Update="[Player] Update",n.SetSidenav="[Player] Set Sidenav",n.Restart="[Player] Restart",n.ViewProfile="[Player] View Profile",n.LoadProfile="[Player] Load Profile",n.LoadProfileSuccess="[Player] Load Profile Success",n.LoadProfileFail="[Player] Load Profile Fail",n.UpdateProfile="[Player] Update Profile",n.UpdateProfileSuccess="[Player] Update Profile Success",n.UpdateProfileFail="[Player] Update Profile Fail",n.RemoveAvatar="[Player] Remove Avatar",n.RemoveAvatarSuccess="[Player] Remove Avatar Success",n.RemoveAvatarFail="[Player] Remove Avatar Fail",n.ProgressTutorial="[Player] Progress Tutorial",n.ProgressTutorialSuccess="[Player] Progress Tutorial Success",n.ProgressTutorialFail="[Player] Progress Tutorial Fail"}(i||(i={}));var p=[i.LoadProfileSuccess,i.UpdateProfileSuccess,i.RemoveAvatarSuccess],f=[i.LoadProfileFail,i.UpdateProfileFail,i.RemoveAvatarFail],m=function(){return function(n){this.payload=n,this.type=i.Update}}(),h=function(){return function(n){this.payload=n,this.type=i.SetSidenav}}(),g=function(){return function(){this.type=i.Restart}}(),v=function(){return function(n){this.payload=n,this.type=i.ViewProfile}}(),b=function(){return function(n){this.payload=n,this.type=i.LoadProfileSuccess}}(),y=function(){return function(n){this.payload=n,this.type=i.LoadProfileFail}}(),_=function(){return function(n){this.payload=n,this.type=i.UpdateProfile}}(),w=function(){return function(n){this.payload=n,this.type=i.UpdateProfileSuccess}}(),C=function(){return function(n){this.payload=n,this.type=i.UpdateProfileFail}}(),R=function(){return function(){this.type=i.RemoveAvatar}}(),x=function(){return function(n){this.payload=n,this.type=i.RemoveAvatarSuccess}}(),S=function(){return function(){this.type=i.ProgressTutorial}}(),k=function(){return function(){this.type=i.ProgressTutorialSuccess}}(),I=function(){return function(n){this.payload=n,this.type=i.ProgressTutorialFail}}(),O=l("yGQT"),P=Object.assign||function(n){for(var e,l=1,t=arguments.length;l<t;l++)for(var i in e=arguments[l])Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n},T={inProgress:!1,activeTown:null,currentPlayer:null,sidenavs:{left:null,right:null},players:{},viewedProfile:null};function A(n,e){switch(void 0===n&&(n=T),e.type){case i.Update:var l=e.payload.id;return P({},n,{inProgress:!1,currentPlayer:l,players:(a={},a[l]=e.payload,a)});case i.SetSidenav:var t=P({},n.sidenavs);return e.payload.forEach(function(n){return t[n.side]=n.name}),P({},n,{sidenavs:t});case i.ViewProfile:return P({},n,{viewedProfile:e.payload});case i.LoadProfile:case i.UpdateProfile:case i.RemoveAvatar:return P({},n,{error:null,inProgress:!0});case i.UpdateProfileSuccess:case i.RemoveAvatarSuccess:return P({},n,{inProgress:!1,players:P({},n.players,(r={},r[n.currentPlayer]=P({},n.players[n.currentPlayer],e.payload),r))});case i.LoadProfileSuccess:return P({},n,{players:P({},n.players,(u={},u[e.payload.id]=e.payload,u)),inProgress:!1});case i.ProgressTutorial:var o=n.players[n.currentPlayer];return P({},n,{player:P({},n.players,(s={},s[n.currentPlayer]=P({},o,{tutorialStage:o.tutorialStage+1||1}),s))});default:return n}var a,r,u,s}var D,F,j,E=Object.assign||function(n){for(var e,l=1,t=arguments.length;l<t;l++)for(var i in e=arguments[l])Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n},M={inProgress:!0,activeTown:null,playerTowns:{},ids:[]},N={build:{inProgress:!1,error:null},name:{inProgress:!1,error:null},movement:{inProgress:!1,error:null},recruit:{inProgress:!1,error:null},support:{inProgress:!1,error:null}};function L(n,e){switch(void 0===n&&(n=M),e.type){case"[Town] Set Player Towns":var l=e.payload.reduce(function(n,e){return n.ids.push(e.id),n.playerTowns[e.id]=E({},e,{_actionState:N}),n},{playerTowns:{},ids:[]});return E({},n,{playerTowns:l.playerTowns,ids:l.ids,inProgress:!1});case"[Town] Update":return E({},n,{playerTowns:E({},n.playerTowns,(r={},r[e.payload.id]=E({},a=n.playerTowns[e.payload.id],e.payload),r))});case"[Town] Set Active Town":return E({},n,{activeTown:e.payload});case"[Town] Rename":case"[Town] Recruit":case"[Town] Build":case"[Town] Recall Support":case"[Town] Send Back Support":return E({},n,{playerTowns:E({},n.playerTowns,(u={},u[n.activeTown]=E({},i=n.playerTowns[n.activeTown],{_actionState:E({},i._actionState,(s={},s[D[e.type]]={inProgress:!0,error:null},s))}),u))});case"[Town] Rename Fail":case"[Town] Recruit Fail":case"[Town] Build Fail":case"[Town] Move Troops Fail":case"[Town] Recall Support Fail":case"[Town] Send Back Support Fail":return E({},n,{playerTowns:E({},n.playerTowns,(c={},c[n.activeTown]=E({},i=n.playerTowns[n.activeTown],{_actionState:E({},i._actionState,(d={},d[j[e.type]]={inProgress:!1,error:e.payload},d))}),c))});case"[Town] Rename Success":return E({},n,{playerTowns:E({},n.playerTowns,(p={},p[n.activeTown]=E({},i=n.playerTowns[n.activeTown],{name:e.payload,_actionState:E({},i._actionState,{name:{inProgress:!1,error:null}})}),p))});case"[Town] Recruit Success":case"[Town] Build Success":case"[Town] Move Troops Success":return E({},n,{playerTowns:E({},n.playerTowns,(f={},f[n.activeTown]=E({},i=e.payload,{_actionState:E({},n.playerTowns[i.id]._actionState,(m={},m[F[e.type]]={inProgress:!1,error:null},m))}),f))});case"[Town] Send Back Support Success":var t=E({},i=n.playerTowns[n.activeTown],{targetSupport:i.targetSupport.filter(function(n){return n.id!==e.payload}),_actionState:E({},n.playerTowns[n.activeTown]._actionState,{support:{inProgress:!1,error:null}})});return E({},n,{playerTowns:E({},n.playerTowns,(h={},h[n.activeTown]=t,h))});case"[Town] Recall Support Success":var i,o=(i=n.playerTowns[n.activeTown]).targetMovements.concat([e.payload.movement]).sort(function(n,e){return+n.endsAt-+e.endsAt});return t=E({},i,{targetSupport:i.targetSupport.filter(function(n){return n.id!==e.payload.support}),targetMovements:o,_actionState:E({},n.playerTowns[n.activeTown]._actionState,{support:{inProgress:!1,error:null}})}),E({},n,{playerTowns:E({},n.playerTowns,(g={},g[n.activeTown]=t,g))});case"[Town] Support Sent Back":return o=(a=n.playerTowns[e.payload.movement.targetTown.id]).targetMovements.concat([e.payload.movement]).sort(function(n,e){return+n.endsAt-+e.endsAt}),t=E({},a,{originSupport:a.originSupport.filter(function(n){return n.id!==e.payload.support}),targetMovements:o}),E({},n,{playerTowns:E({},n.playerTowns,(v={},v[n.activeTown]=t,v))});case"[Town] Support Recalled":return t=E({},a=n.playerTowns[e.payload.town],{targetSupport:a.targetSupport.filter(function(n){return n.id!==e.payload.support})}),E({},n,{playerTowns:E({},n.playerTowns,(b={},b[n.activeTown]=t,b))});case"[Town] Incoming Movement":var a;return t=E({},a=n.playerTowns[e.payload.targetTown.id],{targetMovements:a.targetMovements.concat([e.payload]).sort(function(n,e){return+n.endsAt-+e.endsAt})}),E({},n,{playerTowns:E({},n.playerTowns,(y={},y[n.activeTown]=t,y))});default:return n}var r,u,s,c,d,p,f,m,h,g,v,b,y}!function(n){n["[Town] Rename"]="name",n["[Town] Build"]="build",n["[Town] Recruit"]="recruit",n["[Town] Move troops"]="movement",n["[Town] Recall Support"]="support",n["[Town] Send Back Support"]="support"}(D||(D={})),function(n){n["[Town] Rename Success"]="name",n["[Town] Build Success"]="build",n["[Town] Recruit Success"]="recruit",n["[Town] Move Troops Success"]="movement",n["[Town] Recall Support Success"]="support",n["[Town] Send Back Support Success"]="support"}(F||(F={})),function(n){n["[Town] Rename Fail"]="name",n["[Town] Build Fail"]="build",n["[Town] Recruit Fail"]="recruit",n["[Town] Move Troops Fail"]="movement",n["[Town] Recall Support Fail"]="support",n["[Town] Send Back Support Fail"]="support"}(j||(j={}));var $,q=l("RjY/");!function(n){n.SetData="[Alliance] Set Data",n.Create="[Alliance] Create",n.CreateSuccess="[Alliance] Create Success",n.CreateFail="[Alliance] Create Fail",n.Destroy="[Alliance] Destroy",n.DestroySuccess="[Alliance] Destroy Success",n.DestroyFail="[Alliance] Destroy Fail",n.LeaveAlliance="[Alliance] Leave Alliance",n.LeaveAllianceSuccess="[Alliance] Leave Alliance Success",n.LeaveAllianceFail="[Alliance] Leave Alliance Fail",n.EventInvitation="[Alliance][Event] Invitation",n.EventMembership="[Alliance][Event] Membership",n.EventRoles="[Alliance][Event] Roles",n.EventDiplomacy="[Alliance][Event] Diplomacy",n.EventProfile="[Alliance][Event] Profile",n.CreateInvite="[Alliance][Management] Create Invite",n.CreateInviteSuccess="[Alliance][Management] Create Invite Success",n.CreateInviteFail="[Alliance][Management] Create Invite Fail",n.CancelInvite="[Alliance][Management] Cancel Invite",n.CancelInviteSuccess="[Alliance][Management] Cancel Invite Success",n.CancelInviteFail="[Alliance][Management] Cancel Invite Fail",n.AcceptInvite="[Alliance][Management] Accept Invite",n.AcceptInviteSuccess="[Alliance][Management] Accept Invite Success",n.AcceptInviteFail="[Alliance][Management] Accept Invite Fail",n.RejectInvite="[Alliance][Management] Reject Invite",n.RejectInviteSuccess="[Alliance][Management] Reject Invite Success",n.RejectInviteFail="[Alliance][Management] Reject Invite Fail",n.UpdateRolePermissions="[Alliance][Management] Update Role Permissions",n.UpdateRolePermissionsSuccess="[Alliance][Management] Update Role Permissions Success",n.UpdateRolePermissionsFail="[Alliance][Management] Update Role Permissions Fail",n.UpdateMemberRole="[Alliance][Management] Update Member Role",n.UpdateMemberRoleSuccess="[Alliance][Management] Update Member Role Success",n.UpdateMemberRoleFail="[Alliance][Management] Update Member Role Fail",n.RemoveRole="[Alliance][Management] Remove Role",n.RemoveRoleSuccess="[Alliance][Management] Remove Role Success",n.RemoveRoleFail="[Alliance][Management] Remove Role Fail",n.RemoveMember="[Alliance][Management] Remove Member",n.RemoveMemberSuccess="[Alliance][Management] Remove Member Success",n.RemoveMemberFail="[Alliance][Management] Remove Member Fail",n.ProposeAlliance="[Alliance][Management] Propose Alliance",n.ProposeAllianceSuccess="[Alliance][Management] Propose Alliance Success",n.ProposeAllianceFail="[Alliance][Management] Propose Alliance Fail",n.RejectAlliance="[Alliance][Management] Reject Alliance",n.RejectAllianceSuccess="[Alliance][Management] Reject Alliance Success",n.RejectAllianceFail="[Alliance][Management] Reject Alliance Fail",n.CancelAlliance="[Alliance][Management] Cancel Alliance",n.CancelAllianceSuccess="[Alliance][Management] Cancel Alliance Success",n.CancelAllianceFail="[Alliance][Management] Cancel Alliance Fail",n.AcceptAlliance="[Alliance][Management] Accept Alliance",n.AcceptAllianceSuccess="[Alliance][Management] Accept Alliance Success",n.AcceptAllianceFail="[Alliance][Management] Accept Alliance Fail",n.EndAlliance="[Alliance][Management] End Alliance",n.EndAllianceSuccess="[Alliance][Management] End Alliance Success",n.EndAllianceFail="[Alliance][Management] End Alliance Fail",n.ProposeNap="[Alliance][Management] Propose Nap",n.ProposeNapSuccess="[Alliance][Management] Propose Nap Success",n.ProposeNapFail="[Alliance][Management] Propose Nap Fail",n.RejectNap="[Alliance][Management] Reject Nap",n.RejectNapSuccess="[Alliance][Management] Reject Nap Success",n.RejectNapFail="[Alliance][Management] Reject Nap Fail",n.CancelNap="[Alliance][Management] Cancel Nap",n.CancelNapSuccess="[Alliance][Management] Cancel Nap Success",n.CancelNapFail="[Alliance][Management] Cancel Nap Fail",n.AcceptNap="[Alliance][Management] Accept Nap",n.AcceptNapSuccess="[Alliance][Management] Accept Nap Success",n.AcceptNapFail="[Alliance][Management] Accept Nap Fail",n.EndNap="[Alliance][Management] End Nap",n.EndNapSuccess="[Alliance][Management] End Nap Success",n.EndNapFail="[Alliance][Management] End Nap Fail",n.DeclareWar="[Alliance][Management] Declare War",n.DeclareWarSuccess="[Alliance][Management] Declare War Success",n.DeclareWarFail="[Alliance][Management] Declare War Fail",n.ViewProfile="[Alliance] View Profile",n.LoadProfile="[Alliance] Load Profile",n.LoadProfileSuccess="[Alliance] Load Profile Success",n.LoadProfileFail="[Alliance] Load Profile Fail",n.UpdateProfile="[Alliance][Management] Update Profile",n.UpdateProfileSuccess="[Alliance][Management] Update Profile Success",n.UpdateProfileFail="[Alliance][Management] Update Profile Fail",n.RemoveAvatar="[Alliance][Management] Remove Avatar",n.RemoveAvatarSuccess="[Alliance][Management] Remove Avatar Success",n.RemoveAvatarFail="[Alliance][Management] Remove Avatar Fail",n.Invited="[Alliance][Affected] Invited",n.InviteCanceled="[Alliance][Affected] Invite Canceled",n.Removed="[Alliance][Affected] Removed",n.UpdateSelfRole="[Alliance][Affected] Update Self Role"}($||($={}));var V=[$.CreateSuccess,$.CreateInviteSuccess,$.CancelInviteSuccess,$.AcceptInviteSuccess,$.RejectInviteSuccess,$.UpdateRolePermissionsSuccess,$.UpdateMemberRoleSuccess,$.RemoveRoleSuccess,$.RemoveMemberSuccess,$.ProposeAllianceSuccess,$.RejectAllianceSuccess,$.CancelAllianceSuccess,$.AcceptAllianceSuccess,$.EndAllianceSuccess,$.ProposeNapSuccess,$.RejectNapSuccess,$.CancelNapSuccess,$.AcceptNapSuccess,$.EndNapSuccess,$.DeclareWarSuccess,$.UpdateProfileSuccess,$.RemoveAvatarSuccess,$.LoadProfileSuccess],U=[$.CreateFail,$.CreateInviteFail,$.CancelInviteFail,$.RemoveMemberFail,$.UpdateRolePermissionsFail,$.RemoveRoleFail,$.UpdateMemberRoleFail,$.RejectInviteFail,$.LeaveAllianceFail,$.DestroyFail,$.ProposeAllianceFail,$.ProposeNapFail,$.CancelAllianceFail,$.CancelNapFail,$.RejectAllianceFail,$.RejectNapFail,$.AcceptAllianceFail,$.AcceptNapFail,$.EndAllianceFail,$.EndNapFail,$.DeclareWarFail,$.LoadProfileFail,$.UpdateProfileFail,$.RemoveAvatarFail],z=function(){return function(n){this.payload=n,this.type=$.SetData}}(),H=function(){return function(n){this.payload=n,this.type=$.Create}}(),B=function(){return function(n){this.payload=n,this.type=$.CreateSuccess}}(),W=function(){return function(n){this.payload=n,this.type=$.CreateFail}}(),Z=function(){return function(){this.type=$.Destroy}}(),G=function(){return function(){this.type=$.DestroySuccess}}(),Y=function(){return function(n){this.payload=n,this.type=$.DestroyFail}}(),X=function(){return function(){this.type=$.LeaveAlliance}}(),Q=function(){return function(){this.type=$.LeaveAllianceSuccess}}(),K=function(){return function(n){this.payload=n,this.type=$.LeaveAllianceFail}}(),J=function(){return function(n){this.payload=n,this.type=$.EventInvitation}}(),nn=function(){return function(n){this.payload=n,this.type=$.EventMembership}}(),en=function(){return function(n){this.payload=n,this.type=$.EventRoles}}(),ln=function(){return function(n){this.payload=n,this.type=$.EventDiplomacy}}(),tn=function(){return function(n){this.payload=n,this.type=$.EventProfile}}(),on=function(){return function(n){this.payload=n,this.type=$.CreateInvite}}(),an=function(){return function(n){this.payload=n,this.type=$.CreateInviteSuccess}}(),rn=function(){return function(n){this.payload=n,this.type=$.CreateInviteFail}}(),un=function(){return function(n){this.payload=n,this.type=$.CancelInvite}}(),sn=function(){return function(n){this.payload=n,this.type=$.CancelInviteSuccess}}(),cn=function(){return function(n){this.payload=n,this.type=$.CancelInviteFail}}(),dn=function(){return function(n){this.payload=n,this.type=$.AcceptInvite}}(),pn=function(){return function(n){this.payload=n,this.type=$.AcceptInviteSuccess}}(),fn=function(){return function(n){this.payload=n,this.type=$.AcceptInviteFail}}(),mn=function(){return function(n){this.payload=n,this.type=$.RejectInvite}}(),hn=function(){return function(n){this.payload=n,this.type=$.RejectInviteSuccess}}(),gn=function(){return function(n){this.payload=n,this.type=$.RejectInviteFail}}(),vn=function(){return function(n){this.payload=n,this.type=$.UpdateRolePermissions}}(),bn=function(){return function(n){this.payload=n,this.type=$.UpdateRolePermissionsSuccess}}(),yn=function(){return function(n){this.payload=n,this.type=$.UpdateRolePermissionsFail}}(),_n=function(){return function(n){this.payload=n,this.type=$.UpdateMemberRole}}(),wn=function(){return function(n){this.payload=n,this.type=$.UpdateMemberRoleSuccess}}(),Cn=function(){return function(n){this.payload=n,this.type=$.UpdateMemberRoleFail}}(),Rn=function(){return function(n){this.payload=n,this.type=$.RemoveRole}}(),xn=function(){return function(n){this.payload=n,this.type=$.RemoveRoleSuccess}}(),Sn=function(){return function(n){this.payload=n,this.type=$.RemoveRoleFail}}(),kn=function(){return function(n){this.payload=n,this.type=$.RemoveMember}}(),In=function(){return function(n){this.payload=n,this.type=$.RemoveMemberSuccess}}(),On=function(){return function(n){this.payload=n,this.type=$.RemoveMemberFail}}(),Pn=function(){return function(n){this.payload=n,this.type=$.Invited}}(),Tn=function(){return function(n){this.payload=n,this.type=$.InviteCanceled}}(),An=function(){return function(){this.type=$.Removed}}(),Dn=function(){return function(n){this.payload=n,this.type=$.UpdateSelfRole}}(),Fn=function(){return function(n){this.payload=n,this.type=$.ProposeAlliance}}(),jn=function(){return function(n){this.payload=n,this.type=$.ProposeAllianceSuccess}}(),En=function(){return function(n){this.payload=n,this.type=$.ProposeAllianceFail}}(),Mn=function(){return function(n){this.payload=n,this.type=$.RejectAlliance}}(),Nn=function(){return function(n){this.payload=n,this.type=$.RejectAllianceSuccess}}(),Ln=function(){return function(n){this.payload=n,this.type=$.RejectAllianceFail}}(),$n=function(){return function(n){this.payload=n,this.type=$.AcceptAlliance}}(),qn=function(){return function(n){this.payload=n,this.type=$.AcceptAllianceSuccess}}(),Vn=function(){return function(n){this.payload=n,this.type=$.AcceptAllianceFail}}(),Un=function(){return function(n){this.payload=n,this.type=$.EndAlliance}}(),zn=function(){return function(n){this.payload=n,this.type=$.EndAllianceSuccess}}(),Hn=function(){return function(n){this.payload=n,this.type=$.EndAllianceFail}}(),Bn=function(){return function(n){this.payload=n,this.type=$.CancelAlliance}}(),Wn=function(){return function(n){this.payload=n,this.type=$.CancelAllianceSuccess}}(),Zn=function(){return function(n){this.payload=n,this.type=$.CancelAllianceFail}}(),Gn=function(){return function(n){this.payload=n,this.type=$.ProposeNap}}(),Yn=function(){return function(n){this.payload=n,this.type=$.ProposeNapSuccess}}(),Xn=function(){return function(n){this.payload=n,this.type=$.ProposeNapFail}}(),Qn=function(){return function(n){this.payload=n,this.type=$.RejectNap}}(),Kn=function(){return function(n){this.payload=n,this.type=$.RejectNapSuccess}}(),Jn=function(){return function(n){this.payload=n,this.type=$.RejectNapFail}}(),ne=function(){return function(n){this.payload=n,this.type=$.CancelNap}}(),ee=function(){return function(n){this.payload=n,this.type=$.CancelNapSuccess}}(),le=function(){return function(n){this.payload=n,this.type=$.CancelNapFail}}(),te=function(){return function(n){this.payload=n,this.type=$.AcceptNap}}(),ie=function(){return function(n){this.payload=n,this.type=$.AcceptNapSuccess}}(),oe=function(){return function(n){this.payload=n,this.type=$.AcceptNapFail}}(),ae=function(){return function(n){this.payload=n,this.type=$.EndNap}}(),re=function(){return function(n){this.payload=n,this.type=$.EndNapSuccess}}(),ue=function(){return function(n){this.payload=n,this.type=$.EndNapFail}}(),se=function(){return function(n){this.payload=n,this.type=$.DeclareWar}}(),ce=function(){return function(n){this.payload=n,this.type=$.DeclareWarSuccess}}(),de=function(){return function(n){this.payload=n,this.type=$.DeclareWarFail}}(),pe=function(){return function(n){this.payload=n,this.type=$.ViewProfile}}(),fe=function(){return function(n){this.payload=n,this.type=$.LoadProfile}}(),me=function(){return function(n){this.payload=n,this.type=$.LoadProfileSuccess}}(),he=function(){return function(n){this.payload=n,this.type=$.LoadProfileFail}}(),ge=function(){return function(n){this.payload=n,this.type=$.UpdateProfile}}(),ve=function(){return function(n){this.payload=n,this.type=$.UpdateProfileSuccess}}(),be=function(){return function(n){this.payload=n,this.type=$.UpdateProfileFail}}(),ye=function(){return function(){this.type=$.RemoveAvatar}}(),_e=function(){return function(n){this.payload=n,this.type=$.RemoveAvatarSuccess}}(),we=function(){return function(n){this.payload=n,this.type=$.RemoveAvatarFail}}(),Ce=["EventDiplomacy","EventInvitation","EventMembership","EventRoles","EventManagement","EventProfile"],Re=Object.assign||function(n){for(var e,l=1,t=arguments.length;l<t;l++)for(var i in e=arguments[l])Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n},xe={playerAlliance:null,alliances:{},role:null,invitations:[],inProgress:!1,viewedProfile:null,error:null};function Se(n,e){switch(void 0===n&&(n=xe),e.type){case $.SetData:var l=e.payload.allianceId?((a={})[e.payload.allianceId]=e.payload.alliance,a):{},t=Re({},n.alliances,l);return Re({},n,{alliances:t,playerAlliance:e.payload.allianceId,invitations:e.payload.invitations,role:e.payload.allianceRole});case $.CreateSuccess:return t=Re({},n.alliances,((r={})[e.payload.id]=e.payload,r)),Re({},n,{alliances:t,playerAlliance:e.payload.id,role:e.payload.masterRole});case $.Removed:case $.LeaveAllianceSuccess:return Re({},n,{playerAlliance:null,role:null});case $.DestroySuccess:return t=Re({},n.alliances,((u={})[n.playerAlliance]=null,u)),Re({},n,t,{role:null,playerAlliance:null});case $.Invited:return Re({},n,{invitations:n.invitations.concat([e.payload])});case $.RejectInviteSuccess:case $.InviteCanceled:return Re({},n,{invitations:n.invitations.filter(function(n){return n.id!==e.payload})});case $.AcceptInviteSuccess:t=Re({},n.alliances,((s={})[e.payload.id]=e.payload,s));var i=e.payload.defaultRole,o=n.invitations.filter(function(n){return n.id!==e.payload.id});return Re({},n,{alliances:t,role:i,invitations:o,playerAlliance:e.payload.id});case $.CreateInviteSuccess:case $.CancelInviteSuccess:return Oe(e.payload,n,{inProgress:!1});case $.EventInvitation:return Oe(e.payload,n);case $.RemoveMemberSuccess:return Ie(e.payload,n,{inProgress:!1});case $.EventMembership:return Ie(e.payload,n);case $.EventRoles:return Pe(e.payload,n);case $.UpdateSelfRole:return Re({},n,{role:e.payload});case $.UpdateRolePermissionsSuccess:case $.RemoveRoleSuccess:case $.UpdateMemberRoleSuccess:return Pe(e.payload,n,{inProgress:!1});case $.EventDiplomacy:return Te(e.payload,n);case $.UpdateProfileSuccess:case $.RemoveAvatarSuccess:return Ae(e.payload,n,{inProgress:!1});case $.EventProfile:return Ae(e.payload,n);case $.ProposeAllianceSuccess:case $.ProposeNapSuccess:case $.CancelAllianceSuccess:case $.CancelNapSuccess:case $.RejectAllianceSuccess:case $.RejectNapSuccess:case $.AcceptAllianceSuccess:case $.AcceptNapSuccess:case $.EndAllianceSuccess:case $.EndNapSuccess:case $.DeclareWarSuccess:return Te(e.payload,n,{inProgress:!1});case $.UpdateRolePermissions:case $.RemoveRole:case $.UpdateMemberRole:case $.CancelInvite:case $.CreateInvite:case $.ProposeAlliance:case $.ProposeNap:case $.CancelAlliance:case $.CancelNap:case $.RejectAlliance:case $.RejectNap:case $.AcceptAlliance:case $.AcceptNap:case $.EndAlliance:case $.EndNap:case $.DeclareWar:case $.UpdateProfile:case $.RemoveAvatar:return Re({},n,{error:null,inProgress:!0});case $.CreateFail:case $.CreateInviteFail:case $.CancelInviteFail:case $.RemoveMemberFail:case $.UpdateRolePermissionsFail:case $.RemoveRoleFail:case $.UpdateMemberRoleFail:case $.RejectInviteFail:case $.LeaveAllianceFail:case $.DestroyFail:case $.ProposeAllianceFail:case $.ProposeNapFail:case $.CancelAllianceFail:case $.CancelNapFail:case $.RejectAllianceFail:case $.RejectNapFail:case $.AcceptAllianceFail:case $.AcceptNapFail:case $.EndAllianceFail:case $.EndNapFail:case $.DeclareWarFail:case $.LoadProfileFail:case $.UpdateProfileFail:case $.RemoveAvatarFail:return Re({},n,{error:e.payload,inProgress:!1});case $.ViewProfile:return Re({},n,{viewedProfile:e.payload});case $.LoadProfile:return Re({},n,{error:null,inProgress:!0});case $.LoadProfileSuccess:return Re({},n,{alliances:Re({},n.alliances,(c={},c[e.payload.id]=e.payload,c)),inProgress:!1});default:return n}var a,r,u,s,c}var ke,Ie=function(n,e,l){void 0===l&&(l={});var t,i=n.event.status===q.EventStatus.join,o=e.alliances[e.playerAlliance];return Re({},e,{alliances:Re({},e.alliances,(t={},t[e.playerAlliance]=Re({},o,{events:[n.event].concat(o.events),invitations:i?o.invitations.filter(function(e){return e.id!==n.data.id}):o.invitations,members:i?[n.data].concat(o.members):o.members.filter(function(e){return e.id!==n.data})}),t))})},Oe=function(n,e,l){void 0===l&&(l={});var t,i=n.event.status===q.EventStatus.create,o=e.alliances[e.playerAlliance];return Re({},e,{alliances:Re({},e.alliances,(t={},t[e.playerAlliance]=Re({},o,{events:[n.event].concat(o.events),invitations:i?[n.data].concat(o.invitations):o.invitations.filter(function(e){return e.id!==n.data})}),t))},l)},Pe=function(n,e,l){void 0===l&&(l={});var t,i=n.data,o=i.created,a=i.updated,r=i.removed,u=i.updatedMember,s=e.alliances[e.playerAlliance],c=s.members.slice(),d=s.roles.slice(),p=s.defaultRole,f=e.role;return a&&a.forEach(function(n){var e=d.findIndex(function(e){return e.id===n.id});d[e]=n,n.id===s.defaultRoleId&&(p=n),f.id===n.id&&(f=n),c=c.map(function(e){return e.allianceRole.id===n.id?Re({},e,{allianceRole:n}):e})}),r&&(d=d.filter(function(n){return!r.includes(n.id)}),r.includes(f.id)&&(f=p),c=c.map(function(n){return r.includes(n.allianceRole.id)?Re({},n,{allianceRole:p}):n})),o&&d.push.apply(d,o),u&&u.forEach(function(n){var e=n.id,l=n.role,t=c.findIndex(function(n){return n.id===e});c[t].allianceRole=l}),Re({},e,{role:f,alliances:Re({},e.alliances,(t={},t[e.playerAlliance]=Re({},s,{members:c,roles:d,defaultRole:p,events:[n.event].concat(s.events)}),t))})},Te=function(n,e,l){void 0===l&&(l={});var t,i={},o=e.alliances[e.playerAlliance],a="number"!=typeof n.data;if(a||n.event.status!==q.EventStatus.startAlliance&&n.event.status!==q.EventStatus.startNap)if(a){var r=n.data.targetAllianceId===e.playerAlliance?"diplomacyTarget":"diplomacyOrigin";i[r]=[n.data].concat(o[r])}else i={diplomacyTarget:o.diplomacyTarget.filter(function(e){return e.id!==n.data}),diplomacyOrigin:o.diplomacyOrigin.filter(function(e){return e.id!==n.data})};else((i={diplomacyTarget:o.diplomacyTarget.slice(),diplomacyOrigin:o.diplomacyOrigin.slice()}).diplomacyTarget.find(function(e){return e.id===n.data})||i.diplomacyOrigin.find(function(e){return e.id===n.data})).status=q.DiplomacyStatus.ongoing;return Re({},e,{alliances:Re({},e.alliances,(t={},t[e.playerAlliance]=Re({},o,i,{events:[n.event].concat(o.events)}),t))})},Ae=function(n,e,l){void 0===l&&(l={});var t,i=e.alliances[e.playerAlliance];return Re({},e,{alliances:Re({},e.alliances,(t={},t[e.playerAlliance]=Re({},i,n.data,{events:[n.event].concat(i.events)}),t))})};!function(n){n.Update="[Chat] UPDATE",n.PostMessage="[Chat] Post Message",n.PostMessageSuccess="[Chat] Post Message Success",n.AddMessage="[Chat] Add Message"}(ke||(ke={}));var De,Fe=function(){return function(n){this.payload=n,this.type=ke.Update}}(),je=function(){return function(n){this.payload=n,this.type=ke.PostMessage}}(),Ee=function(){return function(n){this.payload=n,this.type=ke.PostMessageSuccess}}(),Me=function(){return function(n){this.payload=n,this.type=ke.AddMessage}}(),Ne=Object.assign||function(n){for(var e,l=1,t=arguments.length;l<t;l++)for(var i in e=arguments[l])Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n},Le={messages:[]};function $e(n,e){switch(void 0===n&&(n=Le),e.type){case $.LeaveAllianceSuccess:case $.DestroySuccess:return Le;case ke.Update:return Ne({},n,{messages:e.payload});case ke.AddMessage:return Ne({},n,{messages:n.messages.concat([e.payload])});case ke.PostMessage:return Ne({},n);case ke.PostMessageSuccess:return Ne({},n,{messages:n.messages.concat([e.payload])});default:return n}}!function(n){n.LoadMap="[Map] LoadMap",n.Update="[Map] Update"}(De||(De={}));var qe=function(){return function(){this.type=De.LoadMap}}(),Ve=function(){return function(n){this.payload=n,this.type=De.Update}}(),Ue=Object.assign||function(n){for(var e,l=1,t=arguments.length;l<t;l++)for(var i in e=arguments[l])Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n},ze={inProgress:!1,activeTown:null,mapData:null};function He(n,e){switch(void 0===n&&(n=ze),e.type){case De.Update:return Ue({},n,{mapData:e.payload});default:return n}}var Be,We=l("AytR");!function(n){n.Load="[Rankings] Load",n.LoadSuccess="[Rankings] LoadSuccess",n.LoadFail="[Rankings] LoadFail",n.LoadStagnated="[Rankings] LoadStagnated",n.CheckForUpdate="[Rankings] CheckForUpdate"}(Be||(Be={}));var Ze=function(){return function(n){this.payload=n,this.type=Be.Load}}(),Ge=function(){return function(n){this.payload=n,this.type=Be.LoadSuccess}}(),Ye=function(){return function(n){this.payload=n,this.type=Be.LoadFail}}(),Xe=function(){return function(){this.type=Be.LoadStagnated}}(),Qe=function(){return function(){this.type=Be.CheckForUpdate}}(),Ke=Object.assign||function(n){for(var e,l=1,t=arguments.length;l<t;l++)for(var i in e=arguments[l])Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n},Je={inProgress:!1,lastUpdate:null,error:null,updateFrequencey:We.a.rankingUpdateFrequency,ids:[],entities:{},playerPosition:null};function nl(n,e){switch(void 0===n&&(n=Je),e.type){case Be.Load:return Ke({},n,{inProgress:!0,error:null});case Be.LoadSuccess:var l=e.payload.rankings.reduce(function(n,e){return n.ids.push(e.id),n.entities[e.id]=e,n},{ids:[],entities:{}});return Ke({},n,l,{inProgress:!1,lastUpdate:Date.now(),rankings:e.payload.rankings,playerPosition:l.ids.indexOf(e.payload.playerId)});case Be.LoadFail:return Ke({},n,{inProgress:!1,error:e.payload});case Be.LoadStagnated:return Ke({},n,{inProgress:!1,lastUpdate:Date.now()});case Be.CheckForUpdate:default:return n}}var el=Object(O.B)("game"),ll=Object(O.D)(el,function(n){return n.town}),tl=Object(O.D)(ll,function(n){return n.playerTowns[n.activeTown]}),il=Object(O.D)(el,function(n){return n.player}),ol=Object(O.D)(il,function(n){return n.players[n.currentPlayer]}),al=Object(O.D)(il,function(n){return{originReports:n.players[n.currentPlayer].originReports,targetReports:n.players[n.currentPlayer].targetReports}}),rl=Object(O.D)(il,function(n){return n.sidenavs}),ul=Object(O.D)(il,function(n){return n.players[n.viewedProfile]}),sl=Object(O.D)(il,function(n){return n.players}),cl=(Object(O.D)(il,function(n){return n.players[n.currentPlayer].tutorialStage}),Object(O.D)(el,function(n){return n.alliance})),dl=Object(O.D)(cl,function(n){return n.alliances[n.playerAlliance]}),pl=Object(O.D)(cl,function(n){return n.invitations}),fl=Object(O.D)(cl,function(n){return{alliance:n.alliances[n.playerAlliance],role:n.role}}),ml=Object(O.D)(cl,function(n){return n.alliances[n.viewedProfile]}),hl=Object(O.D)(cl,function(n){return n.alliances}),gl=Object(O.D)(el,function(n){return n.chat}),vl=Object(O.D)(gl,function(n){return n.messages}),bl=Object(O.D)(el,function(n){return n.map}),yl=Object(O.D)(bl,function(n){return n.mapData}),_l=Object(O.D)(el,function(n){return n.rankings}),wl=Object(O.D)(_l,function(n){return n.ids.map(function(e){return n.entities[e]})}),Cl=Object(O.D)(_l,function(n){return n.entities}),Rl=Object(O.D)(_l,function(n){return n.playerPosition}),xl=Object(O.D)(_l,function(n){return{lastUpdate:n.lastUpdate,updateFrequencey:n.updateFrequencey}}),Sl=(Object(O.D)(_l,function(n){return n.inProgress}),function(){function n(n,e,l,t){var o=this;this.actions$=n,this.router=e,this.socketService=l,this.store=t,this.restart$=this.actions$.pipe(Object(u.d)(i.Restart),Object(c.a)(function(n){return o.socketService.sendEvent("player:restart")})),this.viewProfile$=this.actions$.pipe(Object(u.d)(i.ViewProfile),Object(c.a)(function(n){return n.payload}),Object(d.a)(this.store.select(sl)),Object(c.a)(function(n){var e=n[0];return n[1][e]||o.socketService.sendEvent("player:loadProfile",e),new h([{side:"right",name:"playerProfile"}])})),this.updateProfile$=this.actions$.pipe(Object(u.d)(i.UpdateProfile),Object(c.a)(function(n){return n.payload}),Object(c.a)(function(n){return o.socketService.sendEvent("player:updateProfile",n)})),this.removeAvatar$=this.actions$.pipe(Object(u.d)(i.RemoveAvatar),Object(c.a)(function(){return o.socketService.sendEvent("player:removeAvatar")})),this.progressTutorial$=this.actions$.pipe(Object(u.d)(i.ProgressTutorial),Object(c.a)(function(){return o.socketService.sendEvent("player:progressTutorial")})),this.socketService.registerEvents([["player",function(n){return o.store.dispatch(new m(n))}],["player:loadProfileSuccess",function(n){return o.store.dispatch(new b(n))}],["player:loadProfileFail",function(n){return o.store.dispatch(new y(n))}],["player:updateProfileSuccess",function(n){return o.store.dispatch(new w(n))}],["player:updateProfileFail",function(n){return o.store.dispatch(new C(n))}],["player:removeAvatarSuccess",function(n){return o.store.dispatch(new x(n))}],["player:removeAvatarFail",function(n){return o.store.dispatch(new x(n))}],["player:progressTutorialSuccess",function(){return o.store.dispatch(new k)}],["player:progressTutorialFail",function(n){return o.store.dispatch(new I(n))}]])}return Object(r.__decorate)([Object(u.b)({dispatch:!1}),Object(r.__metadata)("design:type",s.a)],n.prototype,"restart$",void 0),Object(r.__decorate)([Object(u.b)(),Object(r.__metadata)("design:type",s.a)],n.prototype,"viewProfile$",void 0),Object(r.__decorate)([Object(u.b)({dispatch:!1}),Object(r.__metadata)("design:type",s.a)],n.prototype,"updateProfile$",void 0),Object(r.__decorate)([Object(u.b)({dispatch:!1}),Object(r.__metadata)("design:type",s.a)],n.prototype,"removeAvatar$",void 0),Object(r.__decorate)([Object(u.b)({dispatch:!1}),Object(r.__metadata)("design:type",s.a)],n.prototype,"progressTutorial$",void 0),n}()),kl=l("P6uZ"),Il=l("VnD/"),Ol=function(){function n(n,e,l,o){var a=this;this.actions$=n,this.router=e,this.store=l,this.socketService=o,this.setAllianceData$$=this.actions$.pipe(Object(u.d)(i.Update),Object(kl.a)(),Object(c.a)(function(n){return n.payload}),Object(c.a)(function(n){return new z({allianceId:n.allianceId,alliance:n.alliance,allianceRole:n.allianceRole,invitations:n.invitations})})),this.create$=this.actions$.pipe(Object(u.d)($.Create),Object(c.a)(function(n){return n.payload}),Object(c.a)(function(n){return a.socketService.sendEvent("alliance:create",n)})),this.createInvite$=this.actions$.pipe(Object(u.d)($.CreateInvite),Object(c.a)(function(n){return n.payload}),Object(c.a)(function(n){return a.socketService.sendEvent("alliance:createInvite",n)})),this.cancelInvite$=this.actions$.pipe(Object(u.d)($.CancelInvite),Object(c.a)(function(n){return n.payload}),Object(c.a)(function(n){return a.socketService.sendEvent("alliance:cancelInvite",n)})),this.acceptInvite$=this.actions$.pipe(Object(u.d)($.AcceptInvite),Object(c.a)(function(n){return n.payload}),Object(c.a)(function(n){return a.socketService.sendEvent("alliance:acceptInvite",n)})),this.rejectInvite$=this.actions$.pipe(Object(u.d)($.RejectInvite),Object(c.a)(function(n){return n.payload}),Object(c.a)(function(n){return a.socketService.sendEvent("alliance:rejectInvite",n)})),this.updatePlayerRole$=this.actions$.pipe(Object(u.d)($.UpdateMemberRole),Object(c.a)(function(n){return n.payload}),Object(c.a)(function(n){return a.socketService.sendEvent("alliance:updateMemberRole",n)})),this.updateSelfRole$=this.actions$.pipe(Object(u.d)($.EventRoles),Object(c.a)(function(n){return n.payload}),Object(d.a)(this.store.select(ol)),Object(Il.a)(function(n){var e=n[0],l=n[1];return e.data.updatedMember&&e.data.updatedMember.some(function(n){return n.id===l.id})}),Object(c.a)(function(n){var e=n[1];return new Dn(n[0].data.updatedMember.find(function(n){return n.id===e.id}).role)})),this.updateRolePermissions$=this.actions$.pipe(Object(u.d)($.UpdateRolePermissions),Object(c.a)(function(n){return n.payload}),Object(c.a)(function(n){return a.socketService.sendEvent("alliance:updateRoles",n)})),this.removeRole$=this.actions$.pipe(Object(u.d)($.RemoveRole),Object(c.a)(function(n){return n.payload}),Object(c.a)(function(n){return a.socketService.sendEvent("alliance:removeRole",n)})),this.removeMember$=this.actions$.pipe(Object(u.d)($.RemoveMember),Object(c.a)(function(n){return n.payload}),Object(c.a)(function(n){return a.socketService.sendEvent("alliance:removeMember",n)})),this.leaveAlliance$=this.actions$.pipe(Object(u.d)($.LeaveAlliance),Object(c.a)(function(){return a.socketService.sendEvent("alliance:leave")})),this.attemptDestroying$=this.actions$.pipe(Object(u.d)($.Destroy),Object(c.a)(function(){return a.socketService.sendEvent("alliance:destroy")})),this.proposeAlliance$=this.actions$.pipe(Object(u.d)($.ProposeAlliance),Object(c.a)(function(n){return n.payload}),Object(c.a)(function(n){return a.socketService.sendEvent("alliance:proposeAlliance",n)})),this.rejectAlliance$=this.actions$.pipe(Object(u.d)($.RejectAlliance),Object(c.a)(function(n){return n.payload}),Object(c.a)(function(n){return a.socketService.sendEvent("alliance:rejectAlliance",n)})),this.cancelAlliance$=this.actions$.pipe(Object(u.d)($.CancelAlliance),Object(c.a)(function(n){return n.payload}),Object(c.a)(function(n){return a.socketService.sendEvent("alliance:cancelAlliance",n)})),this.acceptAlliance$=this.actions$.pipe(Object(u.d)($.AcceptAlliance),Object(c.a)(function(n){return n.payload}),Object(c.a)(function(n){return a.socketService.sendEvent("alliance:acceptAlliance",n)})),this.endAlliance$=this.actions$.pipe(Object(u.d)($.EndAlliance),Object(c.a)(function(n){return n.payload}),Object(c.a)(function(n){return a.socketService.sendEvent("alliance:endAlliance",n)})),this.proposeNap$=this.actions$.pipe(Object(u.d)($.ProposeNap),Object(c.a)(function(n){return n.payload}),Object(c.a)(function(n){return a.socketService.sendEvent("alliance:proposeNap",n)})),this.rejectNap$=this.actions$.pipe(Object(u.d)($.RejectNap),Object(c.a)(function(n){return n.payload}),Object(c.a)(function(n){return a.socketService.sendEvent("alliance:rejectNap",n)})),this.cancelNap$=this.actions$.pipe(Object(u.d)($.CancelNap),Object(c.a)(function(n){return n.payload}),Object(c.a)(function(n){return a.socketService.sendEvent("alliance:cancelNap",n)})),this.acceptNap$=this.actions$.pipe(Object(u.d)($.AcceptNap),Object(c.a)(function(n){return n.payload}),Object(c.a)(function(n){return a.socketService.sendEvent("alliance:acceptNap",n)})),this.endNap$=this.actions$.pipe(Object(u.d)($.EndNap),Object(c.a)(function(n){return n.payload}),Object(c.a)(function(n){return a.socketService.sendEvent("alliance:endNap",n)})),this.declareWar$=this.actions$.pipe(Object(u.d)($.DeclareWar),Object(c.a)(function(n){return n.payload}),Object(c.a)(function(n){return a.socketService.sendEvent("alliance:declareWar",n)})),this.viewProfile$=this.actions$.pipe(Object(u.d)($.ViewProfile),Object(c.a)(function(n){return n.payload}),Object(d.a)(this.store.select(hl)),Object(c.a)(function(n){var e=n[0];return n[1][e]||a.socketService.sendEvent("alliance:loadProfile",e),new h([{side:"right",name:"allianceProfile"}])})),this.updateProfile$=this.actions$.pipe(Object(u.d)($.UpdateProfile),Object(c.a)(function(n){return n.payload}),Object(c.a)(function(n){return a.socketService.sendEvent("alliance:updateProfile",n)})),this.removeAvatar$=this.actions$.pipe(Object(u.d)($.RemoveAvatar),Object(c.a)(function(){return a.socketService.sendEvent("alliance:removeAvatar")})),this.socketService.registerEvents([["alliance:event",function(n){var e=new t[Ce[n.event.type]](n);a.store.dispatch(e)}],["alliance:createSuccess",function(n){return a.store.dispatch(new B(n))}],["alliance:createInviteSuccess",function(n){return a.store.dispatch(new an(n))}],["alliance:cancelInviteSuccess",function(n){return a.store.dispatch(new sn(n))}],["alliance:removeMemberSuccess",function(n){return a.store.dispatch(new In(n))}],["alliance:updateRolePermissionsSuccess",function(n){return a.store.dispatch(new bn(n))}],["alliance:removeRoleSuccess",function(n){return a.store.dispatch(new xn(n))}],["alliance:updateMemberRoleSuccess",function(n){return a.store.dispatch(new wn(n))}],["alliance:removed",function(){return a.store.dispatch(new An)}],["alliance:invited",function(n){return a.store.dispatch(new Pn(n))}],["alliance:inviteCanceled",function(n){return a.store.dispatch(new Tn(n))}],["alliance:rejectInviteSuccess",function(n){return a.store.dispatch(new hn(n))}],["alliance:leaveAllianceSuccess",function(){return a.store.dispatch(new Q)}],["alliance:destroySuccess",function(){return a.store.dispatch(new G)}],["alliance:proposeAllianceSuccess",function(n){return a.store.dispatch(new jn(n))}],["alliance:proposeNapSuccess",function(n){return a.store.dispatch(new Yn(n))}],["alliance:cancelAllianceSuccess",function(n){return a.store.dispatch(new Wn(n))}],["alliance:cancelNapSuccess",function(n){return a.store.dispatch(new ee(n))}],["alliance:rejectAllianceSuccess",function(n){return a.store.dispatch(new Nn(n))}],["alliance:rejectNapSuccess",function(n){return a.store.dispatch(new Kn(n))}],["alliance:acceptAllianceSuccess",function(n){return a.store.dispatch(new qn(n))}],["alliance:acceptNapSuccess",function(n){return a.store.dispatch(new ie(n))}],["alliance:endAllianceSuccess",function(n){return a.store.dispatch(new zn(n))}],["alliance:endNapSuccess",function(n){return a.store.dispatch(new re(n))}],["alliance:declareWarSuccess",function(n){return a.store.dispatch(new ce(n))}],["alliance:acceptInviteSuccess",function(n){return a.store.dispatch(new pn(n))}],["alliance:loadProfileSuccess",function(n){return a.store.dispatch(new me(n))}],["alliance:updateProfileSuccess",function(n){return a.store.dispatch(new ve(n))}],["alliance:removeAvatarSuccess",function(n){return a.store.dispatch(new _e(n))}],["alliance:createFail",function(n){return a.store.dispatch(new W(n))}],["alliance:createInviteFail",function(n){return a.store.dispatch(new rn(n))}],["alliance:cancelInviteFail",function(n){return a.store.dispatch(new cn(n))}],["alliance:removeMemberFail",function(n){return a.store.dispatch(new On(n))}],["alliance:updateRolePermissionsFail",function(n){return a.store.dispatch(new yn(n))}],["alliance:removeRoleFail",function(n){return a.store.dispatch(new Sn(n))}],["alliance:updateMemberRoleFail",function(n){return a.store.dispatch(new Cn(n))}],["alliance:rejectInviteFail",function(n){return a.store.dispatch(new gn(n))}],["alliance:leaveAllianceFail",function(n){return a.store.dispatch(new K(n))}],["alliance:destroyFail",function(n){return a.store.dispatch(new Y(n))}],["alliance:proposeAllianceFail",function(n){return a.store.dispatch(new En(n))}],["alliance:proposeNapFail",function(n){return a.store.dispatch(new Xn(n))}],["alliance:cancelAllianceFail",function(n){return a.store.dispatch(new Zn(n))}],["alliance:cancelNapFail",function(n){return a.store.dispatch(new le(n))}],["alliance:rejectAllianceFail",function(n){return a.store.dispatch(new Ln(n))}],["alliance:rejectNapFail",function(n){return a.store.dispatch(new Jn(n))}],["alliance:acceptAllianceFail",function(n){return a.store.dispatch(new Vn(n))}],["alliance:acceptNapFail",function(n){return a.store.dispatch(new oe(n))}],["alliance:endAllianceFail",function(n){return a.store.dispatch(new Hn(n))}],["alliance:endNapFail",function(n){return a.store.dispatch(new ue(n))}],["alliance:declareWarFail",function(n){return a.store.dispatch(new de(n))}],["alliance:acceptInviteFail",function(n){return a.store.dispatch(new fn(n))}],["alliance:loadProfileFail",function(n){return a.store.dispatch(new he(n))}],["alliance:updateProfileFail",function(n){return a.store.dispatch(new be(n))}],["alliance:removeAvatarFail",function(n){return a.store.dispatch(new we(n))}]])}return Object(r.__decorate)([Object(u.b)(),Object(r.__metadata)("design:type",s.a)],n.prototype,"setAllianceData$$",void 0),Object(r.__decorate)([Object(u.b)({dispatch:!1}),Object(r.__metadata)("design:type",s.a)],n.prototype,"create$",void 0),Object(r.__decorate)([Object(u.b)({dispatch:!1}),Object(r.__metadata)("design:type",s.a)],n.prototype,"createInvite$",void 0),Object(r.__decorate)([Object(u.b)({dispatch:!1}),Object(r.__metadata)("design:type",s.a)],n.prototype,"cancelInvite$",void 0),Object(r.__decorate)([Object(u.b)({dispatch:!1}),Object(r.__metadata)("design:type",s.a)],n.prototype,"acceptInvite$",void 0),Object(r.__decorate)([Object(u.b)({dispatch:!1}),Object(r.__metadata)("design:type",s.a)],n.prototype,"rejectInvite$",void 0),Object(r.__decorate)([Object(u.b)({dispatch:!1}),Object(r.__metadata)("design:type",s.a)],n.prototype,"updatePlayerRole$",void 0),Object(r.__decorate)([Object(u.b)(),Object(r.__metadata)("design:type",s.a)],n.prototype,"updateSelfRole$",void 0),Object(r.__decorate)([Object(u.b)({dispatch:!1}),Object(r.__metadata)("design:type",s.a)],n.prototype,"updateRolePermissions$",void 0),Object(r.__decorate)([Object(u.b)({dispatch:!1}),Object(r.__metadata)("design:type",s.a)],n.prototype,"removeRole$",void 0),Object(r.__decorate)([Object(u.b)({dispatch:!1}),Object(r.__metadata)("design:type",s.a)],n.prototype,"removeMember$",void 0),Object(r.__decorate)([Object(u.b)({dispatch:!1}),Object(r.__metadata)("design:type",s.a)],n.prototype,"leaveAlliance$",void 0),Object(r.__decorate)([Object(u.b)({dispatch:!1}),Object(r.__metadata)("design:type",s.a)],n.prototype,"attemptDestroying$",void 0),Object(r.__decorate)([Object(u.b)({dispatch:!1}),Object(r.__metadata)("design:type",s.a)],n.prototype,"proposeAlliance$",void 0),Object(r.__decorate)([Object(u.b)({dispatch:!1}),Object(r.__metadata)("design:type",s.a)],n.prototype,"rejectAlliance$",void 0),Object(r.__decorate)([Object(u.b)({dispatch:!1}),Object(r.__metadata)("design:type",s.a)],n.prototype,"cancelAlliance$",void 0),Object(r.__decorate)([Object(u.b)({dispatch:!1}),Object(r.__metadata)("design:type",s.a)],n.prototype,"acceptAlliance$",void 0),Object(r.__decorate)([Object(u.b)({dispatch:!1}),Object(r.__metadata)("design:type",s.a)],n.prototype,"endAlliance$",void 0),Object(r.__decorate)([Object(u.b)({dispatch:!1}),Object(r.__metadata)("design:type",s.a)],n.prototype,"proposeNap$",void 0),Object(r.__decorate)([Object(u.b)({dispatch:!1}),Object(r.__metadata)("design:type",s.a)],n.prototype,"rejectNap$",void 0),Object(r.__decorate)([Object(u.b)({dispatch:!1}),Object(r.__metadata)("design:type",s.a)],n.prototype,"cancelNap$",void 0),Object(r.__decorate)([Object(u.b)({dispatch:!1}),Object(r.__metadata)("design:type",s.a)],n.prototype,"acceptNap$",void 0),Object(r.__decorate)([Object(u.b)({dispatch:!1}),Object(r.__metadata)("design:type",s.a)],n.prototype,"endNap$",void 0),Object(r.__decorate)([Object(u.b)({dispatch:!1}),Object(r.__metadata)("design:type",s.a)],n.prototype,"declareWar$",void 0),Object(r.__decorate)([Object(u.b)(),Object(r.__metadata)("design:type",s.a)],n.prototype,"viewProfile$",void 0),Object(r.__decorate)([Object(u.b)({dispatch:!1}),Object(r.__metadata)("design:type",s.a)],n.prototype,"updateProfile$",void 0),Object(r.__decorate)([Object(u.b)({dispatch:!1}),Object(r.__metadata)("design:type",s.a)],n.prototype,"removeAvatar$",void 0),n}(),Pl=function(){function n(n,e,l,t){var o=this;this.actions$=n,this.router=e,this.store=l,this.socketService=t,this.postMessage$=this.actions$.pipe(Object(u.d)(ke.PostMessage),Object(c.a)(function(n){return n.payload}),Object(c.a)(function(n){return o.socketService.sendEvent("chat:postMessage",n)})),this.update$=this.actions$.pipe(Object(u.d)(i.Update),Object(c.a)(function(n){return n.payload}),Object(d.a)(this.store.select(vl)),Object(Il.a)(function(n){var e=n[0];return!n[1].length&&e.alliance&&!!e.alliance.messages.length}),Object(c.a)(function(n){return new Fe(n[0].alliance.messages)})),this.socketService.registerEvents([["chat:postMessageSuccess",function(n){return o.store.dispatch(new Ee(n))}],["chat:newMessage",function(n){return o.store.dispatch(new Me(n))}]])}return Object(r.__decorate)([Object(u.b)({dispatch:!1}),Object(r.__metadata)("design:type",s.a)],n.prototype,"postMessage$",void 0),Object(r.__decorate)([Object(u.b)(),Object(r.__metadata)("design:type",s.a)],n.prototype,"update$",void 0),n}(),Tl=l("t9fZ"),Al=["[Town] Rename Success","[Town] Build Success","[Town] Recruit Success","[Town] Move Troops Success","[Town] Recall Support Success","[Town] Send Back Support Success"],Dl=["[Town] Rename Fail","[Town] Build Fail","[Town] Recruit Fail","[Town] Move Troops Fail","[Town] Recall Support Fail","[Town] Send Back Support Fail"],Fl=function(n){this.payload=n,this.type="[Town] Update"},jl=function(n){this.payload=n,this.type="[Town] Rename Success"},El=function(n){this.payload=n,this.type="[Town] Rename Fail"},Ml=function(n){this.payload=n,this.type="[Town] Build Success"},Nl=function(n){this.payload=n,this.type="[Town] Build Fail"},Ll=function(n){this.payload=n,this.type="[Town] Recruit Success"},$l=function(n){this.payload=n,this.type="[Town] Recruit Fail"},ql=function(n){this.payload=n,this.type="[Town] Set Player Towns"},Vl=function(n){this.payload=n,this.type="[Town] Set Active Town"},Ul=function(n){this.payload=n,this.type="[Town] Move Troops Success"},zl=function(n){this.payload=n,this.type="[Town] Move Troops Fail"},Hl=function(n){this.payload=n,this.type="[Town] Recall Support Success"},Bl=function(n){this.payload=n,this.type="[Town] Recall Support Fail"},Wl=function(n){this.payload=n,this.type="[Town] Send Back Support Success"},Zl=function(n){this.payload=n,this.type="[Town] Send Back Support Fail"},Gl=function(n){this.payload=n,this.type="[Town] Incoming Movement"},Yl=function(n){this.payload=n,this.type="[Town] Support Recalled"},Xl=function(n){this.payload=n,this.type="[Town] Support Sent Back"},Ql=l("2qkP"),Kl=Object.assign||function(n){for(var e,l=1,t=arguments.length;l<t;l++)for(var i in e=arguments[l])Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n},Jl=function(){function n(n,e,l,t){var o=this;this.actions$=n,this.router=e,this.store=l,this.socketService=t,this.setActiveTown$=this.actions$.pipe(Object(u.d)("[Town] Set Player Towns"),Object(c.a)(function(n){return n.payload}),Object(d.a)(this.store),Object(Il.a)(function(n){var e=n[0];return e.length&&!n[1].game.town.activeTown||!e.length}),Object(c.a)(function(n){var e=n[0];return new Vl(e.length?e[0].id:null)})),this.setPlayerTowns$=this.actions$.pipe(Object(u.d)(i.Update),Object(c.a)(function(n){return n.payload}),Object(c.a)(function(n){return n.towns}),Object(d.a)(this.store.select(Ql.a)),Object(c.a)(function(n){var e=n[1];return new ql(n[0].map(function(n){return o.updateTown(e,n)}))})),this.changeTownName$=this.actions$.pipe(Object(u.d)("[Town] Rename"),Object(c.a)(function(n){return n.payload}),Object(d.a)(this.store.select(tl)),Object(c.a)(function(n){return o.socketService.sendEvent("town:rename",{name:n[0],town:n[1].id})})),this.build$=this.actions$.pipe(Object(u.d)("[Town] Build"),Object(c.a)(function(n){return n.payload}),Object(d.a)(this.store.select(tl)),Object(c.a)(function(n){var e=n[0];return o.socketService.sendEvent("town:build",{building:e.building,level:e.level,town:n[1].id})})),this.recruit$=this.actions$.pipe(Object(u.d)("[Town] Recruit"),Object(c.a)(function(n){return n.payload}),Object(d.a)(this.store.select(tl)),Object(c.a)(function(n){return o.socketService.sendEvent("town:recruit",{units:n[0],town:n[1].id})})),this.moveTroops$=this.actions$.pipe(Object(u.d)("[Town] Move Troops"),Object(c.a)(function(n){return n.payload}),Object(d.a)(this.store.select(tl)),Object(c.a)(function(n){return o.socketService.sendEvent("town:moveTroops",Kl({},n[0],{town:n[1].id}))})),this.recallSupport$=this.actions$.pipe(Object(u.d)("[Town] Recall Support"),Object(c.a)(function(n){return n.payload}),Object(c.a)(function(n){return o.socketService.sendEvent("town:recallSupport",n)})),this.sendBackSupport$=this.actions$.pipe(Object(u.d)("[Town] Send Back Support"),Object(c.a)(function(n){return n.payload}),Object(c.a)(function(n){return o.socketService.sendEvent("town:sendBackSupport",n)})),this.socketService.registerEvents([["town:update",function(n){return o.store.select(Ql.a).pipe(Object(Tl.a)(1)).subscribe(function(e){return o.store.dispatch(new Fl(o.updateTown(e,n)))})}],["town:renameSuccess",function(n){return o.store.dispatch(new jl(n))}],["town:renameFail",function(n){return o.store.dispatch(new El(n))}],["town:buildSuccess",function(n){return o.store.select(Ql.a).pipe(Object(Tl.a)(1)).subscribe(function(e){return o.store.dispatch(new Ml(o.updateTown(e,n)))})}],["town:buildFail",function(n){return o.store.dispatch(new Nl(n))}],["town:recruitSuccess",function(n){return o.store.select(Ql.a).pipe(Object(Tl.a)(1)).subscribe(function(e){return o.store.dispatch(new Ll(o.updateTown(e,n)))})}],["town:recruitFail",function(n){return o.store.dispatch(new $l(n))}],["town:moveTroopsSuccess",function(n){return o.store.select(Ql.a).pipe(Object(Tl.a)(1)).subscribe(function(e){return o.store.dispatch(new Ul(o.updateTown(e,n)))})}],["town:moveTroopsFail",function(n){return o.store.dispatch(new zl(n))}],["town:recallSupportSuccess",function(n){return o.store.dispatch(new Hl(n))}],["town:recallSupportFail",function(n){return o.store.dispatch(new Bl(n))}],["town:sendBackSupportSuccess",function(n){return o.store.dispatch(new Wl(n))}],["town:sendBackSupportFail",function(n){return o.store.dispatch(new Zl(n))}],["town:incomingMovement",function(n){return o.store.dispatch(new Gl(n))}],["town:supportRecalled",function(n){return o.store.dispatch(new Yl(n))}],["town:supportSentBack",function(n){return o.store.dispatch(new Xl(n))}]])}return n.prototype.updateTown=function(n,e){return Kl({},e,{population:this.calculatePopulation(e,n.buildingMap.farm.data),storage:n.buildingMap.storage.data[e.buildings.storage.level].storage,recruitmentModifier:n.buildingMap.barracks.data[e.buildings.barracks.level].recruitment})},n.prototype.calculatePopulation=function(n,e){var l=e[n.buildings.farm.level].population,t=n.originSupport.reduce(function(n,e){return n+Object.values(e.units).reduce(function(n,e){return n+e},0)},0),i=n.originMovements.reduce(function(n,e){return n+Object.values(e.units).reduce(function(n,e){return n+e},0)},0),o=n.targetMovements.reduce(function(n,e){return n+e.type===q.MovementType.return?Object.values(e.units).reduce(function(n,e){return n+e},0):0},0),a=Object.entries(n.units).reduce(function(n,e){var l=e[1];return n+l.inside+l.queued},0)+t+i+o;return{total:l,used:a,available:l-a}},Object(r.__decorate)([Object(u.b)(),Object(r.__metadata)("design:type",s.a)],n.prototype,"setActiveTown$",void 0),Object(r.__decorate)([Object(u.b)(),Object(r.__metadata)("design:type",s.a)],n.prototype,"setPlayerTowns$",void 0),Object(r.__decorate)([Object(u.b)({dispatch:!1}),Object(r.__metadata)("design:type",s.a)],n.prototype,"changeTownName$",void 0),Object(r.__decorate)([Object(u.b)({dispatch:!1}),Object(r.__metadata)("design:type",s.a)],n.prototype,"build$",void 0),Object(r.__decorate)([Object(u.b)({dispatch:!1}),Object(r.__metadata)("design:type",s.a)],n.prototype,"recruit$",void 0),Object(r.__decorate)([Object(u.b)({dispatch:!1}),Object(r.__metadata)("design:type",s.a)],n.prototype,"moveTroops$",void 0),Object(r.__decorate)([Object(u.b)({dispatch:!1}),Object(r.__metadata)("design:type",s.a)],n.prototype,"recallSupport$",void 0),Object(r.__decorate)([Object(u.b)({dispatch:!1}),Object(r.__metadata)("design:type",s.a)],n.prototype,"sendBackSupport$",void 0),n}(),nt=function(){function n(n,e,l){var t=this;this.actions$=n,this.store=e,this.socketService=l,this.loadMap$=this.actions$.pipe(Object(u.d)(De.LoadMap),Object(c.a)(function(){return t.socketService.sendEvent("map",{})})),this.socketService.registerEvents([["map",function(n){return t.store.dispatch(new Ve(n))}]])}return Object(r.__decorate)([Object(u.b)({dispatch:!1}),Object(r.__metadata)("design:type",Object)],n.prototype,"loadMap$",void 0),n}(),et=function(){function n(n,e,l,t){var o=this;this.actions$=n,this.router=e,this.socketService=l,this.store=t,this.loadRankings$=this.actions$.pipe(Object(u.d)(Be.Load),Object(c.a)(function(){return o.socketService.sendEvent("rankings:load")})),this.sidenavOpen$=this.actions$.pipe(Object(u.d)(i.SetSidenav),Object(Il.a)(function(n){return n.payload.some(function(n){var e=n.name;return"rankings"===e||"alliance"===e||"allianceProfile"===e})}),Object(c.a)(function(){return new Qe})),this.checkForUpdate$=this.actions$.pipe(Object(u.d)(Be.CheckForUpdate),Object(d.a)(this.store.select(xl)),Object(Il.a)(function(n){return Date.now()-n[1].lastUpdate>n[1].updateFrequencey}),Object(c.a)(function(n){return new Ze(n[1].lastUpdate)})),this.socketService.registerEvents([["rankings:loadSuccess",function(n){return o.store.select(ol).pipe(Object(Tl.a)(1)).subscribe(function(e){return o.store.dispatch(new Ge({rankings:n,playerId:e.id}))})}],["rankings:loadFail",function(n){return o.store.dispatch(new Ye(n))}],["rankings:loadStagnated",function(){return o.store.dispatch(new Xe)}]])}return Object(r.__decorate)([Object(u.b)({dispatch:!1}),Object(r.__metadata)("design:type",s.a)],n.prototype,"loadRankings$",void 0),Object(r.__decorate)([Object(u.b)(),Object(r.__metadata)("design:type",s.a)],n.prototype,"sidenavOpen$",void 0),Object(r.__decorate)([Object(u.b)(),Object(r.__metadata)("design:type",s.a)],n.prototype,"checkForUpdate$",void 0),n}(),lt=function(n){n.triggers="hover"},tt=l("xYTU"),it=(l("ihYY"),l("n6gG")),ot=l("YSh2"),at=l("vGXY"),rt=l("eDkP"),ut=l("4c35"),st=l("ny24"),ct=l("K9Ia"),dt=20;function pt(n){return Error('Tooltip position "'+n+'" is invalid.')}var ft=new o.InjectionToken("mat-tooltip-scroll-strategy");function mt(n){return function(){return n.scrollStrategies.reposition({scrollThrottle:dt})}}var ht=new o.InjectionToken("mat-tooltip-default-options",{providedIn:"root",factory:function(){return{showDelay:0,hideDelay:0,touchendHideDelay:1500}}}),gt=function(){function n(n,e,l,t,i,o,a,r,u,s,c){var d=this;this._overlay=n,this._elementRef=e,this._scrollDispatcher=l,this._viewContainerRef=t,this._ngZone=i,this._platform=o,this._ariaDescriber=a,this._focusMonitor=r,this._scrollStrategy=u,this._dir=s,this._defaultOptions=c,this._position="below",this._disabled=!1,this.showDelay=this._defaultOptions.showDelay,this.hideDelay=this._defaultOptions.hideDelay,this._message="",this._manualListeners=new Map,this._destroyed=new ct.a;var p=e.nativeElement;o.IOS?"INPUT"!==p.nodeName&&"TEXTAREA"!==p.nodeName||(p.style.webkitUserSelect=p.style.userSelect=""):(this._manualListeners.set("mouseenter",function(){return d.show()}),this._manualListeners.set("mouseleave",function(){return d.hide()}),this._manualListeners.forEach(function(n,l){return e.nativeElement.addEventListener(l,n)})),p.draggable&&"none"===p.style.webkitUserDrag&&(p.style.webkitUserDrag=""),r.monitor(p).pipe(Object(st.a)(this._destroyed)).subscribe(function(n){n?"keyboard"===n&&i.run(function(){return d.show()}):i.run(function(){return d.hide(0)})})}return Object.defineProperty(n.prototype,"position",{get:function(){return this._position},set:function(n){n!==this._position&&(this._position=n,this._overlayRef&&(this._updatePosition(),this._tooltipInstance&&this._tooltipInstance.show(0),this._overlayRef.updatePosition()))},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"disabled",{get:function(){return this._disabled},set:function(n){this._disabled=Object(it.c)(n),this._disabled&&this.hide(0)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"message",{get:function(){return this._message},set:function(n){this._ariaDescriber.removeDescription(this._elementRef.nativeElement,this._message),this._message=null!=n?(""+n).trim():"",!this._message&&this._isTooltipVisible()?this.hide(0):(this._updateTooltipMessage(),this._ariaDescriber.describe(this._elementRef.nativeElement,this.message))},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"tooltipClass",{get:function(){return this._tooltipClass},set:function(n){this._tooltipClass=n,this._tooltipInstance&&this._setTooltipClass(this._tooltipClass)},enumerable:!0,configurable:!0}),n.prototype.ngOnDestroy=function(){var n=this;this._overlayRef&&(this._overlayRef.dispose(),this._tooltipInstance=null),this._platform.IOS||(this._manualListeners.forEach(function(e,l){return n._elementRef.nativeElement.removeEventListener(l,e)}),this._manualListeners.clear()),this._destroyed.next(),this._destroyed.complete(),this._ariaDescriber.removeDescription(this._elementRef.nativeElement,this.message),this._focusMonitor.stopMonitoring(this._elementRef.nativeElement)},n.prototype.show=function(n){var e=this;if(void 0===n&&(n=this.showDelay),!this.disabled&&this.message){var l=this._createOverlay();this._detach(),this._portal=this._portal||new ut.d(vt,this._viewContainerRef),this._tooltipInstance=l.attach(this._portal).instance,this._tooltipInstance.afterHidden().pipe(Object(st.a)(this._destroyed)).subscribe(function(){return e._detach()}),this._setTooltipClass(this._tooltipClass),this._updateTooltipMessage(),this._tooltipInstance.show(n)}},n.prototype.hide=function(n){void 0===n&&(n=this.hideDelay),this._tooltipInstance&&this._tooltipInstance.hide(n)},n.prototype.toggle=function(){this._isTooltipVisible()?this.hide():this.show()},n.prototype._isTooltipVisible=function(){return!!this._tooltipInstance&&this._tooltipInstance.isVisible()},n.prototype._handleKeydown=function(n){this._isTooltipVisible()&&n.keyCode===ot.e&&(n.stopPropagation(),this.hide(0))},n.prototype._handleTouchend=function(){this.hide(this._defaultOptions.touchendHideDelay)},n.prototype._createOverlay=function(){var n=this;if(this._overlayRef)return this._overlayRef;var e=this._overlay.position().flexibleConnectedTo(this._elementRef).withTransformOriginOn(".mat-tooltip").withFlexibleDimensions(!1).withViewportMargin(8),l=this._scrollDispatcher.getAncestorScrollContainers(this._elementRef);return e.withScrollableContainers(l),e.positionChanges.pipe(Object(st.a)(this._destroyed)).subscribe(function(e){n._tooltipInstance&&e.scrollableViewProperties.isOverlayClipped&&n._tooltipInstance.isVisible()&&n._ngZone.run(function(){return n.hide(0)})}),this._overlayRef=this._overlay.create({direction:this._dir,positionStrategy:e,panelClass:"mat-tooltip-panel",scrollStrategy:this._scrollStrategy()}),this._updatePosition(),this._overlayRef.detachments().pipe(Object(st.a)(this._destroyed)).subscribe(function(){return n._detach()}),this._overlayRef},n.prototype._detach=function(){this._overlayRef&&this._overlayRef.hasAttached()&&this._overlayRef.detach(),this._tooltipInstance=null},n.prototype._updatePosition=function(){var n=this._overlayRef.getConfig().positionStrategy,e=this._getOrigin(),l=this._getOverlayPosition();n.withPositions([Object(r.__assign)({},e.main,l.main),Object(r.__assign)({},e.fallback,l.fallback)])},n.prototype._getOrigin=function(){var n,e=!this._dir||"ltr"==this._dir.value,l=this.position;if("above"==l||"below"==l)n={originX:"center",originY:"above"==l?"top":"bottom"};else if("before"==l||"left"==l&&e||"right"==l&&!e)n={originX:"start",originY:"center"};else{if(!("after"==l||"right"==l&&e||"left"==l&&!e))throw pt(l);n={originX:"end",originY:"center"}}var t=this._invertPosition(n.originX,n.originY);return{main:n,fallback:{originX:t.x,originY:t.y}}},n.prototype._getOverlayPosition=function(){var n,e=!this._dir||"ltr"==this._dir.value,l=this.position;if("above"==l)n={overlayX:"center",overlayY:"bottom"};else if("below"==l)n={overlayX:"center",overlayY:"top"};else if("before"==l||"left"==l&&e||"right"==l&&!e)n={overlayX:"end",overlayY:"center"};else{if(!("after"==l||"right"==l&&e||"left"==l&&!e))throw pt(l);n={overlayX:"start",overlayY:"center"}}var t=this._invertPosition(n.overlayX,n.overlayY);return{main:n,fallback:{overlayX:t.x,overlayY:t.y}}},n.prototype._updateTooltipMessage=function(){var n=this;this._tooltipInstance&&(this._tooltipInstance.message=this.message,this._tooltipInstance._markForCheck(),this._ngZone.onMicrotaskEmpty.asObservable().pipe(Object(Tl.a)(1),Object(st.a)(this._destroyed)).subscribe(function(){n._tooltipInstance&&n._overlayRef.updatePosition()}))},n.prototype._setTooltipClass=function(n){this._tooltipInstance&&(this._tooltipInstance.tooltipClass=n,this._tooltipInstance._markForCheck())},n.prototype._invertPosition=function(n,e){return"above"===this.position||"below"===this.position?"top"===e?e="bottom":"bottom"===e&&(e="top"):"end"===n?n="start":"start"===n&&(n="end"),{x:n,y:e}},n}(),vt=function(){function n(n,e){this._changeDetectorRef=n,this._breakpointObserver=e,this._visibility="initial",this._closeOnInteraction=!1,this._onHide=new ct.a,this._isHandset=this._breakpointObserver.observe(at.b.Handset)}return n.prototype.show=function(n){var e=this;this._hideTimeoutId&&clearTimeout(this._hideTimeoutId),this._closeOnInteraction=!0,this._showTimeoutId=setTimeout(function(){e._visibility="visible",e._markForCheck()},n)},n.prototype.hide=function(n){var e=this;this._showTimeoutId&&clearTimeout(this._showTimeoutId),this._hideTimeoutId=setTimeout(function(){e._visibility="hidden",e._markForCheck()},n)},n.prototype.afterHidden=function(){return this._onHide.asObservable()},n.prototype.isVisible=function(){return"visible"===this._visibility},n.prototype._animationStart=function(){this._closeOnInteraction=!1},n.prototype._animationDone=function(n){var e=n.toState;"hidden"!==e||this.isVisible()||this._onHide.next(),"visible"!==e&&"hidden"!==e||(this._closeOnInteraction=!0)},n.prototype._handleBodyInteraction=function(){this._closeOnInteraction&&this.hide(0)},n.prototype._markForCheck=function(){this._changeDetectorRef.markForCheck()},n}(),bt=function(){},yt=l("Ip0R"),_t=l("M2Lx"),wt=l("Fzqc"),Ct=l("dWZg"),Rt=l("lLAP"),xt=l("qAlS"),St=l("Wf4p"),kt=o["\u0275crt"]({encapsulation:2,styles:[".mat-tooltip-panel{pointer-events:none!important}.mat-tooltip{color:#fff;border-radius:2px;margin:14px;max-width:250px;padding-left:8px;padding-right:8px;overflow:hidden;text-overflow:ellipsis}@media screen and (-ms-high-contrast:active){.mat-tooltip{outline:solid 1px}}.mat-tooltip-handset{margin:24px;padding-left:16px;padding-right:16px}"],data:{animation:[{type:7,name:"state",definitions:[{type:0,name:"initial, void, hidden",styles:{type:6,styles:{transform:"scale(0)"},offset:null},options:void 0},{type:0,name:"visible",styles:{type:6,styles:{transform:"scale(1)"},offset:null},options:void 0},{type:1,expr:"* => visible",animation:{type:4,styles:null,timings:"150ms cubic-bezier(0.0, 0.0, 0.2, 1)"},options:null},{type:1,expr:"* => hidden",animation:{type:4,styles:null,timings:"150ms cubic-bezier(0.4, 0.0, 1, 1)"},options:null}],options:{}}]}});function It(n){return o["\u0275vid"](2,[(n()(),o["\u0275eld"](0,0,null,null,3,"div",[["class","mat-tooltip"]],[[2,"mat-tooltip-handset",null],[24,"@state",0]],[[null,"@state.start"],[null,"@state.done"]],function(n,e,l){var t=!0,i=n.component;return"@state.start"===e&&(t=!1!==i._animationStart()&&t),"@state.done"===e&&(t=!1!==i._animationDone(l)&&t),t},null,null)),o["\u0275did"](1,278528,null,0,yt.NgClass,[o.IterableDiffers,o.KeyValueDiffers,o.ElementRef,o.Renderer2],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),o["\u0275pid"](131072,yt.AsyncPipe,[o.ChangeDetectorRef]),(n()(),o["\u0275ted"](3,null,["",""]))],function(n,e){n(e,1,0,"mat-tooltip",e.component.tooltipClass)},function(n,e){var l=e.component;n(e,0,0,o["\u0275unv"](e,0,0,o["\u0275nov"](e,2).transform(l._isHandset)).matches,l._visibility),n(e,3,0,l.message)})}var Ot=o["\u0275ccf"]("mat-tooltip-component",vt,function(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,1,"mat-tooltip-component",[["aria-hidden","true"]],[[4,"zoom",null]],[["body","click"]],function(n,e,l){var t=!0;return"body:click"===e&&(t=!1!==o["\u0275nov"](n,1)._handleBodyInteraction()&&t),t},It,kt)),o["\u0275did"](1,49152,null,0,vt,[o.ChangeDetectorRef,at.a],null,null)],null,function(n,e){n(e,0,0,"visible"===o["\u0275nov"](e,1)._visibility?1:null)})},{},{},[]),Pt=l("t68o"),Tt=l("pMnS"),At=l("4lDY"),Dt=l("qcfG"),Ft=l("xaNE"),jt=l("FNNE"),Et=l("gW6t"),Mt=l("u4HF"),Nt=l("aq8m"),Lt=l("fNgX"),$t=l("Hf/j"),qt=l("ZYjt"),Vt=function(){function n(){}return n.prototype.transform=function(n,e){var l=Math.max(Math.floor(n/1e3)%60,0),t=Math.max(Math.floor(n/1e3/60)%60,0),i={HH:("0"+Math.max(Math.floor(n/1e3/60/60),0)).slice(-2),mm:("0"+t).slice(-2),ss:("0"+l).slice(-2)};return e.replace(/(HH|mm|ss)/g,function(n){return i[n]})},n}(),Ut=l("gI3B"),zt=l("T1DM");function Ht(n){return void 0===n&&(n=zt.a),Object(c.a)(function(e){return new Bt(e,n.now())})}var Bt=function(n,e){this.value=n,this.timestamp=e},Wt=l("7O5W"),Zt=l("wHSu"),Gt=function(){function n(){this.typeNames=q.MovementTypeName,this.movements=[],this.outgoing=[],this.incoming=[],this.returning=[],this.unitTypes=[],Wt.d.add(Zt.d,Zt.a)}return n.prototype.ngOnInit=function(){var n=this;this.queue$=Object(Ut.a)(0,1e3).pipe(Ht(),Object(c.a)(function(e){return n.movements.map(function(n){return n.timeLeft=+n.endsAt-e.timestamp,n})}))},n.prototype.ngOnChanges=function(n){this.movements=this.town.originMovements.concat(this.town.targetMovements).sort(function(n,e){return+n.endsAt-+e.endsAt})},n}(),Yt=o["\u0275crt"]({encapsulation:0,styles:[[""]],data:{}});function Xt(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,2,"fa-icon",[["class","ng-fa-icon"]],[[8,"innerHTML",1]],[[null,"click"]],function(n,e,l){var t=!0;return"click"===e&&(t=0!=(n.parent.context.$implicit.isVisible=!n.parent.context.$implicit.isVisible)&&t),t},Lt.b,Lt.a)),o["\u0275did"](1,573440,null,0,$t.a,[qt.c],{iconProp:[0,"iconProp"],rotate:[1,"rotate"]},null),o["\u0275pad"](2,2)],function(n,e){n(e,1,0,n(e,2,0,"fas","caret-right"),e.parent.context.$implicit.isVisible?90:0)},function(n,e){n(e,0,0,o["\u0275nov"](e,1).renderedIconHTML)})}function Qt(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,1,"div",[],null,null,null,null,null)),(n()(),o["\u0275ted"](1,null,["",""]))],null,function(n,e){n(e,1,0,e.parent.parent.context.$implicit.units[e.parent.context.$implicit.name]||0)})}function Kt(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,1,"div",[],null,null,null,null,null)),(n()(),o["\u0275ted"](-1,null,["?"]))],null,null)}function Jt(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,5,"div",[["class","col d-flex flex-row"]],null,null,null,null,null)),(n()(),o["\u0275eld"](1,0,null,null,0,"div",[["class","unit-icon"]],[[1,"data-unit",0]],null,null,null,null)),(n()(),o["\u0275and"](16777216,null,null,1,null,Qt)),o["\u0275did"](3,16384,null,0,yt.NgIf,[o.ViewContainerRef,o.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),o["\u0275and"](16777216,null,null,1,null,Kt)),o["\u0275did"](5,16384,null,0,yt.NgIf,[o.ViewContainerRef,o.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(n,e){n(e,3,0,e.parent.context.$implicit.units),n(e,5,0,!e.parent.context.$implicit.units)},function(n,e){n(e,1,0,e.context.$implicit.name)})}function ni(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,16,"div",[],null,null,null,null,null)),(n()(),o["\u0275eld"](1,0,null,null,12,"div",[["class","row"]],null,null,null,null,null)),(n()(),o["\u0275eld"](2,0,null,null,3,"div",[["class","col"]],null,null,null,null,null)),(n()(),o["\u0275and"](16777216,null,null,1,null,Xt)),o["\u0275did"](4,16384,null,0,yt.NgIf,[o.ViewContainerRef,o.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),o["\u0275ted"](5,null,[" "," "])),(n()(),o["\u0275eld"](6,0,null,null,2,"div",[["class","col"]],null,null,null,null,null)),(n()(),o["\u0275ted"](7,null,["",""])),o["\u0275ppd"](8,2),(n()(),o["\u0275eld"](9,0,null,null,4,"div",[["class","col"]],null,null,null,null,null)),(n()(),o["\u0275ted"](10,null,[" "," "])),(n()(),o["\u0275eld"](11,0,null,null,2,"fa-icon",[["class","ng-fa-icon"]],[[8,"innerHTML",1]],null,null,Lt.b,Lt.a)),o["\u0275did"](12,573440,null,0,$t.a,[qt.c],{iconProp:[0,"iconProp"]},null),o["\u0275pad"](13,2),(n()(),o["\u0275eld"](14,0,null,null,2,"div",[["class","row"]],[[8,"hidden",0]],null,null,null,null)),(n()(),o["\u0275and"](16777216,null,null,1,null,Jt)),o["\u0275did"](16,802816,null,0,yt.NgForOf,[o.ViewContainerRef,o.TemplateRef,o.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],function(n,e){var l=e.component;n(e,4,0,e.context.$implicit.units),n(e,12,0,n(e,13,0,"fas","angle-double-left")),n(e,16,0,l.worldData.units)},function(n,e){var l=e.component;n(e,5,0,e.context.$implicit.originTownId),n(e,7,0,o["\u0275unv"](e,7,0,n(e,8,0,o["\u0275nov"](e.parent,0),e.context.$implicit.timeLeft,"HH:mm:ss"))),n(e,10,0,l.typeNames[e.context.$implicit.type]),n(e,11,0,o["\u0275nov"](e,12).renderedIconHTML),n(e,14,0,!e.context.$implicit.isVisible)})}function ei(n){return o["\u0275vid"](0,[o["\u0275pid"](0,Vt,[]),(n()(),o["\u0275eld"](1,0,null,null,5,"div",[["class","container-fluid pb-4"]],null,null,null,null,null)),(n()(),o["\u0275eld"](2,0,null,null,1,"h2",[],null,null,null,null,null)),(n()(),o["\u0275ted"](-1,null,["Movements"])),(n()(),o["\u0275and"](16777216,null,null,2,null,ni)),o["\u0275did"](5,802816,null,0,yt.NgForOf,[o.ViewContainerRef,o.TemplateRef,o.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),o["\u0275pid"](131072,yt.AsyncPipe,[o.ChangeDetectorRef])],function(n,e){var l=e.component;n(e,5,0,o["\u0275unv"](e,5,0,o["\u0275nov"](e,6).transform(l.queue$)))},null)}var li=o["\u0275ccf"]("movement",Gt,function(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,1,"movement",[],null,null,null,ei,Yt)),o["\u0275did"](1,638976,null,0,Gt,[],null,null)],function(n,e){n(e,1,0)},null)},{town:"town",worldData:"worldData"},{},[]),ti=l("gIcY"),ii=l("w9g1"),oi=(l("6n4i"),{headquarters:{name:"Headquarters",description:"Headquarters is the main building of every town. Buildings need a specific level of the headquarters to be built. Barracks require to reach level 3, while the Academy needs level 15 to be built."},clay:{name:"Clay pit",description:"Workers gather clay in the clay pit. Clay is an important resource for building construction. The higher the level the more clay is produced.",details:"production",detailText:"clay production"},wood:{name:"Timber camp",description:"Wood is harvested in the timber camp. Wood is an important resource for building constructions and unit weapons. The higher the level the more wood is produced.",details:"production",detailText:"wood production"},iron:{name:"Iron mine",description:"Iron is mined in the iron mine. Iron is heavily relied upon for weapons and cavalry armor. The higher the level the more iron is produced.",details:"production",detailText:"iron production"},storage:{name:"Warehouse",description:"All resources are stored in the warehouse. The amount of stored resources depends on the level of the warehouse. Upgrading the warehouse will increase the maximum stored amount.",details:"storage",detailText:"storage"},farm:{name:"Farm",description:"Farm produces food for your troops and directly affects the amount of population your town can hold. Upgrading the farm will increase the maximum population.",details:"population",detailText:"population"},barracks:{name:"Barracks",description:"Your troops are trained in the barracks. Some units require a specific level of barracks to be trained. Upgrading the barracks will increase the training speed of your troops.",details:"recruitment",detailText:"recruitment speed"},wall:{name:"Wall",description:"The wall helps protect your town. Each level of the wall provides a bonus to defense.",details:"defense",detailText:"defense bonus"},castle:{name:"Academy",description:"Academy is a prestigious institution used to train nobles. Once the town has a Headquarters of level 15 the academy is unlocked to build. Building the academy allows the recruitment of nobles, whom help you conquer other towns."}}),ai={axe:{name:"Axeman",description:"Axes questions."},sword:{name:"Swordsman",description:"My sword and shield."},mace:{name:"Maceman",description:"Spray some mace."},archer:{name:"Archer",description:"Shoots arrows."},scout:{name:"Scout",description:"Scouts around."},lightCavalry:{name:"Light cavalary",description:"Rides fast."},mountedArcher:{name:"Mounted archer",description:"Horses with bows."},heavyCavalry:{name:"Heavy cavalary",description:"Armored horses."},trebuchet:{name:"Trebuchet",description:"Shoot rocks."},noble:{name:"Diplomat",description:"Buy towns."},commander:{name:"Commander",description:"Bears flags."}},ri=function(){function n(n,e,l,t){var i=this;this.commandService=n,this.gameData=e,this.mapService=l,this.store=t,this.unitDetails=ai,this.target=[null,null],this.unitsToSend={},this.sending=!1,this.commandService.targeting.subscribe(function(n){i.target=n,i.targetCoords=n})}return n.prototype.ngOnInit=function(){},n.prototype.sendCommand=function(n,e){var l=this;if(this.target!==this.town.location){var t=n?q.MovementType.support:q.MovementType.attack,i=Object.entries(e.value).reduce(function(n,e){var t=e[0],i=e[1];return+i&&(l.town.units[t].inside>=i?(n.units[t]=i,n.isEmpty=!1):n.isValid=!1),n},{isValid:!0,isEmpty:!0,units:{}});i.isValid&&!i.isEmpty?this.store.dispatch(new function(n){this.payload=n,this.type="[Town] Move Troops"}({units:i.units,type:t,target:this.target})):e.form.setErrors({errorMessage:"Incorrectly entered units."})}else e.form.setErrors({errorMessage:"A town can't attack itself."})},n}(),ui=l("W9XC"),si=l("ldS1"),ci=o["\u0275crt"]({encapsulation:0,styles:[[""]],data:{}});function di(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,12,"div",[["class","d-flex"]],null,null,null,null,null)),(n()(),o["\u0275eld"](1,0,null,null,0,"i",[["class","unit-icon mr-1"]],[[1,"data-unit",0]],null,null,null,null)),(n()(),o["\u0275eld"](2,0,null,null,1,"label",[["class","pr-1"]],null,null,null,null,null)),(n()(),o["\u0275ted"](3,null,["",""])),(n()(),o["\u0275eld"](4,0,null,null,6,"input",[["min","0"],["type","number"]],[[8,"max",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(n,e,l){var t=!0,i=n.component;return"input"===e&&(t=!1!==o["\u0275nov"](n,5)._handleInput(l.target.value)&&t),"blur"===e&&(t=!1!==o["\u0275nov"](n,5).onTouched()&&t),"compositionstart"===e&&(t=!1!==o["\u0275nov"](n,5)._compositionStart()&&t),"compositionend"===e&&(t=!1!==o["\u0275nov"](n,5)._compositionEnd(l.target.value)&&t),"change"===e&&(t=!1!==o["\u0275nov"](n,6).onChange(l.target.value)&&t),"input"===e&&(t=!1!==o["\u0275nov"](n,6).onChange(l.target.value)&&t),"blur"===e&&(t=!1!==o["\u0275nov"](n,6).onTouched()&&t),"ngModelChange"===e&&(t=!1!==(i.unitsToSend[n.context.$implicit.name]=l)&&t),t},null,null)),o["\u0275did"](5,16384,null,0,ti.d,[o.Renderer2,o.ElementRef,[2,ti.a]],null,null),o["\u0275did"](6,16384,null,0,ti.x,[o.Renderer2,o.ElementRef],null,null),o["\u0275prd"](1024,null,ti.l,function(n,e){return[n,e]},[ti.d,ti.x]),o["\u0275did"](8,671744,null,0,ti.q,[[2,ti.c],[8,null],[8,null],[6,ti.l]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),o["\u0275prd"](2048,null,ti.m,null,[ti.q]),o["\u0275did"](10,16384,null,0,ti.n,[[4,ti.m]],null,null),(n()(),o["\u0275eld"](11,0,null,null,1,"span",[["class","pl-2"]],null,null,null,null,null)),(n()(),o["\u0275ted"](12,null,["/",""]))],function(n,e){n(e,8,0,e.context.$implicit.name,e.component.unitsToSend[e.context.$implicit.name])},function(n,e){var l=e.component;n(e,1,0,e.context.$implicit.name),n(e,3,0,l.unitDetails[e.context.$implicit.name].name),n(e,4,0,l.town.units[e.context.$implicit.name].inside,o["\u0275nov"](e,10).ngClassUntouched,o["\u0275nov"](e,10).ngClassTouched,o["\u0275nov"](e,10).ngClassPristine,o["\u0275nov"](e,10).ngClassDirty,o["\u0275nov"](e,10).ngClassValid,o["\u0275nov"](e,10).ngClassInvalid,o["\u0275nov"](e,10).ngClassPending),n(e,12,0,l.town.units[e.context.$implicit.name].inside)})}function pi(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,1,"span",[["class","text-danger"]],null,null,null,null,null)),(n()(),o["\u0275ted"](1,null,["",""]))],null,function(n,e){n(e,1,0,o["\u0275nov"](e.parent.parent,2).errors.errorMessage)})}function fi(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,1,"span",[["class","text-success"]],null,null,null,null,null)),(n()(),o["\u0275ted"](-1,null,["Attack successfully sent."]))],null,null)}function mi(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,8,"div",[],null,null,null,null,null)),(n()(),o["\u0275eld"](1,0,null,null,1,"button",[["class","btn btn-danger"],["type","button"]],[[8,"disabled",0]],[[null,"click"]],function(n,e,l){var t=!0;return"click"===e&&(t=!1!==n.component.sendCommand(!1,o["\u0275nov"](n.parent,2))&&t),t},null,null)),(n()(),o["\u0275ted"](-1,null,["Attack"])),(n()(),o["\u0275eld"](3,0,null,null,1,"button",[["class","btn btn-success"],["type","button"]],null,[[null,"click"]],function(n,e,l){var t=!0;return"click"===e&&(t=!1!==n.component.sendCommand(!0,o["\u0275nov"](n.parent,2))&&t),t},null,null)),(n()(),o["\u0275ted"](-1,null,["Support"])),(n()(),o["\u0275and"](16777216,null,null,1,null,pi)),o["\u0275did"](6,16384,null,0,yt.NgIf,[o.ViewContainerRef,o.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),o["\u0275and"](16777216,null,null,1,null,fi)),o["\u0275did"](8,16384,null,0,yt.NgIf,[o.ViewContainerRef,o.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(n,e){var l=e.component;n(e,6,0,o["\u0275nov"](e.parent,2).errors),n(e,8,0,l.sent)},function(n,e){n(e,1,0,o["\u0275nov"](e.parent,2).pristine||o["\u0275nov"](e.parent,2).errors)})}function hi(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,31,"form",[["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(n,e,l){var t=!0;return"submit"===e&&(t=!1!==o["\u0275nov"](n,2).onSubmit(l)&&t),"reset"===e&&(t=!1!==o["\u0275nov"](n,2).onReset()&&t),t},null,null)),o["\u0275did"](1,16384,null,0,ti.y,[],null,null),o["\u0275did"](2,4210688,[["commandForm",4]],0,ti.p,[[8,null],[8,null]],null,null),o["\u0275prd"](2048,null,ti.c,null,[ti.p]),o["\u0275did"](4,16384,null,0,ti.o,[[4,ti.c]],null,null),(n()(),o["\u0275and"](16777216,null,null,1,null,di)),o["\u0275did"](6,802816,null,0,yt.NgForOf,[o.ViewContainerRef,o.TemplateRef,o.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(n()(),o["\u0275eld"](7,0,null,null,22,"div",[],null,null,null,null,null)),(n()(),o["\u0275eld"](8,0,null,null,1,"div",[],null,null,null,null,null)),(n()(),o["\u0275ted"](-1,null,["Target"])),(n()(),o["\u0275eld"](10,0,null,null,1,"label",[],null,null,null,null,null)),(n()(),o["\u0275ted"](-1,null,["X"])),(n()(),o["\u0275eld"](12,0,null,null,7,"input",[["max","999"],["min","1"],["type","number"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(n,e,l){var t=!0,i=n.component;return"input"===e&&(t=!1!==o["\u0275nov"](n,13)._handleInput(l.target.value)&&t),"blur"===e&&(t=!1!==o["\u0275nov"](n,13).onTouched()&&t),"compositionstart"===e&&(t=!1!==o["\u0275nov"](n,13)._compositionStart()&&t),"compositionend"===e&&(t=!1!==o["\u0275nov"](n,13)._compositionEnd(l.target.value)&&t),"change"===e&&(t=!1!==o["\u0275nov"](n,14).onChange(l.target.value)&&t),"input"===e&&(t=!1!==o["\u0275nov"](n,14).onChange(l.target.value)&&t),"blur"===e&&(t=!1!==o["\u0275nov"](n,14).onTouched()&&t),"ngModelChange"===e&&(t=!1!==(i.target[0]=l)&&t),t},null,null)),o["\u0275did"](13,16384,null,0,ti.d,[o.Renderer2,o.ElementRef,[2,ti.a]],null,null),o["\u0275did"](14,16384,null,0,ti.x,[o.Renderer2,o.ElementRef],null,null),o["\u0275prd"](1024,null,ti.l,function(n,e){return[n,e]},[ti.d,ti.x]),o["\u0275did"](16,671744,null,0,ti.q,[[2,ti.c],[8,null],[8,null],[6,ti.l]],{model:[0,"model"],options:[1,"options"]},{update:"ngModelChange"}),o["\u0275pod"](17,{standalone:0}),o["\u0275prd"](2048,null,ti.m,null,[ti.q]),o["\u0275did"](19,16384,null,0,ti.n,[[4,ti.m]],null,null),(n()(),o["\u0275eld"](20,0,null,null,1,"label",[],null,null,null,null,null)),(n()(),o["\u0275ted"](-1,null,["Y"])),(n()(),o["\u0275eld"](22,0,null,null,7,"input",[["max","999"],["min","1"],["type","number"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(n,e,l){var t=!0,i=n.component;return"input"===e&&(t=!1!==o["\u0275nov"](n,23)._handleInput(l.target.value)&&t),"blur"===e&&(t=!1!==o["\u0275nov"](n,23).onTouched()&&t),"compositionstart"===e&&(t=!1!==o["\u0275nov"](n,23)._compositionStart()&&t),"compositionend"===e&&(t=!1!==o["\u0275nov"](n,23)._compositionEnd(l.target.value)&&t),"change"===e&&(t=!1!==o["\u0275nov"](n,24).onChange(l.target.value)&&t),"input"===e&&(t=!1!==o["\u0275nov"](n,24).onChange(l.target.value)&&t),"blur"===e&&(t=!1!==o["\u0275nov"](n,24).onTouched()&&t),"ngModelChange"===e&&(t=!1!==(i.target[1]=l)&&t),t},null,null)),o["\u0275did"](23,16384,null,0,ti.d,[o.Renderer2,o.ElementRef,[2,ti.a]],null,null),o["\u0275did"](24,16384,null,0,ti.x,[o.Renderer2,o.ElementRef],null,null),o["\u0275prd"](1024,null,ti.l,function(n,e){return[n,e]},[ti.d,ti.x]),o["\u0275did"](26,671744,null,0,ti.q,[[2,ti.c],[8,null],[8,null],[6,ti.l]],{model:[0,"model"],options:[1,"options"]},{update:"ngModelChange"}),o["\u0275pod"](27,{standalone:0}),o["\u0275prd"](2048,null,ti.m,null,[ti.q]),o["\u0275did"](29,16384,null,0,ti.n,[[4,ti.m]],null,null),(n()(),o["\u0275and"](16777216,null,null,1,null,mi)),o["\u0275did"](31,16384,null,0,yt.NgIf,[o.ViewContainerRef,o.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(n,e){var l=e.component;n(e,6,0,l.worldData.units),n(e,16,0,l.target[0],n(e,17,0,!0)),n(e,26,0,l.target[1],n(e,27,0,!0)),n(e,31,0,!l.town._actionState.movement.inProgress)},function(n,e){n(e,0,0,o["\u0275nov"](e,4).ngClassUntouched,o["\u0275nov"](e,4).ngClassTouched,o["\u0275nov"](e,4).ngClassPristine,o["\u0275nov"](e,4).ngClassDirty,o["\u0275nov"](e,4).ngClassValid,o["\u0275nov"](e,4).ngClassInvalid,o["\u0275nov"](e,4).ngClassPending),n(e,12,0,o["\u0275nov"](e,19).ngClassUntouched,o["\u0275nov"](e,19).ngClassTouched,o["\u0275nov"](e,19).ngClassPristine,o["\u0275nov"](e,19).ngClassDirty,o["\u0275nov"](e,19).ngClassValid,o["\u0275nov"](e,19).ngClassInvalid,o["\u0275nov"](e,19).ngClassPending),n(e,22,0,o["\u0275nov"](e,29).ngClassUntouched,o["\u0275nov"](e,29).ngClassTouched,o["\u0275nov"](e,29).ngClassPristine,o["\u0275nov"](e,29).ngClassDirty,o["\u0275nov"](e,29).ngClassValid,o["\u0275nov"](e,29).ngClassInvalid,o["\u0275nov"](e,29).ngClassPending)})}function gi(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,4,"div",[["class","container"]],null,null,null,null,null)),(n()(),o["\u0275eld"](1,0,null,null,1,"h2",[],null,null,null,null,null)),(n()(),o["\u0275ted"](-1,null,["Send troops"])),(n()(),o["\u0275and"](16777216,null,null,1,null,hi)),o["\u0275did"](4,16384,null,0,yt.NgIf,[o.ViewContainerRef,o.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(n,e){var l=e.component;n(e,4,0,l.town.units&&l.worldData.units)},null)}var vi=o["\u0275ccf"]("command",ri,function(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,1,"command",[],null,null,null,gi,ci)),o["\u0275did"](1,114688,null,0,ri,[ui.a,ii.a,si.c,O.n],null,null)],function(n,e){n(e,1,0)},null)},{town:"town",worldData:"worldData"},{},[]),bi=l("pugT"),yi=l("p0ib"),_i=l("F/XL"),wi=l("p0Sj"),Ci=new o.InjectionToken("MatInkBarPositioner",{providedIn:"root",factory:function(){return function(n){return{left:n?(n.offsetLeft||0)+"px":"0",width:n?(n.offsetWidth||0)+"px":"0"}}}}),Ri=function(){function n(n,e,l){this._elementRef=n,this._ngZone=e,this._inkBarPositioner=l}return n.prototype.alignToElement=function(n){var e=this;this.show(),"undefined"!=typeof requestAnimationFrame?this._ngZone.runOutsideAngular(function(){requestAnimationFrame(function(){return e._setStyles(n)})}):this._setStyles(n)},n.prototype.show=function(){this._elementRef.nativeElement.style.visibility="visible"},n.prototype.hide=function(){this._elementRef.nativeElement.style.visibility="hidden"},n.prototype._setStyles=function(n){var e=this._inkBarPositioner(n),l=this._elementRef.nativeElement;l.style.left=e.left,l.style.width=e.width},n}(),xi=function(n){function e(e){var l=n.call(this)||this;return l._viewContainerRef=e,l.textLabel="",l._contentPortal=null,l._labelChange=new ct.a,l._disableChange=new ct.a,l.position=null,l.origin=null,l.isActive=!1,l}return Object(r.__extends)(e,n),Object.defineProperty(e.prototype,"content",{get:function(){return this._contentPortal},enumerable:!0,configurable:!0}),e.prototype.ngOnChanges=function(n){n.hasOwnProperty("textLabel")&&this._labelChange.next(),n.hasOwnProperty("disabled")&&this._disableChange.next()},e.prototype.ngOnDestroy=function(){this._disableChange.complete(),this._labelChange.complete()},e.prototype.ngOnInit=function(){this._contentPortal=new ut.h(this._explicitContent||this._implicitContent,this._viewContainerRef)},e}(Object(St.F)(function(){})),Si=function(n){function e(e,l,t){var i=n.call(this,e,l)||this;return i._host=t,i._centeringSub=bi.a.EMPTY,i._leavingSub=bi.a.EMPTY,i}return Object(r.__extends)(e,n),e.prototype.ngOnInit=function(){var e=this;n.prototype.ngOnInit.call(this),this._centeringSub=this._host._beforeCentering.pipe(Object(wi.a)(this._host._isCenterPosition(this._host._position))).subscribe(function(n){n&&!e.hasAttached()&&e.attach(e._host._content)}),this._leavingSub=this._host._afterLeavingCenter.subscribe(function(){e.detach()})},e.prototype.ngOnDestroy=function(){n.prototype.ngOnDestroy.call(this),this._centeringSub.unsubscribe(),this._leavingSub.unsubscribe()},e}(ut.c),ki=function(){function n(n,e,l){var t=this;this._elementRef=n,this._dir=e,this._dirChangeSubscription=bi.a.EMPTY,this._onCentering=new o.EventEmitter,this._beforeCentering=new o.EventEmitter,this._afterLeavingCenter=new o.EventEmitter,this._onCentered=new o.EventEmitter(!0),this._dir&&l&&(this._dirChangeSubscription=this._dir.change.subscribe(function(n){t._computePositionAnimationState(n),l.markForCheck()}))}return Object.defineProperty(n.prototype,"position",{set:function(n){this._positionIndex=n,this._computePositionAnimationState()},enumerable:!0,configurable:!0}),n.prototype.ngOnInit=function(){"center"==this._position&&void 0!==this.origin&&(this._position=this._computePositionFromOrigin())},n.prototype.ngOnDestroy=function(){this._dirChangeSubscription.unsubscribe()},n.prototype._onTranslateTabStarted=function(n){var e=this._isCenterPosition(n.toState);this._beforeCentering.emit(e),e&&this._onCentering.emit(this._elementRef.nativeElement.clientHeight)},n.prototype._onTranslateTabComplete=function(n){this._isCenterPosition(n.toState)&&this._isCenterPosition(this._position)&&this._onCentered.emit(),this._isCenterPosition(n.fromState)&&!this._isCenterPosition(this._position)&&this._afterLeavingCenter.emit()},n.prototype._getLayoutDirection=function(){return this._dir&&"rtl"===this._dir.value?"rtl":"ltr"},n.prototype._isCenterPosition=function(n){return"center"==n||"left-origin-center"==n||"right-origin-center"==n},n.prototype._computePositionAnimationState=function(n){void 0===n&&(n=this._getLayoutDirection()),this._position=this._positionIndex<0?"ltr"==n?"left":"right":this._positionIndex>0?"ltr"==n?"right":"left":"center"},n.prototype._computePositionFromOrigin=function(){var n=this._getLayoutDirection();return"ltr"==n&&this.origin<=0||"rtl"==n&&this.origin>0?"left-origin-center":"right-origin-center"},n}(),Ii=function(n){function e(e){var l=n.call(this)||this;return l.elementRef=e,l}return Object(r.__extends)(e,n),e.prototype.focus=function(){this.elementRef.nativeElement.focus()},e.prototype.getOffsetLeft=function(){return this.elementRef.nativeElement.offsetLeft},e.prototype.getOffsetWidth=function(){return this.elementRef.nativeElement.offsetWidth},e}(Object(St.F)(function(){})),Oi=function(n){function e(e,l,t,i){var a=n.call(this)||this;return a._elementRef=e,a._changeDetectorRef=l,a._viewportRuler=t,a._dir=i,a._scrollDistance=0,a._selectedIndexChanged=!1,a._destroyed=new ct.a,a._showPaginationControls=!1,a._disableScrollAfter=!0,a._disableScrollBefore=!0,a._selectedIndex=0,a.selectFocusedIndex=new o.EventEmitter,a.indexFocused=new o.EventEmitter,a}return Object(r.__extends)(e,n),Object.defineProperty(e.prototype,"selectedIndex",{get:function(){return this._selectedIndex},set:function(n){n=Object(it.e)(n),this._selectedIndexChanged=this._selectedIndex!=n,this._selectedIndex=n,this._keyManager&&this._keyManager.updateActiveItemIndex(n)},enumerable:!0,configurable:!0}),e.prototype.ngAfterContentChecked=function(){this._tabLabelCount!=this._labelWrappers.length&&(this._updatePagination(),this._tabLabelCount=this._labelWrappers.length,this._changeDetectorRef.markForCheck()),this._selectedIndexChanged&&(this._scrollToLabel(this._selectedIndex),this._checkScrollingControls(),this._alignInkBarToSelectedTab(),this._selectedIndexChanged=!1,this._changeDetectorRef.markForCheck()),this._scrollDistanceChanged&&(this._updateTabScrollPosition(),this._scrollDistanceChanged=!1,this._changeDetectorRef.markForCheck())},e.prototype._handleKeydown=function(n){switch(n.keyCode){case ot.f:this._keyManager.setFirstItemActive(),n.preventDefault();break;case ot.c:this._keyManager.setLastItemActive(),n.preventDefault();break;case ot.d:case ot.j:this.selectFocusedIndex.emit(this.focusIndex),n.preventDefault();break;default:this._keyManager.onKeydown(n)}},e.prototype.ngAfterContentInit=function(){var n=this,e=this._dir?this._dir.change:Object(_i.a)(null),l=this._viewportRuler.change(150),t=function(){n._updatePagination(),n._alignInkBarToSelectedTab()};this._keyManager=new Rt.e(this._labelWrappers).withHorizontalOrientation(this._getLayoutDirection()).withWrap(),this._keyManager.updateActiveItem(0),"undefined"!=typeof requestAnimationFrame?requestAnimationFrame(t):t(),Object(yi.a)(e,l).pipe(Object(st.a)(this._destroyed)).subscribe(function(){t(),n._keyManager.withHorizontalOrientation(n._getLayoutDirection())}),this._keyManager.change.pipe(Object(st.a)(this._destroyed)).subscribe(function(e){n.indexFocused.emit(e),n._setTabFocus(e)})},e.prototype.ngOnDestroy=function(){this._destroyed.next(),this._destroyed.complete()},e.prototype._onContentChanges=function(){this._updatePagination(),this._alignInkBarToSelectedTab(),this._changeDetectorRef.markForCheck()},e.prototype._updatePagination=function(){this._checkPaginationEnabled(),this._checkScrollingControls(),this._updateTabScrollPosition()},Object.defineProperty(e.prototype,"focusIndex",{get:function(){return this._keyManager?this._keyManager.activeItemIndex:0},set:function(n){this._isValidIndex(n)&&this.focusIndex!==n&&this._keyManager&&this._keyManager.setActiveItem(n)},enumerable:!0,configurable:!0}),e.prototype._isValidIndex=function(n){if(!this._labelWrappers)return!0;var e=this._labelWrappers?this._labelWrappers.toArray()[n]:null;return!!e&&!e.disabled},e.prototype._setTabFocus=function(n){if(this._showPaginationControls&&this._scrollToLabel(n),this._labelWrappers&&this._labelWrappers.length){this._labelWrappers.toArray()[n].focus();var e=this._tabListContainer.nativeElement,l=this._getLayoutDirection();e.scrollLeft="ltr"==l?0:e.scrollWidth-e.offsetWidth}},e.prototype._getLayoutDirection=function(){return this._dir&&"rtl"===this._dir.value?"rtl":"ltr"},e.prototype._updateTabScrollPosition=function(){var n=this.scrollDistance,e="ltr"===this._getLayoutDirection()?-n:n;this._tabList.nativeElement.style.transform="translateX("+e+"px)"},Object.defineProperty(e.prototype,"scrollDistance",{get:function(){return this._scrollDistance},set:function(n){this._scrollDistance=Math.max(0,Math.min(this._getMaxScrollDistance(),n)),this._scrollDistanceChanged=!0,this._checkScrollingControls()},enumerable:!0,configurable:!0}),e.prototype._scrollHeader=function(n){this.scrollDistance+=("before"==n?-1:1)*this._tabListContainer.nativeElement.offsetWidth/3},e.prototype._scrollToLabel=function(n){var e=this._labelWrappers?this._labelWrappers.toArray()[n]:null;if(e){var l,t,i=this._tabListContainer.nativeElement.offsetWidth;"ltr"==this._getLayoutDirection()?t=(l=e.getOffsetLeft())+e.getOffsetWidth():l=(t=this._tabList.nativeElement.offsetWidth-e.getOffsetLeft())-e.getOffsetWidth();var o=this.scrollDistance,a=this.scrollDistance+i;l<o?this.scrollDistance-=o-l+60:t>a&&(this.scrollDistance+=t-a+60)}},e.prototype._checkPaginationEnabled=function(){var n=this._tabList.nativeElement.scrollWidth>this._elementRef.nativeElement.offsetWidth;n||(this.scrollDistance=0),n!==this._showPaginationControls&&this._changeDetectorRef.markForCheck(),this._showPaginationControls=n},e.prototype._checkScrollingControls=function(){this._disableScrollBefore=0==this.scrollDistance,this._disableScrollAfter=this.scrollDistance==this._getMaxScrollDistance(),this._changeDetectorRef.markForCheck()},e.prototype._getMaxScrollDistance=function(){return this._tabList.nativeElement.scrollWidth-this._tabListContainer.nativeElement.offsetWidth||0},e.prototype._alignInkBarToSelectedTab=function(){var n=this._labelWrappers&&this._labelWrappers.length?this._labelWrappers.toArray()[this.selectedIndex].elementRef.nativeElement:null;this._inkBar.alignToElement(n)},e}(Object(St.E)(function(){})),Pi=0,Ti=function(n){function e(e,l){var t=n.call(this,e)||this;return t._changeDetectorRef=l,t._indexToSelect=0,t._tabBodyWrapperHeight=0,t._tabsSubscription=bi.a.EMPTY,t._tabLabelSubscription=bi.a.EMPTY,t._dynamicHeight=!1,t._selectedIndex=null,t.headerPosition="above",t.selectedIndexChange=new o.EventEmitter,t.focusChange=new o.EventEmitter,t.animationDone=new o.EventEmitter,t.selectedTabChange=new o.EventEmitter(!0),t._groupId=Pi++,t}return Object(r.__extends)(e,n),Object.defineProperty(e.prototype,"dynamicHeight",{get:function(){return this._dynamicHeight},set:function(n){this._dynamicHeight=Object(it.c)(n)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectedIndex",{get:function(){return this._selectedIndex},set:function(n){this._indexToSelect=Object(it.e)(n,null)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"backgroundColor",{get:function(){return this._backgroundColor},set:function(n){var e=this._elementRef.nativeElement;e.classList.remove("mat-background-"+this.backgroundColor),n&&e.classList.add("mat-background-"+n),this._backgroundColor=n},enumerable:!0,configurable:!0}),e.prototype.ngAfterContentChecked=function(){var n=this,e=this._indexToSelect=this._clampTabIndex(this._indexToSelect);if(this._selectedIndex!=e&&null!=this._selectedIndex){var l=this._createChangeEvent(e);this.selectedTabChange.emit(l),Promise.resolve().then(function(){return n.selectedIndexChange.emit(e)})}this._tabs.forEach(function(l,t){l.position=t-e,l.isActive=t===e,null==n._selectedIndex||0!=l.position||l.origin||(l.origin=e-n._selectedIndex)}),this._selectedIndex!==e&&(this._selectedIndex=e,this._changeDetectorRef.markForCheck())},e.prototype.ngAfterContentInit=function(){var n=this;this._subscribeToTabLabels(),this._tabsSubscription=this._tabs.changes.subscribe(function(){if(n._clampTabIndex(n._indexToSelect)===n._selectedIndex)for(var e=n._tabs.toArray(),l=0;l<e.length;l++)if(e[l].isActive){n._indexToSelect=n._selectedIndex=l;break}n._subscribeToTabLabels(),n._changeDetectorRef.markForCheck()})},e.prototype.ngOnDestroy=function(){this._tabsSubscription.unsubscribe(),this._tabLabelSubscription.unsubscribe()},e.prototype.realignInkBar=function(){this._tabHeader&&this._tabHeader._alignInkBarToSelectedTab()},e.prototype._focusChanged=function(n){this.focusChange.emit(this._createChangeEvent(n))},e.prototype._createChangeEvent=function(n){var e=new function(){};return e.index=n,this._tabs&&this._tabs.length&&(e.tab=this._tabs.toArray()[n]),e},e.prototype._subscribeToTabLabels=function(){var n=this;this._tabLabelSubscription&&this._tabLabelSubscription.unsubscribe(),this._tabLabelSubscription=yi.a.apply(void 0,this._tabs.map(function(n){return n._disableChange}).concat(this._tabs.map(function(n){return n._labelChange}))).subscribe(function(){n._changeDetectorRef.markForCheck()})},e.prototype._clampTabIndex=function(n){return Math.min(this._tabs.length-1,Math.max(n||0,0))},e.prototype._getTabLabelId=function(n){return"mat-tab-label-"+this._groupId+"-"+n},e.prototype._getTabContentId=function(n){return"mat-tab-content-"+this._groupId+"-"+n},e.prototype._setTabBodyWrapperHeight=function(n){if(this._dynamicHeight&&this._tabBodyWrapperHeight){var e=this._tabBodyWrapper.nativeElement;e.style.height=this._tabBodyWrapperHeight+"px",this._tabBodyWrapper.nativeElement.offsetHeight&&(e.style.height=n+"px")}},e.prototype._removeTabBodyWrapperHeight=function(){this._tabBodyWrapperHeight=this._tabBodyWrapper.nativeElement.clientHeight,this._tabBodyWrapper.nativeElement.style.height="",this.animationDone.emit()},e.prototype._handleClick=function(n,e,l){n.disabled||(this.selectedIndex=e.focusIndex=l)},e.prototype._getTabIndex=function(n,e){return n.disabled?null:this.selectedIndex===e?0:-1},e}(Object(St.D)(Object(St.E)(function(n){this._elementRef=n}),"primary")),Ai=function(){},Di=l("wFw1"),Fi=o["\u0275crt"]({encapsulation:2,styles:[".mat-tab-group{display:flex;flex-direction:column}.mat-tab-group.mat-tab-group-inverted-header{flex-direction:column-reverse}.mat-tab-label{height:48px;padding:0 24px;cursor:pointer;box-sizing:border-box;opacity:.6;min-width:160px;text-align:center;display:inline-flex;justify-content:center;align-items:center;white-space:nowrap;position:relative}.mat-tab-label:focus{outline:0}.mat-tab-label:focus:not(.mat-tab-disabled){opacity:1}@media screen and (-ms-high-contrast:active){.mat-tab-label:focus{outline:dotted 2px}}.mat-tab-label.mat-tab-disabled{cursor:default}@media screen and (-ms-high-contrast:active){.mat-tab-label.mat-tab-disabled{opacity:.5}}.mat-tab-label .mat-tab-label-content{display:inline-flex;justify-content:center;align-items:center;white-space:nowrap}@media screen and (-ms-high-contrast:active){.mat-tab-label{opacity:1}}@media (max-width:599px){.mat-tab-label{padding:0 12px}}@media (max-width:959px){.mat-tab-label{padding:0 12px}}.mat-tab-group[mat-stretch-tabs] .mat-tab-label{flex-basis:0;flex-grow:1}.mat-tab-body-wrapper{position:relative;overflow:hidden;display:flex;transition:height .5s cubic-bezier(.35,0,.25,1)}.mat-tab-body{top:0;left:0;right:0;bottom:0;position:absolute;display:block;overflow:hidden;flex-basis:100%}.mat-tab-body.mat-tab-body-active{position:relative;overflow-x:hidden;overflow-y:auto;z-index:1;flex-grow:1}.mat-tab-group.mat-tab-group-dynamic-height .mat-tab-body.mat-tab-body-active{overflow-y:hidden}"],data:{}});function ji(n){return o["\u0275vid"](0,[(n()(),o["\u0275and"](0,null,null,0))],null,null)}function Ei(n){return o["\u0275vid"](0,[(n()(),o["\u0275and"](16777216,null,null,1,null,ji)),o["\u0275did"](1,212992,null,0,ut.c,[o.ComponentFactoryResolver,o.ViewContainerRef],{portal:[0,"portal"]},null),(n()(),o["\u0275and"](0,null,null,0))],function(n,e){n(e,1,0,e.parent.context.$implicit.templateLabel)},null)}function Mi(n){return o["\u0275vid"](0,[(n()(),o["\u0275ted"](0,null,["",""]))],null,function(n,e){n(e,0,0,e.parent.context.$implicit.textLabel)})}function Ni(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,8,"div",[["cdkMonitorElementFocus",""],["class","mat-tab-label mat-ripple"],["mat-ripple",""],["matTabLabelWrapper",""],["role","tab"]],[[8,"id",0],[1,"tabIndex",0],[1,"aria-posinset",0],[1,"aria-setsize",0],[1,"aria-controls",0],[1,"aria-selected",0],[1,"aria-label",0],[1,"aria-labelledby",0],[2,"mat-tab-label-active",null],[2,"mat-ripple-unbounded",null],[2,"mat-tab-disabled",null],[1,"aria-disabled",0]],[[null,"click"]],function(n,e,l){var t=!0;return"click"===e&&(t=!1!==n.component._handleClick(n.context.$implicit,o["\u0275nov"](n.parent,3),n.context.index)&&t),t},null,null)),o["\u0275did"](1,212992,null,0,St.w,[o.ElementRef,o.NgZone,Ct.a,[2,St.m],[2,Di.a]],{disabled:[0,"disabled"]},null),o["\u0275did"](2,147456,null,0,Rt.d,[o.ElementRef,Rt.f],null,null),o["\u0275did"](3,16384,[[3,4]],0,Ii,[o.ElementRef],{disabled:[0,"disabled"]},null),(n()(),o["\u0275eld"](4,0,null,null,4,"div",[["class","mat-tab-label-content"]],null,null,null,null,null)),(n()(),o["\u0275and"](16777216,null,null,1,null,Ei)),o["\u0275did"](6,16384,null,0,yt.NgIf,[o.ViewContainerRef,o.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),o["\u0275and"](16777216,null,null,1,null,Mi)),o["\u0275did"](8,16384,null,0,yt.NgIf,[o.ViewContainerRef,o.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(n,e){n(e,1,0,e.context.$implicit.disabled||e.component.disableRipple),n(e,3,0,e.context.$implicit.disabled),n(e,6,0,e.context.$implicit.templateLabel),n(e,8,0,!e.context.$implicit.templateLabel)},function(n,e){var l=e.component;n(e,0,1,[l._getTabLabelId(e.context.index),l._getTabIndex(e.context.$implicit,e.context.index),e.context.index+1,l._tabs.length,l._getTabContentId(e.context.index),l.selectedIndex==e.context.index,e.context.$implicit.ariaLabel||null,!e.context.$implicit.ariaLabel&&e.context.$implicit.ariaLabelledby?e.context.$implicit.ariaLabelledby:null,l.selectedIndex==e.context.index,o["\u0275nov"](e,1).unbounded,o["\u0275nov"](e,3).disabled,!!o["\u0275nov"](e,3).disabled])})}function Li(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,1,"mat-tab-body",[["class","mat-tab-body"],["role","tabpanel"]],[[8,"id",0],[1,"aria-labelledby",0],[2,"mat-tab-body-active",null]],[[null,"_onCentered"],[null,"_onCentering"]],function(n,e,l){var t=!0,i=n.component;return"_onCentered"===e&&(t=!1!==i._removeTabBodyWrapperHeight()&&t),"_onCentering"===e&&(t=!1!==i._setTabBodyWrapperHeight(l)&&t),t},Ui,qi)),o["\u0275did"](1,245760,null,0,ki,[o.ElementRef,[2,wt.b],o.ChangeDetectorRef],{_content:[0,"_content"],origin:[1,"origin"],position:[2,"position"]},{_onCentering:"_onCentering",_onCentered:"_onCentered"})],function(n,e){n(e,1,0,e.context.$implicit.content,e.context.$implicit.origin,e.context.$implicit.position)},function(n,e){var l=e.component;n(e,0,0,l._getTabContentId(e.context.index),l._getTabLabelId(e.context.index),l.selectedIndex==e.context.index)})}function $i(n){return o["\u0275vid"](2,[o["\u0275qud"](402653184,1,{_tabBodyWrapper:0}),o["\u0275qud"](402653184,2,{_tabHeader:0}),(n()(),o["\u0275eld"](2,0,null,null,4,"mat-tab-header",[["class","mat-tab-header"]],[[2,"mat-tab-header-pagination-controls-enabled",null],[2,"mat-tab-header-rtl",null]],[[null,"indexFocused"],[null,"selectFocusedIndex"]],function(n,e,l){var t=!0,i=n.component;return"indexFocused"===e&&(t=!1!==i._focusChanged(l)&&t),"selectFocusedIndex"===e&&(t=!1!==(i.selectedIndex=l)&&t),t},Hi,zi)),o["\u0275did"](3,3325952,[[2,4],["tabHeader",4]],1,Oi,[o.ElementRef,o.ChangeDetectorRef,xt.e,[2,wt.b]],{disableRipple:[0,"disableRipple"],selectedIndex:[1,"selectedIndex"]},{selectFocusedIndex:"selectFocusedIndex",indexFocused:"indexFocused"}),o["\u0275qud"](603979776,3,{_labelWrappers:1}),(n()(),o["\u0275and"](16777216,null,0,1,null,Ni)),o["\u0275did"](6,802816,null,0,yt.NgForOf,[o.ViewContainerRef,o.TemplateRef,o.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(n()(),o["\u0275eld"](7,0,[[1,0],["tabBodyWrapper",1]],null,2,"div",[["class","mat-tab-body-wrapper"]],null,null,null,null,null)),(n()(),o["\u0275and"](16777216,null,null,1,null,Li)),o["\u0275did"](9,802816,null,0,yt.NgForOf,[o.ViewContainerRef,o.TemplateRef,o.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],function(n,e){var l=e.component;n(e,3,0,l.disableRipple,l.selectedIndex),n(e,6,0,l._tabs),n(e,9,0,l._tabs)},function(n,e){n(e,2,0,o["\u0275nov"](e,3)._showPaginationControls,"rtl"==o["\u0275nov"](e,3)._getLayoutDirection())})}var qi=o["\u0275crt"]({encapsulation:2,styles:[".mat-tab-body-content{height:100%;overflow:auto}.mat-tab-group-dynamic-height .mat-tab-body-content{overflow:hidden}"],data:{animation:[{type:7,name:"translateTab",definitions:[{type:0,name:"center, void, left-origin-center, right-origin-center",styles:{type:6,styles:{transform:"none"},offset:null},options:void 0},{type:0,name:"left",styles:{type:6,styles:{transform:"translate3d(-100%, 0, 0)",minHeight:"1px"},offset:null},options:void 0},{type:0,name:"right",styles:{type:6,styles:{transform:"translate3d(100%, 0, 0)",minHeight:"1px"},offset:null},options:void 0},{type:1,expr:"* => left, * => right, left => center, right => center",animation:{type:4,styles:null,timings:"500ms cubic-bezier(0.35, 0, 0.25, 1)"},options:null},{type:1,expr:"void => left-origin-center",animation:[{type:6,styles:{transform:"translate3d(-100%, 0, 0)"},offset:null},{type:4,styles:null,timings:"500ms cubic-bezier(0.35, 0, 0.25, 1)"}],options:null},{type:1,expr:"void => right-origin-center",animation:[{type:6,styles:{transform:"translate3d(100%, 0, 0)"},offset:null},{type:4,styles:null,timings:"500ms cubic-bezier(0.35, 0, 0.25, 1)"}],options:null}],options:{}}]}});function Vi(n){return o["\u0275vid"](0,[(n()(),o["\u0275and"](0,null,null,0))],null,null)}function Ui(n){return o["\u0275vid"](2,[o["\u0275qud"](402653184,1,{_portalHost:0}),(n()(),o["\u0275eld"](1,0,[["content",1]],null,2,"div",[["class","mat-tab-body-content"]],[[24,"@translateTab",0]],[[null,"@translateTab.start"],[null,"@translateTab.done"]],function(n,e,l){var t=!0,i=n.component;return"@translateTab.start"===e&&(t=!1!==i._onTranslateTabStarted(l)&&t),"@translateTab.done"===e&&(t=!1!==i._onTranslateTabComplete(l)&&t),t},null,null)),(n()(),o["\u0275and"](16777216,null,null,1,null,Vi)),o["\u0275did"](3,212992,null,0,Si,[o.ComponentFactoryResolver,o.ViewContainerRef,ki],null,null)],function(n,e){n(e,3,0)},function(n,e){n(e,1,0,e.component._position)})}var zi=o["\u0275crt"]({encapsulation:2,styles:[".mat-tab-header{display:flex;overflow:hidden;position:relative;flex-shrink:0}.mat-tab-label{height:48px;padding:0 24px;cursor:pointer;box-sizing:border-box;opacity:.6;min-width:160px;text-align:center;display:inline-flex;justify-content:center;align-items:center;white-space:nowrap;position:relative}.mat-tab-label:focus{outline:0}.mat-tab-label:focus:not(.mat-tab-disabled){opacity:1}@media screen and (-ms-high-contrast:active){.mat-tab-label:focus{outline:dotted 2px}}.mat-tab-label.mat-tab-disabled{cursor:default}@media screen and (-ms-high-contrast:active){.mat-tab-label.mat-tab-disabled{opacity:.5}}.mat-tab-label .mat-tab-label-content{display:inline-flex;justify-content:center;align-items:center;white-space:nowrap}@media screen and (-ms-high-contrast:active){.mat-tab-label{opacity:1}}@media (max-width:599px){.mat-tab-label{min-width:72px}}.mat-ink-bar{position:absolute;bottom:0;height:2px;transition:.5s cubic-bezier(.35,0,.25,1)}.mat-tab-group-inverted-header .mat-ink-bar{bottom:auto;top:0}@media screen and (-ms-high-contrast:active){.mat-ink-bar{outline:solid 2px;height:0}}.mat-tab-header-pagination{position:relative;display:none;justify-content:center;align-items:center;min-width:32px;cursor:pointer;z-index:2}.mat-tab-header-pagination-controls-enabled .mat-tab-header-pagination{display:flex}.mat-tab-header-pagination-before,.mat-tab-header-rtl .mat-tab-header-pagination-after{padding-left:4px}.mat-tab-header-pagination-before .mat-tab-header-pagination-chevron,.mat-tab-header-rtl .mat-tab-header-pagination-after .mat-tab-header-pagination-chevron{transform:rotate(-135deg)}.mat-tab-header-pagination-after,.mat-tab-header-rtl .mat-tab-header-pagination-before{padding-right:4px}.mat-tab-header-pagination-after .mat-tab-header-pagination-chevron,.mat-tab-header-rtl .mat-tab-header-pagination-before .mat-tab-header-pagination-chevron{transform:rotate(45deg)}.mat-tab-header-pagination-chevron{border-style:solid;border-width:2px 2px 0 0;content:'';height:8px;width:8px}.mat-tab-header-pagination-disabled{box-shadow:none;cursor:default}.mat-tab-label-container{display:flex;flex-grow:1;overflow:hidden;z-index:1}.mat-tab-list{flex-grow:1;position:relative;transition:transform .5s cubic-bezier(.35,0,.25,1)}.mat-tab-labels{display:flex}"],data:{}});function Hi(n){return o["\u0275vid"](2,[o["\u0275qud"](402653184,1,{_inkBar:0}),o["\u0275qud"](402653184,2,{_tabListContainer:0}),o["\u0275qud"](402653184,3,{_tabList:0}),(n()(),o["\u0275eld"](3,0,null,null,2,"div",[["aria-hidden","true"],["class","mat-tab-header-pagination mat-tab-header-pagination-before mat-elevation-z4 mat-ripple"],["mat-ripple",""]],[[2,"mat-tab-header-pagination-disabled",null],[2,"mat-ripple-unbounded",null]],[[null,"click"]],function(n,e,l){var t=!0;return"click"===e&&(t=!1!==n.component._scrollHeader("before")&&t),t},null,null)),o["\u0275did"](4,212992,null,0,St.w,[o.ElementRef,o.NgZone,Ct.a,[2,St.m],[2,Di.a]],{disabled:[0,"disabled"]},null),(n()(),o["\u0275eld"](5,0,null,null,0,"div",[["class","mat-tab-header-pagination-chevron"]],null,null,null,null,null)),(n()(),o["\u0275eld"](6,0,[[2,0],["tabListContainer",1]],null,6,"div",[["class","mat-tab-label-container"]],null,[[null,"keydown"]],function(n,e,l){var t=!0;return"keydown"===e&&(t=!1!==n.component._handleKeydown(l)&&t),t},null,null)),(n()(),o["\u0275eld"](7,0,[[3,0],["tabList",1]],null,5,"div",[["class","mat-tab-list"],["role","tablist"]],null,[[null,"cdkObserveContent"]],function(n,e,l){var t=!0;return"cdkObserveContent"===e&&(t=!1!==n.component._onContentChanges()&&t),t},null,null)),o["\u0275did"](8,1196032,null,0,_t.a,[_t.b,o.ElementRef,o.NgZone],null,{event:"cdkObserveContent"}),(n()(),o["\u0275eld"](9,0,null,null,1,"div",[["class","mat-tab-labels"]],null,null,null,null,null)),o["\u0275ncd"](null,0),(n()(),o["\u0275eld"](11,0,null,null,1,"mat-ink-bar",[["class","mat-ink-bar"]],null,null,null,null,null)),o["\u0275did"](12,16384,[[1,4]],0,Ri,[o.ElementRef,o.NgZone,Ci],null,null),(n()(),o["\u0275eld"](13,0,null,null,2,"div",[["aria-hidden","true"],["class","mat-tab-header-pagination mat-tab-header-pagination-after mat-elevation-z4 mat-ripple"],["mat-ripple",""]],[[2,"mat-tab-header-pagination-disabled",null],[2,"mat-ripple-unbounded",null]],[[null,"click"]],function(n,e,l){var t=!0;return"click"===e&&(t=!1!==n.component._scrollHeader("after")&&t),t},null,null)),o["\u0275did"](14,212992,null,0,St.w,[o.ElementRef,o.NgZone,Ct.a,[2,St.m],[2,Di.a]],{disabled:[0,"disabled"]},null),(n()(),o["\u0275eld"](15,0,null,null,0,"div",[["class","mat-tab-header-pagination-chevron"]],null,null,null,null,null))],function(n,e){var l=e.component;n(e,4,0,l._disableScrollBefore||l.disableRipple),n(e,14,0,l._disableScrollAfter||l.disableRipple)},function(n,e){var l=e.component;n(e,3,0,l._disableScrollBefore,o["\u0275nov"](e,4).unbounded),n(e,13,0,l._disableScrollAfter,o["\u0275nov"](e,14).unbounded)})}var Bi=o["\u0275crt"]({encapsulation:2,styles:[],data:{}});function Wi(n){return o["\u0275vid"](0,[o["\u0275ncd"](null,0),(n()(),o["\u0275and"](0,null,null,0))],null,null)}function Zi(n){return o["\u0275vid"](2,[o["\u0275qud"](402653184,1,{_implicitContent:0}),(n()(),o["\u0275and"](0,[[1,2]],null,0,null,Wi))],null,null)}var Gi=l("t/Na"),Yi=l("VNr4"),Xi=l("XlPw"),Qi=l("xMyE"),Ki=l("FFOo"),Ji=function(){function n(n){this.callback=n}return n.prototype.call=function(n,e){return e.subscribe(new no(n,this.callback))},n}(),no=function(n){function e(e,l){var t=n.call(this,e)||this;return t.add(new bi.a(l)),t}return r.__extends(e,n),e}(Ki.a),eo=l("S1nX"),lo=l("9Z1F");function to(n){return Error('Unable to find icon with the name "'+n+'"')}function io(n){return Error("The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was \""+n+'".')}function oo(n){return Error("The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was \""+n+'".')}var ao=function(n){n.nodeName?this.svgElement=n:this.url=n},ro=function(){function n(n,e,l){this._httpClient=n,this._sanitizer=e,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._defaultFontSetClass="material-icons",this._document=l}return n.prototype.addSvgIcon=function(n,e){return this.addSvgIconInNamespace("",n,e)},n.prototype.addSvgIconLiteral=function(n,e){return this.addSvgIconLiteralInNamespace("",n,e)},n.prototype.addSvgIconInNamespace=function(n,e,l){return this._addSvgIconConfig(n,e,new ao(l))},n.prototype.addSvgIconLiteralInNamespace=function(n,e,l){var t=this._sanitizer.sanitize(o.SecurityContext.HTML,l);if(!t)throw oo(l);var i=this._createSvgElementForSingleIcon(t);return this._addSvgIconConfig(n,e,new ao(i))},n.prototype.addSvgIconSet=function(n){return this.addSvgIconSetInNamespace("",n)},n.prototype.addSvgIconSetLiteral=function(n){return this.addSvgIconSetLiteralInNamespace("",n)},n.prototype.addSvgIconSetInNamespace=function(n,e){return this._addSvgIconSetConfig(n,new ao(e))},n.prototype.addSvgIconSetLiteralInNamespace=function(n,e){var l=this._sanitizer.sanitize(o.SecurityContext.HTML,e);if(!l)throw oo(e);var t=this._svgElementFromString(l);return this._addSvgIconSetConfig(n,new ao(t))},n.prototype.registerFontClassAlias=function(n,e){return void 0===e&&(e=n),this._fontCssClassesByAlias.set(n,e),this},n.prototype.classNameForFontAlias=function(n){return this._fontCssClassesByAlias.get(n)||n},n.prototype.setDefaultFontSetClass=function(n){return this._defaultFontSetClass=n,this},n.prototype.getDefaultFontSetClass=function(){return this._defaultFontSetClass},n.prototype.getSvgIconFromUrl=function(n){var e=this,l=this._sanitizer.sanitize(o.SecurityContext.RESOURCE_URL,n);if(!l)throw io(n);var t=this._cachedIconsByUrl.get(l);return t?Object(_i.a)(uo(t)):this._loadSvgIconFromConfig(new ao(n)).pipe(Object(Qi.a)(function(n){return e._cachedIconsByUrl.set(l,n)}),Object(c.a)(function(n){return uo(n)}))},n.prototype.getNamedSvgIcon=function(n,e){void 0===e&&(e="");var l=so(e,n),t=this._svgIconConfigs.get(l);if(t)return this._getSvgFromConfig(t);var i=this._iconSetConfigs.get(e);return i?this._getSvgFromIconSetConfigs(n,i):Object(Xi.a)(to(l))},n.prototype._getSvgFromConfig=function(n){return n.svgElement?Object(_i.a)(uo(n.svgElement)):this._loadSvgIconFromConfig(n).pipe(Object(Qi.a)(function(e){return n.svgElement=e}),Object(c.a)(function(n){return uo(n)}))},n.prototype._getSvgFromIconSetConfigs=function(n,e){var l=this,t=this._extractIconWithNameFromAnySet(n,e);if(t)return Object(_i.a)(t);var i=e.filter(function(n){return!n.svgElement}).map(function(n){return l._loadSvgIconSetFromConfig(n).pipe(Object(lo.a)(function(e){var t=l._sanitizer.sanitize(o.SecurityContext.RESOURCE_URL,n.url);return console.error("Loading icon set URL: "+t+" failed: "+e.message),Object(_i.a)(null)}))});return Object(Yi.a)(i).pipe(Object(c.a)(function(){var t=l._extractIconWithNameFromAnySet(n,e);if(!t)throw to(n);return t}))},n.prototype._extractIconWithNameFromAnySet=function(n,e){for(var l=e.length-1;l>=0;l--){var t=e[l];if(t.svgElement){var i=this._extractSvgIconFromSet(t.svgElement,n);if(i)return i}}return null},n.prototype._loadSvgIconFromConfig=function(n){var e=this;return this._fetchUrl(n.url).pipe(Object(c.a)(function(n){return e._createSvgElementForSingleIcon(n)}))},n.prototype._loadSvgIconSetFromConfig=function(n){var e=this;return n.svgElement?Object(_i.a)(n.svgElement):this._fetchUrl(n.url).pipe(Object(c.a)(function(l){return n.svgElement||(n.svgElement=e._svgElementFromString(l)),n.svgElement}))},n.prototype._createSvgElementForSingleIcon=function(n){var e=this._svgElementFromString(n);return this._setSvgAttributes(e),e},n.prototype._extractSvgIconFromSet=function(n,e){var l=n.querySelector("#"+e);if(!l)return null;var t=l.cloneNode(!0);if(t.removeAttribute("id"),"svg"===t.nodeName.toLowerCase())return this._setSvgAttributes(t);if("symbol"===t.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(t));var i=this._svgElementFromString("<svg></svg>");return i.appendChild(t),this._setSvgAttributes(i)},n.prototype._svgElementFromString=function(n){var e=this._document.createElement("DIV");e.innerHTML=n;var l=e.querySelector("svg");if(!l)throw Error("<svg> tag not found");return l},n.prototype._toSvgElement=function(n){for(var e=this._svgElementFromString("<svg></svg>"),l=0;l<n.childNodes.length;l++)n.childNodes[l].nodeType===this._document.ELEMENT_NODE&&e.appendChild(n.childNodes[l].cloneNode(!0));return e},n.prototype._setSvgAttributes=function(n){return n.setAttribute("fit",""),n.setAttribute("height","100%"),n.setAttribute("width","100%"),n.setAttribute("preserveAspectRatio","xMidYMid meet"),n.setAttribute("focusable","false"),n},n.prototype._fetchUrl=function(n){var e=this;if(!this._httpClient)throw Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.");if(null==n)throw Error('Cannot fetch icon from URL "'+n+'".');var l=this._sanitizer.sanitize(o.SecurityContext.RESOURCE_URL,n);if(!l)throw io(n);var t=this._inProgressUrlFetches.get(l);if(t)return t;var i,a=this._httpClient.get(l,{responseType:"text"}).pipe((i=function(){return e._inProgressUrlFetches.delete(l)},function(n){return n.lift(new Ji(i))}),Object(eo.a)());return this._inProgressUrlFetches.set(l,a),a},n.prototype._addSvgIconConfig=function(n,e,l){return this._svgIconConfigs.set(so(n,e),l),this},n.prototype._addSvgIconSetConfig=function(n,e){var l=this._iconSetConfigs.get(n);return l?l.push(e):this._iconSetConfigs.set(n,[e]),this},n.ngInjectableDef=Object(o.defineInjectable)({factory:function(){return new n(Object(o.inject)(Gi.c,8),Object(o.inject)(qt.c),Object(o.inject)(yt.DOCUMENT,8))},token:n,providedIn:"root"}),n}();function uo(n){return n.cloneNode(!0)}function so(n,e){return n+":"+e}var co=function(n){function e(e,l,t){var i=n.call(this,e)||this;return i._iconRegistry=l,i._inline=!1,t||e.nativeElement.setAttribute("aria-hidden","true"),i}return Object(r.__extends)(e,n),Object.defineProperty(e.prototype,"inline",{get:function(){return this._inline},set:function(n){this._inline=Object(it.c)(n)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fontSet",{get:function(){return this._fontSet},set:function(n){this._fontSet=this._cleanupFontValue(n)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fontIcon",{get:function(){return this._fontIcon},set:function(n){this._fontIcon=this._cleanupFontValue(n)},enumerable:!0,configurable:!0}),e.prototype._splitIconName=function(n){if(!n)return["",""];var e=n.split(":");switch(e.length){case 1:return["",e[0]];case 2:return e;default:throw Error('Invalid icon name: "'+n+'"')}},e.prototype.ngOnChanges=function(n){var e=this;if(n.svgIcon)if(this.svgIcon){var l=this._splitIconName(this.svgIcon);this._iconRegistry.getNamedSvgIcon(l[1],l[0]).pipe(Object(Tl.a)(1)).subscribe(function(n){return e._setSvgElement(n)},function(n){return console.log("Error retrieving icon: "+n.message)})}else this._clearSvgElement();this._usingFontIcon()&&this._updateFontIconClasses()},e.prototype.ngOnInit=function(){this._usingFontIcon()&&this._updateFontIconClasses()},e.prototype._usingFontIcon=function(){return!this.svgIcon},e.prototype._setSvgElement=function(n){this._clearSvgElement();for(var e=n.querySelectorAll("style"),l=0;l<e.length;l++)e[l].textContent+=" ";this._elementRef.nativeElement.appendChild(n)},e.prototype._clearSvgElement=function(){for(var n=this._elementRef.nativeElement,e=n.childNodes.length;e--;){var l=n.childNodes[e];1===l.nodeType&&"svg"!==l.nodeName.toLowerCase()||n.removeChild(l)}},e.prototype._updateFontIconClasses=function(){if(this._usingFontIcon()){var n=this._elementRef.nativeElement,e=this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet):this._iconRegistry.getDefaultFontSetClass();e!=this._previousFontSetClass&&(this._previousFontSetClass&&n.classList.remove(this._previousFontSetClass),e&&n.classList.add(e),this._previousFontSetClass=e),this.fontIcon!=this._previousFontIconClass&&(this._previousFontIconClass&&n.classList.remove(this._previousFontIconClass),this.fontIcon&&n.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}},e.prototype._cleanupFontValue=function(n){return"string"==typeof n?n.trim().split(" ")[0]:n},e}(Object(St.D)(function(n){this._elementRef=n})),po=function(){},fo=o["\u0275crt"]({encapsulation:2,styles:[".mat-icon{background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1,1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}"],data:{}});function mo(n){return o["\u0275vid"](2,[o["\u0275ncd"](null,0)],null,null)}var ho=l("bujt"),go=l("UodH"),vo=l("dJrM"),bo=l("seP3"),yo=l("b716"),_o=l("/VYK"),wo=function(){function n(n){this.store=n,this.reason="",this.allianceTargetName="",this.napTargetName="",this.warTargetName="",this.alliances=[],this.wars=[],this.naps=[],this.diplomacyStatus=q.DiplomacyStatus}return n.prototype.ngOnChanges=function(){var n=this.alliance.diplomacyOrigin.concat(this.alliance.diplomacyTarget).sort(function(n,e){return+n.updatedAt-+e.updatedAt}).reduce(function(n,e){return n[q.DiplomacyType[e.type]].push(e),n},{war:[],alliance:[],nap:[]});this.alliances=n.alliance,this.wars=n.war,this.naps=n.nap},n.prototype.declareWar=function(){this.store.dispatch(new se({targetName:this.warTargetName,reason:this.reason})),this.warTargetName="",this.reason=""},n.prototype.proposeAlliance=function(){this.store.dispatch(new Fn(this.allianceTargetName)),this.allianceTargetName=""},n.prototype.cancelAlliance=function(n){this.store.dispatch(new Bn(n))},n.prototype.rejectAlliance=function(n){this.store.dispatch(new Mn(n))},n.prototype.acceptAlliance=function(n){this.store.dispatch(new $n(n))},n.prototype.endAlliance=function(n){this.store.dispatch(new Un(n))},n.prototype.proposeNap=function(){this.store.dispatch(new Gn(this.napTargetName)),this.napTargetName=""},n.prototype.cancelNap=function(n){this.store.dispatch(new ne(n))},n.prototype.rejectNap=function(n){this.store.dispatch(new Qn(n))},n.prototype.acceptNap=function(n){this.store.dispatch(new te(n))},n.prototype.endNap=function(n){this.store.dispatch(new ae(n))},n.prototype.negotiatePeace=function(n){},n}(),Co=o["\u0275crt"]({encapsulation:0,styles:[[""]],data:{}});function Ro(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,4,"span",[],null,null,null,null,null)),(n()(),o["\u0275ted"](-1,null,[" pending request "])),(n()(),o["\u0275eld"](2,0,null,null,2,"mat-icon",[["class","mat-icon"],["role","img"]],[[2,"mat-icon-inline",null]],null,null,mo,fo)),o["\u0275did"](3,638976,null,0,co,[o.ElementRef,ro,[8,null]],null,null),(n()(),o["\u0275ted"](-1,0,["warning"]))],function(n,e){n(e,3,0)},function(n,e){n(e,2,0,o["\u0275nov"](e,3).inline)})}function xo(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,2,"button",[["color","warn"],["mat-raised-button",""]],[[8,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"]],function(n,e,l){var t=!0;return"click"===e&&(t=!1!==n.component.cancelAlliance(n.parent.parent.context.$implicit.id)&&t),t},ho.b,ho.a)),o["\u0275did"](1,180224,null,0,go.b,[o.ElementRef,Ct.a,Rt.f,[2,Di.a]],{color:[0,"color"]},null),(n()(),o["\u0275ted"](-1,0,["Cancel"]))],function(n,e){n(e,1,0,"warn")},function(n,e){n(e,0,0,o["\u0275nov"](e,1).disabled||null,"NoopAnimations"===o["\u0275nov"](e,1)._animationMode)})}function So(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,2,"button",[["color","warn"],["mat-raised-button",""]],[[8,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"]],function(n,e,l){var t=!0;return"click"===e&&(t=!1!==n.component.endAlliance(n.parent.parent.context.$implicit.id)&&t),t},ho.b,ho.a)),o["\u0275did"](1,180224,null,0,go.b,[o.ElementRef,Ct.a,Rt.f,[2,Di.a]],{color:[0,"color"]},null),(n()(),o["\u0275ted"](-1,0,["End"]))],function(n,e){n(e,1,0,"warn")},function(n,e){n(e,0,0,o["\u0275nov"](e,1).disabled||null,"NoopAnimations"===o["\u0275nov"](e,1)._animationMode)})}function ko(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,8,null,null,null,null,null,null,null)),(n()(),o["\u0275eld"](1,0,null,null,1,"span",[],null,null,null,null,null)),(n()(),o["\u0275ted"](2,null,["",""])),(n()(),o["\u0275and"](16777216,null,null,1,null,Ro)),o["\u0275did"](4,16384,null,0,yt.NgIf,[o.ViewContainerRef,o.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),o["\u0275and"](16777216,null,null,1,null,xo)),o["\u0275did"](6,16384,null,0,yt.NgIf,[o.ViewContainerRef,o.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),o["\u0275and"](16777216,null,null,1,null,So)),o["\u0275did"](8,16384,null,0,yt.NgIf,[o.ViewContainerRef,o.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),o["\u0275and"](0,null,null,0))],function(n,e){var l=e.component;n(e,4,0,e.parent.context.$implicit.status===l.diplomacyStatus.pending),n(e,6,0,e.parent.context.$implicit.status===l.diplomacyStatus.pending),n(e,8,0,e.parent.context.$implicit.status===l.diplomacyStatus.ongoing)},function(n,e){n(e,2,0,e.parent.context.$implicit.targetAlliance.name)})}function Io(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,4,"span",[],null,null,null,null,null)),(n()(),o["\u0275ted"](-1,null,[" pending request "])),(n()(),o["\u0275eld"](2,0,null,null,2,"mat-icon",[["class","mat-icon"],["role","img"]],[[2,"mat-icon-inline",null]],null,null,mo,fo)),o["\u0275did"](3,638976,null,0,co,[o.ElementRef,ro,[8,null]],null,null),(n()(),o["\u0275ted"](-1,0,["warning"]))],function(n,e){n(e,3,0)},function(n,e){n(e,2,0,o["\u0275nov"](e,3).inline)})}function Oo(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,2,"button",[["color","primary"],["mat-raised-button",""]],[[8,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"]],function(n,e,l){var t=!0;return"click"===e&&(t=!1!==n.component.acceptAlliance(n.parent.parent.context.$implicit.id)&&t),t},ho.b,ho.a)),o["\u0275did"](1,180224,null,0,go.b,[o.ElementRef,Ct.a,Rt.f,[2,Di.a]],{color:[0,"color"]},null),(n()(),o["\u0275ted"](-1,0,["Accept"]))],function(n,e){n(e,1,0,"primary")},function(n,e){n(e,0,0,o["\u0275nov"](e,1).disabled||null,"NoopAnimations"===o["\u0275nov"](e,1)._animationMode)})}function Po(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,2,"button",[["color","warn"],["mat-raised-button",""]],[[8,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"]],function(n,e,l){var t=!0;return"click"===e&&(t=!1!==n.component.rejectAlliance(n.parent.parent.context.$implicit.id)&&t),t},ho.b,ho.a)),o["\u0275did"](1,180224,null,0,go.b,[o.ElementRef,Ct.a,Rt.f,[2,Di.a]],{color:[0,"color"]},null),(n()(),o["\u0275ted"](-1,0,["Reject"]))],function(n,e){n(e,1,0,"warn")},function(n,e){n(e,0,0,o["\u0275nov"](e,1).disabled||null,"NoopAnimations"===o["\u0275nov"](e,1)._animationMode)})}function To(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,2,"button",[["color","warn"],["mat-raised-button",""]],[[8,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"]],function(n,e,l){var t=!0;return"click"===e&&(t=!1!==n.component.endAlliance(n.parent.parent.context.$implicit.id)&&t),t},ho.b,ho.a)),o["\u0275did"](1,180224,null,0,go.b,[o.ElementRef,Ct.a,Rt.f,[2,Di.a]],{color:[0,"color"]},null),(n()(),o["\u0275ted"](-1,0,["End"]))],function(n,e){n(e,1,0,"warn")},function(n,e){n(e,0,0,o["\u0275nov"](e,1).disabled||null,"NoopAnimations"===o["\u0275nov"](e,1)._animationMode)})}function Ao(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,10,null,null,null,null,null,null,null)),(n()(),o["\u0275eld"](1,0,null,null,1,"span",[],null,null,null,null,null)),(n()(),o["\u0275ted"](2,null,["",""])),(n()(),o["\u0275and"](16777216,null,null,1,null,Io)),o["\u0275did"](4,16384,null,0,yt.NgIf,[o.ViewContainerRef,o.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),o["\u0275and"](16777216,null,null,1,null,Oo)),o["\u0275did"](6,16384,null,0,yt.NgIf,[o.ViewContainerRef,o.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),o["\u0275and"](16777216,null,null,1,null,Po)),o["\u0275did"](8,16384,null,0,yt.NgIf,[o.ViewContainerRef,o.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),o["\u0275and"](16777216,null,null,1,null,To)),o["\u0275did"](10,16384,null,0,yt.NgIf,[o.ViewContainerRef,o.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),o["\u0275and"](0,null,null,0))],function(n,e){var l=e.component;n(e,4,0,e.parent.context.$implicit.status===l.diplomacyStatus.pending),n(e,6,0,e.parent.context.$implicit.status===l.diplomacyStatus.pending),n(e,8,0,e.parent.context.$implicit.status===l.diplomacyStatus.pending),n(e,10,0,e.parent.context.$implicit.status===l.diplomacyStatus.ongoing)},function(n,e){n(e,2,0,e.parent.context.$implicit.originAlliance.name)})}function Do(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,4,"div",[],null,null,null,null,null)),(n()(),o["\u0275and"](16777216,null,null,1,null,ko)),o["\u0275did"](2,16384,null,0,yt.NgIf,[o.ViewContainerRef,o.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),o["\u0275and"](16777216,null,null,1,null,Ao)),o["\u0275did"](4,16384,null,0,yt.NgIf,[o.ViewContainerRef,o.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(n,e){var l=e.component;n(e,2,0,e.context.$implicit.originAllianceId===l.alliance.id),n(e,4,0,e.context.$implicit.targetAllianceId===l.alliance.id)},null)}function Fo(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,1,"div",[],null,null,null,null,null)),(n()(),o["\u0275ted"](-1,null,["None"]))],null,null)}function jo(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,4,"span",[],null,null,null,null,null)),(n()(),o["\u0275ted"](-1,null,[" pending request "])),(n()(),o["\u0275eld"](2,0,null,null,2,"mat-icon",[["class","mat-icon"],["role","img"]],[[2,"mat-icon-inline",null]],null,null,mo,fo)),o["\u0275did"](3,638976,null,0,co,[o.ElementRef,ro,[8,null]],null,null),(n()(),o["\u0275ted"](-1,0,["warning"]))],function(n,e){n(e,3,0)},function(n,e){n(e,2,0,o["\u0275nov"](e,3).inline)})}function Eo(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,2,"button",[["color","warn"],["mat-raised-button",""]],[[8,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"]],function(n,e,l){var t=!0;return"click"===e&&(t=!1!==n.component.cancelNap(n.parent.parent.context.$implicit.id)&&t),t},ho.b,ho.a)),o["\u0275did"](1,180224,null,0,go.b,[o.ElementRef,Ct.a,Rt.f,[2,Di.a]],{color:[0,"color"]},null),(n()(),o["\u0275ted"](-1,0,["Cancel"]))],function(n,e){n(e,1,0,"warn")},function(n,e){n(e,0,0,o["\u0275nov"](e,1).disabled||null,"NoopAnimations"===o["\u0275nov"](e,1)._animationMode)})}function Mo(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,2,"button",[["color","warn"],["mat-raised-button",""]],[[8,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"]],function(n,e,l){var t=!0;return"click"===e&&(t=!1!==n.component.endNap(n.parent.parent.context.$implicit.id)&&t),t},ho.b,ho.a)),o["\u0275did"](1,180224,null,0,go.b,[o.ElementRef,Ct.a,Rt.f,[2,Di.a]],{color:[0,"color"]},null),(n()(),o["\u0275ted"](-1,0,["Cancel"]))],function(n,e){n(e,1,0,"warn")},function(n,e){n(e,0,0,o["\u0275nov"](e,1).disabled||null,"NoopAnimations"===o["\u0275nov"](e,1)._animationMode)})}function No(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,8,null,null,null,null,null,null,null)),(n()(),o["\u0275eld"](1,0,null,null,1,"span",[],null,null,null,null,null)),(n()(),o["\u0275ted"](2,null,["",""])),(n()(),o["\u0275and"](16777216,null,null,1,null,jo)),o["\u0275did"](4,16384,null,0,yt.NgIf,[o.ViewContainerRef,o.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),o["\u0275and"](16777216,null,null,1,null,Eo)),o["\u0275did"](6,16384,null,0,yt.NgIf,[o.ViewContainerRef,o.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),o["\u0275and"](16777216,null,null,1,null,Mo)),o["\u0275did"](8,16384,null,0,yt.NgIf,[o.ViewContainerRef,o.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),o["\u0275and"](0,null,null,0))],function(n,e){var l=e.component;n(e,4,0,e.parent.context.$implicit.status===l.diplomacyStatus.pending),n(e,6,0,e.parent.context.$implicit.status===l.diplomacyStatus.pending),n(e,8,0,e.parent.context.$implicit.status===l.diplomacyStatus.ongoing)},function(n,e){n(e,2,0,e.parent.context.$implicit.targetAlliance.name)})}function Lo(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,4,"span",[],null,null,null,null,null)),(n()(),o["\u0275ted"](-1,null,[" pending request "])),(n()(),o["\u0275eld"](2,0,null,null,2,"mat-icon",[["class","mat-icon"],["role","img"]],[[2,"mat-icon-inline",null]],null,null,mo,fo)),o["\u0275did"](3,638976,null,0,co,[o.ElementRef,ro,[8,null]],null,null),(n()(),o["\u0275ted"](-1,0,["warning"]))],function(n,e){n(e,3,0)},function(n,e){n(e,2,0,o["\u0275nov"](e,3).inline)})}function $o(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,2,"button",[["color","primary"],["mat-raised-button",""]],[[8,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"]],function(n,e,l){var t=!0;return"click"===e&&(t=!1!==n.component.acceptNap(n.parent.parent.context.$implicit.id)&&t),t},ho.b,ho.a)),o["\u0275did"](1,180224,null,0,go.b,[o.ElementRef,Ct.a,Rt.f,[2,Di.a]],{color:[0,"color"]},null),(n()(),o["\u0275ted"](-1,0,["Accept"]))],function(n,e){n(e,1,0,"primary")},function(n,e){n(e,0,0,o["\u0275nov"](e,1).disabled||null,"NoopAnimations"===o["\u0275nov"](e,1)._animationMode)})}function qo(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,2,"button",[["color","warn"],["mat-raised-button",""]],[[8,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"]],function(n,e,l){var t=!0;return"click"===e&&(t=!1!==n.component.rejectNap(n.parent.parent.context.$implicit.id)&&t),t},ho.b,ho.a)),o["\u0275did"](1,180224,null,0,go.b,[o.ElementRef,Ct.a,Rt.f,[2,Di.a]],{color:[0,"color"]},null),(n()(),o["\u0275ted"](-1,0,["Reject"]))],function(n,e){n(e,1,0,"warn")},function(n,e){n(e,0,0,o["\u0275nov"](e,1).disabled||null,"NoopAnimations"===o["\u0275nov"](e,1)._animationMode)})}function Vo(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,2,"button",[["color","warn"],["mat-raised-button",""]],[[8,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"]],function(n,e,l){var t=!0;return"click"===e&&(t=!1!==n.component.endNap(n.parent.parent.context.$implicit.id)&&t),t},ho.b,ho.a)),o["\u0275did"](1,180224,null,0,go.b,[o.ElementRef,Ct.a,Rt.f,[2,Di.a]],{color:[0,"color"]},null),(n()(),o["\u0275ted"](-1,0,["Cancel"]))],function(n,e){n(e,1,0,"warn")},function(n,e){n(e,0,0,o["\u0275nov"](e,1).disabled||null,"NoopAnimations"===o["\u0275nov"](e,1)._animationMode)})}function Uo(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,10,null,null,null,null,null,null,null)),(n()(),o["\u0275eld"](1,0,null,null,1,"span",[],null,null,null,null,null)),(n()(),o["\u0275ted"](2,null,["",""])),(n()(),o["\u0275and"](16777216,null,null,1,null,Lo)),o["\u0275did"](4,16384,null,0,yt.NgIf,[o.ViewContainerRef,o.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),o["\u0275and"](16777216,null,null,1,null,$o)),o["\u0275did"](6,16384,null,0,yt.NgIf,[o.ViewContainerRef,o.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),o["\u0275and"](16777216,null,null,1,null,qo)),o["\u0275did"](8,16384,null,0,yt.NgIf,[o.ViewContainerRef,o.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),o["\u0275and"](16777216,null,null,1,null,Vo)),o["\u0275did"](10,16384,null,0,yt.NgIf,[o.ViewContainerRef,o.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),o["\u0275and"](0,null,null,0))],function(n,e){var l=e.component;n(e,4,0,e.parent.context.$implicit.status===l.diplomacyStatus.pending),n(e,6,0,e.parent.context.$implicit.status===l.diplomacyStatus.pending),n(e,8,0,e.parent.context.$implicit.status===l.diplomacyStatus.pending),n(e,10,0,e.parent.context.$implicit.status===l.diplomacyStatus.ongoing)},function(n,e){n(e,2,0,e.parent.context.$implicit.originAlliance.name)})}function zo(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,4,"div",[],null,null,null,null,null)),(n()(),o["\u0275and"](16777216,null,null,1,null,No)),o["\u0275did"](2,16384,null,0,yt.NgIf,[o.ViewContainerRef,o.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),o["\u0275and"](16777216,null,null,1,null,Uo)),o["\u0275did"](4,16384,null,0,yt.NgIf,[o.ViewContainerRef,o.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(n,e){var l=e.component;n(e,2,0,e.context.$implicit.originAllianceId===l.alliance.id),n(e,4,0,e.context.$implicit.targetAllianceId===l.alliance.id)},null)}function Ho(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,1,"div",[],null,null,null,null,null)),(n()(),o["\u0275ted"](-1,null,["None"]))],null,null)}function Bo(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,7,"div",[],null,null,null,null,null)),(n()(),o["\u0275eld"](1,0,null,null,1,"span",[],null,null,null,null,null)),(n()(),o["\u0275ted"](2,null,["",""])),(n()(),o["\u0275eld"](3,0,null,null,1,"span",[],null,null,null,null,null)),(n()(),o["\u0275ted"](4,null,["",""])),(n()(),o["\u0275eld"](5,0,null,null,2,"button",[["color","primary"],["mat-raised-button",""]],[[8,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"]],function(n,e,l){var t=!0;return"click"===e&&(t=!1!==n.component.negotiatePeace(n.context.$implicit)&&t),t},ho.b,ho.a)),o["\u0275did"](6,180224,null,0,go.b,[o.ElementRef,Ct.a,Rt.f,[2,Di.a]],{color:[0,"color"]},null),(n()(),o["\u0275ted"](-1,0,["Negotiate peace"]))],function(n,e){n(e,6,0,"primary")},function(n,e){n(e,2,0,e.context.$implicit.originAlliance?e.context.$implicit.originAlliance.name:e.context.$implicit.targetAlliance.name),n(e,4,0,e.context.$implicit.data.reason),n(e,5,0,o["\u0275nov"](e,6).disabled||null,"NoopAnimations"===o["\u0275nov"](e,6)._animationMode)})}function Wo(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,1,"div",[],null,null,null,null,null)),(n()(),o["\u0275ted"](-1,null,["None"]))],null,null)}function Zo(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,29,"div",[["class","pb-3"]],null,null,null,null,null)),(n()(),o["\u0275eld"](1,0,null,null,1,"div",[],null,null,null,null,null)),(n()(),o["\u0275ted"](-1,null,["Alliances:"])),(n()(),o["\u0275and"](16777216,null,null,1,null,Do)),o["\u0275did"](4,802816,null,0,yt.NgForOf,[o.ViewContainerRef,o.TemplateRef,o.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(n()(),o["\u0275and"](16777216,null,null,1,null,Fo)),o["\u0275did"](6,16384,null,0,yt.NgIf,[o.ViewContainerRef,o.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),o["\u0275eld"](7,0,null,null,22,"div",[["class","pt-3"]],null,null,null,null,null)),(n()(),o["\u0275eld"](8,0,null,null,1,"div",[],null,null,null,null,null)),(n()(),o["\u0275ted"](-1,null,["Propose Alliance"])),(n()(),o["\u0275eld"](10,0,null,null,16,"mat-form-field",[["class","mat-form-field"],["floatLabel","never"]],[[2,"mat-form-field-appearance-standard",null],[2,"mat-form-field-appearance-fill",null],[2,"mat-form-field-appearance-outline",null],[2,"mat-form-field-appearance-legacy",null],[2,"mat-form-field-invalid",null],[2,"mat-form-field-can-float",null],[2,"mat-form-field-should-float",null],[2,"mat-form-field-hide-placeholder",null],[2,"mat-form-field-disabled",null],[2,"mat-form-field-autofilled",null],[2,"mat-focused",null],[2,"mat-accent",null],[2,"mat-warn",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null],[2,"_mat-animation-noopable",null]],null,null,vo.b,vo.a)),o["\u0275did"](11,7389184,null,7,bo.b,[o.ElementRef,o.ChangeDetectorRef,[2,St.j],[2,wt.b],[2,bo.a],Ct.a,o.NgZone,[2,Di.a]],{floatLabel:[0,"floatLabel"]},null),o["\u0275qud"](335544320,1,{_control:0}),o["\u0275qud"](335544320,2,{_placeholderChild:0}),o["\u0275qud"](335544320,3,{_labelChild:0}),o["\u0275qud"](603979776,4,{_errorChildren:1}),o["\u0275qud"](603979776,5,{_hintChildren:1}),o["\u0275qud"](603979776,6,{_prefixChildren:1}),o["\u0275qud"](603979776,7,{_suffixChildren:1}),(n()(),o["\u0275eld"](19,0,null,1,7,"input",[["class","mat-input-element mat-form-field-autofill-control"],["matInput",""],["placeholder","Alliance name"],["type","text"]],[[2,"mat-input-server",null],[1,"id",0],[1,"placeholder",0],[8,"disabled",0],[8,"required",0],[8,"readOnly",0],[1,"aria-describedby",0],[1,"aria-invalid",0],[1,"aria-required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"focus"]],function(n,e,l){var t=!0,i=n.component;return"input"===e&&(t=!1!==o["\u0275nov"](n,20)._handleInput(l.target.value)&&t),"blur"===e&&(t=!1!==o["\u0275nov"](n,20).onTouched()&&t),"compositionstart"===e&&(t=!1!==o["\u0275nov"](n,20)._compositionStart()&&t),"compositionend"===e&&(t=!1!==o["\u0275nov"](n,20)._compositionEnd(l.target.value)&&t),"blur"===e&&(t=!1!==o["\u0275nov"](n,24)._focusChanged(!1)&&t),"focus"===e&&(t=!1!==o["\u0275nov"](n,24)._focusChanged(!0)&&t),"input"===e&&(t=!1!==o["\u0275nov"](n,24)._onInput()&&t),"ngModelChange"===e&&(t=!1!==(i.allianceTargetName=l)&&t),t},null,null)),o["\u0275did"](20,16384,null,0,ti.d,[o.Renderer2,o.ElementRef,[2,ti.a]],null,null),o["\u0275prd"](1024,null,ti.l,function(n){return[n]},[ti.d]),o["\u0275did"](22,671744,null,0,ti.q,[[8,null],[8,null],[8,null],[6,ti.l]],{model:[0,"model"]},{update:"ngModelChange"}),o["\u0275prd"](2048,null,ti.m,null,[ti.q]),o["\u0275did"](24,999424,null,0,yo.a,[o.ElementRef,Ct.a,[6,ti.m],[2,ti.p],[2,ti.h],St.d,[8,null],_o.a,o.NgZone],{placeholder:[0,"placeholder"],type:[1,"type"]},null),o["\u0275did"](25,16384,null,0,ti.n,[[4,ti.m]],null,null),o["\u0275prd"](2048,[[1,4]],bo.c,null,[yo.a]),(n()(),o["\u0275eld"](27,0,null,null,2,"button",[["color","warn"],["mat-raised-button",""]],[[8,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"]],function(n,e,l){var t=!0;return"click"===e&&(t=!1!==n.component.proposeAlliance()&&t),t},ho.b,ho.a)),o["\u0275did"](28,180224,null,0,go.b,[o.ElementRef,Ct.a,Rt.f,[2,Di.a]],{disabled:[0,"disabled"],color:[1,"color"]},null),(n()(),o["\u0275ted"](-1,0,["Propose"])),(n()(),o["\u0275eld"](30,0,null,null,29,"div",[["class","pb-3"]],null,null,null,null,null)),(n()(),o["\u0275eld"](31,0,null,null,1,"div",[],null,null,null,null,null)),(n()(),o["\u0275ted"](-1,null,["Non Aggression Pacts:"])),(n()(),o["\u0275and"](16777216,null,null,1,null,zo)),o["\u0275did"](34,802816,null,0,yt.NgForOf,[o.ViewContainerRef,o.TemplateRef,o.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(n()(),o["\u0275and"](16777216,null,null,1,null,Ho)),o["\u0275did"](36,16384,null,0,yt.NgIf,[o.ViewContainerRef,o.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),o["\u0275eld"](37,0,null,null,22,"div",[["class","pt-3"]],null,null,null,null,null)),(n()(),o["\u0275eld"](38,0,null,null,1,"div",[],null,null,null,null,null)),(n()(),o["\u0275ted"](-1,null,["Propose Non Aggression Pact"])),(n()(),o["\u0275eld"](40,0,null,null,16,"mat-form-field",[["class","mat-form-field"],["floatLabel","never"]],[[2,"mat-form-field-appearance-standard",null],[2,"mat-form-field-appearance-fill",null],[2,"mat-form-field-appearance-outline",null],[2,"mat-form-field-appearance-legacy",null],[2,"mat-form-field-invalid",null],[2,"mat-form-field-can-float",null],[2,"mat-form-field-should-float",null],[2,"mat-form-field-hide-placeholder",null],[2,"mat-form-field-disabled",null],[2,"mat-form-field-autofilled",null],[2,"mat-focused",null],[2,"mat-accent",null],[2,"mat-warn",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null],[2,"_mat-animation-noopable",null]],null,null,vo.b,vo.a)),o["\u0275did"](41,7389184,null,7,bo.b,[o.ElementRef,o.ChangeDetectorRef,[2,St.j],[2,wt.b],[2,bo.a],Ct.a,o.NgZone,[2,Di.a]],{floatLabel:[0,"floatLabel"]},null),o["\u0275qud"](335544320,8,{_control:0}),o["\u0275qud"](335544320,9,{_placeholderChild:0}),o["\u0275qud"](335544320,10,{_labelChild:0}),o["\u0275qud"](603979776,11,{_errorChildren:1}),o["\u0275qud"](603979776,12,{_hintChildren:1}),o["\u0275qud"](603979776,13,{_prefixChildren:1}),o["\u0275qud"](603979776,14,{_suffixChildren:1}),(n()(),o["\u0275eld"](49,0,null,1,7,"input",[["class","mat-input-element mat-form-field-autofill-control"],["matInput",""],["placeholder","Alliance name"],["type","text"]],[[2,"mat-input-server",null],[1,"id",0],[1,"placeholder",0],[8,"disabled",0],[8,"required",0],[8,"readOnly",0],[1,"aria-describedby",0],[1,"aria-invalid",0],[1,"aria-required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"focus"]],function(n,e,l){var t=!0,i=n.component;return"input"===e&&(t=!1!==o["\u0275nov"](n,50)._handleInput(l.target.value)&&t),"blur"===e&&(t=!1!==o["\u0275nov"](n,50).onTouched()&&t),"compositionstart"===e&&(t=!1!==o["\u0275nov"](n,50)._compositionStart()&&t),"compositionend"===e&&(t=!1!==o["\u0275nov"](n,50)._compositionEnd(l.target.value)&&t),"blur"===e&&(t=!1!==o["\u0275nov"](n,54)._focusChanged(!1)&&t),"focus"===e&&(t=!1!==o["\u0275nov"](n,54)._focusChanged(!0)&&t),"input"===e&&(t=!1!==o["\u0275nov"](n,54)._onInput()&&t),"ngModelChange"===e&&(t=!1!==(i.napTargetName=l)&&t),t},null,null)),o["\u0275did"](50,16384,null,0,ti.d,[o.Renderer2,o.ElementRef,[2,ti.a]],null,null),o["\u0275prd"](1024,null,ti.l,function(n){return[n]},[ti.d]),o["\u0275did"](52,671744,null,0,ti.q,[[8,null],[8,null],[8,null],[6,ti.l]],{model:[0,"model"]},{update:"ngModelChange"}),o["\u0275prd"](2048,null,ti.m,null,[ti.q]),o["\u0275did"](54,999424,null,0,yo.a,[o.ElementRef,Ct.a,[6,ti.m],[2,ti.p],[2,ti.h],St.d,[8,null],_o.a,o.NgZone],{placeholder:[0,"placeholder"],type:[1,"type"]},null),o["\u0275did"](55,16384,null,0,ti.n,[[4,ti.m]],null,null),o["\u0275prd"](2048,[[8,4]],bo.c,null,[yo.a]),(n()(),o["\u0275eld"](57,0,null,null,2,"button",[["color","warn"],["mat-raised-button",""]],[[8,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"]],function(n,e,l){var t=!0;return"click"===e&&(t=!1!==n.component.proposeNap()&&t),t},ho.b,ho.a)),o["\u0275did"](58,180224,null,0,go.b,[o.ElementRef,Ct.a,Rt.f,[2,Di.a]],{disabled:[0,"disabled"],color:[1,"color"]},null),(n()(),o["\u0275ted"](-1,0,["Propose"])),(n()(),o["\u0275eld"](60,0,null,null,47,"div",[["class","pb-3"]],null,null,null,null,null)),(n()(),o["\u0275eld"](61,0,null,null,46,"div",[],null,null,null,null,null)),(n()(),o["\u0275ted"](-1,null,["Wars:"])),(n()(),o["\u0275eld"](63,0,null,null,44,"div",[],null,null,null,null,null)),(n()(),o["\u0275and"](16777216,null,null,1,null,Bo)),o["\u0275did"](65,802816,null,0,yt.NgForOf,[o.ViewContainerRef,o.TemplateRef,o.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(n()(),o["\u0275and"](16777216,null,null,1,null,Wo)),o["\u0275did"](67,16384,null,0,yt.NgIf,[o.ViewContainerRef,o.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),o["\u0275eld"](68,0,null,null,39,"div",[["class","pt-3"]],null,null,null,null,null)),(n()(),o["\u0275eld"](69,0,null,null,1,"div",[],null,null,null,null,null)),(n()(),o["\u0275ted"](-1,null,["Declare war"])),(n()(),o["\u0275eld"](71,0,null,null,16,"mat-form-field",[["class","mat-form-field"],["floatLabel","never"]],[[2,"mat-form-field-appearance-standard",null],[2,"mat-form-field-appearance-fill",null],[2,"mat-form-field-appearance-outline",null],[2,"mat-form-field-appearance-legacy",null],[2,"mat-form-field-invalid",null],[2,"mat-form-field-can-float",null],[2,"mat-form-field-should-float",null],[2,"mat-form-field-hide-placeholder",null],[2,"mat-form-field-disabled",null],[2,"mat-form-field-autofilled",null],[2,"mat-focused",null],[2,"mat-accent",null],[2,"mat-warn",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null],[2,"_mat-animation-noopable",null]],null,null,vo.b,vo.a)),o["\u0275did"](72,7389184,null,7,bo.b,[o.ElementRef,o.ChangeDetectorRef,[2,St.j],[2,wt.b],[2,bo.a],Ct.a,o.NgZone,[2,Di.a]],{floatLabel:[0,"floatLabel"]},null),o["\u0275qud"](335544320,15,{_control:0}),o["\u0275qud"](335544320,16,{_placeholderChild:0}),o["\u0275qud"](335544320,17,{_labelChild:0}),o["\u0275qud"](603979776,18,{_errorChildren:1}),o["\u0275qud"](603979776,19,{_hintChildren:1}),o["\u0275qud"](603979776,20,{_prefixChildren:1}),o["\u0275qud"](603979776,21,{_suffixChildren:1}),(n()(),o["\u0275eld"](80,0,null,1,7,"input",[["class","mat-input-element mat-form-field-autofill-control"],["matInput",""],["placeholder","Alliance name"],["type","text"]],[[2,"mat-input-server",null],[1,"id",0],[1,"placeholder",0],[8,"disabled",0],[8,"required",0],[8,"readOnly",0],[1,"aria-describedby",0],[1,"aria-invalid",0],[1,"aria-required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"focus"]],function(n,e,l){var t=!0,i=n.component;return"input"===e&&(t=!1!==o["\u0275nov"](n,81)._handleInput(l.target.value)&&t),"blur"===e&&(t=!1!==o["\u0275nov"](n,81).onTouched()&&t),"compositionstart"===e&&(t=!1!==o["\u0275nov"](n,81)._compositionStart()&&t),"compositionend"===e&&(t=!1!==o["\u0275nov"](n,81)._compositionEnd(l.target.value)&&t),"blur"===e&&(t=!1!==o["\u0275nov"](n,85)._focusChanged(!1)&&t),"focus"===e&&(t=!1!==o["\u0275nov"](n,85)._focusChanged(!0)&&t),"input"===e&&(t=!1!==o["\u0275nov"](n,85)._onInput()&&t),"ngModelChange"===e&&(t=!1!==(i.warTargetName=l)&&t),t},null,null)),o["\u0275did"](81,16384,null,0,ti.d,[o.Renderer2,o.ElementRef,[2,ti.a]],null,null),o["\u0275prd"](1024,null,ti.l,function(n){return[n]},[ti.d]),o["\u0275did"](83,671744,null,0,ti.q,[[8,null],[8,null],[8,null],[6,ti.l]],{model:[0,"model"]},{update:"ngModelChange"}),o["\u0275prd"](2048,null,ti.m,null,[ti.q]),o["\u0275did"](85,999424,null,0,yo.a,[o.ElementRef,Ct.a,[6,ti.m],[2,ti.p],[2,ti.h],St.d,[8,null],_o.a,o.NgZone],{placeholder:[0,"placeholder"],type:[1,"type"]},null),o["\u0275did"](86,16384,null,0,ti.n,[[4,ti.m]],null,null),o["\u0275prd"](2048,[[15,4]],bo.c,null,[yo.a]),(n()(),o["\u0275eld"](88,0,null,null,16,"mat-form-field",[["class","mat-form-field"],["floatLabel","never"]],[[2,"mat-form-field-appearance-standard",null],[2,"mat-form-field-appearance-fill",null],[2,"mat-form-field-appearance-outline",null],[2,"mat-form-field-appearance-legacy",null],[2,"mat-form-field-invalid",null],[2,"mat-form-field-can-float",null],[2,"mat-form-field-should-float",null],[2,"mat-form-field-hide-placeholder",null],[2,"mat-form-field-disabled",null],[2,"mat-form-field-autofilled",null],[2,"mat-focused",null],[2,"mat-accent",null],[2,"mat-warn",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null],[2,"_mat-animation-noopable",null]],null,null,vo.b,vo.a)),o["\u0275did"](89,7389184,null,7,bo.b,[o.ElementRef,o.ChangeDetectorRef,[2,St.j],[2,wt.b],[2,bo.a],Ct.a,o.NgZone,[2,Di.a]],{floatLabel:[0,"floatLabel"]},null),o["\u0275qud"](335544320,22,{_control:0}),o["\u0275qud"](335544320,23,{_placeholderChild:0}),o["\u0275qud"](335544320,24,{_labelChild:0}),o["\u0275qud"](603979776,25,{_errorChildren:1}),o["\u0275qud"](603979776,26,{_hintChildren:1}),o["\u0275qud"](603979776,27,{_prefixChildren:1}),o["\u0275qud"](603979776,28,{_suffixChildren:1}),(n()(),o["\u0275eld"](97,0,null,1,7,"input",[["class","mat-input-element mat-form-field-autofill-control"],["matInput",""],["placeholder","War reason"],["type","text"]],[[2,"mat-input-server",null],[1,"id",0],[1,"placeholder",0],[8,"disabled",0],[8,"required",0],[8,"readOnly",0],[1,"aria-describedby",0],[1,"aria-invalid",0],[1,"aria-required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"focus"]],function(n,e,l){var t=!0,i=n.component;return"input"===e&&(t=!1!==o["\u0275nov"](n,98)._handleInput(l.target.value)&&t),"blur"===e&&(t=!1!==o["\u0275nov"](n,98).onTouched()&&t),"compositionstart"===e&&(t=!1!==o["\u0275nov"](n,98)._compositionStart()&&t),"compositionend"===e&&(t=!1!==o["\u0275nov"](n,98)._compositionEnd(l.target.value)&&t),"blur"===e&&(t=!1!==o["\u0275nov"](n,102)._focusChanged(!1)&&t),"focus"===e&&(t=!1!==o["\u0275nov"](n,102)._focusChanged(!0)&&t),"input"===e&&(t=!1!==o["\u0275nov"](n,102)._onInput()&&t),"ngModelChange"===e&&(t=!1!==(i.reason=l)&&t),t},null,null)),o["\u0275did"](98,16384,null,0,ti.d,[o.Renderer2,o.ElementRef,[2,ti.a]],null,null),o["\u0275prd"](1024,null,ti.l,function(n){return[n]},[ti.d]),o["\u0275did"](100,671744,null,0,ti.q,[[8,null],[8,null],[8,null],[6,ti.l]],{model:[0,"model"]},{update:"ngModelChange"}),o["\u0275prd"](2048,null,ti.m,null,[ti.q]),o["\u0275did"](102,999424,null,0,yo.a,[o.ElementRef,Ct.a,[6,ti.m],[2,ti.p],[2,ti.h],St.d,[8,null],_o.a,o.NgZone],{placeholder:[0,"placeholder"],type:[1,"type"]},null),o["\u0275did"](103,16384,null,0,ti.n,[[4,ti.m]],null,null),o["\u0275prd"](2048,[[22,4]],bo.c,null,[yo.a]),(n()(),o["\u0275eld"](105,0,null,null,2,"button",[["color","warn"],["mat-raised-button",""]],[[8,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"]],function(n,e,l){var t=!0;return"click"===e&&(t=!1!==n.component.declareWar()&&t),t},ho.b,ho.a)),o["\u0275did"](106,180224,null,0,go.b,[o.ElementRef,Ct.a,Rt.f,[2,Di.a]],{disabled:[0,"disabled"],color:[1,"color"]},null),(n()(),o["\u0275ted"](-1,0,["Declare"]))],function(n,e){var l=e.component;n(e,4,0,l.alliances),n(e,6,0,!l.alliances.length),n(e,11,0,"never"),n(e,22,0,l.allianceTargetName),n(e,24,0,"Alliance name","text"),n(e,28,0,!l.allianceTargetName.length,"warn"),n(e,34,0,l.naps),n(e,36,0,!l.naps.length),n(e,41,0,"never"),n(e,52,0,l.napTargetName),n(e,54,0,"Alliance name","text"),n(e,58,0,!l.napTargetName.length,"warn"),n(e,65,0,l.wars),n(e,67,0,!l.wars.length),n(e,72,0,"never"),n(e,83,0,l.warTargetName),n(e,85,0,"Alliance name","text"),n(e,89,0,"never"),n(e,100,0,l.reason),n(e,102,0,"War reason","text"),n(e,106,0,!l.warTargetName.length||!l.reason.length,"warn")},function(n,e){n(e,10,1,["standard"==o["\u0275nov"](e,11).appearance,"fill"==o["\u0275nov"](e,11).appearance,"outline"==o["\u0275nov"](e,11).appearance,"legacy"==o["\u0275nov"](e,11).appearance,o["\u0275nov"](e,11)._control.errorState,o["\u0275nov"](e,11)._canLabelFloat,o["\u0275nov"](e,11)._shouldLabelFloat(),o["\u0275nov"](e,11)._hideControlPlaceholder(),o["\u0275nov"](e,11)._control.disabled,o["\u0275nov"](e,11)._control.autofilled,o["\u0275nov"](e,11)._control.focused,"accent"==o["\u0275nov"](e,11).color,"warn"==o["\u0275nov"](e,11).color,o["\u0275nov"](e,11)._shouldForward("untouched"),o["\u0275nov"](e,11)._shouldForward("touched"),o["\u0275nov"](e,11)._shouldForward("pristine"),o["\u0275nov"](e,11)._shouldForward("dirty"),o["\u0275nov"](e,11)._shouldForward("valid"),o["\u0275nov"](e,11)._shouldForward("invalid"),o["\u0275nov"](e,11)._shouldForward("pending"),!o["\u0275nov"](e,11)._animationsEnabled]),n(e,19,1,[o["\u0275nov"](e,24)._isServer,o["\u0275nov"](e,24).id,o["\u0275nov"](e,24).placeholder,o["\u0275nov"](e,24).disabled,o["\u0275nov"](e,24).required,o["\u0275nov"](e,24).readonly,o["\u0275nov"](e,24)._ariaDescribedby||null,o["\u0275nov"](e,24).errorState,o["\u0275nov"](e,24).required.toString(),o["\u0275nov"](e,25).ngClassUntouched,o["\u0275nov"](e,25).ngClassTouched,o["\u0275nov"](e,25).ngClassPristine,o["\u0275nov"](e,25).ngClassDirty,o["\u0275nov"](e,25).ngClassValid,o["\u0275nov"](e,25).ngClassInvalid,o["\u0275nov"](e,25).ngClassPending]),n(e,27,0,o["\u0275nov"](e,28).disabled||null,"NoopAnimations"===o["\u0275nov"](e,28)._animationMode),n(e,40,1,["standard"==o["\u0275nov"](e,41).appearance,"fill"==o["\u0275nov"](e,41).appearance,"outline"==o["\u0275nov"](e,41).appearance,"legacy"==o["\u0275nov"](e,41).appearance,o["\u0275nov"](e,41)._control.errorState,o["\u0275nov"](e,41)._canLabelFloat,o["\u0275nov"](e,41)._shouldLabelFloat(),o["\u0275nov"](e,41)._hideControlPlaceholder(),o["\u0275nov"](e,41)._control.disabled,o["\u0275nov"](e,41)._control.autofilled,o["\u0275nov"](e,41)._control.focused,"accent"==o["\u0275nov"](e,41).color,"warn"==o["\u0275nov"](e,41).color,o["\u0275nov"](e,41)._shouldForward("untouched"),o["\u0275nov"](e,41)._shouldForward("touched"),o["\u0275nov"](e,41)._shouldForward("pristine"),o["\u0275nov"](e,41)._shouldForward("dirty"),o["\u0275nov"](e,41)._shouldForward("valid"),o["\u0275nov"](e,41)._shouldForward("invalid"),o["\u0275nov"](e,41)._shouldForward("pending"),!o["\u0275nov"](e,41)._animationsEnabled]),n(e,49,1,[o["\u0275nov"](e,54)._isServer,o["\u0275nov"](e,54).id,o["\u0275nov"](e,54).placeholder,o["\u0275nov"](e,54).disabled,o["\u0275nov"](e,54).required,o["\u0275nov"](e,54).readonly,o["\u0275nov"](e,54)._ariaDescribedby||null,o["\u0275nov"](e,54).errorState,o["\u0275nov"](e,54).required.toString(),o["\u0275nov"](e,55).ngClassUntouched,o["\u0275nov"](e,55).ngClassTouched,o["\u0275nov"](e,55).ngClassPristine,o["\u0275nov"](e,55).ngClassDirty,o["\u0275nov"](e,55).ngClassValid,o["\u0275nov"](e,55).ngClassInvalid,o["\u0275nov"](e,55).ngClassPending]),n(e,57,0,o["\u0275nov"](e,58).disabled||null,"NoopAnimations"===o["\u0275nov"](e,58)._animationMode),n(e,71,1,["standard"==o["\u0275nov"](e,72).appearance,"fill"==o["\u0275nov"](e,72).appearance,"outline"==o["\u0275nov"](e,72).appearance,"legacy"==o["\u0275nov"](e,72).appearance,o["\u0275nov"](e,72)._control.errorState,o["\u0275nov"](e,72)._canLabelFloat,o["\u0275nov"](e,72)._shouldLabelFloat(),o["\u0275nov"](e,72)._hideControlPlaceholder(),o["\u0275nov"](e,72)._control.disabled,o["\u0275nov"](e,72)._control.autofilled,o["\u0275nov"](e,72)._control.focused,"accent"==o["\u0275nov"](e,72).color,"warn"==o["\u0275nov"](e,72).color,o["\u0275nov"](e,72)._shouldForward("untouched"),o["\u0275nov"](e,72)._shouldForward("touched"),o["\u0275nov"](e,72)._shouldForward("pristine"),o["\u0275nov"](e,72)._shouldForward("dirty"),o["\u0275nov"](e,72)._shouldForward("valid"),o["\u0275nov"](e,72)._shouldForward("invalid"),o["\u0275nov"](e,72)._shouldForward("pending"),!o["\u0275nov"](e,72)._animationsEnabled]),n(e,80,1,[o["\u0275nov"](e,85)._isServer,o["\u0275nov"](e,85).id,o["\u0275nov"](e,85).placeholder,o["\u0275nov"](e,85).disabled,o["\u0275nov"](e,85).required,o["\u0275nov"](e,85).readonly,o["\u0275nov"](e,85)._ariaDescribedby||null,o["\u0275nov"](e,85).errorState,o["\u0275nov"](e,85).required.toString(),o["\u0275nov"](e,86).ngClassUntouched,o["\u0275nov"](e,86).ngClassTouched,o["\u0275nov"](e,86).ngClassPristine,o["\u0275nov"](e,86).ngClassDirty,o["\u0275nov"](e,86).ngClassValid,o["\u0275nov"](e,86).ngClassInvalid,o["\u0275nov"](e,86).ngClassPending]),n(e,88,1,["standard"==o["\u0275nov"](e,89).appearance,"fill"==o["\u0275nov"](e,89).appearance,"outline"==o["\u0275nov"](e,89).appearance,"legacy"==o["\u0275nov"](e,89).appearance,o["\u0275nov"](e,89)._control.errorState,o["\u0275nov"](e,89)._canLabelFloat,o["\u0275nov"](e,89)._shouldLabelFloat(),o["\u0275nov"](e,89)._hideControlPlaceholder(),o["\u0275nov"](e,89)._control.disabled,o["\u0275nov"](e,89)._control.autofilled,o["\u0275nov"](e,89)._control.focused,"accent"==o["\u0275nov"](e,89).color,"warn"==o["\u0275nov"](e,89).color,o["\u0275nov"](e,89)._shouldForward("untouched"),o["\u0275nov"](e,89)._shouldForward("touched"),o["\u0275nov"](e,89)._shouldForward("pristine"),o["\u0275nov"](e,89)._shouldForward("dirty"),o["\u0275nov"](e,89)._shouldForward("valid"),o["\u0275nov"](e,89)._shouldForward("invalid"),o["\u0275nov"](e,89)._shouldForward("pending"),!o["\u0275nov"](e,89)._animationsEnabled]),n(e,97,1,[o["\u0275nov"](e,102)._isServer,o["\u0275nov"](e,102).id,o["\u0275nov"](e,102).placeholder,o["\u0275nov"](e,102).disabled,o["\u0275nov"](e,102).required,o["\u0275nov"](e,102).readonly,o["\u0275nov"](e,102)._ariaDescribedby||null,o["\u0275nov"](e,102).errorState,o["\u0275nov"](e,102).required.toString(),o["\u0275nov"](e,103).ngClassUntouched,o["\u0275nov"](e,103).ngClassTouched,o["\u0275nov"](e,103).ngClassPristine,o["\u0275nov"](e,103).ngClassDirty,o["\u0275nov"](e,103).ngClassValid,o["\u0275nov"](e,103).ngClassInvalid,o["\u0275nov"](e,103).ngClassPending]),n(e,105,0,o["\u0275nov"](e,106).disabled||null,"NoopAnimations"===o["\u0275nov"](e,106)._animationMode)})}var Go=new o.InjectionToken("mat-checkbox-click-action"),Yo=0,Xo=function(){var n={Init:0,Checked:1,Unchecked:2,Indeterminate:3};return n[n.Init]="Init",n[n.Checked]="Checked",n[n.Unchecked]="Unchecked",n[n.Indeterminate]="Indeterminate",n}(),Qo=function(n){function e(e,l,t,i,a,r,u){var s=n.call(this,e)||this;return s._changeDetectorRef=l,s._focusMonitor=t,s._ngZone=i,s._clickAction=r,s._animationMode=u,s.ariaLabel="",s.ariaLabelledby=null,s._uniqueId="mat-checkbox-"+ ++Yo,s.id=s._uniqueId,s.labelPosition="after",s.name=null,s.change=new o.EventEmitter,s.indeterminateChange=new o.EventEmitter,s._onTouched=function(){},s._currentAnimationClass="",s._currentCheckState=Xo.Init,s._controlValueAccessorChangeFn=function(){},s._checked=!1,s._disabled=!1,s._indeterminate=!1,s.tabIndex=parseInt(a)||0,s}return Object(r.__extends)(e,n),Object.defineProperty(e.prototype,"inputId",{get:function(){return(this.id||this._uniqueId)+"-input"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"required",{get:function(){return this._required},set:function(n){this._required=Object(it.c)(n)},enumerable:!0,configurable:!0}),e.prototype.ngAfterViewInit=function(){var n=this;this._focusMonitor.monitor(this._inputElement.nativeElement).subscribe(function(e){return n._onInputFocusChange(e)})},e.prototype.ngOnDestroy=function(){this._focusMonitor.stopMonitoring(this._inputElement.nativeElement)},Object.defineProperty(e.prototype,"checked",{get:function(){return this._checked},set:function(n){n!=this.checked&&(this._checked=n,this._changeDetectorRef.markForCheck())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"disabled",{get:function(){return this._disabled},set:function(n){n!=this.disabled&&(this._disabled=n,this._changeDetectorRef.markForCheck())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"indeterminate",{get:function(){return this._indeterminate},set:function(n){var e=n!=this._indeterminate;this._indeterminate=n,e&&(this._transitionCheckState(this._indeterminate?Xo.Indeterminate:this.checked?Xo.Checked:Xo.Unchecked),this.indeterminateChange.emit(this._indeterminate))},enumerable:!0,configurable:!0}),e.prototype._isRippleDisabled=function(){return this.disableRipple||this.disabled},e.prototype._onLabelTextChange=function(){this._changeDetectorRef.markForCheck()},e.prototype.writeValue=function(n){this.checked=!!n},e.prototype.registerOnChange=function(n){this._controlValueAccessorChangeFn=n},e.prototype.registerOnTouched=function(n){this._onTouched=n},e.prototype.setDisabledState=function(n){this.disabled=n},e.prototype._getAriaChecked=function(){return this.checked?"true":this.indeterminate?"mixed":"false"},e.prototype._transitionCheckState=function(n){var e=this._currentCheckState,l=this._elementRef.nativeElement;if(e!==n&&(this._currentAnimationClass.length>0&&l.classList.remove(this._currentAnimationClass),this._currentAnimationClass=this._getAnimationClassForCheckStateTransition(e,n),this._currentCheckState=n,this._currentAnimationClass.length>0)){l.classList.add(this._currentAnimationClass);var t=this._currentAnimationClass;this._ngZone.runOutsideAngular(function(){setTimeout(function(){l.classList.remove(t)},1e3)})}},e.prototype._emitChangeEvent=function(){var n=new function(){};n.source=this,n.checked=this.checked,this._controlValueAccessorChangeFn(this.checked),this.change.emit(n)},e.prototype._onInputFocusChange=function(n){var e=this;this._focusRipple||"keyboard"!==n?n||(this._focusRipple&&(this._focusRipple.fadeOut(),this._focusRipple=null),Promise.resolve().then(function(){return e._onTouched()})):this._focusRipple=this.ripple.launch(0,0,{persistent:!0})},e.prototype.toggle=function(){this.checked=!this.checked},e.prototype._onInputClick=function(n){var e=this;n.stopPropagation(),this.disabled||"noop"===this._clickAction?this.disabled||"noop"!==this._clickAction||(this._inputElement.nativeElement.checked=this.checked,this._inputElement.nativeElement.indeterminate=this.indeterminate):(this.indeterminate&&"check"!==this._clickAction&&Promise.resolve().then(function(){e._indeterminate=!1,e.indeterminateChange.emit(e._indeterminate)}),this.toggle(),this._transitionCheckState(this._checked?Xo.Checked:Xo.Unchecked),this._emitChangeEvent())},e.prototype.focus=function(){this._focusMonitor.focusVia(this._inputElement.nativeElement,"keyboard")},e.prototype._onInteractionEvent=function(n){n.stopPropagation()},e.prototype._getAnimationClassForCheckStateTransition=function(n,e){if("NoopAnimations"===this._animationMode)return"";var l="";switch(n){case Xo.Init:if(e===Xo.Checked)l="unchecked-checked";else{if(e!=Xo.Indeterminate)return"";l="unchecked-indeterminate"}break;case Xo.Unchecked:l=e===Xo.Checked?"unchecked-checked":"unchecked-indeterminate";break;case Xo.Checked:l=e===Xo.Unchecked?"checked-unchecked":"checked-indeterminate";break;case Xo.Indeterminate:l=e===Xo.Checked?"indeterminate-checked":"indeterminate-unchecked"}return"mat-checkbox-anim-"+l},e}(Object(St.I)(Object(St.D)(Object(St.E)(Object(St.F)(function(n){this._elementRef=n})),"accent"))),Ko=function(){},Jo=o["\u0275crt"]({encapsulation:2,styles:["@keyframes mat-checkbox-fade-in-background{0%{opacity:0}50%{opacity:1}}@keyframes mat-checkbox-fade-out-background{0%,50%{opacity:1}100%{opacity:0}}@keyframes mat-checkbox-unchecked-checked-checkmark-path{0%,50%{stroke-dashoffset:22.91026}50%{animation-timing-function:cubic-bezier(0,0,.2,.1)}100%{stroke-dashoffset:0}}@keyframes mat-checkbox-unchecked-indeterminate-mixedmark{0%,68.2%{transform:scaleX(0)}68.2%{animation-timing-function:cubic-bezier(0,0,0,1)}100%{transform:scaleX(1)}}@keyframes mat-checkbox-checked-unchecked-checkmark-path{from{animation-timing-function:cubic-bezier(.4,0,1,1);stroke-dashoffset:0}to{stroke-dashoffset:-22.91026}}@keyframes mat-checkbox-checked-indeterminate-checkmark{from{animation-timing-function:cubic-bezier(0,0,.2,.1);opacity:1;transform:rotate(0)}to{opacity:0;transform:rotate(45deg)}}@keyframes mat-checkbox-indeterminate-checked-checkmark{from{animation-timing-function:cubic-bezier(.14,0,0,1);opacity:0;transform:rotate(45deg)}to{opacity:1;transform:rotate(360deg)}}@keyframes mat-checkbox-checked-indeterminate-mixedmark{from{animation-timing-function:cubic-bezier(0,0,.2,.1);opacity:0;transform:rotate(-45deg)}to{opacity:1;transform:rotate(0)}}@keyframes mat-checkbox-indeterminate-checked-mixedmark{from{animation-timing-function:cubic-bezier(.14,0,0,1);opacity:1;transform:rotate(0)}to{opacity:0;transform:rotate(315deg)}}@keyframes mat-checkbox-indeterminate-unchecked-mixedmark{0%{animation-timing-function:linear;opacity:1;transform:scaleX(1)}100%,32.8%{opacity:0;transform:scaleX(0)}}.mat-checkbox-checkmark,.mat-checkbox-mixedmark{width:calc(100% - 4px)}.mat-checkbox-background,.mat-checkbox-frame{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:2px;box-sizing:border-box;pointer-events:none}.mat-checkbox{transition:background .4s cubic-bezier(.25,.8,.25,1),box-shadow 280ms cubic-bezier(.4,0,.2,1);cursor:pointer;-webkit-tap-highlight-color:transparent}._mat-animation-noopable.mat-checkbox{transition:none;animation:none}.mat-checkbox-layout{cursor:inherit;align-items:baseline;vertical-align:middle;display:inline-flex;white-space:nowrap}.mat-checkbox-inner-container{display:inline-block;height:20px;line-height:0;margin:auto;margin-right:8px;order:0;position:relative;vertical-align:middle;white-space:nowrap;width:20px;flex-shrink:0}[dir=rtl] .mat-checkbox-inner-container{margin-left:8px;margin-right:auto}.mat-checkbox-inner-container-no-side-margin{margin-left:0;margin-right:0}.mat-checkbox-frame{background-color:transparent;transition:border-color 90ms cubic-bezier(0,0,.2,.1);border-width:2px;border-style:solid}._mat-animation-noopable .mat-checkbox-frame{transition:none}.mat-checkbox-background{align-items:center;display:inline-flex;justify-content:center;transition:background-color 90ms cubic-bezier(0,0,.2,.1),opacity 90ms cubic-bezier(0,0,.2,.1)}._mat-animation-noopable .mat-checkbox-background{transition:none}.mat-checkbox-checkmark{top:0;left:0;right:0;bottom:0;position:absolute;width:100%}.mat-checkbox-checkmark-path{stroke-dashoffset:22.91026;stroke-dasharray:22.91026;stroke-width:2.66667px}.mat-checkbox-mixedmark{height:2px;opacity:0;transform:scaleX(0) rotate(0)}@media screen and (-ms-high-contrast:active){.mat-checkbox-mixedmark{height:0;border-top:solid 2px;margin-top:2px}}.mat-checkbox-label-before .mat-checkbox-inner-container{order:1;margin-left:8px;margin-right:auto}[dir=rtl] .mat-checkbox-label-before .mat-checkbox-inner-container{margin-left:auto;margin-right:8px}.mat-checkbox-checked .mat-checkbox-checkmark{opacity:1}.mat-checkbox-checked .mat-checkbox-checkmark-path{stroke-dashoffset:0}.mat-checkbox-checked .mat-checkbox-mixedmark{transform:scaleX(1) rotate(-45deg)}.mat-checkbox-indeterminate .mat-checkbox-checkmark{opacity:0;transform:rotate(45deg)}.mat-checkbox-indeterminate .mat-checkbox-checkmark-path{stroke-dashoffset:0}.mat-checkbox-indeterminate .mat-checkbox-mixedmark{opacity:1;transform:scaleX(1) rotate(0)}.mat-checkbox-unchecked .mat-checkbox-background{background-color:transparent}.mat-checkbox-disabled{cursor:default}.mat-checkbox-anim-unchecked-checked .mat-checkbox-background{animation:180ms linear 0s mat-checkbox-fade-in-background}.mat-checkbox-anim-unchecked-checked .mat-checkbox-checkmark-path{animation:180ms linear 0s mat-checkbox-unchecked-checked-checkmark-path}.mat-checkbox-anim-unchecked-indeterminate .mat-checkbox-background{animation:180ms linear 0s mat-checkbox-fade-in-background}.mat-checkbox-anim-unchecked-indeterminate .mat-checkbox-mixedmark{animation:90ms linear 0s mat-checkbox-unchecked-indeterminate-mixedmark}.mat-checkbox-anim-checked-unchecked .mat-checkbox-background{animation:180ms linear 0s mat-checkbox-fade-out-background}.mat-checkbox-anim-checked-unchecked .mat-checkbox-checkmark-path{animation:90ms linear 0s mat-checkbox-checked-unchecked-checkmark-path}.mat-checkbox-anim-checked-indeterminate .mat-checkbox-checkmark{animation:90ms linear 0s mat-checkbox-checked-indeterminate-checkmark}.mat-checkbox-anim-checked-indeterminate .mat-checkbox-mixedmark{animation:90ms linear 0s mat-checkbox-checked-indeterminate-mixedmark}.mat-checkbox-anim-indeterminate-checked .mat-checkbox-checkmark{animation:.5s linear 0s mat-checkbox-indeterminate-checked-checkmark}.mat-checkbox-anim-indeterminate-checked .mat-checkbox-mixedmark{animation:.5s linear 0s mat-checkbox-indeterminate-checked-mixedmark}.mat-checkbox-anim-indeterminate-unchecked .mat-checkbox-background{animation:180ms linear 0s mat-checkbox-fade-out-background}.mat-checkbox-anim-indeterminate-unchecked .mat-checkbox-mixedmark{animation:.3s linear 0s mat-checkbox-indeterminate-unchecked-mixedmark}.mat-checkbox-input{bottom:0;left:50%}.mat-checkbox-ripple{position:absolute;left:calc(50% - 25px);top:calc(50% - 25px);height:50px;width:50px;z-index:1;pointer-events:none}"],data:{}});function na(n){return o["\u0275vid"](2,[o["\u0275qud"](402653184,1,{_inputElement:0}),o["\u0275qud"](402653184,2,{ripple:0}),(n()(),o["\u0275eld"](2,0,[["label",1]],null,15,"label",[["class","mat-checkbox-layout"]],[[1,"for",0]],null,null,null,null)),(n()(),o["\u0275eld"](3,0,null,null,9,"div",[["class","mat-checkbox-inner-container"]],[[2,"mat-checkbox-inner-container-no-side-margin",null]],null,null,null,null)),(n()(),o["\u0275eld"](4,0,[[1,0],["input",1]],null,0,"input",[["class","mat-checkbox-input cdk-visually-hidden"],["type","checkbox"]],[[8,"id",0],[8,"required",0],[8,"checked",0],[1,"value",0],[8,"disabled",0],[1,"name",0],[8,"tabIndex",0],[8,"indeterminate",0],[1,"aria-label",0],[1,"aria-labelledby",0],[1,"aria-checked",0]],[[null,"change"],[null,"click"]],function(n,e,l){var t=!0,i=n.component;return"change"===e&&(t=!1!==i._onInteractionEvent(l)&&t),"click"===e&&(t=!1!==i._onInputClick(l)&&t),t},null,null)),(n()(),o["\u0275eld"](5,0,null,null,2,"div",[["class","mat-checkbox-ripple mat-ripple"],["matRipple",""]],[[2,"mat-ripple-unbounded",null]],null,null,null,null)),o["\u0275did"](6,212992,[[2,4]],0,St.w,[o.ElementRef,o.NgZone,Ct.a,[2,St.m],[2,Di.a]],{centered:[0,"centered"],radius:[1,"radius"],animation:[2,"animation"],disabled:[3,"disabled"],trigger:[4,"trigger"]},null),o["\u0275pod"](7,{enterDuration:0}),(n()(),o["\u0275eld"](8,0,null,null,0,"div",[["class","mat-checkbox-frame"]],null,null,null,null,null)),(n()(),o["\u0275eld"](9,0,null,null,3,"div",[["class","mat-checkbox-background"]],null,null,null,null,null)),(n()(),o["\u0275eld"](10,0,null,null,1,":svg:svg",[[":xml:space","preserve"],["class","mat-checkbox-checkmark"],["focusable","false"],["version","1.1"],["viewBox","0 0 24 24"]],null,null,null,null,null)),(n()(),o["\u0275eld"](11,0,null,null,0,":svg:path",[["class","mat-checkbox-checkmark-path"],["d","M4.1,12.7 9,17.6 20.3,6.3"],["fill","none"],["stroke","white"]],null,null,null,null,null)),(n()(),o["\u0275eld"](12,0,null,null,0,"div",[["class","mat-checkbox-mixedmark"]],null,null,null,null,null)),(n()(),o["\u0275eld"](13,0,[["checkboxLabel",1]],null,4,"span",[["class","mat-checkbox-label"]],null,[[null,"cdkObserveContent"]],function(n,e,l){var t=!0;return"cdkObserveContent"===e&&(t=!1!==n.component._onLabelTextChange()&&t),t},null,null)),o["\u0275did"](14,1196032,null,0,_t.a,[_t.b,o.ElementRef,o.NgZone],null,{event:"cdkObserveContent"}),(n()(),o["\u0275eld"](15,0,null,null,1,"span",[["style","display:none"]],null,null,null,null,null)),(n()(),o["\u0275ted"](-1,null,["\xa0"])),o["\u0275ncd"](null,0)],function(n,e){var l=e.component;n(e,6,0,!0,25,n(e,7,0,150),l._isRippleDisabled(),o["\u0275nov"](e,2))},function(n,e){var l=e.component;n(e,2,0,l.inputId),n(e,3,0,!o["\u0275nov"](e,13).textContent||!o["\u0275nov"](e,13).textContent.trim()),n(e,4,1,[l.inputId,l.required,l.checked,l.value,l.disabled,l.name,l.tabIndex,l.indeterminate,l.ariaLabel||null,l.ariaLabelledby,l._getAriaChecked()]),n(e,5,0,o["\u0275nov"](e,6).unbounded)})}var ea={prefix:"far",iconName:"envelope-open",icon:[512,512,[],"f2b6","M494.586 164.516c-4.697-3.883-111.723-89.95-135.251-108.657C337.231 38.191 299.437 0 256 0c-43.205 0-80.636 37.717-103.335 55.859-24.463 19.45-131.07 105.195-135.15 108.549A48.004 48.004 0 0 0 0 201.485V464c0 26.51 21.49 48 48 48h416c26.51 0 48-21.49 48-48V201.509a48 48 0 0 0-17.414-36.993zM464 458a6 6 0 0 1-6 6H54a6 6 0 0 1-6-6V204.347c0-1.813.816-3.526 2.226-4.665 15.87-12.814 108.793-87.554 132.364-106.293C200.755 78.88 232.398 48 256 48c23.693 0 55.857 31.369 73.41 45.389 23.573 18.741 116.503 93.493 132.366 106.316a5.99 5.99 0 0 1 2.224 4.663V458zm-31.991-187.704c4.249 5.159 3.465 12.795-1.745 16.981-28.975 23.283-59.274 47.597-70.929 56.863C336.636 362.283 299.205 400 256 400c-43.452 0-81.287-38.237-103.335-55.86-11.279-8.967-41.744-33.413-70.927-56.865-5.21-4.187-5.993-11.822-1.745-16.981l15.258-18.528c4.178-5.073 11.657-5.843 16.779-1.726 28.618 23.001 58.566 47.035 70.56 56.571C200.143 320.631 232.307 352 256 352c23.602 0 55.246-30.88 73.41-45.389 11.994-9.535 41.944-33.57 70.563-56.568 5.122-4.116 12.601-3.346 16.778 1.727l15.258 18.526z"]},la={prefix:"far",iconName:"id-badge",icon:[384,512,[],"f2c1","M336 0H48C21.5 0 0 21.5 0 48v416c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48V48c0-26.5-21.5-48-48-48zm0 464H48V48h288v416zM144 112h96c8.8 0 16-7.2 16-16s-7.2-16-16-16h-96c-8.8 0-16 7.2-16 16s7.2 16 16 16zm48 176c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm-89.6 128h179.2c12.4 0 22.4-8.6 22.4-19.2v-19.2c0-31.8-30.1-57.6-67.2-57.6-10.8 0-18.7 8-44.8 8-26.9 0-33.4-8-44.8-8-37.1 0-67.2 25.8-67.2 57.6v19.2c0 10.6 10 19.2 22.4 19.2z"]},ta={prefix:"far",iconName:"id-card",icon:[576,512,[],"f2c2","M528 32H48C21.5 32 0 53.5 0 80v352c0 26.5 21.5 48 48 48h480c26.5 0 48-21.5 48-48V80c0-26.5-21.5-48-48-48zm0 400H303.2c.9-4.5.8 3.6.8-22.4 0-31.8-30.1-57.6-67.2-57.6-10.8 0-18.7 8-44.8 8-26.9 0-33.4-8-44.8-8-37.1 0-67.2 25.8-67.2 57.6 0 26-.2 17.9.8 22.4H48V144h480v288zm-168-80h112c4.4 0 8-3.6 8-8v-16c0-4.4-3.6-8-8-8H360c-4.4 0-8 3.6-8 8v16c0 4.4 3.6 8 8 8zm0-64h112c4.4 0 8-3.6 8-8v-16c0-4.4-3.6-8-8-8H360c-4.4 0-8 3.6-8 8v16c0 4.4 3.6 8 8 8zm0-64h112c4.4 0 8-3.6 8-8v-16c0-4.4-3.6-8-8-8H360c-4.4 0-8 3.6-8 8v16c0 4.4 3.6 8 8 8zm-168 96c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64z"]},ia={prefix:"far",iconName:"user-circle",icon:[496,512,[],"f2bd","M248 104c-53 0-96 43-96 96s43 96 96 96 96-43 96-96-43-96-96-96zm0 144c-26.5 0-48-21.5-48-48s21.5-48 48-48 48 21.5 48 48-21.5 48-48 48zm0-240C111 8 0 119 0 256s111 248 248 248 248-111 248-248S385 8 248 8zm0 448c-49.7 0-95.1-18.3-130.1-48.4 14.9-23 40.4-38.6 69.6-39.5 20.8 6.4 40.6 9.6 60.5 9.6s39.7-3.1 60.5-9.6c29.2 1 54.7 16.5 69.6 39.5-35 30.1-80.4 48.4-130.1 48.4zm162.7-84.1c-24.4-31.4-62.1-51.9-105.1-51.9-10.2 0-26 9.6-57.6 9.6-31.5 0-47.4-9.6-57.6-9.6-42.9 0-80.6 20.5-105.1 51.9C61.9 339.2 48 299.2 48 256c0-110.3 89.7-200 200-200s200 89.7 200 200c0 43.2-13.9 83.2-37.3 115.9z"]},oa=l("x1Tk"),aa=Object.assign||function(n){for(var e,l=1,t=arguments.length;l<t;l++)for(var i in e=arguments[l])Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n},ra={viewInvites:[["fas","eye"],["far","envelope-open"]],editInvites:[["fas","edit"],["far","envelope-open"]],manageForum:[["fas","edit"],["fas","comments"]],viewManagement:[["fas","eye"],["far","id-card"]],manageRoles:[["fas","edit"],["far","id-badge"]],editProfile:[["fas","edit"],["far","id-card"]],manageAlliance:[["fas","edit"],["fas","tasks"]]},ua=function(){function n(n,e){this.store=n,this.formBuilder=e,this.openAllianceProfile=new o.EventEmitter,this.openPlayerProfile=new o.EventEmitter,this.alliancePermissions=q.ALLIANCE_PERMISSIONS,this.allianceName="",this.inviteTarget="",this.rankings$=this.store.select(Cl),this.invitations$=this.store.select(pl),this.allianceData$=this.store.select(fl).pipe(Object(oa.a)(this.rankings$),Object(c.a)(function(n){var e=n[0],l=e.alliance,t=n[1];return{role:e.role,alliance:l?aa({},l,{members:l.members.map(function(n){var e=t[n.id];return aa({},n,{score:e&&e.score?e.score:0})}).sort(function(n,e){return e.score-n.score||n.id-e.id})}):null}})),Wt.d.add(Zt.t,Zt.j,Zt.h,ea,Zt.g,ta,la,Zt.s)}return n.prototype.ngOnInit=function(){},n.prototype.onOpenAllianceProfile=function(n){this.store.dispatch(new pe(n))},n.prototype.createAlliance=function(){this.allianceName.length>3&&this.store.dispatch(new H(this.allianceName))},n.prototype.acceptInvite=function(n){this.store.dispatch(new dn(n))},n.prototype.rejectInvite=function(n){this.store.dispatch(new mn(n))},n.prototype.createInvite=function(){this.store.dispatch(new on(this.inviteTarget))},n.prototype.cancelInvite=function(n){this.store.dispatch(new un(n))},n.prototype.updatePlayerRole=function(n){this.store.dispatch(new _n(n))},n.prototype.roleUpdate=function(n){this.store.dispatch(new vn(n))},n.prototype.roleRemove=function(n){this.store.dispatch(new Rn(n))},n.prototype.removeMember=function(n){this.store.dispatch(new kn(n))},n.prototype.destroyAlliance=function(){this.store.dispatch(new Z)},n.prototype.leaveAlliance=function(){this.store.dispatch(new X)},n}(),sa=Object.assign||function(n){for(var e,l=1,t=arguments.length;l<t;l++)for(var i in e=arguments[l])Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n},ca=function(){function n(n){this.formBuilder=n,this.roleUpdate=new o.EventEmitter,this.roleRemove=new o.EventEmitter,this.alliancePermissions=q.ALLIANCE_PERMISSIONS,this.permissionNames=ra,this.rolePermissionForm=this.formBuilder.group({roles:this.formBuilder.array([]),newRoles:this.formBuilder.array([])}),Wt.d.add(Zt.u,Zt.o)}return Object.defineProperty(n.prototype,"newRoles",{get:function(){return this.rolePermissionForm.controls.newRoles},enumerable:!0,configurable:!0}),n.prototype.ngOnChanges=function(n){var e=this,l=n.alliance.currentValue,t=l.roles.map(function(n){return e.formBuilder.group({id:n.id,name:[n.name,ti.v.required],permissions:e.formBuilder.group(n.id===l.masterRoleId?Object.entries(n.permissions).reduce(function(n,l){var t;return sa({},n,((t={})[l[0]]=e.formBuilder.control({value:l[1],disabled:!0}),t))},{}):n.permissions)})});this.rolePermissionForm.setControl("roles",this.formBuilder.array(t))},n.prototype.insertRole=function(){this.rolePermissionForm.get("newRoles").push(this.formBuilder.group({name:["",ti.v.required],permissions:this.formBuilder.group(this.alliancePermissions.reduce(function(n,e){return sa({},n,((l={})[e]=!1,l));var l},{}))}))},n.prototype.removeRole=function(n){this.rolePermissionForm.controls.newRoles.removeAt(n)},n.prototype.deleteRole=function(n){this.roleRemove.emit(n)},n.prototype.saveChanges=function(){var n=this,e=this.rolePermissionForm.controls.roles,l=e.touched?e.value.filter(function(e,l){var t=n.alliance.roles[l];return e.name.toLowerCase()!==t.name.toLowerCase()||e.id!==n.alliance.masterRoleId&&n.alliancePermissions.some(function(n){return e.permissions[n]!==t.permissions[n]})}):[];this.roleUpdate.emit({roles:l,newRoles:this.rolePermissionForm.controls.newRoles.value}),this.rolePermissionForm.setControl("newRoles",this.formBuilder.array([]))},n}(),da=o["\u0275crt"]({encapsulation:0,styles:[[".heading-split[_ngcontent-%COMP%]{position:relative}"]],data:{}});function pa(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,4,"div",[["class","col text-center"]],null,null,null,null,null)),(n()(),o["\u0275eld"](1,0,null,null,1,"fa-icon",[["class","ng-fa-icon"]],[[8,"innerHTML",1]],null,null,Lt.b,Lt.a)),o["\u0275did"](2,573440,null,0,$t.a,[qt.c],{iconProp:[0,"iconProp"]},null),(n()(),o["\u0275eld"](3,0,null,null,1,"fa-icon",[["class","ng-fa-icon"]],[[8,"innerHTML",1]],null,null,Lt.b,Lt.a)),o["\u0275did"](4,573440,null,0,$t.a,[qt.c],{iconProp:[0,"iconProp"]},null)],function(n,e){var l=e.component;n(e,2,0,l.permissionNames[e.context.$implicit][0]),n(e,4,0,l.permissionNames[e.context.$implicit][1])},function(n,e){n(e,1,0,o["\u0275nov"](e,2).renderedIconHTML),n(e,3,0,o["\u0275nov"](e,4).renderedIconHTML)})}function fa(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,3,"mat-hint",[["align","start"],["class","mat-hint"]],[[2,"mat-right",null],[1,"id",0],[1,"align",0]],null,null,null,null)),o["\u0275did"](1,16384,[[5,4]],0,bo.e,[],{align:[0,"align"]},null),(n()(),o["\u0275eld"](2,0,null,null,1,"strong",[],null,null,null,null,null)),(n()(),o["\u0275ted"](-1,null,["Default role"]))],function(n,e){n(e,1,0,"start")},function(n,e){n(e,0,0,"end"==o["\u0275nov"](e,1).align,o["\u0275nov"](e,1).id,null)})}function ma(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,3,"mat-hint",[["align","start"],["class","mat-hint"]],[[2,"mat-right",null],[1,"id",0],[1,"align",0]],null,null,null,null)),o["\u0275did"](1,16384,[[5,4]],0,bo.e,[],{align:[0,"align"]},null),(n()(),o["\u0275eld"](2,0,null,null,1,"strong",[],null,null,null,null,null)),(n()(),o["\u0275ted"](-1,null,["Master role"]))],function(n,e){n(e,1,0,"start")},function(n,e){n(e,0,0,"end"==o["\u0275nov"](e,1).align,o["\u0275nov"](e,1).id,null)})}function ha(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,16777216,null,null,10,"div",[["class","col text-center"],["formGroupName","permissions"],["matTooltip","Can't change master role permissions"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"longpress"],[null,"keydown"],[null,"touchend"]],function(n,e,l){var t=!0;return"longpress"===e&&(t=!1!==o["\u0275nov"](n,1).show()&&t),"keydown"===e&&(t=!1!==o["\u0275nov"](n,1)._handleKeydown(l)&&t),"touchend"===e&&(t=!1!==o["\u0275nov"](n,1)._handleTouchend()&&t),t},null,null)),o["\u0275did"](1,147456,null,0,gt,[rt.c,o.ElementRef,xt.c,o.ViewContainerRef,o.NgZone,Ct.a,Rt.c,Rt.f,ft,[2,wt.b],[2,ht]],{disabled:[0,"disabled"],message:[1,"message"]},null),o["\u0275did"](2,212992,null,0,ti.i,[[3,ti.c],[8,null],[8,null]],{name:[0,"name"]},null),o["\u0275prd"](2048,null,ti.c,null,[ti.i]),o["\u0275did"](4,16384,null,0,ti.o,[[4,ti.c]],null,null),(n()(),o["\u0275eld"](5,0,null,null,5,"mat-checkbox",[["class","mat-checkbox"]],[[8,"id",0],[2,"mat-checkbox-indeterminate",null],[2,"mat-checkbox-checked",null],[2,"mat-checkbox-disabled",null],[2,"mat-checkbox-label-before",null],[2,"_mat-animation-noopable",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],null,null,na,Jo)),o["\u0275did"](6,4374528,null,0,Qo,[o.ElementRef,o.ChangeDetectorRef,Rt.f,o.NgZone,[8,null],[2,Go],[2,Di.a]],null,null),o["\u0275prd"](1024,null,ti.l,function(n){return[n]},[Qo]),o["\u0275did"](8,671744,null,0,ti.g,[[3,ti.c],[8,null],[8,null],[6,ti.l],[2,ti.A]],{name:[0,"name"]},null),o["\u0275prd"](2048,null,ti.m,null,[ti.g]),o["\u0275did"](10,16384,null,0,ti.n,[[4,ti.m]],null,null),(n()(),o["\u0275and"](0,null,null,0))],function(n,e){n(e,1,0,e.parent.context.$implicit.id!==e.component.alliance.masterRoleId,"Can't change master role permissions"),n(e,2,0,"permissions"),n(e,8,0,e.context.$implicit)},function(n,e){n(e,0,0,o["\u0275nov"](e,4).ngClassUntouched,o["\u0275nov"](e,4).ngClassTouched,o["\u0275nov"](e,4).ngClassPristine,o["\u0275nov"](e,4).ngClassDirty,o["\u0275nov"](e,4).ngClassValid,o["\u0275nov"](e,4).ngClassInvalid,o["\u0275nov"](e,4).ngClassPending),n(e,5,1,[o["\u0275nov"](e,6).id,o["\u0275nov"](e,6).indeterminate,o["\u0275nov"](e,6).checked,o["\u0275nov"](e,6).disabled,"before"==o["\u0275nov"](e,6).labelPosition,"NoopAnimations"===o["\u0275nov"](e,6)._animationMode,o["\u0275nov"](e,10).ngClassUntouched,o["\u0275nov"](e,10).ngClassTouched,o["\u0275nov"](e,10).ngClassPristine,o["\u0275nov"](e,10).ngClassDirty,o["\u0275nov"](e,10).ngClassValid,o["\u0275nov"](e,10).ngClassInvalid,o["\u0275nov"](e,10).ngClassPending])})}function ga(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,32,"div",[["class","row align-items-center"],["style","border-bottom: 1px solid var(--secondary);"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],null,null,null,null)),o["\u0275did"](1,212992,null,0,ti.i,[[3,ti.c],[8,null],[8,null]],{name:[0,"name"]},null),o["\u0275prd"](2048,null,ti.c,null,[ti.i]),o["\u0275did"](3,16384,null,0,ti.o,[[4,ti.c]],null,null),(n()(),o["\u0275eld"](4,0,null,null,21,"div",[["class","col"]],null,null,null,null,null)),(n()(),o["\u0275eld"](5,0,null,null,20,"mat-form-field",[["class","mat-form-field"],["floatLabel","never"]],[[2,"mat-form-field-appearance-standard",null],[2,"mat-form-field-appearance-fill",null],[2,"mat-form-field-appearance-outline",null],[2,"mat-form-field-appearance-legacy",null],[2,"mat-form-field-invalid",null],[2,"mat-form-field-can-float",null],[2,"mat-form-field-should-float",null],[2,"mat-form-field-hide-placeholder",null],[2,"mat-form-field-disabled",null],[2,"mat-form-field-autofilled",null],[2,"mat-focused",null],[2,"mat-accent",null],[2,"mat-warn",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null],[2,"_mat-animation-noopable",null]],null,null,vo.b,vo.a)),o["\u0275did"](6,7389184,null,7,bo.b,[o.ElementRef,o.ChangeDetectorRef,[2,St.j],[2,wt.b],[2,bo.a],Ct.a,o.NgZone,[2,Di.a]],{floatLabel:[0,"floatLabel"]},null),o["\u0275qud"](335544320,1,{_control:0}),o["\u0275qud"](335544320,2,{_placeholderChild:0}),o["\u0275qud"](335544320,3,{_labelChild:0}),o["\u0275qud"](603979776,4,{_errorChildren:1}),o["\u0275qud"](603979776,5,{_hintChildren:1}),o["\u0275qud"](603979776,6,{_prefixChildren:1}),o["\u0275qud"](603979776,7,{_suffixChildren:1}),(n()(),o["\u0275eld"](14,0,null,1,7,"input",[["class","mat-input-element mat-form-field-autofill-control"],["formControlName","name"],["matInput",""],["placeholder","Role name"],["type","text"]],[[2,"mat-input-server",null],[1,"id",0],[1,"placeholder",0],[8,"disabled",0],[8,"required",0],[8,"readOnly",0],[1,"aria-describedby",0],[1,"aria-invalid",0],[1,"aria-required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"focus"]],function(n,e,l){var t=!0;return"input"===e&&(t=!1!==o["\u0275nov"](n,15)._handleInput(l.target.value)&&t),"blur"===e&&(t=!1!==o["\u0275nov"](n,15).onTouched()&&t),"compositionstart"===e&&(t=!1!==o["\u0275nov"](n,15)._compositionStart()&&t),"compositionend"===e&&(t=!1!==o["\u0275nov"](n,15)._compositionEnd(l.target.value)&&t),"blur"===e&&(t=!1!==o["\u0275nov"](n,19)._focusChanged(!1)&&t),"focus"===e&&(t=!1!==o["\u0275nov"](n,19)._focusChanged(!0)&&t),"input"===e&&(t=!1!==o["\u0275nov"](n,19)._onInput()&&t),t},null,null)),o["\u0275did"](15,16384,null,0,ti.d,[o.Renderer2,o.ElementRef,[2,ti.a]],null,null),o["\u0275prd"](1024,null,ti.l,function(n){return[n]},[ti.d]),o["\u0275did"](17,671744,null,0,ti.g,[[3,ti.c],[8,null],[8,null],[6,ti.l],[2,ti.A]],{name:[0,"name"]},null),o["\u0275prd"](2048,null,ti.m,null,[ti.g]),o["\u0275did"](19,999424,null,0,yo.a,[o.ElementRef,Ct.a,[6,ti.m],[2,ti.p],[2,ti.h],St.d,[8,null],_o.a,o.NgZone],{placeholder:[0,"placeholder"],type:[1,"type"]},null),o["\u0275did"](20,16384,null,0,ti.n,[[4,ti.m]],null,null),o["\u0275prd"](2048,[[1,4]],bo.c,null,[yo.a]),(n()(),o["\u0275and"](16777216,null,6,1,null,fa)),o["\u0275did"](23,16384,null,0,yt.NgIf,[o.ViewContainerRef,o.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),o["\u0275and"](16777216,null,6,1,null,ma)),o["\u0275did"](25,16384,null,0,yt.NgIf,[o.ViewContainerRef,o.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),o["\u0275eld"](26,16777216,null,null,4,"div",[["class","col text-center"],["matTooltip","Master and default roles can't be deleted"]],null,[[null,"longpress"],[null,"keydown"],[null,"touchend"]],function(n,e,l){var t=!0;return"longpress"===e&&(t=!1!==o["\u0275nov"](n,27).show()&&t),"keydown"===e&&(t=!1!==o["\u0275nov"](n,27)._handleKeydown(l)&&t),"touchend"===e&&(t=!1!==o["\u0275nov"](n,27)._handleTouchend()&&t),t},null,null)),o["\u0275did"](27,147456,null,0,gt,[rt.c,o.ElementRef,xt.c,o.ViewContainerRef,o.NgZone,Ct.a,Rt.c,Rt.f,ft,[2,wt.b],[2,ht]],{disabled:[0,"disabled"],message:[1,"message"]},null),(n()(),o["\u0275eld"](28,0,null,null,2,"button",[["color","warn"],["mat-raised-button",""]],[[8,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"]],function(n,e,l){var t=!0;return"click"===e&&(t=!1!==n.component.deleteRole(n.context.$implicit.id)&&t),t},ho.b,ho.a)),o["\u0275did"](29,180224,null,0,go.b,[o.ElementRef,Ct.a,Rt.f,[2,Di.a]],{disabled:[0,"disabled"],color:[1,"color"]},null),(n()(),o["\u0275ted"](-1,0,["Delete"])),(n()(),o["\u0275and"](16777216,null,null,1,null,ha)),o["\u0275did"](32,802816,null,0,yt.NgForOf,[o.ViewContainerRef,o.TemplateRef,o.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],function(n,e){var l=e.component;n(e,1,0,e.context.index),n(e,6,0,"never"),n(e,17,0,"name"),n(e,19,0,"Role name","text"),n(e,23,0,e.context.$implicit.id===l.alliance.DefaultRoleId),n(e,25,0,e.context.$implicit.id===l.alliance.MasterRoleId),n(e,27,0,e.context.$implicit.id!==l.alliance.defaultRoleId&&e.context.$implicit.id!==l.alliance.masterRoleId,"Master and default roles can't be deleted"),n(e,29,0,e.context.$implicit.id===l.alliance.defaultRoleId||e.context.$implicit.id===l.alliance.masterRoleId,"warn"),n(e,32,0,l.alliancePermissions)},function(n,e){n(e,0,0,o["\u0275nov"](e,3).ngClassUntouched,o["\u0275nov"](e,3).ngClassTouched,o["\u0275nov"](e,3).ngClassPristine,o["\u0275nov"](e,3).ngClassDirty,o["\u0275nov"](e,3).ngClassValid,o["\u0275nov"](e,3).ngClassInvalid,o["\u0275nov"](e,3).ngClassPending),n(e,5,1,["standard"==o["\u0275nov"](e,6).appearance,"fill"==o["\u0275nov"](e,6).appearance,"outline"==o["\u0275nov"](e,6).appearance,"legacy"==o["\u0275nov"](e,6).appearance,o["\u0275nov"](e,6)._control.errorState,o["\u0275nov"](e,6)._canLabelFloat,o["\u0275nov"](e,6)._shouldLabelFloat(),o["\u0275nov"](e,6)._hideControlPlaceholder(),o["\u0275nov"](e,6)._control.disabled,o["\u0275nov"](e,6)._control.autofilled,o["\u0275nov"](e,6)._control.focused,"accent"==o["\u0275nov"](e,6).color,"warn"==o["\u0275nov"](e,6).color,o["\u0275nov"](e,6)._shouldForward("untouched"),o["\u0275nov"](e,6)._shouldForward("touched"),o["\u0275nov"](e,6)._shouldForward("pristine"),o["\u0275nov"](e,6)._shouldForward("dirty"),o["\u0275nov"](e,6)._shouldForward("valid"),o["\u0275nov"](e,6)._shouldForward("invalid"),o["\u0275nov"](e,6)._shouldForward("pending"),!o["\u0275nov"](e,6)._animationsEnabled]),n(e,14,1,[o["\u0275nov"](e,19)._isServer,o["\u0275nov"](e,19).id,o["\u0275nov"](e,19).placeholder,o["\u0275nov"](e,19).disabled,o["\u0275nov"](e,19).required,o["\u0275nov"](e,19).readonly,o["\u0275nov"](e,19)._ariaDescribedby||null,o["\u0275nov"](e,19).errorState,o["\u0275nov"](e,19).required.toString(),o["\u0275nov"](e,20).ngClassUntouched,o["\u0275nov"](e,20).ngClassTouched,o["\u0275nov"](e,20).ngClassPristine,o["\u0275nov"](e,20).ngClassDirty,o["\u0275nov"](e,20).ngClassValid,o["\u0275nov"](e,20).ngClassInvalid,o["\u0275nov"](e,20).ngClassPending]),n(e,28,0,o["\u0275nov"](e,29).disabled||null,"NoopAnimations"===o["\u0275nov"](e,29)._animationMode)})}function va(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,9,"div",[["class","col text-center"],["formGroupName","permissions"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],null,null,null,null)),o["\u0275did"](1,212992,null,0,ti.i,[[3,ti.c],[8,null],[8,null]],{name:[0,"name"]},null),o["\u0275prd"](2048,null,ti.c,null,[ti.i]),o["\u0275did"](3,16384,null,0,ti.o,[[4,ti.c]],null,null),(n()(),o["\u0275eld"](4,0,null,null,5,"mat-checkbox",[["class","mat-checkbox"]],[[8,"id",0],[2,"mat-checkbox-indeterminate",null],[2,"mat-checkbox-checked",null],[2,"mat-checkbox-disabled",null],[2,"mat-checkbox-label-before",null],[2,"_mat-animation-noopable",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],null,null,na,Jo)),o["\u0275did"](5,4374528,null,0,Qo,[o.ElementRef,o.ChangeDetectorRef,Rt.f,o.NgZone,[8,null],[2,Go],[2,Di.a]],null,null),o["\u0275prd"](1024,null,ti.l,function(n){return[n]},[Qo]),o["\u0275did"](7,671744,null,0,ti.g,[[3,ti.c],[8,null],[8,null],[6,ti.l],[2,ti.A]],{name:[0,"name"]},null),o["\u0275prd"](2048,null,ti.m,null,[ti.g]),o["\u0275did"](9,16384,null,0,ti.n,[[4,ti.m]],null,null)],function(n,e){n(e,1,0,"permissions"),n(e,7,0,e.context.$implicit)},function(n,e){n(e,0,0,o["\u0275nov"](e,3).ngClassUntouched,o["\u0275nov"](e,3).ngClassTouched,o["\u0275nov"](e,3).ngClassPristine,o["\u0275nov"](e,3).ngClassDirty,o["\u0275nov"](e,3).ngClassValid,o["\u0275nov"](e,3).ngClassInvalid,o["\u0275nov"](e,3).ngClassPending),n(e,4,1,[o["\u0275nov"](e,5).id,o["\u0275nov"](e,5).indeterminate,o["\u0275nov"](e,5).checked,o["\u0275nov"](e,5).disabled,"before"==o["\u0275nov"](e,5).labelPosition,"NoopAnimations"===o["\u0275nov"](e,5)._animationMode,o["\u0275nov"](e,9).ngClassUntouched,o["\u0275nov"](e,9).ngClassTouched,o["\u0275nov"](e,9).ngClassPristine,o["\u0275nov"](e,9).ngClassDirty,o["\u0275nov"](e,9).ngClassValid,o["\u0275nov"](e,9).ngClassInvalid,o["\u0275nov"](e,9).ngClassPending])})}function ba(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,27,"div",[["class","row align-items-center"],["style","border-bottom: 1px solid var(--secondary);"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],null,null,null,null)),o["\u0275did"](1,212992,null,0,ti.i,[[3,ti.c],[8,null],[8,null]],{name:[0,"name"]},null),o["\u0275prd"](2048,null,ti.c,null,[ti.i]),o["\u0275did"](3,16384,null,0,ti.o,[[4,ti.c]],null,null),(n()(),o["\u0275eld"](4,0,null,null,17,"div",[["class","col"]],null,null,null,null,null)),(n()(),o["\u0275eld"](5,0,null,null,16,"mat-form-field",[["class","mat-form-field"],["floatLabel","never"]],[[2,"mat-form-field-appearance-standard",null],[2,"mat-form-field-appearance-fill",null],[2,"mat-form-field-appearance-outline",null],[2,"mat-form-field-appearance-legacy",null],[2,"mat-form-field-invalid",null],[2,"mat-form-field-can-float",null],[2,"mat-form-field-should-float",null],[2,"mat-form-field-hide-placeholder",null],[2,"mat-form-field-disabled",null],[2,"mat-form-field-autofilled",null],[2,"mat-focused",null],[2,"mat-accent",null],[2,"mat-warn",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null],[2,"_mat-animation-noopable",null]],null,null,vo.b,vo.a)),o["\u0275did"](6,7389184,null,7,bo.b,[o.ElementRef,o.ChangeDetectorRef,[2,St.j],[2,wt.b],[2,bo.a],Ct.a,o.NgZone,[2,Di.a]],{floatLabel:[0,"floatLabel"]},null),o["\u0275qud"](335544320,8,{_control:0}),o["\u0275qud"](335544320,9,{_placeholderChild:0}),o["\u0275qud"](335544320,10,{_labelChild:0}),o["\u0275qud"](603979776,11,{_errorChildren:1}),o["\u0275qud"](603979776,12,{_hintChildren:1}),o["\u0275qud"](603979776,13,{_prefixChildren:1}),o["\u0275qud"](603979776,14,{_suffixChildren:1}),(n()(),o["\u0275eld"](14,0,null,1,7,"input",[["class","mat-input-element mat-form-field-autofill-control"],["formControlName","name"],["matInput",""],["placeholder","Role name"],["type","text"]],[[2,"mat-input-server",null],[1,"id",0],[1,"placeholder",0],[8,"disabled",0],[8,"required",0],[8,"readOnly",0],[1,"aria-describedby",0],[1,"aria-invalid",0],[1,"aria-required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"focus"]],function(n,e,l){var t=!0;return"input"===e&&(t=!1!==o["\u0275nov"](n,15)._handleInput(l.target.value)&&t),"blur"===e&&(t=!1!==o["\u0275nov"](n,15).onTouched()&&t),"compositionstart"===e&&(t=!1!==o["\u0275nov"](n,15)._compositionStart()&&t),"compositionend"===e&&(t=!1!==o["\u0275nov"](n,15)._compositionEnd(l.target.value)&&t),"blur"===e&&(t=!1!==o["\u0275nov"](n,19)._focusChanged(!1)&&t),"focus"===e&&(t=!1!==o["\u0275nov"](n,19)._focusChanged(!0)&&t),"input"===e&&(t=!1!==o["\u0275nov"](n,19)._onInput()&&t),t},null,null)),o["\u0275did"](15,16384,null,0,ti.d,[o.Renderer2,o.ElementRef,[2,ti.a]],null,null),o["\u0275prd"](1024,null,ti.l,function(n){return[n]},[ti.d]),o["\u0275did"](17,671744,null,0,ti.g,[[3,ti.c],[8,null],[8,null],[6,ti.l],[2,ti.A]],{name:[0,"name"]},null),o["\u0275prd"](2048,null,ti.m,null,[ti.g]),o["\u0275did"](19,999424,null,0,yo.a,[o.ElementRef,Ct.a,[6,ti.m],[2,ti.p],[2,ti.h],St.d,[8,null],_o.a,o.NgZone],{placeholder:[0,"placeholder"],type:[1,"type"]},null),o["\u0275did"](20,16384,null,0,ti.n,[[4,ti.m]],null,null),o["\u0275prd"](2048,[[8,4]],bo.c,null,[yo.a]),(n()(),o["\u0275eld"](22,0,null,null,3,"div",[["class","col text-center"]],null,null,null,null,null)),(n()(),o["\u0275eld"](23,0,null,null,2,"button",[["color","warn"],["mat-raised-button",""]],[[8,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"]],function(n,e,l){var t=!0;return"click"===e&&(t=!1!==n.component.removeRole(n.context.index)&&t),t},ho.b,ho.a)),o["\u0275did"](24,180224,null,0,go.b,[o.ElementRef,Ct.a,Rt.f,[2,Di.a]],{color:[0,"color"]},null),(n()(),o["\u0275ted"](-1,0,["Remove"])),(n()(),o["\u0275and"](16777216,null,null,1,null,va)),o["\u0275did"](27,802816,null,0,yt.NgForOf,[o.ViewContainerRef,o.TemplateRef,o.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],function(n,e){var l=e.component;n(e,1,0,e.context.index),n(e,6,0,"never"),n(e,17,0,"name"),n(e,19,0,"Role name","text"),n(e,24,0,"warn"),n(e,27,0,l.alliancePermissions)},function(n,e){n(e,0,0,o["\u0275nov"](e,3).ngClassUntouched,o["\u0275nov"](e,3).ngClassTouched,o["\u0275nov"](e,3).ngClassPristine,o["\u0275nov"](e,3).ngClassDirty,o["\u0275nov"](e,3).ngClassValid,o["\u0275nov"](e,3).ngClassInvalid,o["\u0275nov"](e,3).ngClassPending),n(e,5,1,["standard"==o["\u0275nov"](e,6).appearance,"fill"==o["\u0275nov"](e,6).appearance,"outline"==o["\u0275nov"](e,6).appearance,"legacy"==o["\u0275nov"](e,6).appearance,o["\u0275nov"](e,6)._control.errorState,o["\u0275nov"](e,6)._canLabelFloat,o["\u0275nov"](e,6)._shouldLabelFloat(),o["\u0275nov"](e,6)._hideControlPlaceholder(),o["\u0275nov"](e,6)._control.disabled,o["\u0275nov"](e,6)._control.autofilled,o["\u0275nov"](e,6)._control.focused,"accent"==o["\u0275nov"](e,6).color,"warn"==o["\u0275nov"](e,6).color,o["\u0275nov"](e,6)._shouldForward("untouched"),o["\u0275nov"](e,6)._shouldForward("touched"),o["\u0275nov"](e,6)._shouldForward("pristine"),o["\u0275nov"](e,6)._shouldForward("dirty"),o["\u0275nov"](e,6)._shouldForward("valid"),o["\u0275nov"](e,6)._shouldForward("invalid"),o["\u0275nov"](e,6)._shouldForward("pending"),!o["\u0275nov"](e,6)._animationsEnabled]),n(e,14,1,[o["\u0275nov"](e,19)._isServer,o["\u0275nov"](e,19).id,o["\u0275nov"](e,19).placeholder,o["\u0275nov"](e,19).disabled,o["\u0275nov"](e,19).required,o["\u0275nov"](e,19).readonly,o["\u0275nov"](e,19)._ariaDescribedby||null,o["\u0275nov"](e,19).errorState,o["\u0275nov"](e,19).required.toString(),o["\u0275nov"](e,20).ngClassUntouched,o["\u0275nov"](e,20).ngClassTouched,o["\u0275nov"](e,20).ngClassPristine,o["\u0275nov"](e,20).ngClassDirty,o["\u0275nov"](e,20).ngClassValid,o["\u0275nov"](e,20).ngClassInvalid,o["\u0275nov"](e,20).ngClassPending]),n(e,23,0,o["\u0275nov"](e,24).disabled||null,"NoopAnimations"===o["\u0275nov"](e,24)._animationMode)})}function ya(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,5,"div",[["class","roles roles-new"],["formArrayName","newRoles"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],null,null,null,null)),o["\u0275did"](1,212992,null,0,ti.e,[[3,ti.c],[8,null],[8,null]],{name:[0,"name"]},null),o["\u0275prd"](2048,null,ti.c,null,[ti.e]),o["\u0275did"](3,16384,null,0,ti.o,[[4,ti.c]],null,null),(n()(),o["\u0275and"](16777216,null,null,1,null,ba)),o["\u0275did"](5,802816,null,0,yt.NgForOf,[o.ViewContainerRef,o.TemplateRef,o.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],function(n,e){var l=e.component;n(e,1,0,"newRoles"),n(e,5,0,l.newRoles.controls)},function(n,e){n(e,0,0,o["\u0275nov"](e,3).ngClassUntouched,o["\u0275nov"](e,3).ngClassTouched,o["\u0275nov"](e,3).ngClassPristine,o["\u0275nov"](e,3).ngClassDirty,o["\u0275nov"](e,3).ngClassValid,o["\u0275nov"](e,3).ngClassInvalid,o["\u0275nov"](e,3).ngClassPending)})}function _a(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,35,"form",[["class","pt-4 mb-2"],["novalidate",""],["style","overflow: hidden;"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(n,e,l){var t=!0;return"submit"===e&&(t=!1!==o["\u0275nov"](n,2).onSubmit(l)&&t),"reset"===e&&(t=!1!==o["\u0275nov"](n,2).onReset()&&t),t},null,null)),o["\u0275did"](1,16384,null,0,ti.y,[],null,null),o["\u0275did"](2,540672,null,0,ti.h,[[8,null],[8,null]],{form:[0,"form"]},null),o["\u0275prd"](2048,null,ti.c,null,[ti.h]),o["\u0275did"](4,16384,null,0,ti.o,[[4,ti.c]],null,null),(n()(),o["\u0275eld"](5,0,null,null,10,"div",[["class","row pt-1"],["style","color: var(--light); background-color: var(--indigo)"]],null,null,null,null,null)),(n()(),o["\u0275eld"](6,0,null,null,3,"div",[["class","col"]],null,null,null,null,null)),(n()(),o["\u0275eld"](7,0,null,null,2,"div",[["class","heading-split px-1"]],null,null,null,null,null)),(n()(),o["\u0275eld"](8,0,null,null,1,"strong",[],null,null,null,null,null)),(n()(),o["\u0275ted"](-1,null,["Role"])),(n()(),o["\u0275eld"](10,0,null,null,3,"div",[["class","col text-center"]],null,null,null,null,null)),(n()(),o["\u0275eld"](11,0,null,null,2,"fa-icon",[["class","ng-fa-icon"]],[[8,"innerHTML",1]],null,null,Lt.b,Lt.a)),o["\u0275did"](12,573440,null,0,$t.a,[qt.c],{iconProp:[0,"iconProp"]},null),o["\u0275pad"](13,2),(n()(),o["\u0275and"](16777216,null,null,1,null,pa)),o["\u0275did"](15,802816,null,0,yt.NgForOf,[o.ViewContainerRef,o.TemplateRef,o.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(n()(),o["\u0275eld"](16,0,null,null,5,"div",[["class","roles roles-current"],["formArrayName","roles"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],null,null,null,null)),o["\u0275did"](17,212992,null,0,ti.e,[[3,ti.c],[8,null],[8,null]],{name:[0,"name"]},null),o["\u0275prd"](2048,null,ti.c,null,[ti.e]),o["\u0275did"](19,16384,null,0,ti.o,[[4,ti.c]],null,null),(n()(),o["\u0275and"](16777216,null,null,1,null,ga)),o["\u0275did"](21,802816,null,0,yt.NgForOf,[o.ViewContainerRef,o.TemplateRef,o.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(n()(),o["\u0275and"](16777216,null,null,1,null,ya)),o["\u0275did"](23,16384,null,0,yt.NgIf,[o.ViewContainerRef,o.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),o["\u0275eld"](24,0,null,null,11,"div",[["class","row pt-3"]],null,null,null,null,null)),(n()(),o["\u0275eld"](25,0,null,null,6,"div",[["class","col"]],null,null,null,null,null)),(n()(),o["\u0275eld"](26,0,null,null,5,"button",[["color","accent"],["mat-raised-button",""]],[[8,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"]],function(n,e,l){var t=!0;return"click"===e&&(t=!1!==n.component.insertRole()&&t),t},ho.b,ho.a)),o["\u0275did"](27,180224,null,0,go.b,[o.ElementRef,Ct.a,Rt.f,[2,Di.a]],{color:[0,"color"]},null),(n()(),o["\u0275eld"](28,0,null,0,2,"fa-icon",[["class","ng-fa-icon"]],[[8,"innerHTML",1]],null,null,Lt.b,Lt.a)),o["\u0275did"](29,573440,null,0,$t.a,[qt.c],{iconProp:[0,"iconProp"]},null),o["\u0275pad"](30,2),(n()(),o["\u0275ted"](-1,0,[" Add Role"])),(n()(),o["\u0275eld"](32,0,null,null,3,"div",[["class","col text-right"]],null,null,null,null,null)),(n()(),o["\u0275eld"](33,0,null,null,2,"button",[["color","primary"],["mat-raised-button",""],["type","submit"]],[[8,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"]],function(n,e,l){var t=!0;return"click"===e&&(t=!1!==n.component.saveChanges()&&t),t},ho.b,ho.a)),o["\u0275did"](34,180224,null,0,go.b,[o.ElementRef,Ct.a,Rt.f,[2,Di.a]],{disabled:[0,"disabled"],color:[1,"color"]},null),(n()(),o["\u0275ted"](-1,0,["Update Roles"]))],function(n,e){var l=e.component;n(e,2,0,l.rolePermissionForm),n(e,12,0,n(e,13,0,"fas","trash")),n(e,15,0,l.alliancePermissions),n(e,17,0,"roles"),n(e,21,0,l.alliance.roles),n(e,23,0,l.newRoles.length),n(e,27,0,"accent"),n(e,29,0,n(e,30,0,"fas","plus")),n(e,34,0,!l.rolePermissionForm.valid||!l.rolePermissionForm.touched,"primary")},function(n,e){n(e,0,0,o["\u0275nov"](e,4).ngClassUntouched,o["\u0275nov"](e,4).ngClassTouched,o["\u0275nov"](e,4).ngClassPristine,o["\u0275nov"](e,4).ngClassDirty,o["\u0275nov"](e,4).ngClassValid,o["\u0275nov"](e,4).ngClassInvalid,o["\u0275nov"](e,4).ngClassPending),n(e,11,0,o["\u0275nov"](e,12).renderedIconHTML),n(e,16,0,o["\u0275nov"](e,19).ngClassUntouched,o["\u0275nov"](e,19).ngClassTouched,o["\u0275nov"](e,19).ngClassPristine,o["\u0275nov"](e,19).ngClassDirty,o["\u0275nov"](e,19).ngClassValid,o["\u0275nov"](e,19).ngClassInvalid,o["\u0275nov"](e,19).ngClassPending),n(e,26,0,o["\u0275nov"](e,27).disabled||null,"NoopAnimations"===o["\u0275nov"](e,27)._animationMode),n(e,28,0,o["\u0275nov"](e,29).renderedIconHTML),n(e,33,0,o["\u0275nov"](e,34).disabled||null,"NoopAnimations"===o["\u0275nov"](e,34)._animationMode)})}var wa=l("MlvX"),Ca=l("Azqq"),Ra=l("uGex"),xa=function(){function n(){this.playerRoleUpdate=new o.EventEmitter,this.playerRemove=new o.EventEmitter,this.alliancePermissions=q.ALLIANCE_PERMISSIONS,this.permissionNames=ra,this.allianceRolePermissions={}}return n.prototype.compareRoles=function(n,e){return n&&e&&n.name===e.name},n.prototype.removePlayer=function(n){this.playerRemove.emit(n)},n.prototype.updatePlayerRole=function(n,e){this.playerRoleUpdate.emit({roleId:n,playerId:e})},n}(),Sa=o["\u0275crt"]({encapsulation:0,styles:[[""]],data:{}});function ka(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,4,"div",[["class","col text-center"]],null,null,null,null,null)),(n()(),o["\u0275eld"](1,0,null,null,1,"fa-icon",[["class","ng-fa-icon"]],[[8,"innerHTML",1]],null,null,Lt.b,Lt.a)),o["\u0275did"](2,573440,null,0,$t.a,[qt.c],{iconProp:[0,"iconProp"]},null),(n()(),o["\u0275eld"](3,0,null,null,1,"fa-icon",[["class","ng-fa-icon"]],[[8,"innerHTML",1]],null,null,Lt.b,Lt.a)),o["\u0275did"](4,573440,null,0,$t.a,[qt.c],{iconProp:[0,"iconProp"]},null)],function(n,e){var l=e.component;n(e,2,0,l.permissionNames[e.context.$implicit][0]),n(e,4,0,l.permissionNames[e.context.$implicit][1])},function(n,e){n(e,1,0,o["\u0275nov"](e,2).renderedIconHTML),n(e,3,0,o["\u0275nov"](e,4).renderedIconHTML)})}function Ia(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,2,"mat-option",[["class","mat-option"],["role","option"]],[[1,"tabindex",0],[2,"mat-selected",null],[2,"mat-option-multiple",null],[2,"mat-active",null],[8,"id",0],[1,"aria-selected",0],[1,"aria-disabled",0],[2,"mat-option-disabled",null]],[[null,"click"],[null,"keydown"]],function(n,e,l){var t=!0;return"click"===e&&(t=!1!==o["\u0275nov"](n,1)._selectViaInteraction()&&t),"keydown"===e&&(t=!1!==o["\u0275nov"](n,1)._handleKeydown(l)&&t),t},wa.c,wa.a)),o["\u0275did"](1,8568832,[[8,4]],0,St.s,[o.ElementRef,o.ChangeDetectorRef,[2,St.l],[2,St.r]],{value:[0,"value"]},null),(n()(),o["\u0275ted"](2,0,["",""]))],function(n,e){n(e,1,0,e.context.$implicit)},function(n,e){n(e,0,0,o["\u0275nov"](e,1)._getTabIndex(),o["\u0275nov"](e,1).selected,o["\u0275nov"](e,1).multiple,o["\u0275nov"](e,1).active,o["\u0275nov"](e,1).id,o["\u0275nov"](e,1).selected.toString(),o["\u0275nov"](e,1).disabled.toString(),o["\u0275nov"](e,1).disabled),n(e,2,0,e.context.$implicit.name)})}function Oa(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,3,"div",[["class","col text-center"]],null,null,null,null,null)),(n()(),o["\u0275eld"](1,0,null,null,2,"mat-checkbox",[["class","mat-checkbox"],["disabled",""]],[[8,"id",0],[2,"mat-checkbox-indeterminate",null],[2,"mat-checkbox-checked",null],[2,"mat-checkbox-disabled",null],[2,"mat-checkbox-label-before",null],[2,"_mat-animation-noopable",null]],null,null,na,Jo)),o["\u0275prd"](5120,null,ti.l,function(n){return[n]},[Qo]),o["\u0275did"](3,4374528,null,0,Qo,[o.ElementRef,o.ChangeDetectorRef,Rt.f,o.NgZone,[8,null],[2,Go],[2,Di.a]],{checked:[0,"checked"],disabled:[1,"disabled"]},null)],function(n,e){n(e,3,0,e.parent.context.$implicit.allianceRole.permissions[e.context.$implicit],"")},function(n,e){n(e,1,0,o["\u0275nov"](e,3).id,o["\u0275nov"](e,3).indeterminate,o["\u0275nov"](e,3).checked,o["\u0275nov"](e,3).disabled,"before"==o["\u0275nov"](e,3).labelPosition,"NoopAnimations"===o["\u0275nov"](e,3)._animationMode)})}function Pa(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,36,"div",[["class","row align-items-center"],["style","border-bottom: 1px solid var(--secondary);"]],null,null,null,null,null)),(n()(),o["\u0275eld"](1,0,null,null,9,"div",[["class","col d-flex align-items-center justify-content-between"]],null,null,null,null,null)),(n()(),o["\u0275eld"](2,0,null,null,1,"span",[],null,null,null,null,null)),(n()(),o["\u0275ted"](3,null,["",""])),(n()(),o["\u0275eld"](4,16777216,null,null,6,"div",[["matTooltip","Cant't remove players with master role"]],null,[[null,"longpress"],[null,"keydown"],[null,"touchend"]],function(n,e,l){var t=!0;return"longpress"===e&&(t=!1!==o["\u0275nov"](n,5).show()&&t),"keydown"===e&&(t=!1!==o["\u0275nov"](n,5)._handleKeydown(l)&&t),"touchend"===e&&(t=!1!==o["\u0275nov"](n,5)._handleTouchend()&&t),t},null,null)),o["\u0275did"](5,147456,null,0,gt,[rt.c,o.ElementRef,xt.c,o.ViewContainerRef,o.NgZone,Ct.a,Rt.c,Rt.f,ft,[2,wt.b],[2,ht]],{disabled:[0,"disabled"],message:[1,"message"]},null),(n()(),o["\u0275eld"](6,0,null,null,4,"button",[["color","warn"],["mat-icon-button",""]],[[8,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"]],function(n,e,l){var t=!0;return"click"===e&&(t=!1!==n.component.removePlayer(n.context.$implicit.id)&&t),t},ho.b,ho.a)),o["\u0275did"](7,180224,null,0,go.b,[o.ElementRef,Ct.a,Rt.f,[2,Di.a]],{disabled:[0,"disabled"],color:[1,"color"]},null),(n()(),o["\u0275eld"](8,0,null,0,2,"mat-icon",[["class","mat-icon"],["role","img"]],[[2,"mat-icon-inline",null]],null,null,mo,fo)),o["\u0275did"](9,638976,null,0,co,[o.ElementRef,ro,[8,null]],null,null),(n()(),o["\u0275ted"](-1,0,["close"])),(n()(),o["\u0275eld"](11,0,null,null,23,"div",[["class","col text-center"]],null,null,null,null,null)),(n()(),o["\u0275eld"](12,0,null,null,22,"mat-form-field",[["class","mat-form-field"],["floatLabel","never"]],[[2,"mat-form-field-appearance-standard",null],[2,"mat-form-field-appearance-fill",null],[2,"mat-form-field-appearance-outline",null],[2,"mat-form-field-appearance-legacy",null],[2,"mat-form-field-invalid",null],[2,"mat-form-field-can-float",null],[2,"mat-form-field-should-float",null],[2,"mat-form-field-hide-placeholder",null],[2,"mat-form-field-disabled",null],[2,"mat-form-field-autofilled",null],[2,"mat-focused",null],[2,"mat-accent",null],[2,"mat-warn",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null],[2,"_mat-animation-noopable",null]],null,null,vo.b,vo.a)),o["\u0275did"](13,7389184,null,7,bo.b,[o.ElementRef,o.ChangeDetectorRef,[2,St.j],[2,wt.b],[2,bo.a],Ct.a,o.NgZone,[2,Di.a]],{floatLabel:[0,"floatLabel"]},null),o["\u0275qud"](335544320,1,{_control:0}),o["\u0275qud"](335544320,2,{_placeholderChild:0}),o["\u0275qud"](335544320,3,{_labelChild:0}),o["\u0275qud"](603979776,4,{_errorChildren:1}),o["\u0275qud"](603979776,5,{_hintChildren:1}),o["\u0275qud"](603979776,6,{_prefixChildren:1}),o["\u0275qud"](603979776,7,{_suffixChildren:1}),(n()(),o["\u0275eld"](21,0,null,1,13,"mat-select",[["class","mat-select"],["placeholder","Role"],["required",""],["role","listbox"]],[[1,"required",0],[1,"id",0],[1,"tabindex",0],[1,"aria-label",0],[1,"aria-labelledby",0],[1,"aria-required",0],[1,"aria-disabled",0],[1,"aria-invalid",0],[1,"aria-owns",0],[1,"aria-multiselectable",0],[1,"aria-describedby",0],[1,"aria-activedescendant",0],[2,"mat-select-disabled",null],[2,"mat-select-invalid",null],[2,"mat-select-required",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"keydown"],[null,"focus"],[null,"blur"]],function(n,e,l){var t=!0,i=n.component;return"keydown"===e&&(t=!1!==o["\u0275nov"](n,27)._handleKeydown(l)&&t),"focus"===e&&(t=!1!==o["\u0275nov"](n,27)._onFocus()&&t),"blur"===e&&(t=!1!==o["\u0275nov"](n,27)._onBlur()&&t),"ngModelChange"===e&&(t=!1!==(n.context.$implicit.allianceRole=l)&&t),"ngModelChange"===e&&(t=!1!==i.updatePlayerRole(l.id,n.context.$implicit.id)&&t),t},Ca.b,Ca.a)),o["\u0275prd"](6144,null,St.l,null,[Ra.c]),o["\u0275did"](23,16384,null,0,ti.u,[],{required:[0,"required"]},null),o["\u0275prd"](1024,null,ti.k,function(n){return[n]},[ti.u]),o["\u0275did"](25,671744,null,0,ti.q,[[8,null],[6,ti.k],[8,null],[8,null]],{model:[0,"model"]},{update:"ngModelChange"}),o["\u0275prd"](2048,null,ti.m,null,[ti.q]),o["\u0275did"](27,2080768,null,3,Ra.c,[xt.e,o.ChangeDetectorRef,o.NgZone,St.d,o.ElementRef,[2,wt.b],[2,ti.p],[2,ti.h],[2,bo.b],[6,ti.m],[8,null],Ra.a],{placeholder:[0,"placeholder"],required:[1,"required"],compareWith:[2,"compareWith"]},null),o["\u0275qud"](603979776,8,{options:1}),o["\u0275qud"](603979776,9,{optionGroups:1}),o["\u0275qud"](335544320,10,{customTrigger:0}),o["\u0275did"](31,16384,null,0,ti.n,[[4,ti.m]],null,null),o["\u0275prd"](2048,[[1,4]],bo.c,null,[Ra.c]),(n()(),o["\u0275and"](16777216,null,1,1,null,Ia)),o["\u0275did"](34,802816,null,0,yt.NgForOf,[o.ViewContainerRef,o.TemplateRef,o.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(n()(),o["\u0275and"](16777216,null,null,1,null,Oa)),o["\u0275did"](36,802816,null,0,yt.NgForOf,[o.ViewContainerRef,o.TemplateRef,o.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],function(n,e){var l=e.component;n(e,5,0,e.context.$implicit.allianceRole.id!==l.alliance.masterRoleId,"Cant't remove players with master role"),n(e,7,0,e.context.$implicit.allianceRole.id===l.alliance.masterRoleId,"warn"),n(e,9,0),n(e,13,0,"never"),n(e,23,0,""),n(e,25,0,e.context.$implicit.allianceRole),n(e,27,0,"Role","",l.compareRoles),n(e,34,0,l.alliance.roles),n(e,36,0,l.alliancePermissions)},function(n,e){n(e,3,0,e.context.$implicit.name),n(e,6,0,o["\u0275nov"](e,7).disabled||null,"NoopAnimations"===o["\u0275nov"](e,7)._animationMode),n(e,8,0,o["\u0275nov"](e,9).inline),n(e,12,1,["standard"==o["\u0275nov"](e,13).appearance,"fill"==o["\u0275nov"](e,13).appearance,"outline"==o["\u0275nov"](e,13).appearance,"legacy"==o["\u0275nov"](e,13).appearance,o["\u0275nov"](e,13)._control.errorState,o["\u0275nov"](e,13)._canLabelFloat,o["\u0275nov"](e,13)._shouldLabelFloat(),o["\u0275nov"](e,13)._hideControlPlaceholder(),o["\u0275nov"](e,13)._control.disabled,o["\u0275nov"](e,13)._control.autofilled,o["\u0275nov"](e,13)._control.focused,"accent"==o["\u0275nov"](e,13).color,"warn"==o["\u0275nov"](e,13).color,o["\u0275nov"](e,13)._shouldForward("untouched"),o["\u0275nov"](e,13)._shouldForward("touched"),o["\u0275nov"](e,13)._shouldForward("pristine"),o["\u0275nov"](e,13)._shouldForward("dirty"),o["\u0275nov"](e,13)._shouldForward("valid"),o["\u0275nov"](e,13)._shouldForward("invalid"),o["\u0275nov"](e,13)._shouldForward("pending"),!o["\u0275nov"](e,13)._animationsEnabled]),n(e,21,1,[o["\u0275nov"](e,23).required?"":null,o["\u0275nov"](e,27).id,o["\u0275nov"](e,27).tabIndex,o["\u0275nov"](e,27)._getAriaLabel(),o["\u0275nov"](e,27)._getAriaLabelledby(),o["\u0275nov"](e,27).required.toString(),o["\u0275nov"](e,27).disabled.toString(),o["\u0275nov"](e,27).errorState,o["\u0275nov"](e,27).panelOpen?o["\u0275nov"](e,27)._optionIds:null,o["\u0275nov"](e,27).multiple,o["\u0275nov"](e,27)._ariaDescribedby||null,o["\u0275nov"](e,27)._getAriaActiveDescendant(),o["\u0275nov"](e,27).disabled,o["\u0275nov"](e,27).errorState,o["\u0275nov"](e,27).required,o["\u0275nov"](e,31).ngClassUntouched,o["\u0275nov"](e,31).ngClassTouched,o["\u0275nov"](e,31).ngClassPristine,o["\u0275nov"](e,31).ngClassDirty,o["\u0275nov"](e,31).ngClassValid,o["\u0275nov"](e,31).ngClassInvalid,o["\u0275nov"](e,31).ngClassPending])})}function Ta(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,13,"div",[["class","pt-4 mb-2"],["style","overflow: hidden"]],null,null,null,null,null)),(n()(),o["\u0275eld"](1,0,null,null,9,"div",[["class","row"],["style","color: var(--light); background-color: var(--indigo)"]],null,null,null,null,null)),(n()(),o["\u0275eld"](2,0,null,null,3,"div",[["class","col"]],null,null,null,null,null)),(n()(),o["\u0275eld"](3,0,null,null,2,"div",[["class","heading-split px-1"]],null,null,null,null,null)),(n()(),o["\u0275eld"](4,0,null,null,1,"strong",[],null,null,null,null,null)),(n()(),o["\u0275ted"](-1,null,["Player"])),(n()(),o["\u0275eld"](6,0,null,null,2,"div",[["class","col text-center"]],null,null,null,null,null)),(n()(),o["\u0275eld"](7,0,null,null,1,"strong",[],null,null,null,null,null)),(n()(),o["\u0275ted"](-1,null,["Role"])),(n()(),o["\u0275and"](16777216,null,null,1,null,ka)),o["\u0275did"](10,802816,null,0,yt.NgForOf,[o.ViewContainerRef,o.TemplateRef,o.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(n()(),o["\u0275eld"](11,0,null,null,2,"div",[["class","roles roles-members"]],null,null,null,null,null)),(n()(),o["\u0275and"](16777216,null,null,1,null,Pa)),o["\u0275did"](13,802816,null,0,yt.NgForOf,[o.ViewContainerRef,o.TemplateRef,o.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],function(n,e){var l=e.component;n(e,10,0,l.alliancePermissions),n(e,13,0,l.alliance.members)},null)}var Aa=function(){return function(){var n,e;this.leaveAlliance=new o.EventEmitter,this.destroyAlliance=new o.EventEmitter,this.openAllianceProfile=new o.EventEmitter,this.openPlayerProfile=new o.EventEmitter,this.eventStatuses=q.EventStatus,this.eventTypes=q.EventType,this.invitationStatus=((n={})[this.eventStatuses.create]="was invited by",n[this.eventStatuses.cancel]="invitation canceled by",n[this.eventStatuses.reject]="rejected invite",n),this.membershipStatus=((e={})[this.eventStatuses.remove]="was removed by",e[this.eventStatuses.join]="has joined",e[this.eventStatuses.leave]="has left",e),this.diplomacySubjectStatus=["proposed alliance","canceled their alliance proposal","rejected our alliance proposal","aggreed to enter into alliance","ended our alliance","proposed NAP","canceled their NAP proposal","rejected our NAP proposal","aggreed to enter into NAP","ended our NAP","declared war","aggreed to end war"],this.diplomacyOriginStatus=["proposed alliance to","canceled alliance proposal of","rejected alliance proposal of","aggreed to enter into alliance with","ended our alliance with","proposed NAP to","canceled NAP proposal of","rejected NAP proposal of","aggreed to enter into NAP with","ended our NAP with","declared war on","aggreed to end war with"]}}(),Da=o["\u0275crt"]({encapsulation:0,styles:[[""]],data:{}});function Fa(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,1,"a",[["href",""]],null,[[null,"click"]],function(n,e,l){var t=!0;return"click"===e&&(t=0!=!!n.component.openPlayerProfile.emit(n.parent.parent.context.$implicit.targetPlayer.id)&&t),t},null,null)),(n()(),o["\u0275ted"](1,null,["",""])),(n()(),o["\u0275ted"](2,null,[" "," "])),(n()(),o["\u0275eld"](3,0,null,null,1,"a",[["href",""]],null,[[null,"click"]],function(n,e,l){var t=!0;return"click"===e&&(t=0!=!!n.component.openPlayerProfile.emit(n.parent.parent.context.$implicit.originPlayer.id)&&t),t},null,null)),(n()(),o["\u0275ted"](4,null,["",""]))],null,function(n,e){var l=e.component;n(e,1,0,e.parent.parent.context.$implicit.targetPlayer.name),n(e,2,0,l.invitationStatus[e.parent.parent.context.$implicit.status]),n(e,4,0,e.parent.parent.context.$implicit.originPlayer.name)})}function ja(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,1,"a",[["href",""]],null,[[null,"click"]],function(n,e,l){var t=!0;return"click"===e&&(t=0!=!!n.component.openPlayerProfile.emit(n.parent.parent.context.$implicit.originPlayer.id)&&t),t},null,null)),(n()(),o["\u0275ted"](1,null,["",""])),(n()(),o["\u0275ted"](2,null,[" "," "]))],null,function(n,e){var l=e.component;n(e,1,0,e.parent.parent.context.$implicit.originPlayer.name),n(e,2,0,l.invitationStatus[e.parent.parent.context.$implicit.status])})}function Ea(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,4,null,null,null,null,null,null,null)),(n()(),o["\u0275and"](16777216,null,null,1,null,Fa)),o["\u0275did"](2,16384,null,0,yt.NgIf,[o.ViewContainerRef,o.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),o["\u0275and"](16777216,null,null,1,null,ja)),o["\u0275did"](4,16384,null,0,yt.NgIf,[o.ViewContainerRef,o.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),o["\u0275and"](0,null,null,0))],function(n,e){var l=e.component;n(e,2,0,e.parent.context.$implicit.status!==l.eventStatuses.reject),n(e,4,0,e.parent.context.$implicit.status===l.eventStatuses.reject)},null)}function Ma(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,1,"a",[["href",""]],null,[[null,"click"]],function(n,e,l){var t=!0;return"click"===e&&(t=0!=!!n.component.openPlayerProfile.emit(n.parent.parent.context.$implicit.originPlayer.id)&&t),t},null,null)),(n()(),o["\u0275ted"](1,null,["",""])),(n()(),o["\u0275ted"](2,null,[" "," "]))],null,function(n,e){var l=e.component;n(e,1,0,e.parent.parent.context.$implicit.originPlayer.name),n(e,2,0,l.membershipStatus[e.parent.parent.context.$implicit.status])})}function Na(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,1,"a",[["href",""]],null,[[null,"click"]],function(n,e,l){var t=!0;return"click"===e&&(t=0!=!!n.component.openPlayerProfile.emit(n.parent.parent.context.$implicit.targetPlayer.id)&&t),t},null,null)),(n()(),o["\u0275ted"](1,null,["",""])),(n()(),o["\u0275ted"](2,null,[" "," "])),(n()(),o["\u0275eld"](3,0,null,null,1,"a",[["href",""]],null,[[null,"click"]],function(n,e,l){var t=!0;return"click"===e&&(t=0!=!!n.component.openPlayerProfile.emit(n.parent.parent.context.$implicit.originPlayer.id)&&t),t},null,null)),(n()(),o["\u0275ted"](4,null,["",""]))],null,function(n,e){var l=e.component;n(e,1,0,e.parent.parent.context.$implicit.targetPlayer.name),n(e,2,0,l.membershipStatus[e.parent.parent.context.$implicit.status]),n(e,4,0,e.parent.parent.context.$implicit.originPlayer.name)})}function La(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,4,null,null,null,null,null,null,null)),(n()(),o["\u0275and"](16777216,null,null,1,null,Ma)),o["\u0275did"](2,16384,null,0,yt.NgIf,[o.ViewContainerRef,o.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),o["\u0275and"](16777216,null,null,1,null,Na)),o["\u0275did"](4,16384,null,0,yt.NgIf,[o.ViewContainerRef,o.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),o["\u0275and"](0,null,null,0))],function(n,e){var l=e.component;n(e,2,0,e.parent.context.$implicit.status!==l.eventStatuses.remove),n(e,4,0,e.parent.context.$implicit.status===l.eventStatuses.remove)},null)}function $a(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,1,"a",[["href",""]],null,[[null,"click"]],function(n,e,l){var t=!0;return"click"===e&&(t=0!=!!n.component.openPlayerProfile.emit(n.parent.parent.context.$implicit.originPlayer.id)&&t),t},null,null)),(n()(),o["\u0275ted"](1,null,["",""])),(n()(),o["\u0275ted"](-1,null,[" created the alliance "]))],null,function(n,e){n(e,1,0,e.parent.parent.context.$implicit.originPlayer.name)})}function qa(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,2,null,null,null,null,null,null,null)),(n()(),o["\u0275and"](16777216,null,null,1,null,$a)),o["\u0275did"](2,16384,null,0,yt.NgIf,[o.ViewContainerRef,o.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),o["\u0275and"](0,null,null,0))],function(n,e){n(e,2,0,e.parent.context.$implicit.status===e.component.eventStatuses.create)},null)}function Va(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,1,"a",[["href",""]],null,[[null,"click"]],function(n,e,l){var t=!0;return"click"===e&&(t=0!=!!n.component.openPlayerProfile.emit(n.parent.parent.context.$implicit.originPlayer.id)&&t),t},null,null)),(n()(),o["\u0275ted"](1,null,["",""])),(n()(),o["\u0275ted"](-1,null,[" updated alliance roles "]))],null,function(n,e){n(e,1,0,e.parent.parent.context.$implicit.originPlayer.name)})}function Ua(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,1,"a",[["href",""]],null,[[null,"click"]],function(n,e,l){var t=!0;return"click"===e&&(t=0!=!!n.component.openPlayerProfile.emit(n.parent.parent.context.$implicit.targetPlayer.id)&&t),t},null,null)),(n()(),o["\u0275ted"](1,null,["",""])),(n()(),o["\u0275ted"](-1,null,[" role was updated by "])),(n()(),o["\u0275eld"](3,0,null,null,1,"a",[["href",""]],null,[[null,"click"]],function(n,e,l){var t=!0;return"click"===e&&(t=0!=!!n.component.openPlayerProfile.emit(n.parent.parent.context.$implicit.originPlayer.id)&&t),t},null,null)),(n()(),o["\u0275ted"](4,null,["",""]))],null,function(n,e){n(e,1,0,e.parent.parent.context.$implicit.targetPlayer.name),n(e,4,0,e.parent.parent.context.$implicit.originPlayer.name)})}function za(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,4,null,null,null,null,null,null,null)),(n()(),o["\u0275and"](16777216,null,null,1,null,Va)),o["\u0275did"](2,16384,null,0,yt.NgIf,[o.ViewContainerRef,o.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),o["\u0275and"](16777216,null,null,1,null,Ua)),o["\u0275did"](4,16384,null,0,yt.NgIf,[o.ViewContainerRef,o.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),o["\u0275and"](0,null,null,0))],function(n,e){var l=e.component;n(e,2,0,e.parent.context.$implicit.status===l.eventStatuses.update),n(e,4,0,e.parent.context.$implicit.status===l.eventStatuses.updateMember)},null)}function Ha(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,1,"a",[["href",""]],null,[[null,"click"]],function(n,e,l){var t=!0;return"click"===e&&(t=0!=!!n.component.openAllianceProfile.emit(n.parent.parent.context.$implicit.originAlliance.id)&&t),t},null,null)),(n()(),o["\u0275ted"](1,null,["",""])),(n()(),o["\u0275ted"](2,null,[" "," "]))],null,function(n,e){var l=e.component;n(e,1,0,e.parent.parent.context.$implicit.originAlliance.name),n(e,2,0,l.diplomacySubjectStatus[e.parent.parent.context.$implicit.status])})}function Ba(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,1,"a",[["href",""]],null,[[null,"click"]],function(n,e,l){var t=!0;return"click"===e&&(t=0!=!!n.component.openPlayerProfile.emit(n.parent.parent.context.$implicit.originPlayer.id)&&t),t},null,null)),(n()(),o["\u0275ted"](1,null,["",""])),(n()(),o["\u0275ted"](2,null,[" "," "])),(n()(),o["\u0275eld"](3,0,null,null,1,"a",[["href",""]],null,[[null,"click"]],function(n,e,l){var t=!0;return"click"===e&&(t=0!=!!n.component.openAllianceProfile.emit(n.parent.parent.context.$implicit.targetAlliance.id)&&t),t},null,null)),(n()(),o["\u0275ted"](4,null,["",""]))],null,function(n,e){var l=e.component;n(e,1,0,e.parent.parent.context.$implicit.originPlayer.name),n(e,2,0,l.diplomacyOriginStatus[e.parent.parent.context.$implicit.status]),n(e,4,0,e.parent.parent.context.$implicit.targetAlliance.name)})}function Wa(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,4,null,null,null,null,null,null,null)),(n()(),o["\u0275and"](16777216,null,null,1,null,Ha)),o["\u0275did"](2,16384,null,0,yt.NgIf,[o.ViewContainerRef,o.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),o["\u0275and"](16777216,null,null,1,null,Ba)),o["\u0275did"](4,16384,null,0,yt.NgIf,[o.ViewContainerRef,o.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),o["\u0275and"](0,null,null,0))],function(n,e){var l=e.component;n(e,2,0,e.parent.context.$implicit.originAllianceId!==l.alliance.id),n(e,4,0,e.parent.context.$implicit.originAllianceId===l.alliance.id)},null)}function Za(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,1,"a",[["href",""]],null,[[null,"click"]],function(n,e,l){var t=!0;return"click"===e&&(t=0!=!!n.component.openPlayerProfile.emit(n.parent.parent.context.$implicit.originPlayer.id)&&t),t},null,null)),(n()(),o["\u0275ted"](1,null,["",""])),(n()(),o["\u0275ted"](-1,null,[" updated alliance profile "]))],null,function(n,e){n(e,1,0,e.parent.parent.context.$implicit.originPlayer.name)})}function Ga(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,2,null,null,null,null,null,null,null)),(n()(),o["\u0275and"](16777216,null,null,1,null,Za)),o["\u0275did"](2,16384,null,0,yt.NgIf,[o.ViewContainerRef,o.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),o["\u0275and"](0,null,null,0))],function(n,e){n(e,2,0,e.parent.context.$implicit.status===e.component.eventStatuses.update)},null)}function Ya(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,13,"div",[["class","col-12 my-1 py-1 px-4"],["style","background-color: beige;"]],null,null,null,null,null)),o["\u0275did"](1,16384,null,0,yt.NgSwitch,[],{ngSwitch:[0,"ngSwitch"]},null),(n()(),o["\u0275and"](16777216,null,null,1,null,Ea)),o["\u0275did"](3,278528,null,0,yt.NgSwitchCase,[o.ViewContainerRef,o.TemplateRef,yt.NgSwitch],{ngSwitchCase:[0,"ngSwitchCase"]},null),(n()(),o["\u0275and"](16777216,null,null,1,null,La)),o["\u0275did"](5,278528,null,0,yt.NgSwitchCase,[o.ViewContainerRef,o.TemplateRef,yt.NgSwitch],{ngSwitchCase:[0,"ngSwitchCase"]},null),(n()(),o["\u0275and"](16777216,null,null,1,null,qa)),o["\u0275did"](7,278528,null,0,yt.NgSwitchCase,[o.ViewContainerRef,o.TemplateRef,yt.NgSwitch],{ngSwitchCase:[0,"ngSwitchCase"]},null),(n()(),o["\u0275and"](16777216,null,null,1,null,za)),o["\u0275did"](9,278528,null,0,yt.NgSwitchCase,[o.ViewContainerRef,o.TemplateRef,yt.NgSwitch],{ngSwitchCase:[0,"ngSwitchCase"]},null),(n()(),o["\u0275and"](16777216,null,null,1,null,Wa)),o["\u0275did"](11,278528,null,0,yt.NgSwitchCase,[o.ViewContainerRef,o.TemplateRef,yt.NgSwitch],{ngSwitchCase:[0,"ngSwitchCase"]},null),(n()(),o["\u0275and"](16777216,null,null,1,null,Ga)),o["\u0275did"](13,278528,null,0,yt.NgSwitchCase,[o.ViewContainerRef,o.TemplateRef,yt.NgSwitch],{ngSwitchCase:[0,"ngSwitchCase"]},null)],function(n,e){var l=e.component;n(e,1,0,e.context.$implicit.type),n(e,3,0,l.eventTypes.invitation),n(e,5,0,l.eventTypes.membership),n(e,7,0,l.eventTypes.management),n(e,9,0,l.eventTypes.roles),n(e,11,0,l.eventTypes.diplomacy),n(e,13,0,l.eventTypes.profile)},null)}function Xa(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,2,"button",[["class","mt-3"],["color","warn"],["mat-raised-button",""]],[[8,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"]],function(n,e,l){var t=!0;return"click"===e&&(t=!1!==n.component.destroyAlliance.emit()&&t),t},ho.b,ho.a)),o["\u0275did"](1,180224,null,0,go.b,[o.ElementRef,Ct.a,Rt.f,[2,Di.a]],{color:[0,"color"]},null),(n()(),o["\u0275ted"](-1,0,["Destroy alliance"]))],function(n,e){n(e,1,0,"warn")},function(n,e){n(e,0,0,o["\u0275nov"](e,1).disabled||null,"NoopAnimations"===o["\u0275nov"](e,1)._animationMode)})}function Qa(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,2,"button",[["class","mt-3"],["color","warn"],["mat-raised-button",""]],[[8,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"]],function(n,e,l){var t=!0;return"click"===e&&(t=!1!==n.component.leaveAlliance.emit()&&t),t},ho.b,ho.a)),o["\u0275did"](1,180224,null,0,go.b,[o.ElementRef,Ct.a,Rt.f,[2,Di.a]],{color:[0,"color"]},null),(n()(),o["\u0275ted"](-1,0,["Leave alliance"]))],function(n,e){n(e,1,0,"warn")},function(n,e){n(e,0,0,o["\u0275nov"](e,1).disabled||null,"NoopAnimations"===o["\u0275nov"](e,1)._animationMode)})}function Ka(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,10,"div",[["class","container-fluid"]],null,null,null,null,null)),(n()(),o["\u0275eld"](1,0,null,null,9,"div",[["class","row"]],null,null,null,null,null)),(n()(),o["\u0275eld"](2,0,null,null,3,"div",[["class","col"]],null,null,null,null,null)),(n()(),o["\u0275eld"](3,0,null,null,2,"div",[["class","row"]],null,null,null,null,null)),(n()(),o["\u0275and"](16777216,null,null,1,null,Ya)),o["\u0275did"](5,802816,null,0,yt.NgForOf,[o.ViewContainerRef,o.TemplateRef,o.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(n()(),o["\u0275eld"](6,0,null,null,4,"div",[["class","col"]],null,null,null,null,null)),(n()(),o["\u0275and"](16777216,null,null,1,null,Xa)),o["\u0275did"](8,16384,null,0,yt.NgIf,[o.ViewContainerRef,o.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),o["\u0275and"](16777216,null,null,1,null,Qa)),o["\u0275did"](10,16384,null,0,yt.NgIf,[o.ViewContainerRef,o.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(n,e){var l=e.component;n(e,5,0,l.alliance.events),n(e,8,0,l.role.permissions.editProfile),n(e,10,0,l.role.id!==l.alliance.masterRoleId)},null)}var Ja=l("YlbQ"),nr=l("26FU");function er(n){return function(n){function e(){for(var e=[],l=0;l<arguments.length;l++)e[l]=arguments[l];var t=n.apply(this,e)||this;return t._sticky=!1,t._hasStickyChanged=!1,t}return Object(r.__extends)(e,n),Object.defineProperty(e.prototype,"sticky",{get:function(){return this._sticky},set:function(n){var e=this._sticky;this._sticky=Object(it.c)(n),this._hasStickyChanged=e!==this._sticky},enumerable:!0,configurable:!0}),e.prototype.hasStickyChanged=function(){var n=this._hasStickyChanged;return this._hasStickyChanged=!1,n},e.prototype.resetStickyChanged=function(){this._hasStickyChanged=!1},e}(n)}var lr=function(n){this.template=n},tr=function(n){this.template=n},ir=function(n){function e(){var e=null!==n&&n.apply(this,arguments)||this;return e._stickyEnd=!1,e}return Object(r.__extends)(e,n),Object.defineProperty(e.prototype,"name",{get:function(){return this._name},set:function(n){n&&(this._name=n,this.cssClassFriendlyName=n.replace(/[^a-z0-9_-]/gi,"-"))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"stickyEnd",{get:function(){return this._stickyEnd},set:function(n){var e=this._stickyEnd;this._stickyEnd=Object(it.c)(n),this._hasStickyChanged=e!==this._stickyEnd},enumerable:!0,configurable:!0}),e}(er(function(){})),or=function(n,e){e.nativeElement.classList.add("cdk-column-"+n.cssClassFriendlyName)},ar=function(n){function e(e,l){return n.call(this,e,l)||this}return Object(r.__extends)(e,n),e}(or),rr=function(n){function e(e,l){return n.call(this,e,l)||this}return Object(r.__extends)(e,n),e}(or),ur=function(){function n(n,e){this.template=n,this._differs=e}return n.prototype.ngOnChanges=function(n){if(!this._columnsDiffer){var e=n.columns&&n.columns.currentValue||[];this._columnsDiffer=this._differs.find(e).create(),this._columnsDiffer.diff(e)}},n.prototype.getColumnsDiff=function(){return this._columnsDiffer.diff(this.columns)},n.prototype.extractCellTemplate=function(n){return this instanceof sr?n.headerCell.template:this instanceof cr?n.footerCell.template:n.cell.template},n}(),sr=function(n){function e(e,l){return n.call(this,e,l)||this}return Object(r.__extends)(e,n),e.prototype.ngOnChanges=function(e){n.prototype.ngOnChanges.call(this,e)},e}(er(function(n){function e(){return null!==n&&n.apply(this,arguments)||this}return Object(r.__extends)(e,n),e}(ur))),cr=function(n){function e(e,l){return n.call(this,e,l)||this}return Object(r.__extends)(e,n),e.prototype.ngOnChanges=function(e){n.prototype.ngOnChanges.call(this,e)},e}(er(function(n){function e(){return null!==n&&n.apply(this,arguments)||this}return Object(r.__extends)(e,n),e}(ur))),dr=function(n){function e(e,l){return n.call(this,e,l)||this}return Object(r.__extends)(e,n),e}(ur),pr=function(){function n(e){this._viewContainer=e,n.mostRecentCellOutlet=this}return n.prototype.ngOnDestroy=function(){n.mostRecentCellOutlet===this&&(n.mostRecentCellOutlet=null)},n.mostRecentCellOutlet=null,n}(),fr=function(){},mr=function(){},hr=["top","bottom","left","right"],gr=function(){function n(n,e,l){this.isNativeHtmlTable=n,this.stickCellCss=e,this.direction=l}return n.prototype.clearStickyPositioning=function(n,e){for(var l=0,t=n;l<t.length;l++){var i=t[l];if(i.nodeType===i.ELEMENT_NODE){this._removeStickyStyle(i,e);for(var o=0;o<i.children.length;o++)this._removeStickyStyle(i.children[o],e)}}},n.prototype.updateStickyColumns=function(n,e,l){var t=e.some(function(n){return n})||l.some(function(n){return n});if(n.length&&t)for(var i=n[0],o=i.children.length,a=this._getCellWidths(i),r=this._getStickyStartColumnPositions(a,e),u=this._getStickyEndColumnPositions(a,l),s="rtl"===this.direction,c=0,d=n;c<d.length;c++)for(var p=d[c],f=0;f<o;f++){var m=p.children[f];e[f]&&this._addStickyStyle(m,s?"right":"left",r[f]),l[f]&&this._addStickyStyle(m,s?"left":"right",u[f])}},n.prototype.stickRows=function(n,e,l){for(var t="bottom"===l?n.reverse():n,i=0,o=0;o<t.length;o++)if(e[o]){var a=t[o];if(this.isNativeHtmlTable)for(var r=0;r<a.children.length;r++)this._addStickyStyle(a.children[r],l,i);else this._addStickyStyle(a,l,i);i+=a.getBoundingClientRect().height}},n.prototype.updateStickyFooterContainer=function(n,e){if(this.isNativeHtmlTable){var l=n.querySelector("tfoot");e.some(function(n){return!n})?this._removeStickyStyle(l,["bottom"]):this._addStickyStyle(l,"bottom",0)}},n.prototype._removeStickyStyle=function(n,e){for(var l=0,t=e;l<t.length;l++)n.style[t[l]]="";n.style.zIndex=this._getCalculatedZIndex(n),hr.some(function(e){return!!n.style[e]})||(n.style.position="",n.classList.remove(this.stickCellCss))},n.prototype._addStickyStyle=function(n,e,l){n.classList.add(this.stickCellCss),n.style[e]=l+"px",n.style.cssText+="position: -webkit-sticky; position: sticky; ",n.style.zIndex=this._getCalculatedZIndex(n)},n.prototype._getCalculatedZIndex=function(n){for(var e={top:100,bottom:10,left:1,right:1},l=0,t=0,i=hr;t<i.length;t++){var o=i[t];n.style[o]&&(l+=e[o])}return l?""+l:""},n.prototype._getCellWidths=function(n){for(var e=[],l=n.children,t=0;t<l.length;t++)e.push(l[t].getBoundingClientRect().width);return e},n.prototype._getStickyStartColumnPositions=function(n,e){for(var l=[],t=0,i=0;i<n.length;i++)e[i]&&(l[i]=t,t+=n[i]);return l},n.prototype._getStickyEndColumnPositions=function(n,e){for(var l=[],t=0,i=n.length;i>0;i--)e[i]&&(l[i]=t,t+=n[i]);return l},n}(),vr=function(n,e){this.viewContainer=n,this.elementRef=e},br=function(n,e){this.viewContainer=n,this.elementRef=e},yr=function(n,e){this.viewContainer=n,this.elementRef=e},_r=function(){function n(n,e,l,t,i){this._differs=n,this._changeDetectorRef=e,this._elementRef=l,this._dir=i,this._onDestroy=new ct.a,this._columnDefsByName=new Map,this._customColumnDefs=new Set,this._customRowDefs=new Set,this._customHeaderRowDefs=new Set,this._customFooterRowDefs=new Set,this._headerRowDefChanged=!0,this._footerRowDefChanged=!0,this._cachedRenderRowsMap=new Map,this.stickyCssClass="cdk-table-sticky",this._multiTemplateDataRows=!1,this.viewChange=new nr.a({start:0,end:Number.MAX_VALUE}),t||this._elementRef.nativeElement.setAttribute("role","grid"),this._isNativeHtmlTable="TABLE"===this._elementRef.nativeElement.nodeName}return Object.defineProperty(n.prototype,"trackBy",{get:function(){return this._trackByFn},set:function(n){Object(o.isDevMode)()&&null!=n&&"function"!=typeof n&&console&&console.warn&&console.warn("trackBy must be a function, but received "+JSON.stringify(n)+"."),this._trackByFn=n},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"dataSource",{get:function(){return this._dataSource},set:function(n){this._dataSource!==n&&this._switchDataSource(n)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"multiTemplateDataRows",{get:function(){return this._multiTemplateDataRows},set:function(n){this._multiTemplateDataRows=Object(it.c)(n),this._rowOutlet.viewContainer.length&&this._forceRenderDataRows()},enumerable:!0,configurable:!0}),n.prototype.ngOnInit=function(){var n=this;this._setupStickyStyler(),this._isNativeHtmlTable&&this._applyNativeTableSections(),this._dataDiffer=this._differs.find([]).create(function(e,l){return n.trackBy?n.trackBy(l.dataIndex,l.data):l})},n.prototype.ngAfterContentChecked=function(){if(this._cacheRowDefs(),this._cacheColumnDefs(),!this._headerRowDefs.length&&!this._footerRowDefs.length&&!this._rowDefs.length)throw Error("Missing definitions for header, footer, and row; cannot determine which columns should be rendered.");this._renderUpdatedColumns(),this._headerRowDefChanged&&(this._forceRenderHeaderRows(),this._headerRowDefChanged=!1),this._footerRowDefChanged&&(this._forceRenderFooterRows(),this._footerRowDefChanged=!1),this.dataSource&&this._rowDefs.length>0&&!this._renderChangeSubscription&&this._observeRenderChanges(),this._checkStickyStates()},n.prototype.ngOnDestroy=function(){this._rowOutlet.viewContainer.clear(),this._headerRowOutlet.viewContainer.clear(),this._footerRowOutlet.viewContainer.clear(),this._cachedRenderRowsMap.clear(),this._onDestroy.next(),this._onDestroy.complete(),this.dataSource instanceof Ja.a&&this.dataSource.disconnect(this)},n.prototype.renderRows=function(){var n=this;this._renderRows=this._getAllRenderRows();var e=this._dataDiffer.diff(this._renderRows);if(e){var l=this._rowOutlet.viewContainer;e.forEachOperation(function(e,t,i){if(null==e.previousIndex)n._insertRow(e.item,i);else if(null==i)l.remove(t);else{var o=l.get(t);l.move(o,i)}}),this._updateRowIndexContext(),e.forEachIdentityChange(function(n){l.get(n.currentIndex).context.$implicit=n.item.data}),this.updateStickyColumnStyles()}},n.prototype.setHeaderRowDef=function(n){this._customHeaderRowDefs=new Set([n]),this._headerRowDefChanged=!0},n.prototype.setFooterRowDef=function(n){this._customFooterRowDefs=new Set([n]),this._footerRowDefChanged=!0},n.prototype.addColumnDef=function(n){this._customColumnDefs.add(n)},n.prototype.removeColumnDef=function(n){this._customColumnDefs.delete(n)},n.prototype.addRowDef=function(n){this._customRowDefs.add(n)},n.prototype.removeRowDef=function(n){this._customRowDefs.delete(n)},n.prototype.addHeaderRowDef=function(n){this._customHeaderRowDefs.add(n),this._headerRowDefChanged=!0},n.prototype.removeHeaderRowDef=function(n){this._customHeaderRowDefs.delete(n),this._headerRowDefChanged=!0},n.prototype.addFooterRowDef=function(n){this._customFooterRowDefs.add(n),this._footerRowDefChanged=!0},n.prototype.removeFooterRowDef=function(n){this._customFooterRowDefs.delete(n),this._footerRowDefChanged=!0},n.prototype.updateStickyHeaderRowStyles=function(){var n=this._getRenderedRows(this._headerRowOutlet);this._stickyStyler.clearStickyPositioning(n,["top"]);var e=this._headerRowDefs.map(function(n){return n.sticky});this._stickyStyler.stickRows(n,e,"top"),this._headerRowDefs.forEach(function(n){return n.resetStickyChanged()})},n.prototype.updateStickyFooterRowStyles=function(){var n=this._getRenderedRows(this._footerRowOutlet);this._stickyStyler.clearStickyPositioning(n,["bottom"]);var e=this._footerRowDefs.map(function(n){return n.sticky});this._stickyStyler.stickRows(n,e,"bottom"),this._stickyStyler.updateStickyFooterContainer(this._elementRef.nativeElement,e),this._footerRowDefs.forEach(function(n){return n.resetStickyChanged()})},n.prototype.updateStickyColumnStyles=function(){var n=this,e=this._getRenderedRows(this._headerRowOutlet),l=this._getRenderedRows(this._rowOutlet),t=this._getRenderedRows(this._footerRowOutlet);this._stickyStyler.clearStickyPositioning(e.concat(l,t),["left","right"]),e.forEach(function(e,l){n._addStickyColumnStyles([e],n._headerRowDefs[l])}),this._rowDefs.forEach(function(e){for(var t=[],i=0;i<l.length;i++)n._renderRows[i].rowDef===e&&t.push(l[i]);n._addStickyColumnStyles(t,e)}),t.forEach(function(e,l){n._addStickyColumnStyles([e],n._footerRowDefs[l])}),Array.from(this._columnDefsByName.values()).forEach(function(n){return n.resetStickyChanged()})},n.prototype._getAllRenderRows=function(){var n=[],e=this._cachedRenderRowsMap;this._cachedRenderRowsMap=new Map;for(var l=0;l<this._data.length;l++){var t=this._data[l],i=this._getRenderRowsForData(t,l,e.get(t));this._cachedRenderRowsMap.has(t)||this._cachedRenderRowsMap.set(t,new WeakMap);for(var o=0;o<i.length;o++){var a=i[o],r=this._cachedRenderRowsMap.get(a.data);r.has(a.rowDef)?r.get(a.rowDef).push(a):r.set(a.rowDef,[a]),n.push(a)}}return n},n.prototype._getRenderRowsForData=function(n,e,l){return this._getRowDefs(n,e).map(function(t){var i=l&&l.has(t)?l.get(t):[];if(i.length){var o=i.shift();return o.dataIndex=e,o}return{data:n,rowDef:t,dataIndex:e}})},n.prototype._cacheColumnDefs=function(){var n=this;this._columnDefsByName.clear(),wr(this._contentColumnDefs,this._customColumnDefs).forEach(function(e){if(n._columnDefsByName.has(e.name))throw Error('Duplicate column definition name provided: "'+e.name+'".');n._columnDefsByName.set(e.name,e)})},n.prototype._cacheRowDefs=function(){this._headerRowDefs=wr(this._contentHeaderRowDefs,this._customHeaderRowDefs),this._footerRowDefs=wr(this._contentFooterRowDefs,this._customFooterRowDefs),this._rowDefs=wr(this._contentRowDefs,this._customRowDefs);var n=this._rowDefs.filter(function(n){return!n.when});if(!this.multiTemplateDataRows&&n.length>1)throw Error("There can only be one default row without a when predicate function.");this._defaultRowDef=n[0]},n.prototype._renderUpdatedColumns=function(){var n=function(n,e){return n||!!e.getColumnsDiff()};this._rowDefs.reduce(n,!1)&&this._forceRenderDataRows(),this._headerRowDefs.reduce(n,!1)&&this._forceRenderHeaderRows(),this._footerRowDefs.reduce(n,!1)&&this._forceRenderFooterRows()},n.prototype._switchDataSource=function(n){this._data=[],this.dataSource instanceof Ja.a&&this.dataSource.disconnect(this),this._renderChangeSubscription&&(this._renderChangeSubscription.unsubscribe(),this._renderChangeSubscription=null),n||(this._dataDiffer&&this._dataDiffer.diff([]),this._rowOutlet.viewContainer.clear()),this._dataSource=n},n.prototype._observeRenderChanges=function(){var n=this;if(this.dataSource){var e;if(this.dataSource.connect instanceof Function?e=this.dataSource.connect(this):this.dataSource instanceof s.a?e=this.dataSource:Array.isArray(this.dataSource)&&(e=Object(_i.a)(this.dataSource)),void 0===e)throw Error("Provided data source did not match an array, Observable, or DataSource");this._renderChangeSubscription=e.pipe(Object(st.a)(this._onDestroy)).subscribe(function(e){n._data=e||[],n.renderRows()})}},n.prototype._forceRenderHeaderRows=function(){var n=this;this._headerRowOutlet.viewContainer.length>0&&this._headerRowOutlet.viewContainer.clear(),this._headerRowDefs.forEach(function(e,l){return n._renderRow(n._headerRowOutlet,e,l)}),this.updateStickyHeaderRowStyles(),this.updateStickyColumnStyles()},n.prototype._forceRenderFooterRows=function(){var n=this;this._footerRowOutlet.viewContainer.length>0&&this._footerRowOutlet.viewContainer.clear(),this._footerRowDefs.forEach(function(e,l){return n._renderRow(n._footerRowOutlet,e,l)}),this.updateStickyFooterRowStyles(),this.updateStickyColumnStyles()},n.prototype._addStickyColumnStyles=function(n,e){var l=this,t=Array.from(e.columns||[]).map(function(n){return l._columnDefsByName.get(n)}),i=t.map(function(n){return n.sticky}),o=t.map(function(n){return n.stickyEnd});this._stickyStyler.updateStickyColumns(n,i,o)},n.prototype._getRenderedRows=function(n){for(var e=[],l=0;l<n.viewContainer.length;l++){var t=n.viewContainer.get(l);e.push(t.rootNodes[0])}return e},n.prototype._getRowDefs=function(n,e){if(1==this._rowDefs.length)return[this._rowDefs[0]];var l=[];if(this.multiTemplateDataRows)l=this._rowDefs.filter(function(l){return!l.when||l.when(e,n)});else{var t=this._rowDefs.find(function(l){return l.when&&l.when(e,n)})||this._defaultRowDef;t&&l.push(t)}if(!l.length)throw function(n){return Error("Could not find a matching row definition for theprovided row data: "+JSON.stringify(n))}(n);return l},n.prototype._insertRow=function(n,e){this._renderRow(this._rowOutlet,n.rowDef,e,{$implicit:n.data})},n.prototype._renderRow=function(n,e,l,t){void 0===t&&(t={}),n.viewContainer.createEmbeddedView(e.template,t,l);for(var i=0,o=this._getCellTemplates(e);i<o.length;i++)pr.mostRecentCellOutlet&&pr.mostRecentCellOutlet._viewContainer.createEmbeddedView(o[i],t);this._changeDetectorRef.markForCheck()},n.prototype._updateRowIndexContext=function(){for(var n=this._rowOutlet.viewContainer,e=0,l=n.length;e<l;e++){var t=n.get(e).context;t.count=l,t.first=0===e,t.last=e===l-1,t.even=e%2==0,t.odd=!t.even,this.multiTemplateDataRows?(t.dataIndex=this._renderRows[e].dataIndex,t.renderIndex=e):t.index=this._renderRows[e].dataIndex}},n.prototype._getCellTemplates=function(n){var e=this;return n&&n.columns?Array.from(n.columns,function(l){var t=e._columnDefsByName.get(l);if(!t)throw Error('Could not find column with id "'+l+'".');return n.extractCellTemplate(t)}):[]},n.prototype._applyNativeTableSections=function(){for(var n=0,e=[{tag:"thead",outlet:this._headerRowOutlet},{tag:"tbody",outlet:this._rowOutlet},{tag:"tfoot",outlet:this._footerRowOutlet}];n<e.length;n++){var l=e[n],t=document.createElement(l.tag);t.appendChild(l.outlet.elementRef.nativeElement),this._elementRef.nativeElement.appendChild(t)}},n.prototype._forceRenderDataRows=function(){this._dataDiffer.diff([]),this._rowOutlet.viewContainer.clear(),this.renderRows(),this.updateStickyColumnStyles()},n.prototype._checkStickyStates=function(){var n=function(n,e){return n||e.hasStickyChanged()};this._headerRowDefs.reduce(n,!1)&&this.updateStickyHeaderRowStyles(),this._footerRowDefs.reduce(n,!1)&&this.updateStickyFooterRowStyles(),Array.from(this._columnDefsByName.values()).reduce(n,!1)&&this.updateStickyColumnStyles()},n.prototype._setupStickyStyler=function(){var n=this;this._stickyStyler=new gr(this._isNativeHtmlTable,this.stickyCssClass,this._dir?this._dir.value:"ltr"),(this._dir?this._dir.change:Object(_i.a)()).pipe(Object(st.a)(this._onDestroy)).subscribe(function(e){n._stickyStyler.direction=e,n.updateStickyColumnStyles()})},n}();function wr(n,e){return n.toArray().concat(Array.from(e))}var Cr=function(){},Rr=l("dzgT"),xr=function(n){function e(e,l,t,i,o){var a=n.call(this,e,l,t,i,o)||this;return a._differs=e,a._changeDetectorRef=l,a._elementRef=t,a._dir=o,a.stickyCssClass="mat-table-sticky",a}return Object(r.__extends)(e,n),e}(_r),Sr=function(n){function e(){return null!==n&&n.apply(this,arguments)||this}return Object(r.__extends)(e,n),e}(lr),kr=function(n){function e(){return null!==n&&n.apply(this,arguments)||this}return Object(r.__extends)(e,n),e}(tr),Ir=function(n){function e(){return null!==n&&n.apply(this,arguments)||this}return Object(r.__extends)(e,n),e}(ir),Or=function(n){function e(e,l){var t=n.call(this,e,l)||this;return l.nativeElement.classList.add("mat-column-"+e.cssClassFriendlyName),t}return Object(r.__extends)(e,n),e}(ar),Pr=function(n){function e(e,l){var t=n.call(this,e,l)||this;return l.nativeElement.classList.add("mat-column-"+e.cssClassFriendlyName),t}return Object(r.__extends)(e,n),e}(rr),Tr=function(n){function e(){return null!==n&&n.apply(this,arguments)||this}return Object(r.__extends)(e,n),e}(sr),Ar=function(n){function e(){return null!==n&&n.apply(this,arguments)||this}return Object(r.__extends)(e,n),e}(dr),Dr=function(n){function e(){return null!==n&&n.apply(this,arguments)||this}return Object(r.__extends)(e,n),e}(fr),Fr=function(n){function e(){return null!==n&&n.apply(this,arguments)||this}return Object(r.__extends)(e,n),e}(mr),jr=function(){},Er=9007199254740991,Mr=function(n){function e(e){void 0===e&&(e=[]);var l=n.call(this)||this;return l._renderData=new nr.a([]),l._filter=new nr.a(""),l._renderChangesSubscription=bi.a.EMPTY,l.sortingDataAccessor=function(n,e){var l=n[e];if(Object(it.a)(l)){var t=Number(l);return t<Er?t:l}return l},l.sortData=function(n,e){var t=e.active,i=e.direction;return t&&""!=i?n.sort(function(n,e){var o=l.sortingDataAccessor(n,t),a=l.sortingDataAccessor(e,t),r=0;return null!=o&&null!=a?o>a?r=1:o<a&&(r=-1):null!=o?r=1:null!=a&&(r=-1),r*("asc"==i?1:-1)}):n},l.filterPredicate=function(n,e){var l=Object.keys(n).reduce(function(e,l){return e+n[l]},"").toLowerCase(),t=e.trim().toLowerCase();return-1!=l.indexOf(t)},l._data=new nr.a(e),l._updateChangeSubscription(),l}return Object(r.__extends)(e,n),Object.defineProperty(e.prototype,"data",{get:function(){return this._data.value},set:function(n){this._data.next(n)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"filter",{get:function(){return this._filter.value},set:function(n){this._filter.next(n)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sort",{get:function(){return this._sort},set:function(n){this._sort=n,this._updateChangeSubscription()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"paginator",{get:function(){return this._paginator},set:function(n){this._paginator=n,this._updateChangeSubscription()},enumerable:!0,configurable:!0}),e.prototype._updateChangeSubscription=function(){var n=this,e=this._sort?Object(yi.a)(this._sort.sortChange,this._sort.initialized):Object(_i.a)(null),l=this._paginator?Object(yi.a)(this._paginator.page,this._paginator.initialized):Object(_i.a)(null),t=this._data,i=Object(Rr.b)(t,this._filter).pipe(Object(c.a)(function(e){return n._filterData(e[0])})),o=Object(Rr.b)(i,e).pipe(Object(c.a)(function(e){return n._orderData(e[0])})),a=Object(Rr.b)(o,l).pipe(Object(c.a)(function(e){return n._pageData(e[0])}));this._renderChangesSubscription.unsubscribe(),this._renderChangesSubscription=a.subscribe(function(e){return n._renderData.next(e)})},e.prototype._filterData=function(n){var e=this;return this.filteredData=this.filter?n.filter(function(n){return e.filterPredicate(n,e.filter)}):n,this.paginator&&this._updatePaginator(this.filteredData.length),this.filteredData},e.prototype._orderData=function(n){return this.sort?this.sortData(n.slice(),this.sort):n},e.prototype._pageData=function(n){if(!this.paginator)return n;var e=this.paginator.pageIndex*this.paginator.pageSize;return n.slice().splice(e,this.paginator.pageSize)},e.prototype._updatePaginator=function(n){var e=this;Promise.resolve().then(function(){if(e.paginator&&(e.paginator.length=n,e.paginator.pageIndex>0)){var l=Math.ceil(e.paginator.length/e.paginator.pageSize)-1||0;e.paginator.pageIndex=Math.min(e.paginator.pageIndex,l)}})},e.prototype.connect=function(){return this._renderData},e.prototype.disconnect=function(){},e}(Ja.a),Nr=o["\u0275crt"]({encapsulation:2,styles:["mat-table{display:block}mat-header-row{min-height:56px}mat-footer-row,mat-row{min-height:48px}mat-footer-row,mat-header-row,mat-row{display:flex;border-width:0;border-bottom-width:1px;border-style:solid;align-items:center;box-sizing:border-box}mat-footer-row::after,mat-header-row::after,mat-row::after{display:inline-block;min-height:inherit;content:''}mat-cell:first-child,mat-footer-cell:first-child,mat-header-cell:first-child{padding-left:24px}[dir=rtl] mat-cell:first-child,[dir=rtl] mat-footer-cell:first-child,[dir=rtl] mat-header-cell:first-child{padding-left:0;padding-right:24px}mat-cell:last-child,mat-footer-cell:last-child,mat-header-cell:last-child{padding-right:24px}[dir=rtl] mat-cell:last-child,[dir=rtl] mat-footer-cell:last-child,[dir=rtl] mat-header-cell:last-child{padding-right:0;padding-left:24px}mat-cell,mat-footer-cell,mat-header-cell{flex:1;display:flex;align-items:center;overflow:hidden;word-wrap:break-word;min-height:inherit}table.mat-table{border-spacing:0}tr.mat-header-row{height:56px}tr.mat-footer-row,tr.mat-row{height:48px}th.mat-header-cell{text-align:left}td.mat-cell,td.mat-footer-cell,th.mat-header-cell{padding:0;border-bottom-width:1px;border-bottom-style:solid}td.mat-cell:first-child,td.mat-footer-cell:first-child,th.mat-header-cell:first-child{padding-left:24px}td.mat-cell:last-child,td.mat-footer-cell:last-child,th.mat-header-cell:last-child{padding-right:24px}"],data:{}});function Lr(n){return o["\u0275vid"](2,[o["\u0275qud"](402653184,1,{_rowOutlet:0}),o["\u0275qud"](402653184,2,{_headerRowOutlet:0}),o["\u0275qud"](402653184,3,{_footerRowOutlet:0}),(n()(),o["\u0275eld"](3,16777216,null,null,1,null,null,null,null,null,null,null)),o["\u0275did"](4,16384,[[2,4]],0,br,[o.ViewContainerRef,o.ElementRef],null,null),(n()(),o["\u0275eld"](5,16777216,null,null,1,null,null,null,null,null,null,null)),o["\u0275did"](6,16384,[[1,4]],0,vr,[o.ViewContainerRef,o.ElementRef],null,null),(n()(),o["\u0275eld"](7,16777216,null,null,1,null,null,null,null,null,null,null)),o["\u0275did"](8,16384,[[3,4]],0,yr,[o.ViewContainerRef,o.ElementRef],null,null)],null,null)}var $r=o["\u0275crt"]({encapsulation:2,styles:[],data:{}});function qr(n){return o["\u0275vid"](2,[(n()(),o["\u0275eld"](0,16777216,null,null,1,null,null,null,null,null,null,null)),o["\u0275did"](1,147456,null,0,pr,[o.ViewContainerRef],null,null)],null,null)}var Vr=o["\u0275crt"]({encapsulation:2,styles:[],data:{}});function Ur(n){return o["\u0275vid"](2,[(n()(),o["\u0275eld"](0,16777216,null,null,1,null,null,null,null,null,null,null)),o["\u0275did"](1,147456,null,0,pr,[o.ViewContainerRef],null,null)],null,null)}var zr=l("YNBZ"),Hr=(l("BJTO"),function(){function n(n,e,l,t){var i=this;this.cloudinary=n,this.store=e,this.dialogRef=l,this.data=t,this.uploader=new zr.FileUploader({url:"https://api.cloudinary.com/v1_1/"+this.cloudinary.config().cloud_name+"/upload",autoUpload:!1,isHTML5:!0,removeAfterUpload:!0}),this.upload=new ct.a,this.description="",this.description=this.data.description,this.uploader.onCompleteItem=function(n,e,l,t){200===l?i.upload.next(JSON.parse(e)):i.upload.thrownError(l)}}return n.prototype.fileSelected=function(n){var e=this;this.getBase64(n[0]).then(function(n){return e.imagePreview=n})},n.prototype.getBase64=function(n){return new Promise(function(e,l){var t=new FileReader;t.readAsDataURL(n),t.onload=function(){return e(t.result)},t.onerror=function(n){return l(n)}})},n.prototype.removeAvatar=function(){this.data.avatarUrl?this.store.dispatch("alliance"===this.data.type?new ye:new R):this.uploader.queue.length&&(this.uploader.clearQueue(),this.imagePreview=null)},n.prototype.saveProfile=function(){var n=this;this.upload.pipe(Object(kl.a)()).subscribe(function(e){var l={};e&&(l.avatarUrl=e.secure_url),n.description!==n.data.description&&(l.description=n.description),Object.keys(l).length&&n.store.dispatch("alliance"===n.data.type?new ge(l):new _(l))}),this.uploadFile()},n.prototype.uploadFile=function(){var n=this;if(this.uploader.queue.length){var e=this.uploader.queue[this.uploader.queue.length-1];e.withCredentials=!1,e.onBuildForm=function(e){return e.append("folder",n.data.type),e.append("upload_preset",n.cloudinary.config().upload_preset),e},e.upload()}else this.upload.next(null)},n}()),Br=function(){function n(n){this.dialog=n,this.alliance=null,this.openPlayerProfile=new o.EventEmitter,this.displayedColumns=["rank","name","score"],this.dataSource=new Mr([])}return Object.defineProperty(n.prototype,"allianceScore",{get:function(){return this.alliance.members.reduce(function(n,e){return n+e.score},0)},enumerable:!0,configurable:!0}),n.prototype.ngOnChanges=function(){this.dataSource.data=this.alliance?this.alliance.members:[],this.editDialog&&(this.editDialog.componentInstance.data={avatarUrl:this.alliance.avatarUrl,description:this.alliance.description,type:"alliance"})},n.prototype.editProfile=function(){var n=this;this.editDialog=this.dialog.open(Hr,{width:"80vw",data:{description:this.alliance.description,avatarUrl:this.alliance.avatarUrl,type:"alliance"}}),this.editDialog.afterClosed().subscribe(function(e){n.editDialog=null})},n}(),Wr=l("o3x0"),Zr=o["\u0275crt"]({encapsulation:0,styles:[[""]],data:{}});function Gr(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,1,"div",[],null,null,null,null,null)),(n()(),o["\u0275ted"](-1,null,["Loading..."]))],null,null)}function Yr(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,1,"button",[["class","btn btn-warning btn-sm"],["type","button"]],null,[[null,"click"]],function(n,e,l){var t=!0;return"click"===e&&(t=!1!==n.component.editProfile()&&t),t},null,null)),(n()(),o["\u0275ted"](-1,null,["Edit profile"]))],null,null)}function Xr(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,1,"div",[["class","text-center"]],null,null,null,null,null)),(n()(),o["\u0275eld"](1,0,null,null,0,"img",[["class","img-fluid"]],[[8,"src",4]],null,null,null,null))],null,function(n,e){n(e,1,0,e.component.alliance.avatarUrl)})}function Qr(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,1,"p",[],null,null,null,null,null)),(n()(),o["\u0275ted"](1,null,["",""]))],null,function(n,e){n(e,1,0,e.component.alliance.description)})}function Kr(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,2,"mat-header-cell",[["class","mat-header-cell"],["role","columnheader"]],null,null,null,null,null)),o["\u0275did"](1,16384,null,0,Or,[ir,o.ElementRef],null,null),(n()(),o["\u0275ted"](-1,null,["#"]))],null,null)}function Jr(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,2,"mat-cell",[["class","mat-cell"],["role","gridcell"]],null,null,null,null,null)),o["\u0275did"](1,16384,null,0,Pr,[ir,o.ElementRef],null,null),(n()(),o["\u0275ted"](2,null,["",""]))],null,function(n,e){n(e,2,0,e.context.index+1)})}function nu(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,2,"mat-header-cell",[["class","mat-header-cell"],["role","columnheader"]],null,null,null,null,null)),o["\u0275did"](1,16384,null,0,Or,[ir,o.ElementRef],null,null),(n()(),o["\u0275ted"](-1,null,["Name"]))],null,null)}function eu(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,3,"mat-cell",[["class","mat-cell"],["role","gridcell"]],null,null,null,null,null)),o["\u0275did"](1,16384,null,0,Pr,[ir,o.ElementRef],null,null),(n()(),o["\u0275eld"](2,0,null,null,1,"a",[["href",""]],null,[[null,"click"]],function(n,e,l){var t=!0;return"click"===e&&(t=0!=!!n.component.openPlayerProfile.emit(n.context.$implicit.id)&&t),t},null,null)),(n()(),o["\u0275ted"](3,null,["",""]))],null,function(n,e){n(e,3,0,e.context.$implicit.name)})}function lu(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,2,"mat-header-cell",[["class","mat-header-cell"],["role","columnheader"]],null,null,null,null,null)),o["\u0275did"](1,16384,null,0,Or,[ir,o.ElementRef],null,null),(n()(),o["\u0275ted"](-1,null,["Score"]))],null,null)}function tu(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,2,"mat-cell",[["class","mat-cell"],["role","gridcell"]],null,null,null,null,null)),o["\u0275did"](1,16384,null,0,Pr,[ir,o.ElementRef],null,null),(n()(),o["\u0275ted"](2,null,["",""]))],null,function(n,e){n(e,2,0,e.context.$implicit.score)})}function iu(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,2,"mat-header-row",[["class","mat-header-row"],["role","row"]],null,null,null,qr,$r)),o["\u0275prd"](6144,null,fr,null,[Dr]),o["\u0275did"](2,49152,null,0,Dr,[],null,null)],null,null)}function ou(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,2,"mat-row",[["class","mat-row"],["role","row"]],null,null,null,Ur,Vr)),o["\u0275prd"](6144,null,mr,null,[Fr]),o["\u0275did"](2,49152,null,0,Fr,[],null,null)],null,null)}function au(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,81,"div",[],null,null,null,null,null)),(n()(),o["\u0275eld"](1,0,null,null,80,"div",[["class","row mt-3"]],null,null,null,null,null)),(n()(),o["\u0275eld"](2,0,null,null,27,"div",[["class","col-6"]],null,null,null,null,null)),(n()(),o["\u0275eld"](3,0,null,null,4,"div",[["class","d-flex justify-content-between align-items-center"]],null,null,null,null,null)),(n()(),o["\u0275eld"](4,0,null,null,1,"h2",[["class","m-0"]],null,null,null,null,null)),(n()(),o["\u0275ted"](5,null,["",""])),(n()(),o["\u0275and"](16777216,null,null,1,null,Yr)),o["\u0275did"](7,16384,null,0,yt.NgIf,[o.ViewContainerRef,o.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),o["\u0275eld"](8,0,null,null,0,"hr",[],null,null,null,null,null)),(n()(),o["\u0275and"](16777216,null,null,1,null,Xr)),o["\u0275did"](10,16384,null,0,yt.NgIf,[o.ViewContainerRef,o.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),o["\u0275eld"](11,0,null,null,15,"div",[["class","row mt-2"]],null,null,null,null,null)),(n()(),o["\u0275eld"](12,0,null,null,6,"div",[["class","col-6"]],null,null,null,null,null)),(n()(),o["\u0275eld"](13,0,null,null,1,"div",[],null,null,null,null,null)),(n()(),o["\u0275ted"](-1,null,["Members"])),(n()(),o["\u0275eld"](15,0,null,null,1,"div",[],null,null,null,null,null)),(n()(),o["\u0275ted"](-1,null,["Score"])),(n()(),o["\u0275eld"](17,0,null,null,1,"div",[],null,null,null,null,null)),(n()(),o["\u0275ted"](-1,null,["Founded"])),(n()(),o["\u0275eld"](19,0,null,null,7,"div",[["class","col-6 text-right"]],null,null,null,null,null)),(n()(),o["\u0275eld"](20,0,null,null,1,"div",[],null,null,null,null,null)),(n()(),o["\u0275ted"](21,null,["",""])),(n()(),o["\u0275eld"](22,0,null,null,1,"div",[],null,null,null,null,null)),(n()(),o["\u0275ted"](23,null,["",""])),(n()(),o["\u0275eld"](24,0,null,null,2,"div",[],null,null,null,null,null)),(n()(),o["\u0275ted"](25,null,["",""])),o["\u0275ppd"](26,2),(n()(),o["\u0275eld"](27,0,null,null,0,"hr",[],null,null,null,null,null)),(n()(),o["\u0275and"](16777216,null,null,1,null,Qr)),o["\u0275did"](29,16384,null,0,yt.NgIf,[o.ViewContainerRef,o.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),o["\u0275eld"](30,0,null,null,51,"div",[["class","col-6"]],null,null,null,null,null)),(n()(),o["\u0275eld"](31,0,null,null,1,"h2",[["class","m-0"]],null,null,null,null,null)),(n()(),o["\u0275ted"](-1,null,["Members"])),(n()(),o["\u0275eld"](33,0,null,null,0,"hr",[],null,null,null,null,null)),(n()(),o["\u0275eld"](34,0,null,null,47,"mat-table",[["class","mat-table"]],null,null,null,Lr,Nr)),o["\u0275did"](35,2342912,null,4,xr,[o.IterableDiffers,o.ChangeDetectorRef,o.ElementRef,[8,null],[2,wt.b]],{dataSource:[0,"dataSource"]},null),o["\u0275qud"](603979776,1,{_contentColumnDefs:1}),o["\u0275qud"](603979776,2,{_contentRowDefs:1}),o["\u0275qud"](603979776,3,{_contentHeaderRowDefs:1}),o["\u0275qud"](603979776,4,{_contentFooterRowDefs:1}),(n()(),o["\u0275eld"](40,0,null,null,11,null,null,null,null,null,null,null)),o["\u0275did"](41,16384,null,3,Ir,[],{name:[0,"name"]},null),o["\u0275qud"](335544320,5,{cell:0}),o["\u0275qud"](335544320,6,{headerCell:0}),o["\u0275qud"](335544320,7,{footerCell:0}),o["\u0275prd"](2048,[[1,4]],ir,null,[Ir]),(n()(),o["\u0275and"](0,null,null,2,null,Kr)),o["\u0275did"](47,16384,null,0,kr,[o.TemplateRef],null,null),o["\u0275prd"](2048,[[6,4]],tr,null,[kr]),(n()(),o["\u0275and"](0,null,null,2,null,Jr)),o["\u0275did"](50,16384,null,0,Sr,[o.TemplateRef],null,null),o["\u0275prd"](2048,[[5,4]],lr,null,[Sr]),(n()(),o["\u0275eld"](52,0,null,null,11,null,null,null,null,null,null,null)),o["\u0275did"](53,16384,null,3,Ir,[],{name:[0,"name"]},null),o["\u0275qud"](335544320,8,{cell:0}),o["\u0275qud"](335544320,9,{headerCell:0}),o["\u0275qud"](335544320,10,{footerCell:0}),o["\u0275prd"](2048,[[1,4]],ir,null,[Ir]),(n()(),o["\u0275and"](0,null,null,2,null,nu)),o["\u0275did"](59,16384,null,0,kr,[o.TemplateRef],null,null),o["\u0275prd"](2048,[[9,4]],tr,null,[kr]),(n()(),o["\u0275and"](0,null,null,2,null,eu)),o["\u0275did"](62,16384,null,0,Sr,[o.TemplateRef],null,null),o["\u0275prd"](2048,[[8,4]],lr,null,[Sr]),(n()(),o["\u0275eld"](64,0,null,null,11,null,null,null,null,null,null,null)),o["\u0275did"](65,16384,null,3,Ir,[],{name:[0,"name"]},null),o["\u0275qud"](335544320,11,{cell:0}),o["\u0275qud"](335544320,12,{headerCell:0}),o["\u0275qud"](335544320,13,{footerCell:0}),o["\u0275prd"](2048,[[1,4]],ir,null,[Ir]),(n()(),o["\u0275and"](0,null,null,2,null,lu)),o["\u0275did"](71,16384,null,0,kr,[o.TemplateRef],null,null),o["\u0275prd"](2048,[[12,4]],tr,null,[kr]),(n()(),o["\u0275and"](0,null,null,2,null,tu)),o["\u0275did"](74,16384,null,0,Sr,[o.TemplateRef],null,null),o["\u0275prd"](2048,[[11,4]],lr,null,[Sr]),(n()(),o["\u0275and"](0,null,null,2,null,iu)),o["\u0275did"](77,540672,null,0,Tr,[o.TemplateRef,o.IterableDiffers],{columns:[0,"columns"]},null),o["\u0275prd"](2048,[[3,4]],sr,null,[Tr]),(n()(),o["\u0275and"](0,null,null,2,null,ou)),o["\u0275did"](80,540672,null,0,Ar,[o.TemplateRef,o.IterableDiffers],{columns:[0,"columns"]},null),o["\u0275prd"](2048,[[2,4]],dr,null,[Ar])],function(n,e){var l=e.component;n(e,7,0,null==l.role?null:l.role.permissions.editProfile),n(e,10,0,l.alliance.avatarUrl),n(e,29,0,l.alliance.description),n(e,35,0,l.dataSource),n(e,41,0,"rank"),n(e,53,0,"name"),n(e,65,0,"score"),n(e,77,0,l.displayedColumns),n(e,80,0,l.displayedColumns)},function(n,e){var l=e.component;n(e,5,0,l.alliance.name),n(e,21,0,l.alliance.members.length),n(e,23,0,l.allianceScore),n(e,25,0,o["\u0275unv"](e,25,0,n(e,26,0,o["\u0275nov"](e.parent,0),l.alliance.createdAt,"short")))})}function ru(n){return o["\u0275vid"](0,[o["\u0275pid"](0,yt.DatePipe,[o.LOCALE_ID]),(n()(),o["\u0275eld"](1,0,null,null,4,"div",[["class","container-fluid"]],null,null,null,null,null)),(n()(),o["\u0275and"](16777216,null,null,1,null,Gr)),o["\u0275did"](3,16384,null,0,yt.NgIf,[o.ViewContainerRef,o.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),o["\u0275and"](16777216,null,null,1,null,au)),o["\u0275did"](5,16384,null,0,yt.NgIf,[o.ViewContainerRef,o.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(n,e){var l=e.component;n(e,3,0,!l.alliance),n(e,5,0,l.alliance)},null)}var uu=o["\u0275crt"]({encapsulation:0,styles:[[""]],data:{}});function su(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,16777216,null,null,5,"mat-tab",[["label","Diplomacy"]],null,null,null,Zi,Bi)),o["\u0275did"](1,770048,[[1,4]],2,xi,[o.ViewContainerRef],{textLabel:[0,"textLabel"]},null),o["\u0275qud"](335544320,6,{templateLabel:0}),o["\u0275qud"](335544320,7,{_explicitContent:0}),(n()(),o["\u0275eld"](4,0,null,0,1,"alliance-diplomacy",[],null,null,null,Zo,Co)),o["\u0275did"](5,573440,null,0,wo,[O.n],{alliance:[0,"alliance"]},null),(n()(),o["\u0275and"](0,null,null,0))],function(n,e){n(e,1,0,"Diplomacy"),n(e,5,0,e.parent.context.ngIf)},null)}function cu(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,5,"li",[],null,null,null,null,null)),(n()(),o["\u0275eld"](1,0,null,null,1,"span",[],null,null,null,null,null)),(n()(),o["\u0275ted"](2,null,["",""])),(n()(),o["\u0275eld"](3,0,null,null,2,"fa-icon",[["class","ng-fa-icon"]],[[8,"innerHTML",1]],[[null,"click"]],function(n,e,l){var t=!0;return"click"===e&&(t=!1!==n.component.cancelInvite(n.context.$implicit.id)&&t),t},Lt.b,Lt.a)),o["\u0275did"](4,573440,null,0,$t.a,[qt.c],{iconProp:[0,"iconProp"]},null),o["\u0275pad"](5,2)],function(n,e){n(e,4,0,n(e,5,0,"fas","times"))},function(n,e){n(e,2,0,e.context.$implicit.name),n(e,3,0,o["\u0275nov"](e,4).renderedIconHTML)})}function du(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,5,"div",[],null,null,null,null,null)),(n()(),o["\u0275eld"](1,0,null,null,1,"span",[],null,null,null,null,null)),(n()(),o["\u0275ted"](-1,null,["Invited players:"])),(n()(),o["\u0275eld"](3,0,null,null,2,"ul",[],null,null,null,null,null)),(n()(),o["\u0275and"](16777216,null,null,1,null,cu)),o["\u0275did"](5,802816,null,0,yt.NgForOf,[o.ViewContainerRef,o.TemplateRef,o.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],function(n,e){n(e,5,0,e.parent.parent.context.ngIf.invitations)},null)}function pu(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,1,"p",[],null,null,null,null,null)),(n()(),o["\u0275ted"](-1,null,["No pending invitations."]))],null,null)}function fu(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,16777216,null,null,19,"mat-tab",[["label","Invitations"]],null,null,null,Zi,Bi)),o["\u0275did"](1,770048,[[1,4]],2,xi,[o.ViewContainerRef],{textLabel:[0,"textLabel"]},null),o["\u0275qud"](335544320,8,{templateLabel:0}),o["\u0275qud"](335544320,9,{_explicitContent:0}),(n()(),o["\u0275eld"](4,0,null,0,12,"div",[],null,null,null,null,null)),(n()(),o["\u0275eld"](5,0,null,null,1,"p",[],null,null,null,null,null)),(n()(),o["\u0275ted"](-1,null,["Invite players to expand your alliance."])),(n()(),o["\u0275eld"](7,0,null,null,9,"div",[],null,null,null,null,null)),(n()(),o["\u0275eld"](8,0,null,null,5,"input",[["placeholder","Player name"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(n,e,l){var t=!0,i=n.component;return"input"===e&&(t=!1!==o["\u0275nov"](n,9)._handleInput(l.target.value)&&t),"blur"===e&&(t=!1!==o["\u0275nov"](n,9).onTouched()&&t),"compositionstart"===e&&(t=!1!==o["\u0275nov"](n,9)._compositionStart()&&t),"compositionend"===e&&(t=!1!==o["\u0275nov"](n,9)._compositionEnd(l.target.value)&&t),"ngModelChange"===e&&(t=!1!==(i.inviteTarget=l)&&t),t},null,null)),o["\u0275did"](9,16384,null,0,ti.d,[o.Renderer2,o.ElementRef,[2,ti.a]],null,null),o["\u0275prd"](1024,null,ti.l,function(n){return[n]},[ti.d]),o["\u0275did"](11,671744,null,0,ti.q,[[8,null],[8,null],[8,null],[6,ti.l]],{model:[0,"model"]},{update:"ngModelChange"}),o["\u0275prd"](2048,null,ti.m,null,[ti.q]),o["\u0275did"](13,16384,null,0,ti.n,[[4,ti.m]],null,null),(n()(),o["\u0275eld"](14,0,null,null,2,"button",[["color","primary"],["mat-raised-button",""]],[[8,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"]],function(n,e,l){var t=!0;return"click"===e&&(t=!1!==n.component.createInvite()&&t),t},ho.b,ho.a)),o["\u0275did"](15,180224,null,0,go.b,[o.ElementRef,Ct.a,Rt.f,[2,Di.a]],{color:[0,"color"]},null),(n()(),o["\u0275ted"](-1,0,["Invite"])),(n()(),o["\u0275and"](16777216,null,0,1,null,du)),o["\u0275did"](18,16384,null,0,yt.NgIf,[o.ViewContainerRef,o.TemplateRef],{ngIf:[0,"ngIf"],ngIfElse:[1,"ngIfElse"]},null),(n()(),o["\u0275and"](0,[["noInvitations",2]],0,0,null,pu)),(n()(),o["\u0275and"](0,null,null,0))],function(n,e){var l=e.component;n(e,1,0,"Invitations"),n(e,11,0,l.inviteTarget),n(e,15,0,"primary"),n(e,18,0,e.parent.context.ngIf.invitations.length,o["\u0275nov"](e,19))},function(n,e){n(e,8,0,o["\u0275nov"](e,13).ngClassUntouched,o["\u0275nov"](e,13).ngClassTouched,o["\u0275nov"](e,13).ngClassPristine,o["\u0275nov"](e,13).ngClassDirty,o["\u0275nov"](e,13).ngClassValid,o["\u0275nov"](e,13).ngClassInvalid,o["\u0275nov"](e,13).ngClassPending),n(e,14,0,o["\u0275nov"](e,15).disabled||null,"NoopAnimations"===o["\u0275nov"](e,15)._animationMode)})}function mu(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,16777216,null,null,7,"mat-tab",[["label","Management"]],null,null,null,Zi,Bi)),o["\u0275did"](1,770048,[[1,4]],2,xi,[o.ViewContainerRef],{textLabel:[0,"textLabel"]},null),o["\u0275qud"](335544320,10,{templateLabel:0}),o["\u0275qud"](335544320,11,{_explicitContent:0}),(n()(),o["\u0275eld"](4,0,null,0,1,"editable-roles",[],null,[[null,"roleUpdate"],[null,"roleRemove"]],function(n,e,l){var t=!0,i=n.component;return"roleUpdate"===e&&(t=!1!==i.roleUpdate(l)&&t),"roleRemove"===e&&(t=!1!==i.roleRemove(l)&&t),t},_a,da)),o["\u0275did"](5,573440,null,0,ca,[ti.f],{alliance:[0,"alliance"]},{roleUpdate:"roleUpdate",roleRemove:"roleRemove"}),(n()(),o["\u0275eld"](6,0,null,0,1,"player-roles",[["class","mt-4"]],null,[[null,"playerRoleUpdate"],[null,"playerRemove"]],function(n,e,l){var t=!0,i=n.component;return"playerRoleUpdate"===e&&(t=!1!==i.updatePlayerRole(l)&&t),"playerRemove"===e&&(t=!1!==i.removeMember(l)&&t),t},Ta,Sa)),o["\u0275did"](7,49152,null,0,xa,[],{alliance:[0,"alliance"]},{playerRoleUpdate:"playerRoleUpdate",playerRemove:"playerRemove"}),(n()(),o["\u0275and"](0,null,null,0))],function(n,e){n(e,1,0,"Management"),n(e,5,0,e.parent.context.ngIf),n(e,7,0,e.parent.context.ngIf)},null)}function hu(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,21,"div",[],null,null,null,null,null)),(n()(),o["\u0275eld"](1,0,null,null,20,"mat-tab-group",[["class","mat-tab-group"]],[[2,"mat-tab-group-dynamic-height",null],[2,"mat-tab-group-inverted-header",null]],null,null,$i,Fi)),o["\u0275did"](2,3325952,null,1,Ti,[o.ElementRef,o.ChangeDetectorRef],null,null),o["\u0275qud"](603979776,1,{_tabs:1}),(n()(),o["\u0275eld"](4,16777216,null,null,5,"mat-tab",[["label","Overview"]],null,null,null,Zi,Bi)),o["\u0275did"](5,770048,[[1,4]],2,xi,[o.ViewContainerRef],{textLabel:[0,"textLabel"]},null),o["\u0275qud"](335544320,2,{templateLabel:0}),o["\u0275qud"](335544320,3,{_explicitContent:0}),(n()(),o["\u0275eld"](8,0,null,0,1,"alliance-overview",[],null,[[null,"leaveAlliance"],[null,"destroyAlliance"],[null,"openAllianceProfile"],[null,"openPlayerProfile"]],function(n,e,l){var t=!0,i=n.component;return"leaveAlliance"===e&&(t=!1!==i.leaveAlliance()&&t),"destroyAlliance"===e&&(t=!1!==i.destroyAlliance()&&t),"openAllianceProfile"===e&&(t=!1!==i.openAllianceProfile.emit(l)&&t),"openPlayerProfile"===e&&(t=!1!==i.openPlayerProfile.emit(l)&&t),t},Ka,Da)),o["\u0275did"](9,49152,null,0,Aa,[],{alliance:[0,"alliance"],role:[1,"role"]},{leaveAlliance:"leaveAlliance",destroyAlliance:"destroyAlliance",openAllianceProfile:"openAllianceProfile",openPlayerProfile:"openPlayerProfile"}),(n()(),o["\u0275eld"](10,16777216,null,null,5,"mat-tab",[["label","Profile"]],null,null,null,Zi,Bi)),o["\u0275did"](11,770048,[[1,4]],2,xi,[o.ViewContainerRef],{textLabel:[0,"textLabel"]},null),o["\u0275qud"](335544320,4,{templateLabel:0}),o["\u0275qud"](335544320,5,{_explicitContent:0}),(n()(),o["\u0275eld"](14,0,null,0,1,"alliance-profile",[],null,null,null,ru,Zr)),o["\u0275did"](15,573440,null,0,Br,[Wr.e],{alliance:[0,"alliance"],role:[1,"role"]},null),(n()(),o["\u0275and"](16777216,null,null,1,null,su)),o["\u0275did"](17,16384,null,0,yt.NgIf,[o.ViewContainerRef,o.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),o["\u0275and"](16777216,null,null,1,null,fu)),o["\u0275did"](19,16384,null,0,yt.NgIf,[o.ViewContainerRef,o.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),o["\u0275and"](16777216,null,null,1,null,mu)),o["\u0275did"](21,16384,null,0,yt.NgIf,[o.ViewContainerRef,o.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(n,e){n(e,5,0,"Overview"),n(e,9,0,e.context.ngIf,e.parent.context.ngIf.role),n(e,11,0,"Profile"),n(e,15,0,e.context.ngIf,e.parent.context.ngIf.role),n(e,17,0,null==e.parent.context.ngIf.role?null:e.parent.context.ngIf.role.permissions.manageAlliance),n(e,19,0,null==e.parent.context.ngIf.role?null:e.parent.context.ngIf.role.permissions.viewInvites),n(e,21,0,null==e.parent.context.ngIf.role?null:e.parent.context.ngIf.role.permissions.viewManagement)},function(n,e){n(e,1,0,o["\u0275nov"](e,2).dynamicHeight,"below"===o["\u0275nov"](e,2).headerPosition)})}function gu(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,9,"div",[],null,null,null,null,null)),(n()(),o["\u0275eld"](1,0,null,null,1,"span",[],null,null,null,null,null)),(n()(),o["\u0275ted"](2,null,["",""])),(n()(),o["\u0275eld"](3,0,null,null,2,"span",[],null,null,null,null,null)),(n()(),o["\u0275ted"](4,null,["",""])),o["\u0275ppd"](5,2),(n()(),o["\u0275eld"](6,0,null,null,1,"button",[["class","btn btn-success"]],null,[[null,"click"]],function(n,e,l){var t=!0;return"click"===e&&(t=!1!==n.component.acceptInvite(n.context.$implicit.id)&&t),t},null,null)),(n()(),o["\u0275ted"](-1,null,["Accept"])),(n()(),o["\u0275eld"](8,0,null,null,1,"button",[["class","btn btn-danger"]],null,[[null,"click"]],function(n,e,l){var t=!0;return"click"===e&&(t=!1!==n.component.rejectInvite(n.context.$implicit.id)&&t),t},null,null)),(n()(),o["\u0275ted"](-1,null,["Reject"]))],null,function(n,e){n(e,2,0,e.context.$implicit.name),n(e,4,0,o["\u0275unv"](e,4,0,n(e,5,0,o["\u0275nov"](e.parent.parent.parent.parent.parent,0),e.context.$implicit.createdAt,"yy-MM-dd HH:mm:ss")))})}function vu(n){return o["\u0275vid"](0,[(n()(),o["\u0275ted"](-1,null,["You don't hanve any invitations."]))],null,null)}function bu(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,5,"div",[],null,null,null,null,null)),(n()(),o["\u0275eld"](1,0,null,null,1,"p",[],null,null,null,null,null)),(n()(),o["\u0275ted"](-1,null,["Here are your current invitations:"])),(n()(),o["\u0275and"](16777216,null,null,1,null,gu)),o["\u0275did"](4,802816,null,0,yt.NgForOf,[o.ViewContainerRef,o.TemplateRef,o.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(n()(),o["\u0275and"](0,[["noInvites",2]],null,0,null,vu))],function(n,e){n(e,4,0,e.parent.context.ngIf)},null)}function yu(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,4,"div",[],null,null,null,null,null)),(n()(),o["\u0275eld"](1,0,null,null,1,"p",[],null,null,null,null,null)),(n()(),o["\u0275ted"](-1,null,["You are currently not a part of any alliance."])),(n()(),o["\u0275and"](16777216,null,null,1,null,bu)),o["\u0275did"](4,16384,null,0,yt.NgIf,[o.ViewContainerRef,o.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(n,e){n(e,4,0,e.context.ngIf.length)},null)}function _u(n){return o["\u0275vid"](0,[(n()(),o["\u0275and"](16777216,null,null,2,null,yu)),o["\u0275did"](1,16384,null,0,yt.NgIf,[o.ViewContainerRef,o.TemplateRef],{ngIf:[0,"ngIf"]},null),o["\u0275pid"](131072,yt.AsyncPipe,[o.ChangeDetectorRef]),(n()(),o["\u0275eld"](3,0,null,null,10,"div",[],null,null,null,null,null)),(n()(),o["\u0275eld"](4,0,null,null,1,"p",[],null,null,null,null,null)),(n()(),o["\u0275ted"](-1,null,["Create your own alliance:"])),(n()(),o["\u0275eld"](6,0,null,null,5,"input",[["placeholder","Alliance name"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(n,e,l){var t=!0,i=n.component;return"input"===e&&(t=!1!==o["\u0275nov"](n,7)._handleInput(l.target.value)&&t),"blur"===e&&(t=!1!==o["\u0275nov"](n,7).onTouched()&&t),"compositionstart"===e&&(t=!1!==o["\u0275nov"](n,7)._compositionStart()&&t),"compositionend"===e&&(t=!1!==o["\u0275nov"](n,7)._compositionEnd(l.target.value)&&t),"ngModelChange"===e&&(t=!1!==(i.allianceName=l)&&t),t},null,null)),o["\u0275did"](7,16384,null,0,ti.d,[o.Renderer2,o.ElementRef,[2,ti.a]],null,null),o["\u0275prd"](1024,null,ti.l,function(n){return[n]},[ti.d]),o["\u0275did"](9,671744,null,0,ti.q,[[8,null],[8,null],[8,null],[6,ti.l]],{model:[0,"model"]},{update:"ngModelChange"}),o["\u0275prd"](2048,null,ti.m,null,[ti.q]),o["\u0275did"](11,16384,null,0,ti.n,[[4,ti.m]],null,null),(n()(),o["\u0275eld"](12,0,null,null,1,"button",[["class","btn btn-primary"],["type","submit"]],null,[[null,"click"]],function(n,e,l){var t=!0;return"click"===e&&(t=!1!==n.component.createAlliance()&&t),t},null,null)),(n()(),o["\u0275ted"](-1,null,["Create"]))],function(n,e){var l=e.component;n(e,1,0,o["\u0275unv"](e,1,0,o["\u0275nov"](e,2).transform(l.invitations$))),n(e,9,0,l.allianceName)},function(n,e){n(e,6,0,o["\u0275nov"](e,11).ngClassUntouched,o["\u0275nov"](e,11).ngClassTouched,o["\u0275nov"](e,11).ngClassPristine,o["\u0275nov"](e,11).ngClassDirty,o["\u0275nov"](e,11).ngClassValid,o["\u0275nov"](e,11).ngClassInvalid,o["\u0275nov"](e,11).ngClassPending)})}function wu(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,3,"div",[["class","p-2"]],null,null,null,null,null)),(n()(),o["\u0275and"](16777216,null,null,1,null,hu)),o["\u0275did"](2,16384,null,0,yt.NgIf,[o.ViewContainerRef,o.TemplateRef],{ngIf:[0,"ngIf"],ngIfElse:[1,"ngIfElse"]},null),(n()(),o["\u0275and"](0,[["noAlliance",2]],null,0,null,_u))],function(n,e){n(e,2,0,e.context.ngIf.alliance,o["\u0275nov"](e,3))},null)}function Cu(n){return o["\u0275vid"](0,[o["\u0275pid"](0,yt.DatePipe,[o.LOCALE_ID]),(n()(),o["\u0275and"](16777216,null,null,2,null,wu)),o["\u0275did"](2,16384,null,0,yt.NgIf,[o.ViewContainerRef,o.TemplateRef],{ngIf:[0,"ngIf"]},null),o["\u0275pid"](131072,yt.AsyncPipe,[o.ChangeDetectorRef])],function(n,e){var l=e.component;n(e,2,0,o["\u0275unv"](e,2,0,o["\u0275nov"](e,3).transform(l.allianceData$)))},null)}var Ru=l("au9L"),xu=Object.assign||function(n){for(var e,l=1,t=arguments.length;l<t;l++)for(var i in e=arguments[l])Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n},Su=function(){function n(){this.unitQueue=[],this.unitDetails=ai}return n.prototype.ngOnInit=function(){var n=this;this.queue$=Object(Ut.a)(0,1e3).pipe(Ht(),Object(c.a)(function(e){var l=e.timestamp;return n.unitQueue.map(function(n){return xu({},n,{timeLeft:+n.endsAt-l})})}))},n.prototype.ngOnChanges=function(n){},n}(),ku=o["\u0275crt"]({encapsulation:0,styles:[[""]],data:{}});function Iu(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,12,"div",[["class","row"]],null,null,null,null,null)),(n()(),o["\u0275eld"](1,0,null,null,3,"div",[["class","col d-flex"]],null,null,null,null,null)),(n()(),o["\u0275eld"](2,0,null,null,0,"i",[["class","unit-icon mr-1"]],[[1,"data-unit",0]],null,null,null,null)),(n()(),o["\u0275eld"](3,0,null,null,1,"span",[],null,null,null,null,null)),(n()(),o["\u0275ted"](4,null,["",""])),(n()(),o["\u0275eld"](5,0,null,null,1,"div",[["class","col"]],null,null,null,null,null)),(n()(),o["\u0275ted"](6,null,[" "," "])),(n()(),o["\u0275eld"](7,0,null,null,2,"div",[["class","col"]],null,null,null,null,null)),(n()(),o["\u0275ted"](8,null,[" "," "])),o["\u0275ppd"](9,2),(n()(),o["\u0275eld"](10,0,null,null,2,"div",[["class","col"]],null,null,null,null,null)),(n()(),o["\u0275ted"](11,null,[" "," "])),o["\u0275ppd"](12,2)],null,function(n,e){var l=e.component;n(e,2,0,e.context.$implicit.name),n(e,4,0,l.unitDetails[e.context.$implicit.name].name),n(e,6,0,e.context.$implicit.amount),n(e,8,0,o["\u0275unv"](e,8,0,n(e,9,0,o["\u0275nov"](e.parent,0),e.context.$implicit.endsAt,"HH:mm:ss"))),n(e,11,0,o["\u0275unv"](e,11,0,n(e,12,0,o["\u0275nov"](e.parent,1),e.context.$implicit.timeLeft,"HH:mm:ss")))})}function Ou(n){return o["\u0275vid"](0,[o["\u0275pid"](0,yt.DatePipe,[o.LOCALE_ID]),o["\u0275pid"](0,Vt,[]),(n()(),o["\u0275and"](16777216,null,null,2,null,Iu)),o["\u0275did"](3,802816,null,0,yt.NgForOf,[o.ViewContainerRef,o.TemplateRef,o.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),o["\u0275pid"](131072,yt.AsyncPipe,[o.ChangeDetectorRef])],function(n,e){var l=e.component;n(e,3,0,o["\u0275unv"](e,3,0,o["\u0275nov"](e,4).transform(l.queue$)))},null)}var Pu=l("xlPZ"),Tu=l("yGWI"),Au=function(n){return Object(Ut.a)(0,1e3).pipe(Ht(),Object(c.a)(function(e){var l=(e.timestamp-+n.updatedAt)/36e5;return{wood:Math.min(n.resources.wood+n.production.wood*l,n.storage),clay:Math.min(n.resources.clay+n.production.clay*l,n.storage),iron:Math.min(n.resources.iron+n.production.iron*l,n.storage)}}),Object(Pu.a)(new ct.a),Object(Tu.a)())},Du=function(){function n(n){this.store=n,this.unitDetails=ai,this.recruitment={resources:{wood:null,clay:null,iron:null},resourcesAvailable:{wood:null,clay:null,iron:null},units:{},population:0},this.hasRecruitmentQueue=!1,Wt.d.add(Zt.f)}return n.prototype.ngOnChanges=function(){var n=this;this.unitData=this.worldData.units,this.hasRecruitmentQueue=!!this.town.unitQueues.length,Au(this.town).pipe(Object(Tl.a)(1)).subscribe(function(e){if(n.recruitment.resources.wood===n.recruitment.resourcesAvailable.wood&&n.recruitment.resources.clay===n.recruitment.resourcesAvailable.clay&&n.recruitment.resources.iron===n.recruitment.resourcesAvailable.iron)return n.recruitment.resources=e,void(n.recruitment.resourcesAvailable=e);var l=e.wood-n.recruitment.resources.wood,t=e.clay-n.recruitment.resources.clay,i=e.iron-n.recruitment.resources.iron;n.recruitment.resources=e,n.recruitment.resourcesAvailable.wood+=l,n.recruitment.resourcesAvailable.clay+=t,n.recruitment.resourcesAvailable.iron+=i})},n.prototype.unitAmountUpdate=function(n,e){var l=(n=Math.max(n,0)||0)-(this.recruitment.units[e]||0);if("number"==typeof n){var t=this.worldData.unitMap[e].costs;this.recruitment.resourcesAvailable.wood-=t.wood*l,this.recruitment.resourcesAvailable.clay-=t.clay*l,this.recruitment.resourcesAvailable.iron-=t.iron*l,this.recruitment.population=Math.max(this.recruitment.population+l,0)}this.recruitment.units[e]=n},n.prototype.calculateMax=function(n){return Math.max(Math.min.apply(null,[Math.floor(this.recruitment.resourcesAvailable.wood/n.wood),Math.floor(this.recruitment.resourcesAvailable.clay/n.clay),Math.floor(this.recruitment.resourcesAvailable.iron/n.iron),Math.floor(this.town.population.available-this.recruitment.population)]),0)},n.prototype.canRecruit=function(n){var e=this;return!(this.town._actionState.recruit.inProgress||!this.town.population.available)&&(!n.requirements||n.requirements.every(function(n){return n.level<=e.town.buildings[n.item].level}))},n.prototype.recruit=function(n,e){this.store.dispatch(new function(n){this.payload=n,this.type="[Town] Recruit"}([{type:e,amount:n}]))},n}(),Fu=o["\u0275crt"]({encapsulation:0,styles:[["input[_ngcontent-%COMP%]{max-width:4rem}"]],data:{}});function ju(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,1,"div",[["class","pb-1 text-warning"]],null,null,null,null,null)),(n()(),o["\u0275ted"](-1,null,["Max population reached, upgrade your farm to recruit new troops."]))],null,null)}function Eu(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,10,"div",[["class","py-2"]],null,null,null,null,null)),(n()(),o["\u0275eld"](1,0,null,null,6,"input",[["min","0"],["type","number"]],[[8,"max",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModel"],[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(n,e,l){var t=!0,i=n.component;return"input"===e&&(t=!1!==o["\u0275nov"](n,2)._handleInput(l.target.value)&&t),"blur"===e&&(t=!1!==o["\u0275nov"](n,2).onTouched()&&t),"compositionstart"===e&&(t=!1!==o["\u0275nov"](n,2)._compositionStart()&&t),"compositionend"===e&&(t=!1!==o["\u0275nov"](n,2)._compositionEnd(l.target.value)&&t),"change"===e&&(t=!1!==o["\u0275nov"](n,3).onChange(l.target.value)&&t),"input"===e&&(t=!1!==o["\u0275nov"](n,3).onChange(l.target.value)&&t),"blur"===e&&(t=!1!==o["\u0275nov"](n,3).onTouched()&&t),"ngModel"===e&&(t=!1!==i.recruitment.units[n.parent.context.$implicit.name]&&t),"ngModelChange"===e&&(t=!1!==i.unitAmountUpdate(l,n.parent.context.$implicit.name)&&t),t},null,null)),o["\u0275did"](2,16384,null,0,ti.d,[o.Renderer2,o.ElementRef,[2,ti.a]],null,null),o["\u0275did"](3,16384,null,0,ti.x,[o.Renderer2,o.ElementRef],null,null),o["\u0275prd"](1024,null,ti.l,function(n,e){return[n,e]},[ti.d,ti.x]),o["\u0275did"](5,671744,null,0,ti.q,[[8,null],[8,null],[8,null],[6,ti.l]],{name:[0,"name"]},{update:"ngModelChange"}),o["\u0275prd"](2048,null,ti.m,null,[ti.q]),o["\u0275did"](7,16384,null,0,ti.n,[[4,ti.m]],null,null),(n()(),o["\u0275ted"](8,null,[" / "," "])),(n()(),o["\u0275eld"](9,0,null,null,1,"button",[["class","btn btn-primary btn-sm"],["type","button"]],null,[[null,"click"]],function(n,e,l){var t=!0,i=n.component;return"click"===e&&(t=!1!==i.recruit(i.recruitment.units[n.parent.context.$implicit.name],n.parent.context.$implicit.name)&&t),t},null,null)),(n()(),o["\u0275ted"](-1,null,["recruit"]))],function(n,e){n(e,5,0,o["\u0275inlineInterpolate"](1,"",e.parent.context.$implicit.name,""))},function(n,e){var l=e.component;n(e,1,0,l.calculateMax(e.parent.context.$implicit.costs)+l.recruitment.units[e.parent.context.$implicit.name],o["\u0275nov"](e,7).ngClassUntouched,o["\u0275nov"](e,7).ngClassTouched,o["\u0275nov"](e,7).ngClassPristine,o["\u0275nov"](e,7).ngClassDirty,o["\u0275nov"](e,7).ngClassValid,o["\u0275nov"](e,7).ngClassInvalid,o["\u0275nov"](e,7).ngClassPending),n(e,8,0,l.calculateMax(e.parent.context.$implicit.costs))})}function Mu(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,17,"div",[["class","card p-3"]],null,null,null,null,null)),(n()(),o["\u0275eld"](1,0,null,null,1,"div",[],null,null,null,null,null)),(n()(),o["\u0275ted"](2,null,["",""])),(n()(),o["\u0275eld"](3,0,null,null,14,"div",[["class","row"]],null,null,null,null,null)),(n()(),o["\u0275eld"](4,0,null,null,2,"div",[["class","col-xl-6"]],null,null,null,null,null)),(n()(),o["\u0275ted"](5,null,["Attack: "," ",""])),o["\u0275pad"](6,1),(n()(),o["\u0275eld"](7,0,null,null,4,"div",[["class","col-xl-6"]],null,null,null,null,null)),(n()(),o["\u0275ted"](8,null,[" Defense: "," general, "," cavalry, "," archer"])),o["\u0275pad"](9,1),o["\u0275pad"](10,1),o["\u0275pad"](11,1),(n()(),o["\u0275eld"](12,0,null,null,2,"div",[["class","col-xl-6"]],null,null,null,null,null)),(n()(),o["\u0275ted"](13,null,["Haul: ",""])),o["\u0275pad"](14,1),(n()(),o["\u0275eld"](15,0,null,null,2,"div",[["class","col-xl-6"]],null,null,null,null,null)),(n()(),o["\u0275ted"](16,null,["Speed per field: ",""])),o["\u0275pad"](17,1)],null,function(n,e){var l=e.component;n(e,2,0,l.unitDetails[e.parent.context.$implicit.name].description),n(e,5,0,l.worldData.unitMap[n(e,6,0,e.parent.context.$implicit.name)].combat.attack,l.worldData.unitMap[e.parent.context.$implicit.name].attackType),n(e,8,0,l.worldData.unitMap[n(e,9,0,e.parent.context.$implicit.name)].combat.defense.general,l.worldData.unitMap[n(e,10,0,e.parent.context.$implicit.name)].combat.defense.cavalry,l.worldData.unitMap[n(e,11,0,e.parent.context.$implicit.name)].combat.defense.archer),n(e,13,0,l.worldData.unitMap[n(e,14,0,e.parent.context.$implicit.name)].haul),n(e,16,0,l.worldData.unitMap[n(e,17,0,e.parent.context.$implicit.name)].speed)})}function Nu(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,32,"div",[["class","py-1"]],null,null,null,null,null)),(n()(),o["\u0275eld"](1,0,null,null,26,"div",[["class","row align-items-center"]],null,null,null,null,null)),(n()(),o["\u0275eld"](2,0,null,null,6,"div",[["class","col-sm-6 d-flex"],["style","cursor: pointer;"]],null,[[null,"click"]],function(n,e,l){var t=!0;return"click"===e&&(t=0!=(n.context.$implicit.visible=!n.context.$implicit.visible)&&t),t},null,null)),(n()(),o["\u0275eld"](3,0,null,null,2,"fa-icon",[["class","fa pr-1 align-items-center d-flex ng-fa-icon"]],[[8,"innerHTML",1]],null,null,Lt.b,Lt.a)),o["\u0275did"](4,573440,null,0,$t.a,[qt.c],{iconProp:[0,"iconProp"],rotate:[1,"rotate"]},null),o["\u0275pad"](5,2),(n()(),o["\u0275eld"](6,0,null,null,0,"i",[["class","unit-icon mr-1"]],[[1,"data-unit",0]],null,null,null,null)),(n()(),o["\u0275eld"](7,0,null,null,1,"span",[],null,null,null,null,null)),(n()(),o["\u0275ted"](8,null,["",""])),(n()(),o["\u0275eld"](9,0,null,null,15,"div",[["class","col-sm-6 d-flex"]],null,null,null,null,null)),(n()(),o["\u0275eld"](10,0,null,null,3,"div",[["class","resource"]],null,null,null,null,null)),(n()(),o["\u0275eld"](11,0,null,null,0,"div",[["class","resource-icon wood"]],null,null,null,null,null)),(n()(),o["\u0275ted"](12,null,[" "," "])),o["\u0275ppd"](13,2),(n()(),o["\u0275eld"](14,0,null,null,3,"div",[["class","resource"]],null,null,null,null,null)),(n()(),o["\u0275eld"](15,0,null,null,0,"div",[["class","resource-icon clay"]],null,null,null,null,null)),(n()(),o["\u0275ted"](16,null,[" "," "])),o["\u0275ppd"](17,2),(n()(),o["\u0275eld"](18,0,null,null,3,"div",[["class","resource"]],null,null,null,null,null)),(n()(),o["\u0275eld"](19,0,null,null,0,"div",[["class","resource-icon iron"]],null,null,null,null,null)),(n()(),o["\u0275ted"](20,null,[" "," "])),o["\u0275ppd"](21,2),(n()(),o["\u0275eld"](22,0,null,null,2,"div",[],null,null,null,null,null)),(n()(),o["\u0275ted"](23,null,["",""])),o["\u0275ppd"](24,2),(n()(),o["\u0275eld"](25,0,null,null,2,"div",[["class","col-6"]],null,null,null,null,null)),(n()(),o["\u0275and"](16777216,null,null,1,null,Eu)),o["\u0275did"](27,16384,null,0,yt.NgIf,[o.ViewContainerRef,o.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),o["\u0275eld"](28,0,null,null,4,"div",[["class","row my-1"]],[[2,"collapse",null],[2,"show",null]],null,null,null,null)),o["\u0275did"](29,16384,null,0,Ru.a,[],{collapsed:[0,"collapsed"]},null),(n()(),o["\u0275eld"](30,0,null,null,2,"div",[["class","col"]],null,null,null,null,null)),(n()(),o["\u0275and"](16777216,null,null,1,null,Mu)),o["\u0275did"](32,16384,null,0,yt.NgIf,[o.ViewContainerRef,o.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(n,e){var l=e.component;n(e,4,0,n(e,5,0,"fas","chevron-right"),e.context.$implicit.visible?90:0),n(e,27,0,l.canRecruit(e.context.$implicit)),n(e,29,0,!e.context.$implicit.visible),n(e,32,0,l.unitDetails[e.context.$implicit.name])},function(n,e){var l=e.component;n(e,3,0,o["\u0275nov"](e,4).renderedIconHTML),n(e,6,0,e.context.$implicit.name),n(e,8,0,l.unitDetails[e.context.$implicit.name].name),n(e,12,0,o["\u0275unv"](e,12,0,n(e,13,0,o["\u0275nov"](e.parent,0),e.context.$implicit.costs.wood,"1.0-0"))),n(e,16,0,o["\u0275unv"](e,16,0,n(e,17,0,o["\u0275nov"](e.parent,0),e.context.$implicit.costs.clay,"1.0-0"))),n(e,20,0,o["\u0275unv"](e,20,0,n(e,21,0,o["\u0275nov"](e.parent,0),e.context.$implicit.costs.iron,"1.0-0"))),n(e,23,0,o["\u0275unv"](e,23,0,n(e,24,0,o["\u0275nov"](e.parent,1),e.context.$implicit.recruitTime*l.town.recruitmentModifier,"HH:mm:ss"))),n(e,28,0,!0,!o["\u0275nov"](e,29).collapsed)})}function Lu(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,13,"div",[],null,null,null,null,null)),(n()(),o["\u0275eld"](1,0,null,null,1,"h3",[],null,null,null,null,null)),(n()(),o["\u0275ted"](-1,null,["Ongoing recruiting"])),(n()(),o["\u0275eld"](3,0,null,null,8,"div",[["class","row"]],null,null,null,null,null)),(n()(),o["\u0275eld"](4,0,null,null,1,"div",[["class","col d-flex"]],null,null,null,null,null)),(n()(),o["\u0275ted"](-1,null,["Unit"])),(n()(),o["\u0275eld"](6,0,null,null,1,"div",[["class","col d-flex"]],null,null,null,null,null)),(n()(),o["\u0275ted"](-1,null,["Amount"])),(n()(),o["\u0275eld"](8,0,null,null,1,"div",[["class","col d-flex"]],null,null,null,null,null)),(n()(),o["\u0275ted"](-1,null,["End time"])),(n()(),o["\u0275eld"](10,0,null,null,1,"div",[["class","col d-flex"]],null,null,null,null,null)),(n()(),o["\u0275ted"](-1,null,["Time left"])),(n()(),o["\u0275eld"](12,0,null,null,1,"unit-queue",[],null,null,null,Ou,ku)),o["\u0275did"](13,638976,null,0,Su,[],{unitQueue:[0,"unitQueue"]},null)],function(n,e){n(e,13,0,e.component.town.unitQueues)},null)}function $u(n){return o["\u0275vid"](0,[o["\u0275pid"](0,yt.DecimalPipe,[o.LOCALE_ID]),o["\u0275pid"](0,Vt,[]),(n()(),o["\u0275eld"](2,0,null,null,8,"div",[["class","container-fluid pb-4"]],null,null,null,null,null)),(n()(),o["\u0275eld"](3,0,null,null,1,"h2",[],null,null,null,null,null)),(n()(),o["\u0275ted"](-1,null,["Recruitment"])),(n()(),o["\u0275and"](16777216,null,null,1,null,ju)),o["\u0275did"](6,16384,null,0,yt.NgIf,[o.ViewContainerRef,o.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),o["\u0275and"](16777216,null,null,1,null,Nu)),o["\u0275did"](8,802816,null,0,yt.NgForOf,[o.ViewContainerRef,o.TemplateRef,o.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(n()(),o["\u0275and"](16777216,null,null,1,null,Lu)),o["\u0275did"](10,16384,null,0,yt.NgIf,[o.ViewContainerRef,o.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(n,e){var l=e.component;n(e,6,0,!l.town.population.available),n(e,8,0,l.unitData),n(e,10,0,l.hasRecruitmentQueue)},null)}var qu=o["\u0275ccf"]("recruit",Du,function(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,1,"recruit",[],null,null,null,$u,Fu)),o["\u0275did"](1,573440,null,0,Du,[O.n],null,null)],null,null)},{town:"town",worldData:"worldData"},{},[]),Vu=function(){function n(){this.unitList=[],this.attackType=q.CombatOutcome.attack,Wt.d.add(Zt.e)}return n.prototype.ngOnInit=function(){},n.prototype.ngOnDestroy=function(){},n}(),Uu=o["\u0275crt"]({encapsulation:2,styles:[],data:{}});function zu(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,5,"div",[["class","col d-flex flex-column align-items-center"]],null,null,null,null,null)),(n()(),o["\u0275eld"](1,0,null,null,0,"div",[["class","unit-icon"]],[[1,"data-unit",0]],null,null,null,null)),(n()(),o["\u0275eld"](2,0,null,null,1,"div",[],null,null,null,null,null)),(n()(),o["\u0275ted"](3,null,["",""])),(n()(),o["\u0275eld"](4,0,null,null,1,"div",[["class","text-danger"]],null,null,null,null,null)),(n()(),o["\u0275ted"](5,null,["",""]))],null,function(n,e){var l=e.component;n(e,1,0,e.context.$implicit.name),n(e,3,0,l.report.target.units[e.context.$implicit.name]||0),n(e,5,0,l.report.target.losses[e.context.$implicit.name]||0)})}function Hu(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,5,"div",[["class","col d-flex flex-column align-items-center"]],null,null,null,null,null)),(n()(),o["\u0275eld"](1,0,null,null,0,"div",[["class","unit-icon"]],[[1,"data-unit",0]],null,null,null,null)),(n()(),o["\u0275eld"](2,0,null,null,1,"div",[],null,null,null,null,null)),(n()(),o["\u0275ted"](3,null,["",""])),(n()(),o["\u0275eld"](4,0,null,null,1,"div",[["class","text-danger"]],null,null,null,null,null)),(n()(),o["\u0275ted"](5,null,["",""]))],null,function(n,e){var l=e.component;n(e,1,0,e.context.$implicit.name),n(e,3,0,l.report.origin.units[e.context.$implicit.name]||0),n(e,5,0,l.report.origin.losses[e.context.$implicit.name]||0)})}function Bu(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,9,"div",[["class","mr-3"]],null,null,null,null,null)),(n()(),o["\u0275ted"](-1,null,[" Loyalty decreased by "])),(n()(),o["\u0275eld"](2,0,null,null,1,"strong",[],null,null,null,null,null)),(n()(),o["\u0275ted"](3,null,["",""])),(n()(),o["\u0275ted"](-1,null,[" from "])),(n()(),o["\u0275eld"](5,0,null,null,1,"strong",[],null,null,null,null,null)),(n()(),o["\u0275ted"](6,null,["",""])),(n()(),o["\u0275ted"](-1,null,[" to "])),(n()(),o["\u0275eld"](8,0,null,null,1,"strong",[],null,null,null,null,null)),(n()(),o["\u0275ted"](9,null,["",""]))],null,function(n,e){var l=e.component;n(e,3,0,-1*(l.report.loyaltyChange[1]-l.report.loyaltyChange[0])),n(e,6,0,l.report.loyaltyChange[0]),n(e,9,0,l.report.loyaltyChange[1])})}function Wu(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,19,"section",[["class","d-flex justify-content-end"]],null,null,null,null,null)),(n()(),o["\u0275and"](16777216,null,null,1,null,Bu)),o["\u0275did"](2,16384,null,0,yt.NgIf,[o.ViewContainerRef,o.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),o["\u0275eld"](3,0,null,null,1,"div",[],null,null,null,null,null)),(n()(),o["\u0275ted"](-1,null,["Haul:"])),(n()(),o["\u0275eld"](5,0,null,null,12,"div",[["class","d-flex"]],null,null,null,null,null)),(n()(),o["\u0275eld"](6,0,null,null,3,"div",[["class","resource"]],null,null,null,null,null)),(n()(),o["\u0275eld"](7,0,null,null,0,"div",[["class","resource-icon wood"]],null,null,null,null,null)),(n()(),o["\u0275ted"](8,null,[" "," "])),o["\u0275ppd"](9,2),(n()(),o["\u0275eld"](10,0,null,null,3,"div",[["class","resource"]],null,null,null,null,null)),(n()(),o["\u0275eld"](11,0,null,null,0,"div",[["class","resource-icon clay"]],null,null,null,null,null)),(n()(),o["\u0275ted"](12,null,[" "," "])),o["\u0275ppd"](13,2),(n()(),o["\u0275eld"](14,0,null,null,3,"div",[["class","resource"]],null,null,null,null,null)),(n()(),o["\u0275eld"](15,0,null,null,0,"div",[["class","resource-icon iron"]],null,null,null,null,null)),(n()(),o["\u0275ted"](16,null,[" "," "])),o["\u0275ppd"](17,2),(n()(),o["\u0275eld"](18,0,null,null,1,"div",[],null,null,null,null,null)),(n()(),o["\u0275ted"](19,null,["/",""]))],function(n,e){var l=e.component;n(e,2,0,l.report.loyaltyChange[0]!==l.report.loyaltyChange[1])},function(n,e){var l=e.component;n(e,8,0,o["\u0275unv"](e,8,0,n(e,9,0,o["\u0275nov"](e.parent,1),l.report.haul.haul.wood,"1.0-0"))),n(e,12,0,o["\u0275unv"](e,12,0,n(e,13,0,o["\u0275nov"](e.parent,1),l.report.haul.haul.clay,"1.0-0"))),n(e,16,0,o["\u0275unv"](e,16,0,n(e,17,0,o["\u0275nov"](e.parent,1),l.report.haul.haul.iron,"1.0-0"))),n(e,19,0,l.report.haul.maxHaul)})}function Zu(n){return o["\u0275vid"](0,[o["\u0275pid"](0,yt.DatePipe,[o.LOCALE_ID]),o["\u0275pid"](0,yt.DecimalPipe,[o.LOCALE_ID]),(n()(),o["\u0275eld"](2,0,null,null,46,"div",[["class","row"]],null,null,null,null,null)),(n()(),o["\u0275eld"](3,0,null,null,15,"div",[["class","col-12 d-flex"]],null,null,null,null,null)),(n()(),o["\u0275eld"](4,0,null,null,11,"div",[],null,null,null,null,null)),(n()(),o["\u0275ted"](5,null,[" "," "])),o["\u0275pid"](0,yt.JsonPipe,[]),(n()(),o["\u0275eld"](7,0,null,null,3,"span",[["class","badge"]],null,null,null,null,null)),o["\u0275did"](8,278528,null,0,yt.NgClass,[o.IterableDiffers,o.KeyValueDiffers,o.ElementRef,o.Renderer2],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),o["\u0275pod"](9,{"badge-danger":0,"badge-success":1}),(n()(),o["\u0275ted"](10,null,["",""])),(n()(),o["\u0275eld"](11,0,null,null,1,"span",[],null,null,null,null,null)),(n()(),o["\u0275ted"](12,null,[""," (",") attacks "," (",")"])),(n()(),o["\u0275eld"](13,0,null,null,2,"span",[["class","text-muted"]],null,null,null,null,null)),(n()(),o["\u0275ted"](14,null,["",""])),o["\u0275ppd"](15,2),(n()(),o["\u0275eld"](16,0,null,null,2,"fa-icon",[["class","ml-auto ng-fa-icon"]],[[1,"aria-expanded",0],[1,"aria-controls",0],[8,"innerHTML",1]],[[null,"click"]],function(n,e,l){var t=!0,i=n.component;return"click"===e&&(t=0!=(i.isCollapsed=!i.isCollapsed)&&t),t},Lt.b,Lt.a)),o["\u0275did"](17,573440,null,0,$t.a,[qt.c],{iconProp:[0,"iconProp"]},null),o["\u0275pad"](18,2),(n()(),o["\u0275eld"](19,0,null,null,29,"div",[["class","col-12 py-2 px-1"]],[[8,"id",0],[2,"collapse",null],[2,"show",null]],null,null,null,null)),o["\u0275did"](20,16384,null,0,Ru.a,[],{collapsed:[0,"collapsed"]},null),(n()(),o["\u0275eld"](21,0,null,null,12,"section",[],null,null,null,null,null)),(n()(),o["\u0275eld"](22,0,null,null,1,"header",[["class","font-weight-bold"]],null,null,null,null,null)),(n()(),o["\u0275ted"](23,null,["Defender - "," (",")"])),(n()(),o["\u0275eld"](24,0,null,null,9,"div",[["class","row"]],null,null,null,null,null)),(n()(),o["\u0275eld"](25,0,null,null,6,"div",[["class","col"]],null,null,null,null,null)),(n()(),o["\u0275eld"](26,0,null,null,1,"div",[],null,null,null,null,null)),(n()(),o["\u0275ted"](-1,null,["Units"])),(n()(),o["\u0275eld"](28,0,null,null,1,"div",[],null,null,null,null,null)),(n()(),o["\u0275ted"](-1,null,["Amount"])),(n()(),o["\u0275eld"](30,0,null,null,1,"div",[],null,null,null,null,null)),(n()(),o["\u0275ted"](-1,null,["Losses"])),(n()(),o["\u0275and"](16777216,null,null,1,null,zu)),o["\u0275did"](33,802816,null,0,yt.NgForOf,[o.ViewContainerRef,o.TemplateRef,o.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(n()(),o["\u0275eld"](34,0,null,null,12,"section",[],null,null,null,null,null)),(n()(),o["\u0275eld"](35,0,null,null,1,"header",[["class","font-weight-bold"]],null,null,null,null,null)),(n()(),o["\u0275ted"](36,null,["Attacker - "," (",")"])),(n()(),o["\u0275eld"](37,0,null,null,9,"div",[["class","row"]],null,null,null,null,null)),(n()(),o["\u0275eld"](38,0,null,null,6,"div",[["class","col"]],null,null,null,null,null)),(n()(),o["\u0275eld"](39,0,null,null,1,"div",[],null,null,null,null,null)),(n()(),o["\u0275ted"](-1,null,["Units"])),(n()(),o["\u0275eld"](41,0,null,null,1,"div",[],null,null,null,null,null)),(n()(),o["\u0275ted"](-1,null,["Amount"])),(n()(),o["\u0275eld"](43,0,null,null,1,"div",[],null,null,null,null,null)),(n()(),o["\u0275ted"](-1,null,["Losses"])),(n()(),o["\u0275and"](16777216,null,null,1,null,Hu)),o["\u0275did"](46,802816,null,0,yt.NgForOf,[o.ViewContainerRef,o.TemplateRef,o.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(n()(),o["\u0275and"](16777216,null,null,1,null,Wu)),o["\u0275did"](48,16384,null,0,yt.NgIf,[o.ViewContainerRef,o.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(n,e){var l=e.component;n(e,8,0,"badge",n(e,9,0,"lose"===l.report.result,"win"===l.report.result)),n(e,17,0,n(e,18,0,"fas","chevron-down")),n(e,20,0,!l.isCollapsed),n(e,33,0,l.unitList),n(e,46,0,l.unitList),n(e,48,0,l.report.outcome===l.attackType)},function(n,e){var l=e.component;n(e,5,0,o["\u0275unv"](e,5,0,o["\u0275nov"](e,6).transform(l.report))),n(e,10,0,l.report.result),n(e,12,0,l.report.originTown.name,l.report.originTown.location,l.report.targetTown.name,l.report.targetTown.location),n(e,14,0,o["\u0275unv"](e,14,0,n(e,15,0,o["\u0275nov"](e,0),l.report.createdAt,"yy-MM-dd HH:mm:ss"))),n(e,16,0,!l.isCollapsed,"collapse-"+l.report.id,o["\u0275nov"](e,17).renderedIconHTML),n(e,19,0,"collapse-"+l.report.id,!0,!o["\u0275nov"](e,20).collapsed),n(e,23,0,l.report.targetTown.name,l.report.targetTown.location),n(e,36,0,l.report.originTown.name,l.report.originTown.location)})}var Gu=Object.assign||function(n){for(var e,l=1,t=arguments.length;l<t;l++)for(var i in e=arguments[l])Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n},Yu=function(){function n(){this.reportsMapped=[]}return n.prototype.ngOnChanges=function(){this.reportsMapped=this.mapReports(this.reports.originReports,q.CombatOutcome.attack).concat(this.mapReports(this.reports.targetReports,q.CombatOutcome.defense)).sort(function(n,e){return+e.createdAt-+n.createdAt})},n.prototype.mapReports=function(n,e){return n.map(function(n){return Gu({},n,{type:e,result:n.outcome===e?"win":"lose"})})},n.prototype.ngOnDestroy=function(){},n}(),Xu=o["\u0275crt"]({encapsulation:0,styles:[[""]],data:{}});function Qu(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,1,"report-item",[],null,null,null,Zu,Uu)),o["\u0275did"](1,245760,null,0,Vu,[],{report:[0,"report"],unitList:[1,"unitList"]},null)],function(n,e){n(e,1,0,e.context.$implicit,e.component.worldData.units)},null)}function Ku(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,1,"div",[],null,null,null,null,null)),(n()(),o["\u0275ted"](-1,null,["There are no reports."]))],null,null)}function Ju(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,6,"div",[["class","container-fluid pb-5"]],null,null,null,null,null)),(n()(),o["\u0275eld"](1,0,null,null,1,"h2",[],null,null,null,null,null)),(n()(),o["\u0275ted"](-1,null,["Reports"])),(n()(),o["\u0275and"](16777216,null,null,1,null,Qu)),o["\u0275did"](4,802816,null,0,yt.NgForOf,[o.ViewContainerRef,o.TemplateRef,o.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(n()(),o["\u0275and"](16777216,null,null,1,null,Ku)),o["\u0275did"](6,16384,null,0,yt.NgIf,[o.ViewContainerRef,o.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(n,e){var l=e.component;n(e,4,0,l.reportsMapped),n(e,6,0,!l.reportsMapped.length)},null)}var ns=function(){return function(){this.unitList=[],this.cancelSupport=new o.EventEmitter}}(),es=o["\u0275crt"]({encapsulation:0,styles:[[".support-units[_ngcontent-%COMP%]   .empty[_ngcontent-%COMP%]{opacity:.6}"]],data:{}});function ls(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,6,"div",[["class","col-12 pb-2 d-flex align-items-center justify-content-between"]],null,null,null,null,null)),(n()(),o["\u0275eld"](1,0,null,null,3,"div",[],null,null,null,null,null)),(n()(),o["\u0275ted"](-1,null,["Your support for "])),(n()(),o["\u0275eld"](3,0,null,null,1,"strong",[],null,null,null,null,null)),(n()(),o["\u0275ted"](4,null,[""," (",")"])),(n()(),o["\u0275eld"](5,0,null,null,1,"button",[["class","btn btn-sm btn-info"]],null,[[null,"click"]],function(n,e,l){var t=!0,i=n.component;return"click"===e&&(t=!1!==i.cancelSupport.emit(i.support.id)&&t),t},null,null)),(n()(),o["\u0275ted"](-1,null,["Recall"]))],null,function(n,e){var l=e.component;n(e,4,0,l.support.targetTown.name,l.support.targetTown.location)})}function ts(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,6,"div",[["class","col-12 pb-2 d-flex align-items-center justify-content-between"]],null,null,null,null,null)),(n()(),o["\u0275eld"](1,0,null,null,3,"div",[],null,null,null,null,null)),(n()(),o["\u0275ted"](-1,null,["Support from "])),(n()(),o["\u0275eld"](3,0,null,null,1,"strong",[],null,null,null,null,null)),(n()(),o["\u0275ted"](4,null,[""," (",")"])),(n()(),o["\u0275eld"](5,0,null,null,1,"button",[["class","btn btn-sm btn-info"]],null,[[null,"click"]],function(n,e,l){var t=!0,i=n.component;return"click"===e&&(t=!1!==i.cancelSupport.emit(i.support.id)&&t),t},null,null)),(n()(),o["\u0275ted"](-1,null,["Send home"]))],null,function(n,e){var l=e.component;n(e,4,0,l.support.originTown.name,l.support.originTown.location)})}function is(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,5,"div",[["class","col d-flex flex-column align-items-center"]],null,null,null,null,null)),o["\u0275did"](1,278528,null,0,yt.NgClass,[o.IterableDiffers,o.KeyValueDiffers,o.ElementRef,o.Renderer2],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),o["\u0275pod"](2,{empty:0}),(n()(),o["\u0275eld"](3,0,null,null,0,"div",[["class","unit-icon"]],[[1,"data-unit",0]],null,null,null,null)),(n()(),o["\u0275eld"](4,0,null,null,1,"div",[],null,null,null,null,null)),(n()(),o["\u0275ted"](5,null,["",""]))],function(n,e){n(e,1,0,"col d-flex flex-column align-items-center",n(e,2,0,!e.component.support.units[e.context.$implicit.name]))},function(n,e){var l=e.component;n(e,3,0,e.context.$implicit.name),n(e,5,0,l.support.units[e.context.$implicit.name]||0)})}function os(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,6,"div",[["class","row support-units mb-4"]],null,null,null,null,null)),(n()(),o["\u0275and"](16777216,null,null,1,null,ls)),o["\u0275did"](2,16384,null,0,yt.NgIf,[o.ViewContainerRef,o.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),o["\u0275and"](16777216,null,null,1,null,ts)),o["\u0275did"](4,16384,null,0,yt.NgIf,[o.ViewContainerRef,o.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),o["\u0275and"](16777216,null,null,1,null,is)),o["\u0275did"](6,802816,null,0,yt.NgForOf,[o.ViewContainerRef,o.TemplateRef,o.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],function(n,e){var l=e.component;n(e,2,0,l.isOrigin),n(e,4,0,!l.isOrigin),n(e,6,0,l.unitList)},null)}var as=function(){function n(n){this.store=n}return n.prototype.recallSupport=function(n){this.store.dispatch(new function(n){this.payload=n,this.type="[Town] Recall Support"}(n))},n.prototype.sendBackSupport=function(n){this.store.dispatch(new function(n){this.payload=n,this.type="[Town] Send Back Support"}(n))},n}(),rs=o["\u0275crt"]({encapsulation:0,styles:[[""]],data:{}});function us(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,1,"support-item",[],null,[[null,"cancelSupport"]],function(n,e,l){var t=!0;return"cancelSupport"===e&&(t=!1!==n.component.sendBackSupport(l)&&t),t},os,es)),o["\u0275did"](1,49152,null,0,ns,[],{support:[0,"support"],isOrigin:[1,"isOrigin"],unitList:[2,"unitList"]},{cancelSupport:"cancelSupport"})],function(n,e){n(e,1,0,e.context.$implicit,!1,e.component.worldData.units)},null)}function ss(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,1,"div",[],null,null,null,null,null)),(n()(),o["\u0275ted"](-1,null,["No support stationed"]))],null,null)}function cs(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,1,"support-item",[],null,[[null,"cancelSupport"]],function(n,e,l){var t=!0;return"cancelSupport"===e&&(t=!1!==n.component.recallSupport(l)&&t),t},os,es)),o["\u0275did"](1,49152,null,0,ns,[],{support:[0,"support"],isOrigin:[1,"isOrigin"],unitList:[2,"unitList"]},{cancelSupport:"cancelSupport"})],function(n,e){n(e,1,0,e.context.$implicit,!0,e.component.worldData.units)},null)}function ds(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,1,"div",[],null,null,null,null,null)),(n()(),o["\u0275ted"](-1,null,["No supporting troops"]))],null,null)}function ps(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,16,"div",[["class","container-fluid pb-4"]],null,null,null,null,null)),(n()(),o["\u0275eld"](1,0,null,null,1,"h2",[],null,null,null,null,null)),(n()(),o["\u0275ted"](-1,null,["Support"])),(n()(),o["\u0275eld"](3,0,null,null,6,"div",[],null,null,null,null,null)),(n()(),o["\u0275eld"](4,0,null,null,1,"h3",[],null,null,null,null,null)),(n()(),o["\u0275ted"](-1,null,["Stationed support"])),(n()(),o["\u0275and"](16777216,null,null,1,null,us)),o["\u0275did"](7,802816,null,0,yt.NgForOf,[o.ViewContainerRef,o.TemplateRef,o.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(n()(),o["\u0275and"](16777216,null,null,1,null,ss)),o["\u0275did"](9,16384,null,0,yt.NgIf,[o.ViewContainerRef,o.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),o["\u0275eld"](10,0,null,null,6,"div",[],null,null,null,null,null)),(n()(),o["\u0275eld"](11,0,null,null,1,"h3",[],null,null,null,null,null)),(n()(),o["\u0275ted"](-1,null,["Your sent support"])),(n()(),o["\u0275and"](16777216,null,null,1,null,cs)),o["\u0275did"](14,802816,null,0,yt.NgForOf,[o.ViewContainerRef,o.TemplateRef,o.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(n()(),o["\u0275and"](16777216,null,null,1,null,ds)),o["\u0275did"](16,16384,null,0,yt.NgIf,[o.ViewContainerRef,o.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(n,e){var l=e.component;n(e,7,0,l.town.targetSupport),n(e,9,0,!(null!=l.town.targetSupport&&l.town.targetSupport.length)),n(e,14,0,l.town.originSupport),n(e,16,0,!(null!=l.town.originSupport&&l.town.originSupport.length))},null)}var fs=function(){function n(){this.changes=new ct.a,this.itemsPerPageLabel="Items per page:",this.nextPageLabel="Next page",this.previousPageLabel="Previous page",this.firstPageLabel="First page",this.lastPageLabel="Last page",this.getRangeLabel=function(n,e,l){if(0==l||0==e)return"0 of "+l;var t=n*e;return t+1+" - "+(t<(l=Math.max(l,0))?Math.min(t+e,l):t+e)+" of "+l}}return n.ngInjectableDef=Object(o.defineInjectable)({factory:function(){return new n},token:n,providedIn:"root"}),n}();function ms(n){return n||new fs}var hs=function(n){function e(e,l){var t=n.call(this)||this;return t._intl=e,t._changeDetectorRef=l,t._pageIndex=0,t._length=0,t._pageSizeOptions=[],t._hidePageSize=!1,t._showFirstLastButtons=!1,t.page=new o.EventEmitter,t._intlChanges=e.changes.subscribe(function(){return t._changeDetectorRef.markForCheck()}),t}return Object(r.__extends)(e,n),Object.defineProperty(e.prototype,"pageIndex",{get:function(){return this._pageIndex},set:function(n){this._pageIndex=Math.max(Object(it.e)(n),0),this._changeDetectorRef.markForCheck()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"length",{get:function(){return this._length},set:function(n){this._length=Object(it.e)(n),this._changeDetectorRef.markForCheck()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pageSize",{get:function(){return this._pageSize},set:function(n){this._pageSize=Math.max(Object(it.e)(n),0),this._updateDisplayedPageSizeOptions()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pageSizeOptions",{get:function(){return this._pageSizeOptions},set:function(n){this._pageSizeOptions=(n||[]).map(function(n){return Object(it.e)(n)}),this._updateDisplayedPageSizeOptions()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hidePageSize",{get:function(){return this._hidePageSize},set:function(n){this._hidePageSize=Object(it.c)(n)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showFirstLastButtons",{get:function(){return this._showFirstLastButtons},set:function(n){this._showFirstLastButtons=Object(it.c)(n)},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){this._initialized=!0,this._updateDisplayedPageSizeOptions(),this._markInitialized()},e.prototype.ngOnDestroy=function(){this._intlChanges.unsubscribe()},e.prototype.nextPage=function(){if(this.hasNextPage()){var n=this.pageIndex;this.pageIndex++,this._emitPageEvent(n)}},e.prototype.previousPage=function(){if(this.hasPreviousPage()){var n=this.pageIndex;this.pageIndex--,this._emitPageEvent(n)}},e.prototype.firstPage=function(){if(this.hasPreviousPage()){var n=this.pageIndex;this.pageIndex=0,this._emitPageEvent(n)}},e.prototype.lastPage=function(){if(this.hasNextPage()){var n=this.pageIndex;this.pageIndex=this.getNumberOfPages(),this._emitPageEvent(n)}},e.prototype.hasPreviousPage=function(){return this.pageIndex>=1&&0!=this.pageSize},e.prototype.hasNextPage=function(){var n=this.getNumberOfPages();return this.pageIndex<n&&0!=this.pageSize},e.prototype.getNumberOfPages=function(){return Math.ceil(this.length/this.pageSize)-1},e.prototype._changePageSize=function(n){var e=this.pageIndex;this.pageIndex=Math.floor(this.pageIndex*this.pageSize/n)||0,this.pageSize=n,this._emitPageEvent(e)},e.prototype._updateDisplayedPageSizeOptions=function(){this._initialized&&(this.pageSize||(this._pageSize=0!=this.pageSizeOptions.length?this.pageSizeOptions[0]:50),this._displayedPageSizeOptions=this.pageSizeOptions.slice(),-1===this._displayedPageSizeOptions.indexOf(this.pageSize)&&this._displayedPageSizeOptions.push(this.pageSize),this._displayedPageSizeOptions.sort(function(n,e){return n-e}),this._changeDetectorRef.markForCheck())},e.prototype._emitPageEvent=function(n){this.page.emit({previousPageIndex:n,pageIndex:this.pageIndex,pageSize:this.pageSize,length:this.length})},e}(Object(St.H)(function(){})),gs=function(){},vs=o["\u0275crt"]({encapsulation:2,styles:[".mat-paginator{display:block}.mat-paginator-container{display:flex;align-items:center;justify-content:flex-end;min-height:56px;padding:0 8px;flex-wrap:wrap-reverse}.mat-paginator-page-size{display:flex;align-items:baseline;margin-right:8px}[dir=rtl] .mat-paginator-page-size{margin-right:0;margin-left:8px}.mat-paginator-page-size-label{margin:0 4px}.mat-paginator-page-size-select{margin:6px 4px 0 4px;width:56px}.mat-paginator-page-size-select.mat-form-field-appearance-outline{width:64px}.mat-paginator-page-size-select.mat-form-field-appearance-fill{width:64px}.mat-paginator-range-label{margin:0 32px 0 24px}.mat-paginator-range-actions{display:flex;align-items:center;min-height:48px}.mat-paginator-icon{width:28px;fill:currentColor}[dir=rtl] .mat-paginator-icon{transform:rotate(180deg)}"],data:{}});function bs(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,2,"mat-option",[["class","mat-option"],["role","option"]],[[1,"tabindex",0],[2,"mat-selected",null],[2,"mat-option-multiple",null],[2,"mat-active",null],[8,"id",0],[1,"aria-selected",0],[1,"aria-disabled",0],[2,"mat-option-disabled",null]],[[null,"click"],[null,"keydown"]],function(n,e,l){var t=!0;return"click"===e&&(t=!1!==o["\u0275nov"](n,1)._selectViaInteraction()&&t),"keydown"===e&&(t=!1!==o["\u0275nov"](n,1)._handleKeydown(l)&&t),t},wa.c,wa.a)),o["\u0275did"](1,8568832,[[8,4]],0,St.s,[o.ElementRef,o.ChangeDetectorRef,[2,St.l],[2,St.r]],{value:[0,"value"]},null),(n()(),o["\u0275ted"](2,0,["",""]))],function(n,e){n(e,1,0,e.context.$implicit)},function(n,e){n(e,0,0,o["\u0275nov"](e,1)._getTabIndex(),o["\u0275nov"](e,1).selected,o["\u0275nov"](e,1).multiple,o["\u0275nov"](e,1).active,o["\u0275nov"](e,1).id,o["\u0275nov"](e,1).selected.toString(),o["\u0275nov"](e,1).disabled.toString(),o["\u0275nov"](e,1).disabled),n(e,2,0,e.context.$implicit)})}function ys(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,17,"mat-form-field",[["class","mat-paginator-page-size-select mat-form-field"]],[[2,"mat-form-field-appearance-standard",null],[2,"mat-form-field-appearance-fill",null],[2,"mat-form-field-appearance-outline",null],[2,"mat-form-field-appearance-legacy",null],[2,"mat-form-field-invalid",null],[2,"mat-form-field-can-float",null],[2,"mat-form-field-should-float",null],[2,"mat-form-field-hide-placeholder",null],[2,"mat-form-field-disabled",null],[2,"mat-form-field-autofilled",null],[2,"mat-focused",null],[2,"mat-accent",null],[2,"mat-warn",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null],[2,"_mat-animation-noopable",null]],null,null,vo.b,vo.a)),o["\u0275did"](1,7389184,null,7,bo.b,[o.ElementRef,o.ChangeDetectorRef,[2,St.j],[2,wt.b],[2,bo.a],Ct.a,o.NgZone,[2,Di.a]],null,null),o["\u0275qud"](335544320,1,{_control:0}),o["\u0275qud"](335544320,2,{_placeholderChild:0}),o["\u0275qud"](335544320,3,{_labelChild:0}),o["\u0275qud"](603979776,4,{_errorChildren:1}),o["\u0275qud"](603979776,5,{_hintChildren:1}),o["\u0275qud"](603979776,6,{_prefixChildren:1}),o["\u0275qud"](603979776,7,{_suffixChildren:1}),(n()(),o["\u0275eld"](9,0,null,1,8,"mat-select",[["class","mat-select"],["role","listbox"]],[[1,"id",0],[1,"tabindex",0],[1,"aria-label",0],[1,"aria-labelledby",0],[1,"aria-required",0],[1,"aria-disabled",0],[1,"aria-invalid",0],[1,"aria-owns",0],[1,"aria-multiselectable",0],[1,"aria-describedby",0],[1,"aria-activedescendant",0],[2,"mat-select-disabled",null],[2,"mat-select-invalid",null],[2,"mat-select-required",null]],[[null,"selectionChange"],[null,"keydown"],[null,"focus"],[null,"blur"]],function(n,e,l){var t=!0,i=n.component;return"keydown"===e&&(t=!1!==o["\u0275nov"](n,11)._handleKeydown(l)&&t),"focus"===e&&(t=!1!==o["\u0275nov"](n,11)._onFocus()&&t),"blur"===e&&(t=!1!==o["\u0275nov"](n,11)._onBlur()&&t),"selectionChange"===e&&(t=!1!==i._changePageSize(l.value)&&t),t},Ca.b,Ca.a)),o["\u0275prd"](6144,null,St.l,null,[Ra.c]),o["\u0275did"](11,2080768,null,3,Ra.c,[xt.e,o.ChangeDetectorRef,o.NgZone,St.d,o.ElementRef,[2,wt.b],[2,ti.p],[2,ti.h],[2,bo.b],[8,null],[8,null],Ra.a],{value:[0,"value"],ariaLabel:[1,"ariaLabel"]},{selectionChange:"selectionChange"}),o["\u0275qud"](603979776,8,{options:1}),o["\u0275qud"](603979776,9,{optionGroups:1}),o["\u0275qud"](335544320,10,{customTrigger:0}),o["\u0275prd"](2048,[[1,4]],bo.c,null,[Ra.c]),(n()(),o["\u0275and"](16777216,null,1,1,null,bs)),o["\u0275did"](17,802816,null,0,yt.NgForOf,[o.ViewContainerRef,o.TemplateRef,o.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],function(n,e){var l=e.component;n(e,11,0,l.pageSize,l._intl.itemsPerPageLabel),n(e,17,0,l._displayedPageSizeOptions)},function(n,e){n(e,0,1,["standard"==o["\u0275nov"](e,1).appearance,"fill"==o["\u0275nov"](e,1).appearance,"outline"==o["\u0275nov"](e,1).appearance,"legacy"==o["\u0275nov"](e,1).appearance,o["\u0275nov"](e,1)._control.errorState,o["\u0275nov"](e,1)._canLabelFloat,o["\u0275nov"](e,1)._shouldLabelFloat(),o["\u0275nov"](e,1)._hideControlPlaceholder(),o["\u0275nov"](e,1)._control.disabled,o["\u0275nov"](e,1)._control.autofilled,o["\u0275nov"](e,1)._control.focused,"accent"==o["\u0275nov"](e,1).color,"warn"==o["\u0275nov"](e,1).color,o["\u0275nov"](e,1)._shouldForward("untouched"),o["\u0275nov"](e,1)._shouldForward("touched"),o["\u0275nov"](e,1)._shouldForward("pristine"),o["\u0275nov"](e,1)._shouldForward("dirty"),o["\u0275nov"](e,1)._shouldForward("valid"),o["\u0275nov"](e,1)._shouldForward("invalid"),o["\u0275nov"](e,1)._shouldForward("pending"),!o["\u0275nov"](e,1)._animationsEnabled]),n(e,9,1,[o["\u0275nov"](e,11).id,o["\u0275nov"](e,11).tabIndex,o["\u0275nov"](e,11)._getAriaLabel(),o["\u0275nov"](e,11)._getAriaLabelledby(),o["\u0275nov"](e,11).required.toString(),o["\u0275nov"](e,11).disabled.toString(),o["\u0275nov"](e,11).errorState,o["\u0275nov"](e,11).panelOpen?o["\u0275nov"](e,11)._optionIds:null,o["\u0275nov"](e,11).multiple,o["\u0275nov"](e,11)._ariaDescribedby||null,o["\u0275nov"](e,11)._getAriaActiveDescendant(),o["\u0275nov"](e,11).disabled,o["\u0275nov"](e,11).errorState,o["\u0275nov"](e,11).required])})}function _s(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,1,"div",[],null,null,null,null,null)),(n()(),o["\u0275ted"](1,null,["",""]))],null,function(n,e){n(e,1,0,e.component.pageSize)})}function ws(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,6,"div",[["class","mat-paginator-page-size"]],null,null,null,null,null)),(n()(),o["\u0275eld"](1,0,null,null,1,"div",[["class","mat-paginator-page-size-label"]],null,null,null,null,null)),(n()(),o["\u0275ted"](2,null,["",""])),(n()(),o["\u0275and"](16777216,null,null,1,null,ys)),o["\u0275did"](4,16384,null,0,yt.NgIf,[o.ViewContainerRef,o.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),o["\u0275and"](16777216,null,null,1,null,_s)),o["\u0275did"](6,16384,null,0,yt.NgIf,[o.ViewContainerRef,o.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(n,e){var l=e.component;n(e,4,0,l._displayedPageSizeOptions.length>1),n(e,6,0,l._displayedPageSizeOptions.length<=1)},function(n,e){n(e,2,0,e.component._intl.itemsPerPageLabel)})}function Cs(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,16777216,null,null,4,"button",[["class","mat-paginator-navigation-first"],["mat-icon-button",""],["type","button"]],[[1,"aria-label",0],[8,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"],[null,"longpress"],[null,"keydown"],[null,"touchend"]],function(n,e,l){var t=!0,i=n.component;return"longpress"===e&&(t=!1!==o["\u0275nov"](n,2).show()&&t),"keydown"===e&&(t=!1!==o["\u0275nov"](n,2)._handleKeydown(l)&&t),"touchend"===e&&(t=!1!==o["\u0275nov"](n,2)._handleTouchend()&&t),"click"===e&&(t=!1!==i.firstPage()&&t),t},ho.b,ho.a)),o["\u0275did"](1,180224,null,0,go.b,[o.ElementRef,Ct.a,Rt.f,[2,Di.a]],{disabled:[0,"disabled"]},null),o["\u0275did"](2,147456,null,0,gt,[rt.c,o.ElementRef,xt.c,o.ViewContainerRef,o.NgZone,Ct.a,Rt.c,Rt.f,ft,[2,wt.b],[2,ht]],{position:[0,"position"],message:[1,"message"]},null),(n()(),o["\u0275eld"](3,0,null,0,1,":svg:svg",[["class","mat-paginator-icon"],["focusable","false"],["viewBox","0 0 24 24"]],null,null,null,null,null)),(n()(),o["\u0275eld"](4,0,null,null,0,":svg:path",[["d","M18.41 16.59L13.82 12l4.59-4.59L17 6l-6 6 6 6zM6 6h2v12H6z"]],null,null,null,null,null)),(n()(),o["\u0275and"](0,null,null,0))],function(n,e){var l=e.component;n(e,1,0,!l.hasPreviousPage()),n(e,2,0,"above",l._intl.firstPageLabel)},function(n,e){n(e,0,0,e.component._intl.firstPageLabel,o["\u0275nov"](e,1).disabled||null,"NoopAnimations"===o["\u0275nov"](e,1)._animationMode)})}function Rs(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,16777216,null,null,4,"button",[["class","mat-paginator-navigation-last"],["mat-icon-button",""],["type","button"]],[[1,"aria-label",0],[8,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"],[null,"longpress"],[null,"keydown"],[null,"touchend"]],function(n,e,l){var t=!0,i=n.component;return"longpress"===e&&(t=!1!==o["\u0275nov"](n,2).show()&&t),"keydown"===e&&(t=!1!==o["\u0275nov"](n,2)._handleKeydown(l)&&t),"touchend"===e&&(t=!1!==o["\u0275nov"](n,2)._handleTouchend()&&t),"click"===e&&(t=!1!==i.lastPage()&&t),t},ho.b,ho.a)),o["\u0275did"](1,180224,null,0,go.b,[o.ElementRef,Ct.a,Rt.f,[2,Di.a]],{disabled:[0,"disabled"]},null),o["\u0275did"](2,147456,null,0,gt,[rt.c,o.ElementRef,xt.c,o.ViewContainerRef,o.NgZone,Ct.a,Rt.c,Rt.f,ft,[2,wt.b],[2,ht]],{position:[0,"position"],message:[1,"message"]},null),(n()(),o["\u0275eld"](3,0,null,0,1,":svg:svg",[["class","mat-paginator-icon"],["focusable","false"],["viewBox","0 0 24 24"]],null,null,null,null,null)),(n()(),o["\u0275eld"](4,0,null,null,0,":svg:path",[["d","M5.59 7.41L10.18 12l-4.59 4.59L7 18l6-6-6-6zM16 6h2v12h-2z"]],null,null,null,null,null)),(n()(),o["\u0275and"](0,null,null,0))],function(n,e){var l=e.component;n(e,1,0,!l.hasNextPage()),n(e,2,0,"above",l._intl.lastPageLabel)},function(n,e){n(e,0,0,e.component._intl.lastPageLabel,o["\u0275nov"](e,1).disabled||null,"NoopAnimations"===o["\u0275nov"](e,1)._animationMode)})}function xs(n){return o["\u0275vid"](2,[(n()(),o["\u0275eld"](0,0,null,null,19,"div",[["class","mat-paginator-container"]],null,null,null,null,null)),(n()(),o["\u0275and"](16777216,null,null,1,null,ws)),o["\u0275did"](2,16384,null,0,yt.NgIf,[o.ViewContainerRef,o.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),o["\u0275eld"](3,0,null,null,16,"div",[["class","mat-paginator-range-actions"]],null,null,null,null,null)),(n()(),o["\u0275eld"](4,0,null,null,1,"div",[["class","mat-paginator-range-label"]],null,null,null,null,null)),(n()(),o["\u0275ted"](5,null,["",""])),(n()(),o["\u0275and"](16777216,null,null,1,null,Cs)),o["\u0275did"](7,16384,null,0,yt.NgIf,[o.ViewContainerRef,o.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),o["\u0275eld"](8,16777216,null,null,4,"button",[["class","mat-paginator-navigation-previous"],["mat-icon-button",""],["type","button"]],[[1,"aria-label",0],[8,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"],[null,"longpress"],[null,"keydown"],[null,"touchend"]],function(n,e,l){var t=!0,i=n.component;return"longpress"===e&&(t=!1!==o["\u0275nov"](n,10).show()&&t),"keydown"===e&&(t=!1!==o["\u0275nov"](n,10)._handleKeydown(l)&&t),"touchend"===e&&(t=!1!==o["\u0275nov"](n,10)._handleTouchend()&&t),"click"===e&&(t=!1!==i.previousPage()&&t),t},ho.b,ho.a)),o["\u0275did"](9,180224,null,0,go.b,[o.ElementRef,Ct.a,Rt.f,[2,Di.a]],{disabled:[0,"disabled"]},null),o["\u0275did"](10,147456,null,0,gt,[rt.c,o.ElementRef,xt.c,o.ViewContainerRef,o.NgZone,Ct.a,Rt.c,Rt.f,ft,[2,wt.b],[2,ht]],{position:[0,"position"],message:[1,"message"]},null),(n()(),o["\u0275eld"](11,0,null,0,1,":svg:svg",[["class","mat-paginator-icon"],["focusable","false"],["viewBox","0 0 24 24"]],null,null,null,null,null)),(n()(),o["\u0275eld"](12,0,null,null,0,":svg:path",[["d","M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"]],null,null,null,null,null)),(n()(),o["\u0275eld"](13,16777216,null,null,4,"button",[["class","mat-paginator-navigation-next"],["mat-icon-button",""],["type","button"]],[[1,"aria-label",0],[8,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"],[null,"longpress"],[null,"keydown"],[null,"touchend"]],function(n,e,l){var t=!0,i=n.component;return"longpress"===e&&(t=!1!==o["\u0275nov"](n,15).show()&&t),"keydown"===e&&(t=!1!==o["\u0275nov"](n,15)._handleKeydown(l)&&t),"touchend"===e&&(t=!1!==o["\u0275nov"](n,15)._handleTouchend()&&t),"click"===e&&(t=!1!==i.nextPage()&&t),t},ho.b,ho.a)),o["\u0275did"](14,180224,null,0,go.b,[o.ElementRef,Ct.a,Rt.f,[2,Di.a]],{disabled:[0,"disabled"]},null),o["\u0275did"](15,147456,null,0,gt,[rt.c,o.ElementRef,xt.c,o.ViewContainerRef,o.NgZone,Ct.a,Rt.c,Rt.f,ft,[2,wt.b],[2,ht]],{position:[0,"position"],message:[1,"message"]},null),(n()(),o["\u0275eld"](16,0,null,0,1,":svg:svg",[["class","mat-paginator-icon"],["focusable","false"],["viewBox","0 0 24 24"]],null,null,null,null,null)),(n()(),o["\u0275eld"](17,0,null,null,0,":svg:path",[["d","M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"]],null,null,null,null,null)),(n()(),o["\u0275and"](16777216,null,null,1,null,Rs)),o["\u0275did"](19,16384,null,0,yt.NgIf,[o.ViewContainerRef,o.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(n,e){var l=e.component;n(e,2,0,!l.hidePageSize),n(e,7,0,l.showFirstLastButtons),n(e,9,0,!l.hasPreviousPage()),n(e,10,0,"above",l._intl.previousPageLabel),n(e,14,0,!l.hasNextPage()),n(e,15,0,"above",l._intl.nextPageLabel),n(e,19,0,l.showFirstLastButtons)},function(n,e){var l=e.component;n(e,5,0,l._intl.getRangeLabel(l.pageIndex,l.pageSize,l.length)),n(e,8,0,l._intl.previousPageLabel,o["\u0275nov"](e,9).disabled||null,"NoopAnimations"===o["\u0275nov"](e,9)._animationMode),n(e,13,0,l._intl.nextPageLabel,o["\u0275nov"](e,14).disabled||null,"NoopAnimations"===o["\u0275nov"](e,14)._animationMode)})}var Ss=function(){function n(){this.displayedColumns=["rank","name","score"],this.dataSource=new Mr([])}return n.prototype.ngAfterViewInit=function(){this.initializePaginator()},n.prototype.ngOnChanges=function(){this.dataSource.data=this.positionRankings.rankings,this.initializePaginator()},n.prototype.initializePaginator=function(){var n=this;this.positionRankings&&!this.dataSource.paginator&&this.paginator&&setTimeout(function(){n.dataSource.paginator=n.paginator;var e=Math.floor(n.positionRankings.playerPosition/n.paginator.pageSize);n.dataSource.paginator.pageIndex=e})},n}(),ks=o["\u0275crt"]({encapsulation:0,styles:[[".personal-score[_ngcontent-%COMP%]{background-color:var(--indigo)}.personal-score[_ngcontent-%COMP%]   .mat-cell[_ngcontent-%COMP%]{color:var(--white)}"]],data:{}});function Is(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,2,"mat-header-cell",[["class","mat-header-cell"],["role","columnheader"]],null,null,null,null,null)),o["\u0275did"](1,16384,null,0,Or,[ir,o.ElementRef],null,null),(n()(),o["\u0275ted"](-1,null,["Rank"]))],null,null)}function Os(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,2,"mat-cell",[["class","mat-cell"],["role","gridcell"]],null,null,null,null,null)),o["\u0275did"](1,16384,null,0,Pr,[ir,o.ElementRef],null,null),(n()(),o["\u0275ted"](2,null,["#",""]))],null,function(n,e){n(e,2,0,e.context.index+1+o["\u0275nov"](e.parent,53).pageSize*o["\u0275nov"](e.parent,53).pageIndex)})}function Ps(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,2,"mat-header-cell",[["class","mat-header-cell"],["role","columnheader"]],null,null,null,null,null)),o["\u0275did"](1,16384,null,0,Or,[ir,o.ElementRef],null,null),(n()(),o["\u0275ted"](-1,null,["Name"]))],null,null)}function Ts(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,2,"mat-cell",[["class","mat-cell"],["role","gridcell"]],null,null,null,null,null)),o["\u0275did"](1,16384,null,0,Pr,[ir,o.ElementRef],null,null),(n()(),o["\u0275ted"](2,null,["",""]))],null,function(n,e){n(e,2,0,e.context.$implicit.name)})}function As(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,2,"mat-header-cell",[["class","mat-header-cell"],["role","columnheader"]],null,null,null,null,null)),o["\u0275did"](1,16384,null,0,Or,[ir,o.ElementRef],null,null),(n()(),o["\u0275ted"](-1,null,["Score"]))],null,null)}function Ds(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,2,"mat-cell",[["class","mat-cell"],["role","gridcell"]],null,null,null,null,null)),o["\u0275did"](1,16384,null,0,Pr,[ir,o.ElementRef],null,null),(n()(),o["\u0275ted"](2,null,["",""]))],null,function(n,e){n(e,2,0,e.context.$implicit.score)})}function Fs(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,2,"mat-header-row",[["class","mat-header-row"],["role","row"]],null,null,null,qr,$r)),o["\u0275prd"](6144,null,fr,null,[Dr]),o["\u0275did"](2,49152,null,0,Dr,[],null,null)],null,null)}function js(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,4,"mat-row",[["class","mat-row"],["role","row"]],null,null,null,Ur,Vr)),o["\u0275prd"](6144,null,mr,null,[Fr]),o["\u0275did"](2,49152,null,0,Fr,[],null,null),o["\u0275did"](3,278528,null,0,yt.NgClass,[o.IterableDiffers,o.KeyValueDiffers,o.ElementRef,o.Renderer2],{ngClass:[0,"ngClass"]},null),o["\u0275pod"](4,{"personal-score":0})],function(n,e){var l=e.component;n(e,3,0,n(e,4,0,e.context.index+o["\u0275nov"](e.parent,53).pageSize*o["\u0275nov"](e.parent,53).pageIndex===l.positionRankings.playerPosition))},null)}function Es(n){return o["\u0275vid"](0,[o["\u0275qud"](402653184,1,{paginator:0}),(n()(),o["\u0275eld"](1,0,null,null,53,"div",[["class","container-fluid pb-4"]],null,null,null,null,null)),(n()(),o["\u0275eld"](2,0,null,null,1,"h2",[],null,null,null,null,null)),(n()(),o["\u0275ted"](-1,null,["Player ranking"])),(n()(),o["\u0275eld"](4,0,null,null,47,"mat-table",[["class","mat-table"]],null,null,null,Lr,Nr)),o["\u0275did"](5,2342912,null,4,xr,[o.IterableDiffers,o.ChangeDetectorRef,o.ElementRef,[8,null],[2,wt.b]],{dataSource:[0,"dataSource"]},null),o["\u0275qud"](603979776,2,{_contentColumnDefs:1}),o["\u0275qud"](603979776,3,{_contentRowDefs:1}),o["\u0275qud"](603979776,4,{_contentHeaderRowDefs:1}),o["\u0275qud"](603979776,5,{_contentFooterRowDefs:1}),(n()(),o["\u0275eld"](10,0,null,null,11,null,null,null,null,null,null,null)),o["\u0275did"](11,16384,null,3,Ir,[],{name:[0,"name"]},null),o["\u0275qud"](335544320,6,{cell:0}),o["\u0275qud"](335544320,7,{headerCell:0}),o["\u0275qud"](335544320,8,{footerCell:0}),o["\u0275prd"](2048,[[2,4]],ir,null,[Ir]),(n()(),o["\u0275and"](0,null,null,2,null,Is)),o["\u0275did"](17,16384,null,0,kr,[o.TemplateRef],null,null),o["\u0275prd"](2048,[[7,4]],tr,null,[kr]),(n()(),o["\u0275and"](0,null,null,2,null,Os)),o["\u0275did"](20,16384,null,0,Sr,[o.TemplateRef],null,null),o["\u0275prd"](2048,[[6,4]],lr,null,[Sr]),(n()(),o["\u0275eld"](22,0,null,null,11,null,null,null,null,null,null,null)),o["\u0275did"](23,16384,null,3,Ir,[],{name:[0,"name"]},null),o["\u0275qud"](335544320,9,{cell:0}),o["\u0275qud"](335544320,10,{headerCell:0}),o["\u0275qud"](335544320,11,{footerCell:0}),o["\u0275prd"](2048,[[2,4]],ir,null,[Ir]),(n()(),o["\u0275and"](0,null,null,2,null,Ps)),o["\u0275did"](29,16384,null,0,kr,[o.TemplateRef],null,null),o["\u0275prd"](2048,[[10,4]],tr,null,[kr]),(n()(),o["\u0275and"](0,null,null,2,null,Ts)),o["\u0275did"](32,16384,null,0,Sr,[o.TemplateRef],null,null),o["\u0275prd"](2048,[[9,4]],lr,null,[Sr]),(n()(),o["\u0275eld"](34,0,null,null,11,null,null,null,null,null,null,null)),o["\u0275did"](35,16384,null,3,Ir,[],{name:[0,"name"]},null),o["\u0275qud"](335544320,12,{cell:0}),o["\u0275qud"](335544320,13,{headerCell:0}),o["\u0275qud"](335544320,14,{footerCell:0}),o["\u0275prd"](2048,[[2,4]],ir,null,[Ir]),(n()(),o["\u0275and"](0,null,null,2,null,As)),o["\u0275did"](41,16384,null,0,kr,[o.TemplateRef],null,null),o["\u0275prd"](2048,[[13,4]],tr,null,[kr]),(n()(),o["\u0275and"](0,null,null,2,null,Ds)),o["\u0275did"](44,16384,null,0,Sr,[o.TemplateRef],null,null),o["\u0275prd"](2048,[[12,4]],lr,null,[Sr]),(n()(),o["\u0275and"](0,null,null,2,null,Fs)),o["\u0275did"](47,540672,null,0,Tr,[o.TemplateRef,o.IterableDiffers],{columns:[0,"columns"]},null),o["\u0275prd"](2048,[[4,4]],sr,null,[Tr]),(n()(),o["\u0275and"](0,null,null,2,null,js)),o["\u0275did"](50,540672,null,0,Ar,[o.TemplateRef,o.IterableDiffers],{columns:[0,"columns"]},null),o["\u0275prd"](2048,[[3,4]],dr,null,[Ar]),(n()(),o["\u0275eld"](52,0,null,null,2,"mat-paginator",[["class","mat-paginator"]],null,null,null,xs,vs)),o["\u0275did"](53,245760,[[1,4],["paginator",4]],0,hs,[fs,o.ChangeDetectorRef],{pageSize:[0,"pageSize"],pageSizeOptions:[1,"pageSizeOptions"],showFirstLastButtons:[2,"showFirstLastButtons"]},null),o["\u0275pad"](54,5)],function(n,e){var l=e.component;n(e,5,0,l.dataSource),n(e,11,0,"rank"),n(e,23,0,"name"),n(e,35,0,"score"),n(e,47,0,l.displayedColumns),n(e,50,0,l.displayedColumns),n(e,53,0,20,n(e,54,0,5,10,20,50,100),!0)},null)}var Ms=function(){function n(n){this.dialog=n,this.player=null,this.currentPlayer=null,this.openAllianceProfile=new o.EventEmitter,this.displayedColumns=["location","name","score"],this.dataSource=new Mr([])}return Object.defineProperty(n.prototype,"playerScore",{get:function(){return this.player.towns.reduce(function(n,e){return n+e.score},0)},enumerable:!0,configurable:!0}),n.prototype.ngOnChanges=function(){this.dataSource.data=this.player?this.player.towns:[],this.dataSource.data.sort(function(n,e){return e.score-n.score||n.id-e.id}),this.editDialog&&(this.editDialog.componentInstance.data={avatarUrl:this.player.avatarUrl,description:this.player.description,type:"player"})},n.prototype.editProfile=function(){var n=this;this.editDialog=this.dialog.open(Hr,{width:"80vw",data:{description:this.player.description,avatarUrl:this.player.avatarUrl,type:"player"}}),this.editDialog.afterClosed().subscribe(function(e){n.editDialog=null})},n}(),Ns=o["\u0275crt"]({encapsulation:0,styles:[[""]],data:{}});function Ls(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,1,"div",[],null,null,null,null,null)),(n()(),o["\u0275ted"](-1,null,["Loading..."]))],null,null)}function $s(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,1,"button",[["class","btn btn-warning btn-sm"],["type","button"]],null,[[null,"click"]],function(n,e,l){var t=!0;return"click"===e&&(t=!1!==n.component.editProfile()&&t),t},null,null)),(n()(),o["\u0275ted"](-1,null,["Edit profile"]))],null,null)}function qs(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,1,"div",[["class","text-center"]],null,null,null,null,null)),(n()(),o["\u0275eld"](1,0,null,null,0,"img",[["class","img-fluid"]],[[8,"src",4]],null,null,null,null))],null,function(n,e){n(e,1,0,e.component.player.avatarUrl)})}function Vs(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,1,"a",[["href",""]],null,[[null,"click"]],function(n,e,l){var t=!0,i=n.component;return"click"===e&&(t=0!=!!i.openAllianceProfile.emit(i.player.alliance.id)&&t),t},null,null)),(n()(),o["\u0275ted"](1,null,["",""]))],null,function(n,e){n(e,1,0,e.component.player.alliance.name)})}function Us(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,1,"span",[],null,null,null,null,null)),(n()(),o["\u0275ted"](-1,null,["-"]))],null,null)}function zs(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,1,"p",[],null,null,null,null,null)),(n()(),o["\u0275ted"](1,null,["",""]))],null,function(n,e){n(e,1,0,e.component.player.description)})}function Hs(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,2,"mat-header-cell",[["class","mat-header-cell"],["role","columnheader"]],null,null,null,null,null)),o["\u0275did"](1,16384,null,0,Or,[ir,o.ElementRef],null,null),(n()(),o["\u0275ted"](-1,null,["Location"]))],null,null)}function Bs(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,2,"mat-cell",[["class","mat-cell"],["role","gridcell"]],null,null,null,null,null)),o["\u0275did"](1,16384,null,0,Pr,[ir,o.ElementRef],null,null),(n()(),o["\u0275ted"](2,null,["",""]))],null,function(n,e){n(e,2,0,e.context.$implicit.location)})}function Ws(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,2,"mat-header-cell",[["class","mat-header-cell"],["role","columnheader"]],null,null,null,null,null)),o["\u0275did"](1,16384,null,0,Or,[ir,o.ElementRef],null,null),(n()(),o["\u0275ted"](-1,null,["Name"]))],null,null)}function Zs(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,2,"mat-cell",[["class","mat-cell"],["role","gridcell"]],null,null,null,null,null)),o["\u0275did"](1,16384,null,0,Pr,[ir,o.ElementRef],null,null),(n()(),o["\u0275ted"](2,null,["",""]))],null,function(n,e){n(e,2,0,e.context.$implicit.name)})}function Gs(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,2,"mat-header-cell",[["class","mat-header-cell"],["role","columnheader"]],null,null,null,null,null)),o["\u0275did"](1,16384,null,0,Or,[ir,o.ElementRef],null,null),(n()(),o["\u0275ted"](-1,null,["Score"]))],null,null)}function Ys(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,2,"mat-cell",[["class","mat-cell"],["role","gridcell"]],null,null,null,null,null)),o["\u0275did"](1,16384,null,0,Pr,[ir,o.ElementRef],null,null),(n()(),o["\u0275ted"](2,null,["",""]))],null,function(n,e){n(e,2,0,e.context.$implicit.score)})}function Xs(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,2,"mat-header-row",[["class","mat-header-row"],["role","row"]],null,null,null,qr,$r)),o["\u0275prd"](6144,null,fr,null,[Dr]),o["\u0275did"](2,49152,null,0,Dr,[],null,null)],null,null)}function Qs(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,2,"mat-row",[["class","mat-row"],["role","row"]],null,null,null,Ur,Vr)),o["\u0275prd"](6144,null,mr,null,[Fr]),o["\u0275did"](2,49152,null,0,Fr,[],null,null)],null,null)}function Ks(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,84,"div",[],null,null,null,null,null)),(n()(),o["\u0275eld"](1,0,null,null,83,"div",[["class","row mt-3"]],null,null,null,null,null)),(n()(),o["\u0275eld"](2,0,null,null,30,"div",[["class","col-6"]],null,null,null,null,null)),(n()(),o["\u0275eld"](3,0,null,null,4,"div",[["class","d-flex justify-content-between align-items-center"]],null,null,null,null,null)),(n()(),o["\u0275eld"](4,0,null,null,1,"h2",[["class","m-0"]],null,null,null,null,null)),(n()(),o["\u0275ted"](5,null,["",""])),(n()(),o["\u0275and"](16777216,null,null,1,null,$s)),o["\u0275did"](7,16384,null,0,yt.NgIf,[o.ViewContainerRef,o.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),o["\u0275eld"](8,0,null,null,0,"hr",[],null,null,null,null,null)),(n()(),o["\u0275and"](16777216,null,null,1,null,qs)),o["\u0275did"](10,16384,null,0,yt.NgIf,[o.ViewContainerRef,o.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),o["\u0275eld"](11,0,null,null,18,"div",[["class","row mt-2"]],null,null,null,null,null)),(n()(),o["\u0275eld"](12,0,null,null,6,"div",[["class","col-6"]],null,null,null,null,null)),(n()(),o["\u0275eld"](13,0,null,null,1,"div",[],null,null,null,null,null)),(n()(),o["\u0275ted"](-1,null,["Score"])),(n()(),o["\u0275eld"](15,0,null,null,1,"div",[],null,null,null,null,null)),(n()(),o["\u0275ted"](-1,null,["Alliance"])),(n()(),o["\u0275eld"](17,0,null,null,1,"div",[],null,null,null,null,null)),(n()(),o["\u0275ted"](-1,null,["Joined"])),(n()(),o["\u0275eld"](19,0,null,null,10,"div",[["class","col-6 text-right"]],null,null,null,null,null)),(n()(),o["\u0275eld"](20,0,null,null,1,"div",[],null,null,null,null,null)),(n()(),o["\u0275ted"](21,null,["",""])),(n()(),o["\u0275eld"](22,0,null,null,4,"div",[],null,null,null,null,null)),(n()(),o["\u0275and"](16777216,null,null,1,null,Vs)),o["\u0275did"](24,16384,null,0,yt.NgIf,[o.ViewContainerRef,o.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),o["\u0275and"](16777216,null,null,1,null,Us)),o["\u0275did"](26,16384,null,0,yt.NgIf,[o.ViewContainerRef,o.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),o["\u0275eld"](27,0,null,null,2,"div",[],null,null,null,null,null)),(n()(),o["\u0275ted"](28,null,["",""])),o["\u0275ppd"](29,2),(n()(),o["\u0275eld"](30,0,null,null,0,"hr",[],null,null,null,null,null)),(n()(),o["\u0275and"](16777216,null,null,1,null,zs)),o["\u0275did"](32,16384,null,0,yt.NgIf,[o.ViewContainerRef,o.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),o["\u0275eld"](33,0,null,null,51,"div",[["class","col-6"]],null,null,null,null,null)),(n()(),o["\u0275eld"](34,0,null,null,1,"h2",[["class","m-0"]],null,null,null,null,null)),(n()(),o["\u0275ted"](-1,null,["Towns"])),(n()(),o["\u0275eld"](36,0,null,null,0,"hr",[],null,null,null,null,null)),(n()(),o["\u0275eld"](37,0,null,null,47,"mat-table",[["class","mat-table"]],null,null,null,Lr,Nr)),o["\u0275did"](38,2342912,null,4,xr,[o.IterableDiffers,o.ChangeDetectorRef,o.ElementRef,[8,null],[2,wt.b]],{dataSource:[0,"dataSource"]},null),o["\u0275qud"](603979776,1,{_contentColumnDefs:1}),o["\u0275qud"](603979776,2,{_contentRowDefs:1}),o["\u0275qud"](603979776,3,{_contentHeaderRowDefs:1}),o["\u0275qud"](603979776,4,{_contentFooterRowDefs:1}),(n()(),o["\u0275eld"](43,0,null,null,11,null,null,null,null,null,null,null)),o["\u0275did"](44,16384,null,3,Ir,[],{name:[0,"name"]},null),o["\u0275qud"](335544320,5,{cell:0}),o["\u0275qud"](335544320,6,{headerCell:0}),o["\u0275qud"](335544320,7,{footerCell:0}),o["\u0275prd"](2048,[[1,4]],ir,null,[Ir]),(n()(),o["\u0275and"](0,null,null,2,null,Hs)),o["\u0275did"](50,16384,null,0,kr,[o.TemplateRef],null,null),o["\u0275prd"](2048,[[6,4]],tr,null,[kr]),(n()(),o["\u0275and"](0,null,null,2,null,Bs)),o["\u0275did"](53,16384,null,0,Sr,[o.TemplateRef],null,null),o["\u0275prd"](2048,[[5,4]],lr,null,[Sr]),(n()(),o["\u0275eld"](55,0,null,null,11,null,null,null,null,null,null,null)),o["\u0275did"](56,16384,null,3,Ir,[],{name:[0,"name"]},null),o["\u0275qud"](335544320,8,{cell:0}),o["\u0275qud"](335544320,9,{headerCell:0}),o["\u0275qud"](335544320,10,{footerCell:0}),o["\u0275prd"](2048,[[1,4]],ir,null,[Ir]),(n()(),o["\u0275and"](0,null,null,2,null,Ws)),o["\u0275did"](62,16384,null,0,kr,[o.TemplateRef],null,null),o["\u0275prd"](2048,[[9,4]],tr,null,[kr]),(n()(),o["\u0275and"](0,null,null,2,null,Zs)),o["\u0275did"](65,16384,null,0,Sr,[o.TemplateRef],null,null),o["\u0275prd"](2048,[[8,4]],lr,null,[Sr]),(n()(),o["\u0275eld"](67,0,null,null,11,null,null,null,null,null,null,null)),o["\u0275did"](68,16384,null,3,Ir,[],{name:[0,"name"]},null),o["\u0275qud"](335544320,11,{cell:0}),o["\u0275qud"](335544320,12,{headerCell:0}),o["\u0275qud"](335544320,13,{footerCell:0}),o["\u0275prd"](2048,[[1,4]],ir,null,[Ir]),(n()(),o["\u0275and"](0,null,null,2,null,Gs)),o["\u0275did"](74,16384,null,0,kr,[o.TemplateRef],null,null),o["\u0275prd"](2048,[[12,4]],tr,null,[kr]),(n()(),o["\u0275and"](0,null,null,2,null,Ys)),o["\u0275did"](77,16384,null,0,Sr,[o.TemplateRef],null,null),o["\u0275prd"](2048,[[11,4]],lr,null,[Sr]),(n()(),o["\u0275and"](0,null,null,2,null,Xs)),o["\u0275did"](80,540672,null,0,Tr,[o.TemplateRef,o.IterableDiffers],{columns:[0,"columns"]},null),o["\u0275prd"](2048,[[3,4]],sr,null,[Tr]),(n()(),o["\u0275and"](0,null,null,2,null,Qs)),o["\u0275did"](83,540672,null,0,Ar,[o.TemplateRef,o.IterableDiffers],{columns:[0,"columns"]},null),o["\u0275prd"](2048,[[2,4]],dr,null,[Ar])],function(n,e){var l=e.component;n(e,7,0,(null==l.currentPlayer?null:l.currentPlayer.id)===(null==l.player?null:l.player.id)),n(e,10,0,l.player.avatarUrl),n(e,24,0,l.player.alliance),n(e,26,0,!l.player.alliance),n(e,32,0,l.player.description),n(e,38,0,l.dataSource),n(e,44,0,"location"),n(e,56,0,"name"),n(e,68,0,"score"),n(e,80,0,l.displayedColumns),n(e,83,0,l.displayedColumns)},function(n,e){var l=e.component;n(e,5,0,l.player.name),n(e,21,0,l.playerScore),n(e,28,0,o["\u0275unv"](e,28,0,n(e,29,0,o["\u0275nov"](e.parent,0),l.player.createdAt,"short")))})}function Js(n){return o["\u0275vid"](0,[o["\u0275pid"](0,yt.DatePipe,[o.LOCALE_ID]),(n()(),o["\u0275eld"](1,0,null,null,4,"div",[["class","container-fluid"]],null,null,null,null,null)),(n()(),o["\u0275and"](16777216,null,null,1,null,Ls)),o["\u0275did"](3,16384,null,0,yt.NgIf,[o.ViewContainerRef,o.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),o["\u0275and"](16777216,null,null,1,null,Ks)),o["\u0275did"](5,16384,null,0,yt.NgIf,[o.ViewContainerRef,o.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(n,e){var l=e.component;n(e,3,0,!l.player),n(e,5,0,l.player)},null)}var nc=l("lwpf"),ec=l("ebCm"),lc=l("bne5"),tc=l("Gi3i");function ic(n){throw Error("A drawer was already declared for 'position=\""+n+"\"'")}var oc=new o.InjectionToken("MAT_DRAWER_DEFAULT_AUTOSIZE",{providedIn:"root",factory:function(){return!1}}),ac=function(){function n(n,e){this._changeDetectorRef=n,this._container=e}return n.prototype.ngAfterContentInit=function(){var n=this;this._container._contentMarginChanges.subscribe(function(){n._changeDetectorRef.markForCheck()})},n}(),rc=function(){function n(n,e,l,t,i,a){var r=this;this._elementRef=n,this._focusTrapFactory=e,this._focusMonitor=l,this._platform=t,this._ngZone=i,this._doc=a,this._elementFocusedBeforeDrawerWasOpened=null,this._enableAnimations=!1,this._position="start",this._mode="over",this._disableClose=!1,this._autoFocus=!0,this._animationStarted=new o.EventEmitter,this._animationState="void",this.openedChange=new o.EventEmitter(!0),this.onPositionChanged=new o.EventEmitter,this._modeChanged=new ct.a,this._opened=!1,this.openedChange.subscribe(function(n){n?(r._doc&&(r._elementFocusedBeforeDrawerWasOpened=r._doc.activeElement),r._isFocusTrapEnabled&&r._focusTrap&&r._trapFocus()):r._restoreFocus()}),this._ngZone.runOutsideAngular(function(){Object(lc.a)(r._elementRef.nativeElement,"keydown").pipe(Object(Il.a)(function(n){return n.keyCode===ot.e&&!r.disableClose})).subscribe(function(n){return r._ngZone.run(function(){r.close(),n.stopPropagation()})})})}return Object.defineProperty(n.prototype,"position",{get:function(){return this._position},set:function(n){(n="end"===n?"end":"start")!=this._position&&(this._position=n,this.onPositionChanged.emit())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"mode",{get:function(){return this._mode},set:function(n){this._mode=n,this._modeChanged.next()},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"disableClose",{get:function(){return this._disableClose},set:function(n){this._disableClose=Object(it.c)(n)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"autoFocus",{get:function(){return this._autoFocus},set:function(n){this._autoFocus=Object(it.c)(n)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"_openedStream",{get:function(){return this.openedChange.pipe(Object(Il.a)(function(n){return n}),Object(c.a)(function(){}))},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"openedStart",{get:function(){return this._animationStarted.pipe(Object(Il.a)(function(n){return n.fromState!==n.toState&&0===n.toState.indexOf("open")}),Object(c.a)(function(){}))},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"_closedStream",{get:function(){return this.openedChange.pipe(Object(Il.a)(function(n){return!n}),Object(c.a)(function(){}))},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"closedStart",{get:function(){return this._animationStarted.pipe(Object(Il.a)(function(n){return n.fromState!==n.toState&&"void"===n.toState}),Object(c.a)(function(){}))},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"_isFocusTrapEnabled",{get:function(){return this.opened&&"side"!==this.mode},enumerable:!0,configurable:!0}),n.prototype._trapFocus=function(){var n=this;this.autoFocus&&this._focusTrap.focusInitialElementWhenReady().then(function(e){e||"function"!=typeof n._elementRef.nativeElement.focus||n._elementRef.nativeElement.focus()})},n.prototype._restoreFocus=function(){if(this.autoFocus){var n=this._doc&&this._doc.activeElement;n&&this._elementRef.nativeElement.contains(n)&&(this._elementFocusedBeforeDrawerWasOpened instanceof HTMLElement?this._focusMonitor.focusVia(this._elementFocusedBeforeDrawerWasOpened,this._openedVia):this._elementRef.nativeElement.blur()),this._elementFocusedBeforeDrawerWasOpened=null,this._openedVia=null}},n.prototype.ngAfterContentInit=function(){this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._focusTrap.enabled=this._isFocusTrapEnabled},n.prototype.ngAfterContentChecked=function(){this._platform.isBrowser&&(this._enableAnimations=!0)},n.prototype.ngOnDestroy=function(){this._focusTrap&&this._focusTrap.destroy()},Object.defineProperty(n.prototype,"opened",{get:function(){return this._opened},set:function(n){this.toggle(Object(it.c)(n))},enumerable:!0,configurable:!0}),n.prototype.open=function(n){return this.toggle(!0,n)},n.prototype.close=function(){return this.toggle(!1)},n.prototype.toggle=function(n,e){var l=this;return void 0===n&&(n=!this.opened),void 0===e&&(e="program"),this._opened=n,n?(this._animationState=this._enableAnimations?"open":"open-instant",this._openedVia=e):(this._animationState="void",this._restoreFocus()),this._focusTrap&&(this._focusTrap.enabled=this._isFocusTrapEnabled),new Promise(function(n){l.openedChange.pipe(Object(Tl.a)(1)).subscribe(function(e){return n(e?"open":"close")})})},n.prototype._onAnimationStart=function(n){this._animationStarted.emit(n)},n.prototype._onAnimationEnd=function(n){var e=n.fromState,l=n.toState;(0===l.indexOf("open")&&"void"===e||"void"===l&&0===e.indexOf("open"))&&this.openedChange.emit(this._opened)},Object.defineProperty(n.prototype,"_width",{get:function(){return this._elementRef.nativeElement&&this._elementRef.nativeElement.offsetWidth||0},enumerable:!0,configurable:!0}),n}(),uc=function(){function n(n,e,l,t,i,a){void 0===i&&(i=!1);var r=this;this._dir=n,this._element=e,this._ngZone=l,this._changeDetectorRef=t,this._animationMode=a,this.backdropClick=new o.EventEmitter,this._destroyed=new ct.a,this._doCheckSubject=new ct.a,this._contentMargins={left:null,right:null},this._contentMarginChanges=new ct.a,n&&n.change.pipe(Object(st.a)(this._destroyed)).subscribe(function(){r._validateDrawers(),r._updateContentMargins()}),this._autosize=i}return Object.defineProperty(n.prototype,"start",{get:function(){return this._start},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"end",{get:function(){return this._end},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"autosize",{get:function(){return this._autosize},set:function(n){this._autosize=Object(it.c)(n)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"hasBackdrop",{get:function(){return null==this._backdropOverride?!this._start||"side"!==this._start.mode||!this._end||"side"!==this._end.mode:this._backdropOverride},set:function(n){this._backdropOverride=null==n?null:Object(it.c)(n)},enumerable:!0,configurable:!0}),n.prototype.ngAfterContentInit=function(){var n=this;this._drawers.changes.pipe(Object(wi.a)(null)).subscribe(function(){n._validateDrawers(),n._drawers.forEach(function(e){n._watchDrawerToggle(e),n._watchDrawerPosition(e),n._watchDrawerMode(e)}),(!n._drawers.length||n._isDrawerOpen(n._start)||n._isDrawerOpen(n._end))&&n._updateContentMargins(),n._changeDetectorRef.markForCheck()}),this._doCheckSubject.pipe(Object(tc.a)(10),Object(st.a)(this._destroyed)).subscribe(function(){return n._updateContentMargins()})},n.prototype.ngOnDestroy=function(){this._doCheckSubject.complete(),this._destroyed.next(),this._destroyed.complete()},n.prototype.open=function(){this._drawers.forEach(function(n){return n.open()})},n.prototype.close=function(){this._drawers.forEach(function(n){return n.close()})},n.prototype.ngDoCheck=function(){var n=this;this._autosize&&this._isPushed()&&this._ngZone.runOutsideAngular(function(){return n._doCheckSubject.next()})},n.prototype._watchDrawerToggle=function(n){var e=this;n._animationStarted.pipe(Object(st.a)(this._drawers.changes),Object(Il.a)(function(n){return n.fromState!==n.toState})).subscribe(function(n){"open-instant"!==n.toState&&"NoopAnimations"!==e._animationMode&&e._element.nativeElement.classList.add("mat-drawer-transition"),e._updateContentMargins(),e._changeDetectorRef.markForCheck()}),"side"!==n.mode&&n.openedChange.pipe(Object(st.a)(this._drawers.changes)).subscribe(function(){return e._setContainerClass(n.opened)})},n.prototype._watchDrawerPosition=function(n){var e=this;n&&n.onPositionChanged.pipe(Object(st.a)(this._drawers.changes)).subscribe(function(){e._ngZone.onMicrotaskEmpty.asObservable().pipe(Object(Tl.a)(1)).subscribe(function(){e._validateDrawers()})})},n.prototype._watchDrawerMode=function(n){var e=this;n&&n._modeChanged.pipe(Object(st.a)(Object(yi.a)(this._drawers.changes,this._destroyed))).subscribe(function(){e._updateContentMargins(),e._changeDetectorRef.markForCheck()})},n.prototype._setContainerClass=function(n){n?this._element.nativeElement.classList.add("mat-drawer-opened"):this._element.nativeElement.classList.remove("mat-drawer-opened")},n.prototype._validateDrawers=function(){var n=this;this._start=this._end=null,this._drawers.forEach(function(e){"end"==e.position?(null!=n._end&&ic("end"),n._end=e):(null!=n._start&&ic("start"),n._start=e)}),this._right=this._left=null,this._dir&&"rtl"===this._dir.value?(this._left=this._end,this._right=this._start):(this._left=this._start,this._right=this._end)},n.prototype._isPushed=function(){return this._isDrawerOpen(this._start)&&"over"!=this._start.mode||this._isDrawerOpen(this._end)&&"over"!=this._end.mode},n.prototype._onBackdropClicked=function(){this.backdropClick.emit(),this._closeModalDrawer()},n.prototype._closeModalDrawer=function(){var n=this;[this._start,this._end].filter(function(e){return e&&!e.disableClose&&n._canHaveBackdrop(e)}).forEach(function(n){return n.close()})},n.prototype._isShowingBackdrop=function(){return this._isDrawerOpen(this._start)&&this._canHaveBackdrop(this._start)||this._isDrawerOpen(this._end)&&this._canHaveBackdrop(this._end)},n.prototype._canHaveBackdrop=function(n){return"side"!==n.mode||!!this._backdropOverride},n.prototype._isDrawerOpen=function(n){return null!=n&&n.opened},n.prototype._updateContentMargins=function(){var n=this,e=0,l=0;if(this._left&&this._left.opened&&("side"==this._left.mode?e+=this._left._width:"push"==this._left.mode&&(e+=t=this._left._width,l-=t)),this._right&&this._right.opened)if("side"==this._right.mode)l+=this._right._width;else if("push"==this._right.mode){var t;l+=t=this._right._width,e-=t}e=e||null,l=l||null,e===this._contentMargins.left&&l===this._contentMargins.right||(this._contentMargins={left:e,right:l},this._ngZone.run(function(){return n._contentMarginChanges.next(n._contentMargins)}))},n}(),sc=function(n){function e(e,l){return n.call(this,e,l)||this}return Object(r.__extends)(e,n),e}(ac),cc=function(n){function e(){var e=null!==n&&n.apply(this,arguments)||this;return e._fixedInViewport=!1,e._fixedTopGap=0,e._fixedBottomGap=0,e}return Object(r.__extends)(e,n),Object.defineProperty(e.prototype,"fixedInViewport",{get:function(){return this._fixedInViewport},set:function(n){this._fixedInViewport=Object(it.c)(n)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fixedTopGap",{get:function(){return this._fixedTopGap},set:function(n){this._fixedTopGap=Object(it.e)(n)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fixedBottomGap",{get:function(){return this._fixedBottomGap},set:function(n){this._fixedBottomGap=Object(it.e)(n)},enumerable:!0,configurable:!0}),e}(rc),dc=function(n){function e(){return null!==n&&n.apply(this,arguments)||this}return Object(r.__extends)(e,n),e}(uc),pc=function(){},fc=o["\u0275crt"]({encapsulation:2,styles:[],data:{}});function mc(n){return o["\u0275vid"](2,[o["\u0275ncd"](null,0)],null,null)}var hc=o["\u0275crt"]({encapsulation:2,styles:[],data:{animation:[{type:7,name:"transform",definitions:[{type:0,name:"open, open-instant",styles:{type:6,styles:{transform:"translate3d(0, 0, 0)",visibility:"visible"},offset:null},options:void 0},{type:0,name:"void",styles:{type:6,styles:{"box-shadow":"none",visibility:"hidden"},offset:null},options:void 0},{type:1,expr:"void => open-instant",animation:{type:4,styles:null,timings:"0ms"},options:null},{type:1,expr:"void <=> open, open-instant => void",animation:{type:4,styles:null,timings:"400ms cubic-bezier(0.25, 0.8, 0.25, 1)"},options:null}],options:{}}]}});function gc(n){return o["\u0275vid"](2,[o["\u0275ncd"](null,0)],null,null)}var vc=o["\u0275crt"]({encapsulation:2,styles:[".mat-drawer-container{position:relative;z-index:1;box-sizing:border-box;-webkit-overflow-scrolling:touch;display:block;overflow:hidden}.mat-drawer-container[fullscreen]{top:0;left:0;right:0;bottom:0;position:absolute}.mat-drawer-container[fullscreen].mat-drawer-opened{overflow:hidden}.mat-drawer-container.mat-drawer-container-explicit-backdrop .mat-drawer-side{z-index:3}.mat-drawer-backdrop{top:0;left:0;right:0;bottom:0;position:absolute;display:block;z-index:3;visibility:hidden}.mat-drawer-backdrop.mat-drawer-shown{visibility:visible}.mat-drawer-transition .mat-drawer-backdrop{transition-duration:.4s;transition-timing-function:cubic-bezier(.25,.8,.25,1);transition-property:background-color,visibility}@media screen and (-ms-high-contrast:active){.mat-drawer-backdrop{opacity:.5}}.mat-drawer-content{position:relative;z-index:1;display:block;height:100%;overflow:auto}.mat-drawer-transition .mat-drawer-content{transition-duration:.4s;transition-timing-function:cubic-bezier(.25,.8,.25,1);transition-property:transform,margin-left,margin-right}.mat-drawer{position:relative;z-index:4;display:block;position:absolute;top:0;bottom:0;z-index:3;outline:0;box-sizing:border-box;overflow-y:auto;transform:translate3d(-100%,0,0)}@media screen and (-ms-high-contrast:active){.mat-drawer,[dir=rtl] .mat-drawer.mat-drawer-end{border-right:solid 1px currentColor}}@media screen and (-ms-high-contrast:active){.mat-drawer.mat-drawer-end,[dir=rtl] .mat-drawer{border-left:solid 1px currentColor;border-right:none}}.mat-drawer.mat-drawer-side{z-index:2}.mat-drawer.mat-drawer-end{right:0;transform:translate3d(100%,0,0)}[dir=rtl] .mat-drawer{transform:translate3d(100%,0,0)}[dir=rtl] .mat-drawer.mat-drawer-end{left:0;right:auto;transform:translate3d(-100%,0,0)}.mat-drawer:not(.mat-drawer-side){box-shadow:0 8px 10px -5px rgba(0,0,0,.2),0 16px 24px 2px rgba(0,0,0,.14),0 6px 30px 5px rgba(0,0,0,.12)}.mat-sidenav-fixed{position:fixed}"],data:{}});function bc(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,0,"div",[["class","mat-drawer-backdrop"]],[[2,"mat-drawer-shown",null]],[[null,"click"]],function(n,e,l){var t=!0;return"click"===e&&(t=!1!==n.component._onBackdropClicked()&&t),t},null,null))],null,function(n,e){n(e,0,0,e.component._isShowingBackdrop())})}function yc(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,3,"mat-sidenav-content",[["cdkScrollable",""],["class","mat-drawer-content mat-sidenav-content"]],[[4,"margin-left","px"],[4,"margin-right","px"]],null,null,mc,fc)),o["\u0275did"](1,212992,[[1,4]],0,xt.a,[o.ElementRef,xt.c,o.NgZone],null,null),o["\u0275did"](2,1097728,null,0,sc,[o.ChangeDetectorRef,dc],null,null),o["\u0275ncd"](0,2)],function(n,e){n(e,1,0)},function(n,e){n(e,0,0,o["\u0275nov"](e,2)._container._contentMargins.left,o["\u0275nov"](e,2)._container._contentMargins.right)})}function _c(n){return o["\u0275vid"](2,[o["\u0275qud"](671088640,1,{scrollable:0}),(n()(),o["\u0275and"](16777216,null,null,1,null,bc)),o["\u0275did"](2,16384,null,0,yt.NgIf,[o.ViewContainerRef,o.TemplateRef],{ngIf:[0,"ngIf"]},null),o["\u0275ncd"](null,0),o["\u0275ncd"](null,1),(n()(),o["\u0275and"](16777216,null,null,1,null,yc)),o["\u0275did"](6,16384,null,0,yt.NgIf,[o.ViewContainerRef,o.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(n,e){var l=e.component;n(e,2,0,l.hasBackdrop),n(e,6,0,!l._content)},null)}var wc=l("ZYCi"),Cc=100,Rc=Object(St.D)(function(n){this._elementRef=n},"primary"),xc=new o.InjectionToken("mat-progress-spinner-default-options",{providedIn:"root",factory:function(){return{diameter:Cc}}}),Sc=function(n){function e(e,l,t,i,o){var a=n.call(this,e,l,t,i,o)||this;return a.mode="indeterminate",a}return Object(r.__extends)(e,n),e}(function(n){function e(e,l,t,i,o){var a=n.call(this,e)||this;return a._elementRef=e,a._document=t,a.animationMode=i,a.defaults=o,a._value=0,a._fallbackAnimation=!1,a._noopAnimations="NoopAnimations"===a.animationMode&&!!a.defaults&&!a.defaults._forceAnimations,a._diameter=Cc,a.mode="determinate",a._fallbackAnimation=l.EDGE||l.TRIDENT,o&&(o.diameter&&(a.diameter=o.diameter),o.strokeWidth&&(a.strokeWidth=o.strokeWidth)),e.nativeElement.classList.add("mat-progress-spinner-indeterminate"+(a._fallbackAnimation?"-fallback":"")+"-animation"),a}return Object(r.__extends)(e,n),Object.defineProperty(e.prototype,"diameter",{get:function(){return this._diameter},set:function(n){this._diameter=Object(it.e)(n),this._fallbackAnimation||e.diameters.has(this._diameter)||this._attachStyleNode()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"strokeWidth",{get:function(){return this._strokeWidth||this.diameter/10},set:function(n){this._strokeWidth=Object(it.e)(n)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){return"determinate"===this.mode?this._value:0},set:function(n){this._value=Math.max(0,Math.min(100,Object(it.e)(n)))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_circleRadius",{get:function(){return(this.diameter-10)/2},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_viewBox",{get:function(){var n=2*this._circleRadius+this.strokeWidth;return"0 0 "+n+" "+n},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_strokeCircumference",{get:function(){return 2*Math.PI*this._circleRadius},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_strokeDashOffset",{get:function(){return"determinate"===this.mode?this._strokeCircumference*(100-this._value)/100:this._fallbackAnimation&&"indeterminate"===this.mode?.2*this._strokeCircumference:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_circleStrokeWidth",{get:function(){return this.strokeWidth/this.diameter*100},enumerable:!0,configurable:!0}),e.prototype._attachStyleNode=function(){var n=e.styleTag;n||(n=this._document.createElement("style"),this._document.head.appendChild(n),e.styleTag=n),n&&n.sheet&&n.sheet.insertRule(this._getAnimationText(),0),e.diameters.add(this.diameter)},e.prototype._getAnimationText=function(){return"\n @keyframes mat-progress-spinner-stroke-rotate-DIAMETER {\n    0%      { stroke-dashoffset: START_VALUE;  transform: rotate(0); }\n    12.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(0); }\n    12.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(72.5deg); }\n    25%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(72.5deg); }\n\n    25.0001%   { stroke-dashoffset: START_VALUE;  transform: rotate(270deg); }\n    37.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(270deg); }\n    37.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(161.5deg); }\n    50%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(161.5deg); }\n\n    50.0001%  { stroke-dashoffset: START_VALUE;  transform: rotate(180deg); }\n    62.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(180deg); }\n    62.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(251.5deg); }\n    75%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(251.5deg); }\n\n    75.0001%  { stroke-dashoffset: START_VALUE;  transform: rotate(90deg); }\n    87.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(90deg); }\n    87.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(341.5deg); }\n    100%    { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(341.5deg); }\n  }\n".replace(/START_VALUE/g,""+.95*this._strokeCircumference).replace(/END_VALUE/g,""+.2*this._strokeCircumference).replace(/DIAMETER/g,""+this.diameter)},e.diameters=new Set([Cc]),e.styleTag=null,e}(Rc)),kc=function(){},Ic=o["\u0275crt"]({encapsulation:2,styles:[".mat-progress-spinner{display:block;position:relative}.mat-progress-spinner svg{position:absolute;transform:rotate(-90deg);top:0;left:0;transform-origin:center;overflow:visible}.mat-progress-spinner circle{fill:transparent;transform-origin:center;transition:stroke-dashoffset 225ms linear}._mat-animation-noopable.mat-progress-spinner circle{transition:none;animation:none}.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate]{animation:mat-progress-spinner-linear-rotate 2s linear infinite}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate]{transition:none;animation:none}.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] circle{transition-property:stroke;animation-duration:4s;animation-timing-function:cubic-bezier(.35,0,.25,1);animation-iteration-count:infinite}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] circle{transition:none;animation:none}.mat-progress-spinner.mat-progress-spinner-indeterminate-fallback-animation[mode=indeterminate]{animation:mat-progress-spinner-stroke-rotate-fallback 10s cubic-bezier(.87,.03,.33,1) infinite}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-fallback-animation[mode=indeterminate]{transition:none;animation:none}.mat-progress-spinner.mat-progress-spinner-indeterminate-fallback-animation[mode=indeterminate] circle{transition-property:stroke}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-fallback-animation[mode=indeterminate] circle{transition:none;animation:none}@keyframes mat-progress-spinner-linear-rotate{0%{transform:rotate(0)}100%{transform:rotate(360deg)}}@keyframes mat-progress-spinner-stroke-rotate-100{0%{stroke-dashoffset:268.60617px;transform:rotate(0)}12.5%{stroke-dashoffset:56.54867px;transform:rotate(0)}12.5001%{stroke-dashoffset:56.54867px;transform:rotateX(180deg) rotate(72.5deg)}25%{stroke-dashoffset:268.60617px;transform:rotateX(180deg) rotate(72.5deg)}25.0001%{stroke-dashoffset:268.60617px;transform:rotate(270deg)}37.5%{stroke-dashoffset:56.54867px;transform:rotate(270deg)}37.5001%{stroke-dashoffset:56.54867px;transform:rotateX(180deg) rotate(161.5deg)}50%{stroke-dashoffset:268.60617px;transform:rotateX(180deg) rotate(161.5deg)}50.0001%{stroke-dashoffset:268.60617px;transform:rotate(180deg)}62.5%{stroke-dashoffset:56.54867px;transform:rotate(180deg)}62.5001%{stroke-dashoffset:56.54867px;transform:rotateX(180deg) rotate(251.5deg)}75%{stroke-dashoffset:268.60617px;transform:rotateX(180deg) rotate(251.5deg)}75.0001%{stroke-dashoffset:268.60617px;transform:rotate(90deg)}87.5%{stroke-dashoffset:56.54867px;transform:rotate(90deg)}87.5001%{stroke-dashoffset:56.54867px;transform:rotateX(180deg) rotate(341.5deg)}100%{stroke-dashoffset:268.60617px;transform:rotateX(180deg) rotate(341.5deg)}}@keyframes mat-progress-spinner-stroke-rotate-fallback{0%{transform:rotate(0)}25%{transform:rotate(1170deg)}50%{transform:rotate(2340deg)}75%{transform:rotate(3510deg)}100%{transform:rotate(4680deg)}}"],data:{}});function Oc(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,0,":svg:circle",[["cx","50%"],["cy","50%"]],[[1,"r",0],[4,"animation-name",null],[4,"stroke-dashoffset","px"],[4,"stroke-dasharray","px"],[4,"stroke-width","%"]],null,null,null,null))],null,function(n,e){var l=e.component;n(e,0,0,l._circleRadius,"mat-progress-spinner-stroke-rotate-"+l.diameter,l._strokeDashOffset,l._strokeCircumference,l._circleStrokeWidth)})}function Pc(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,0,":svg:circle",[["cx","50%"],["cy","50%"]],[[1,"r",0],[4,"stroke-dashoffset","px"],[4,"stroke-dasharray","px"],[4,"stroke-width","%"]],null,null,null,null))],null,function(n,e){var l=e.component;n(e,0,0,l._circleRadius,l._strokeDashOffset,l._strokeCircumference,l._circleStrokeWidth)})}function Tc(n){return o["\u0275vid"](2,[(n()(),o["\u0275eld"](0,0,null,null,5,":svg:svg",[["focusable","false"],["preserveAspectRatio","xMidYMid meet"]],[[4,"width","px"],[4,"height","px"],[1,"viewBox",0]],null,null,null,null)),o["\u0275did"](1,16384,null,0,yt.NgSwitch,[],{ngSwitch:[0,"ngSwitch"]},null),(n()(),o["\u0275and"](16777216,null,null,1,null,Oc)),o["\u0275did"](3,278528,null,0,yt.NgSwitchCase,[o.ViewContainerRef,o.TemplateRef,yt.NgSwitch],{ngSwitchCase:[0,"ngSwitchCase"]},null),(n()(),o["\u0275and"](16777216,null,null,1,null,Pc)),o["\u0275did"](5,278528,null,0,yt.NgSwitchCase,[o.ViewContainerRef,o.TemplateRef,yt.NgSwitch],{ngSwitchCase:[0,"ngSwitchCase"]},null)],function(n,e){n(e,1,0,"indeterminate"===e.component.mode),n(e,3,0,!0),n(e,5,0,!1)},function(n,e){var l=e.component;n(e,0,0,l.diameter,l.diameter,l._viewBox)})}var Ac=l("YSVl"),Dc=function(){function n(n,e){this.store=n,this.actions$=e,this.visible=!1,this.entries=[],this.message="",this.playerColors={},this.progressingMessages={},this.chatScrollPosition=null}return n.prototype.ngOnInit=function(){var n=this;this.store.select(gl).pipe(Object(kl.a)()).subscribe(function(e){n.entries=n.formatEntries(e.messages),n.scrollChat(n.chatScrollPosition)}),this.actions$.pipe(Object(u.d)(ke.PostMessageSuccess),Object(c.a)(function(n){return n.payload})).subscribe(function(e){var l=e.message,t=e.messageStamp,i=n.progressingMessages[t];i.messageStamp=null,i.id=l.id,delete n.progressingMessages[t]}),this.actions$.pipe(Object(u.d)(ke.AddMessage),Object(c.a)(function(n){return n.payload})).subscribe(function(e){n.chatScrollPosition=n.getScrollPosition();var l=n.entries[n.entries.length-1];l&&l.playerId===e.playerId?l.messages.push({id:e.id,text:e.text,createdAt:+e.createdAt}):n.entries.push(n.formatEntry(e.playerId,e.player,{id:e.id,text:e.text,createdAt:e.createdAt})),n.scrollChat(n.chatScrollPosition)})},n.prototype.sendMessage=function(n,e){if(n.preventDefault(),!(e.length<1)){this.chatScrollPosition=this.getScrollPosition(),this.message="";var l=this.generateSeededNumber("alliance.message."+this.player.id+"."+Date.now());this.store.dispatch(new je({text:e,messageStamp:l}));var t=this.entries[this.entries.length-1],i={id:null,text:e,createdAt:String(Date.now()),messageStamp:l};t&&t.playerId===this.player.id?t.messages.push(i):this.entries.push(this.formatEntry(this.player.id,{name:this.player.name},i)),this.progressingMessages[l]=i,this.scrollChat(this.chatScrollPosition)}},n.prototype.formatEntries=function(n){var e=this;return n.reduce(function(n,l,t,i){var o=i[t-1];return o&&o.playerId===l.playerId?(n[n.length-1].messages.push({id:l.id,text:l.text,createdAt:l.createdAt}),n):(n.push(e.formatEntry(l.playerId,l.player,{id:l.id,text:l.text,createdAt:l.createdAt})),n)},[])},n.prototype.formatEntry=function(n,e,l){return{playerId:n,player:{name:e.name},messages:[l],color:this.getPlayerColor(e.name,n)}},n.prototype.getScrollPosition=function(){return this.messageContainer.nativeElement.scrollHeight-this.messageContainer.nativeElement.scrollTop-this.messageContainer.nativeElement.clientHeight},n.prototype.scrollChat=function(n,e){var l=this;void 0===e&&(e=!1),setTimeout(function(){var t=l.messageContainer.nativeElement;!e&&n>60||(t.scrollTop=t.scrollHeight)})},n.prototype.getPlayerColor=function(n,e){return this.playerColors[n]||(this.playerColors[n]=this.randomHsl(n,e)),this.playerColors[n]},n.prototype.randomHsl=function(n,e){return"hsla("+360*this.generateSeededNumber("megapolis."+e+"."+n)+", 80%, 50%, 0.5)"},n.prototype.generateSeededNumber=function(n){return Ac.xor4096(n).quick()},n}(),Fc=o["\u0275crt"]({encapsulation:2,styles:[[".chat{width:240px;height:1.75em;box-shadow:0 1px 4px rgba(0,0,0,.3);transition:height .5s ease,opacity .1s linear;opacity:.8}.chat.chat-active{height:300px;opacity:1}.chat:not(.chat-active):hover{opacity:1}.chat .header{height:1.75em;padding-left:.5em;display:flex;align-items:center;background:var(--indigo);color:#fff;cursor:pointer}.chat .content-container{height:calc(100% - 1.75em);display:flex;flex-direction:column;background-color:#fff}.chat .content{height:80%;overflow-y:scroll;overflow-x:hidden;word-wrap:break-word;padding:0 .5em}.chat .content .entry{min-width:20%;max-width:90%;position:relative;margin:.6em 0;padding:.3em .3em 0;border:2px solid}.chat .content .entry.entry-owner{left:10%}.chat .content .entry.entry-owner .entry-author{left:initial;right:.4em}.chat .content .entry .entry-author{position:absolute;top:-.5em;left:.4em;padding:0 .15em;height:.8em;font-size:.8em;display:flex;align-items:center;background-color:#fff}.chat .content .entry .entry-message{padding:.2em 0;position:relative;display:flex;align-items:center;border-bottom:1px dashed;border-color:inherit}.chat .content .entry .entry-message:last-child{border-color:transparent}.chat .content .entry .entry-message .message-saving{position:absolute;left:-1.6em}.chat .message-compose{height:auto;min-height:20%;padding:0 .5em;box-shadow:inset 0 1px 1px 0 rgba(0,0,0,.3)}.chat .message-compose .mat-form-field-infix{border-top:0}.chat .message-compose .mat-form-field-wrapper{padding-bottom:0}.chat .message-compose .mat-form-field-underline{display:none}"]],data:{}});function jc(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,1,"mat-spinner",[["class","message-saving mat-spinner mat-progress-spinner"],["diameter","16"],["mode","indeterminate"],["role","progressbar"]],[[2,"_mat-animation-noopable",null],[4,"width","px"],[4,"height","px"]],null,null,Tc,Ic)),o["\u0275did"](1,49152,null,0,Sc,[o.ElementRef,Ct.a,[2,yt.DOCUMENT],[2,Di.a],xc],{diameter:[0,"diameter"]},null)],function(n,e){n(e,1,0,"16")},function(n,e){n(e,0,0,o["\u0275nov"](e,1)._noopAnimations,o["\u0275nov"](e,1).diameter,o["\u0275nov"](e,1).diameter)})}function Ec(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,16777216,null,null,5,"div",[["class","entry-message"],["matTooltipPosition","left"]],null,[[null,"longpress"],[null,"keydown"],[null,"touchend"]],function(n,e,l){var t=!0;return"longpress"===e&&(t=!1!==o["\u0275nov"](n,1).show()&&t),"keydown"===e&&(t=!1!==o["\u0275nov"](n,1)._handleKeydown(l)&&t),"touchend"===e&&(t=!1!==o["\u0275nov"](n,1)._handleTouchend()&&t),t},null,null)),o["\u0275did"](1,147456,null,0,gt,[rt.c,o.ElementRef,xt.c,o.ViewContainerRef,o.NgZone,Ct.a,Rt.c,Rt.f,ft,[2,wt.b],[2,ht]],{position:[0,"position"],message:[1,"message"]},null),o["\u0275ppd"](2,2),(n()(),o["\u0275and"](16777216,null,null,1,null,jc)),o["\u0275did"](4,16384,null,0,yt.NgIf,[o.ViewContainerRef,o.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),o["\u0275ted"](5,null,[" "," "])),(n()(),o["\u0275and"](0,null,null,0))],function(n,e){var l=e.component;n(e,1,0,"left",o["\u0275unv"](e,1,1,n(e,2,0,o["\u0275nov"](e.parent.parent,0),e.context.$implicit.createdAt,"short"))),n(e,4,0,e.parent.context.$implicit.playerId===l.player.id&&e.context.$implicit.messageStamp)},function(n,e){n(e,5,0,e.context.$implicit.text)})}function Mc(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,6,"div",[["class","entry"]],[[4,"border-color",null]],null,null,null,null)),o["\u0275did"](1,278528,null,0,yt.NgClass,[o.IterableDiffers,o.KeyValueDiffers,o.ElementRef,o.Renderer2],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),o["\u0275pod"](2,{"entry-owner":0}),(n()(),o["\u0275eld"](3,0,null,null,1,"div",[["class","entry-author"]],null,null,null,null,null)),(n()(),o["\u0275ted"](4,null,["",""])),(n()(),o["\u0275and"](16777216,null,null,1,null,Ec)),o["\u0275did"](6,802816,null,0,yt.NgForOf,[o.ViewContainerRef,o.TemplateRef,o.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],function(n,e){n(e,1,0,"entry",n(e,2,0,e.context.$implicit.playerId===e.component.player.id)),n(e,6,0,e.context.$implicit.messages)},function(n,e){n(e,0,0,e.context.$implicit.color),n(e,4,0,e.context.$implicit.player.name)})}function Nc(n){return o["\u0275vid"](0,[o["\u0275pid"](0,yt.DatePipe,[o.LOCALE_ID]),o["\u0275qud"](402653184,1,{messageContainer:0}),(n()(),o["\u0275eld"](2,0,null,null,34,"div",[["class","chat"]],null,null,null,null,null)),o["\u0275did"](3,278528,null,0,yt.NgClass,[o.IterableDiffers,o.KeyValueDiffers,o.ElementRef,o.Renderer2],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),o["\u0275pod"](4,{"chat-active":0}),(n()(),o["\u0275eld"](5,0,null,null,3,"div",[["class","header"]],null,[[null,"click"]],function(n,e,l){var t=!0,i=n.component;return"click"===e&&(t=0!=(i.visible=!i.visible)&&t),t},null,null)),(n()(),o["\u0275eld"](6,0,null,null,1,"span",[],null,null,null,null,null)),(n()(),o["\u0275ted"](-1,null,["Alliance chat"])),(n()(),o["\u0275eld"](8,0,null,null,0,"span",[],null,null,null,null,null)),(n()(),o["\u0275eld"](9,0,null,null,27,"div",[["class","content-container"]],null,null,null,null,null)),(n()(),o["\u0275eld"](10,0,[[1,0],["messageContainer",1]],null,2,"div",[["class","content"]],null,null,null,null,null)),(n()(),o["\u0275and"](16777216,null,null,1,null,Mc)),o["\u0275did"](12,802816,null,0,yt.NgForOf,[o.ViewContainerRef,o.TemplateRef,o.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(n()(),o["\u0275eld"](13,0,null,null,23,"div",[["class","message-compose"]],null,null,null,null,null)),(n()(),o["\u0275eld"](14,0,null,null,22,"mat-form-field",[["class","mat-form-field"],["floatLabel","never"],["name","message"],["ngDefaultControl",""],["style","width: 100%"]],[[2,"mat-form-field-appearance-standard",null],[2,"mat-form-field-appearance-fill",null],[2,"mat-form-field-appearance-outline",null],[2,"mat-form-field-appearance-legacy",null],[2,"mat-form-field-invalid",null],[2,"mat-form-field-can-float",null],[2,"mat-form-field-should-float",null],[2,"mat-form-field-hide-placeholder",null],[2,"mat-form-field-disabled",null],[2,"mat-form-field-autofilled",null],[2,"mat-focused",null],[2,"mat-accent",null],[2,"mat-warn",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null],[2,"_mat-animation-noopable",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"keydown.enter"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(n,e,l){var t=!0,i=n.component;return"input"===e&&(t=!1!==o["\u0275nov"](n,23)._handleInput(l.target.value)&&t),"blur"===e&&(t=!1!==o["\u0275nov"](n,23).onTouched()&&t),"compositionstart"===e&&(t=!1!==o["\u0275nov"](n,23)._compositionStart()&&t),"compositionend"===e&&(t=!1!==o["\u0275nov"](n,23)._compositionEnd(l.target.value)&&t),"ngModelChange"===e&&(t=!1!==(i.message=l)&&t),"keydown.enter"===e&&(t=!1!==i.sendMessage(l,i.message)&&t),t},vo.b,vo.a)),o["\u0275did"](15,7389184,null,7,bo.b,[o.ElementRef,o.ChangeDetectorRef,[2,St.j],[2,wt.b],[2,bo.a],Ct.a,o.NgZone,[2,Di.a]],{floatLabel:[0,"floatLabel"]},null),o["\u0275qud"](335544320,2,{_control:0}),o["\u0275qud"](335544320,3,{_placeholderChild:0}),o["\u0275qud"](335544320,4,{_labelChild:0}),o["\u0275qud"](603979776,5,{_errorChildren:1}),o["\u0275qud"](603979776,6,{_hintChildren:1}),o["\u0275qud"](603979776,7,{_prefixChildren:1}),o["\u0275qud"](603979776,8,{_suffixChildren:1}),o["\u0275did"](23,16384,null,0,ti.d,[o.Renderer2,o.ElementRef,[2,ti.a]],null,null),o["\u0275prd"](1024,null,ti.l,function(n){return[n]},[ti.d]),o["\u0275did"](25,671744,null,0,ti.q,[[8,null],[8,null],[8,null],[6,ti.l]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),o["\u0275prd"](2048,null,ti.m,null,[ti.q]),o["\u0275did"](27,16384,null,0,ti.n,[[4,ti.m]],null,null),(n()(),o["\u0275eld"](28,0,null,1,8,"textarea",[["class","mat-input-element mat-form-field-autofill-control cdk-textarea-autosize mat-autosize"],["matAutosizeMaxRows","5"],["matAutosizeMinRows","2"],["matInput",""],["matTextareaAutosize",""],["placeholder","Enter message"],["rows","1"]],[[2,"mat-input-server",null],[1,"id",0],[1,"placeholder",0],[8,"disabled",0],[8,"required",0],[8,"readOnly",0],[1,"aria-describedby",0],[1,"aria-invalid",0],[1,"aria-required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"focus"]],function(n,e,l){var t=!0;return"input"===e&&(t=!1!==o["\u0275nov"](n,29)._handleInput(l.target.value)&&t),"blur"===e&&(t=!1!==o["\u0275nov"](n,29).onTouched()&&t),"compositionstart"===e&&(t=!1!==o["\u0275nov"](n,29)._compositionStart()&&t),"compositionend"===e&&(t=!1!==o["\u0275nov"](n,29)._compositionEnd(l.target.value)&&t),"blur"===e&&(t=!1!==o["\u0275nov"](n,33)._focusChanged(!1)&&t),"focus"===e&&(t=!1!==o["\u0275nov"](n,33)._focusChanged(!0)&&t),"input"===e&&(t=!1!==o["\u0275nov"](n,33)._onInput()&&t),"input"===e&&(t=!1!==o["\u0275nov"](n,34)._noopInputHandler()&&t),t},null,null)),o["\u0275did"](29,16384,null,0,ti.d,[o.Renderer2,o.ElementRef,[2,ti.a]],null,null),o["\u0275prd"](1024,null,ti.l,function(n){return[n]},[ti.d]),o["\u0275did"](31,671744,null,0,ti.q,[[8,null],[8,null],[8,null],[6,ti.l]],{model:[0,"model"]},null),o["\u0275prd"](2048,null,ti.m,null,[ti.q]),o["\u0275did"](33,999424,null,0,yo.a,[o.ElementRef,Ct.a,[6,ti.m],[2,ti.p],[2,ti.h],St.d,[8,null],_o.a,o.NgZone],{placeholder:[0,"placeholder"]},null),o["\u0275did"](34,4603904,null,0,yo.c,[o.ElementRef,Ct.a,o.NgZone],{matAutosizeMinRows:[0,"matAutosizeMinRows"],matAutosizeMaxRows:[1,"matAutosizeMaxRows"],matTextareaAutosize:[2,"matTextareaAutosize"]},null),o["\u0275did"](35,16384,null,0,ti.n,[[4,ti.m]],null,null),o["\u0275prd"](2048,[[2,4]],bo.c,null,[yo.a])],function(n,e){var l=e.component;n(e,3,0,"chat",n(e,4,0,l.visible)),n(e,12,0,l.entries),n(e,15,0,"never"),n(e,25,0,"message",l.message),n(e,31,0,l.message),n(e,33,0,"Enter message"),n(e,34,0,"2","5","")},function(n,e){n(e,14,1,["standard"==o["\u0275nov"](e,15).appearance,"fill"==o["\u0275nov"](e,15).appearance,"outline"==o["\u0275nov"](e,15).appearance,"legacy"==o["\u0275nov"](e,15).appearance,o["\u0275nov"](e,15)._control.errorState,o["\u0275nov"](e,15)._canLabelFloat,o["\u0275nov"](e,15)._shouldLabelFloat(),o["\u0275nov"](e,15)._hideControlPlaceholder(),o["\u0275nov"](e,15)._control.disabled,o["\u0275nov"](e,15)._control.autofilled,o["\u0275nov"](e,15)._control.focused,"accent"==o["\u0275nov"](e,15).color,"warn"==o["\u0275nov"](e,15).color,o["\u0275nov"](e,15)._shouldForward("untouched"),o["\u0275nov"](e,15)._shouldForward("touched"),o["\u0275nov"](e,15)._shouldForward("pristine"),o["\u0275nov"](e,15)._shouldForward("dirty"),o["\u0275nov"](e,15)._shouldForward("valid"),o["\u0275nov"](e,15)._shouldForward("invalid"),o["\u0275nov"](e,15)._shouldForward("pending"),!o["\u0275nov"](e,15)._animationsEnabled,o["\u0275nov"](e,27).ngClassUntouched,o["\u0275nov"](e,27).ngClassTouched,o["\u0275nov"](e,27).ngClassPristine,o["\u0275nov"](e,27).ngClassDirty,o["\u0275nov"](e,27).ngClassValid,o["\u0275nov"](e,27).ngClassInvalid,o["\u0275nov"](e,27).ngClassPending]),n(e,28,1,[o["\u0275nov"](e,33)._isServer,o["\u0275nov"](e,33).id,o["\u0275nov"](e,33).placeholder,o["\u0275nov"](e,33).disabled,o["\u0275nov"](e,33).required,o["\u0275nov"](e,33).readonly,o["\u0275nov"](e,33)._ariaDescribedby||null,o["\u0275nov"](e,33).errorState,o["\u0275nov"](e,33).required.toString(),o["\u0275nov"](e,35).ngClassUntouched,o["\u0275nov"](e,35).ngClassTouched,o["\u0275nov"](e,35).ngClassPristine,o["\u0275nov"](e,35).ngClassDirty,o["\u0275nov"](e,35).ngClassValid,o["\u0275nov"](e,35).ngClassInvalid,o["\u0275nov"](e,35).ngClassPending])})}var Lc=function(n,e){this.dialogRef=n,this.data=e},$c=function(){function n(n){this.dialog=n,this.progressTutorial=new o.EventEmitter,this.stages=[{data:{title:"Welcome",content:"\n<p>\n  Glad to see you in the alpha.\n</p>\n<p>\n  Current version is an early base functionality test with a lot of missing gameplay and features.<br/>\n  Current design, game theme are placeholders and will most likely be changed going into beta.<br/>\n  A detailed feature roadmap can be found in the home page.\n<p>\n<p>\n  This simple walkthrough goes through the basics and goals.\n</p>\n  If you encounter any problems you can report them through the bug button located bottom right.<br/>\n  Any feedback is very appreciated.\n</p>",route:null},disableClose:!0},{data:{title:"Game overview",content:"\n<p>\n  The general goal of the game is to conquer the world.<br/>\n  This is achieved by befriending players, forming an alliance and then conquering others.<br/>\n  If one alliance becomes overwhelmingly dominant it's considered victorious.\n</p>\n<p>\n  To grow your emmpire you need to upgrade your initial town.<br/>\n  Once upgraded enough you'll be able to build the <b>Academy</b>.<br/>\n  Once its built you'll be able to train units used for conquering towns - <b>Diplomats</b>.<br/>\n<p>\n  Sending <b>Diplomat</b> units with your attacks reduces a towns loyalty.<br/>\n  The more <b>Diplomats</b> are in an attack the more loyalty they reduce.<br/>\n  When a towns loyalty falls below 0 it's conquered and given to the conquering player<br/>\n  Town loyalty regenerates over time. If a player loses all his towns he must restart.\n</p>"},disableClose:!0},{data:{title:"Header",content:"\n<p>\n  Header is the primary way to navigate the game.<br/>\n  Recruitment tab becomes available only after building the <b>Barracks</b><br/>\n  Some tabs open a different page while others use a sidenav.<br/>\n  Some tabs open a different page while others use a sidenav.<br/>\n</p>\n<p>\n  <b>Town</b> - overview and upgrade town<br/>\n  <b>Alliance</b> - overview and manage alliance, your invitations<br/>\n  <b>Map</b> - interact with other towns, send troops<br/>\n  <b>Recruit</b> - (available once barracksa are built) build more troops for your town<br/>\n  <b>Movements</b> - check incoming and ongoing troop movements<br/>\n  <b>Support</b> - overview and manage sent and stationed support<br/>\n  <b>Reports</b> - view combat reports<br/>\n  <b>Rankings</b> - check world rankings<br/>\n</p>"},disableClose:!0,backdropClass:"backdrop-transparent"},{data:{title:"Town view",content:"\n<p>\n  The town screen is used for a quick overview and building construction.<br/>\n  Main area shows building costs, build times and whether you can build them.\n</p>\n<p>\n  On the right you can see the towns available population and resources.<br/>\n  Each unit costs 1 population, population is increased by upgrading the farm.<br/>\n  Resources are used both for building construction and unit recruitment.\n</p>\n<p>\n  Below that town units, building queues and supporting units are displayed if there are any.<br/>\n  Units display is formatted - 5/12 (+3)<br/>\n  5 - amount of units currently stationed in town</br>\n  12 - total amount of available units</br>\n  (+3) - amount of units in recruitment\n</p>"},disableClose:!0,backdropClass:"backdrop-transparent"}]}return n.prototype.ngOnInit=function(){this.nextStage()},n.prototype.nextStage=function(){var n=this;this.stage=this.stage||0,this.stage>=this.stages.length||(this.tutorialDialog=this.dialog.open(Lc,this.stages[this.stage]),this.tutorialDialog.beforeClose().subscribe(function(){n.stage++,n.progressTutorial.next(),n.nextStage()}))},n}(),qc=o["\u0275crt"]({encapsulation:0,styles:[[""]],data:{}});function Vc(n){return o["\u0275vid"](0,[],null,null)}var Uc,zc=l("2JUs"),Hc=Object.assign||function(n){for(var e,l=1,t=arguments.length;l<t;l++)for(var i in e=arguments[l])Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n},Bc=((Uc={})[i.LoadProfileSuccess]="Player profile loaded successfully",Uc[i.UpdateProfileSuccess]="Profile updated successfully",Uc[i.RemoveAvatarSuccess]="Avatar removed successfully",Uc[i.LoadProfileFail]="Failed to load profile, please retry",Uc[i.UpdateProfileFail]="Failed to update profile, pleae retry",Uc[i.RemoveAvatarFail]="Failed to remove avatar, please retry",Uc["[Town] Rename Success"]="Town renamed successfully",Uc["[Town] Build Success"]="Building queued successfully",Uc["[Town] Recruit Success"]="Recruitment queued successfully",Uc["[Town] Move Troops Success"]="Troops sent successfully",Uc["[Town] Recall Support Success"]="Supporting troops recalled successfully",Uc["[Town] Send Back Support Success"]="Supporting troops sent back successfully",Uc["[Town] Rename Fail"]="Failed to rename town, please retry",Uc["[Town] Build Fail"]="Failed to queue building, please retry",Uc["[Town] Recruit Fail"]="Failed to queue recruitment, please retry",Uc["[Town] Move Troops Fail"]="Failed to send troops, please retry",Uc["[Town] Recall Support Fail"]="Failed recall supporting troops, please retry",Uc["[Town] Send Back Support Fail"]="Failed to send back supporting troops, please retry",Uc[$.CreateSuccess]="Alliance created successfully",Uc[$.CreateInviteSuccess]="Player invited successfully",Uc[$.CancelInviteSuccess]="Invite canceled successfully",Uc[$.RemoveMemberSuccess]="Member removed successfully",Uc[$.UpdateRolePermissionsSuccess]="Updated roles successfully",Uc[$.RemoveRoleSuccess]="Removed role successfully",Uc[$.UpdateMemberRoleSuccess]="Updated member role successfully",Uc[$.RejectInviteSuccess]="Rejected alliance invite successfully",Uc[$.LeaveAllianceSuccess]="Left alliance successfully",Uc[$.DestroySuccess]="Destroyed alliance successfully",Uc[$.ProposeAllianceSuccess]="Proposed alliance successfully",Uc[$.ProposeNapSuccess]="Proposed NAP successfully",Uc[$.CancelAllianceSuccess]="Canceled alliance proposal successfully",Uc[$.CancelNapSuccess]="Canceled NAP proposal successfully",Uc[$.RejectAllianceSuccess]="Rejected alliance proposal successfully",Uc[$.RejectNapSuccess]="Rejected NAP proposal successfully",Uc[$.AcceptAllianceSuccess]="Accepted alliance proposal successfully",Uc[$.AcceptNapSuccess]="Accepted NAP proposal successfully",Uc[$.EndAllianceSuccess]="Ended alliance successfully",Uc[$.EndNapSuccess]="Ended NAP successfully",Uc[$.DeclareWarSuccess]="Declared war successfully",Uc[$.LoadProfileSuccess]="Loaded alliance profile successfully",Uc[$.UpdateProfileSuccess]="Updated alliance profile successfully",Uc[$.RemoveAvatarSuccess]="Removed alliance avatar successfully",Uc[$.CreateFail]="Failed to create an alliance, please retry",Uc[$.CreateInviteFail]="Failed to invite target player, please retry",Uc[$.CancelInviteFail]="Failed to cancel invite, please retry",Uc[$.RemoveMemberFail]="Failed to remove member, please retry",Uc[$.UpdateRolePermissionsFail]="Failed to update roles, please retry",Uc[$.RemoveRoleFail]="Failed to remove role, please retry",Uc[$.UpdateMemberRoleFail]="Failed to update member role, please retry",Uc[$.RejectInviteFail]="Failed to reject invite, please retry",Uc[$.LeaveAllianceFail]="Failed to leave alliance, please retry",Uc[$.DestroyFail]="Failed to destroy alliance, please retry",Uc[$.ProposeAllianceFail]="Failed to propose alliance, please retry",Uc[$.ProposeNapFail]="Failed to to propose NAP, please retry",Uc[$.CancelAllianceFail]="Failed to cancel alliance proposal, please retry",Uc[$.CancelNapFail]="Failed to cancel NAP proposal, please retry",Uc[$.RejectAllianceFail]="Failed to reject alliance proposal, please retry",Uc[$.RejectNapFail]="Failed to reject NAP proposal, please retry",Uc[$.AcceptAllianceFail]="Failed to accept alliance proposal, please retry",Uc[$.AcceptNapFail]="Failed to accept NAP proposal, please retry",Uc[$.EndAllianceFail]="Failed to end alliance, please retry",Uc[$.EndNapFail]="Failed to end NAP, please retry",Uc[$.DeclareWarFail]="Failed to declare war, please retry",Uc[$.LoadProfileFail]="Failed to load alliance profile, please retry",Uc[$.UpdateProfileFail]="Failed to update alliance profile, please retry",Uc[$.RemoveAvatarFail]="Failed to remove alliance avatar, please retry",Uc),Wc=function(){function n(n,e,l){var t=this;this.store=n,this.snackBar=e,this.actions$=l,this.player$=this.store.select(ol),this.alliance$=this.store.select(dl),this.townState$=this.store.select(ll),this.reports$=this.store.select(al),this.worldData$=this.store.select(Ql.a),this.positionRankings$=this.store.select(wl).pipe(Object(oa.a)(this.store.select(Rl)),Object(c.a)(function(n){return{rankings:n[0],playerPosition:n[1]}})),this.noTowns$=this.townState$.pipe(Object(c.a)(function(n){return!n.inProgress&&!n.ids.length})),this.viewedAlliance$=this.store.select(ml).pipe(Object(oa.a)(this.store.select(Cl)),Object(Il.a)(function(n){return!!n[0]&&!!Object.keys(n[1]).length}),Object(c.a)(function(n){var e=n[0],l=n[1];return Hc({},e,{members:e.members.map(function(n){var e=n.id,t=l[e];return{id:e,name:t.name,score:t.score}})})})),this.viewedPlayer$=this.store.select(ul),this.updates=this.actions$.pipe(u.d.apply(void 0,p.concat(f,Al,Dl,V,U)),Object(c.a)(function(n){var e="info";return n.type.includes("Success")?e="success":n.type.includes("Fail")&&(e="fail"),{type:e,message:Bc[n.type]}})).subscribe(function(n){t.snackBar.open(n.message,null,{panelClass:["snackbar-event","snackbar-"+n.type],duration:1800})}),Wt.d.add(Zt.n,Zt.v,Zt.l,Zt.b,Zt.m,Zt.k,Zt.r,Zt.q,ia)}return n.prototype.ngOnInit=function(){var n=this;this.townStateSubscription=this.townState$.subscribe(function(e){n.townList=e.ids.map(function(n){return e.playerTowns[n]}),n.activeTown=e.playerTowns[e.activeTown],n.canRecruit=n.activeTown&&!!n.activeTown.buildings.barracks.level}),this.sidenavSubscription=this.store.select(rl).pipe(Object(Il.a)(function(){return n.sidenavLeft&&n.sidenavRight})).subscribe(function(e){return n.updateSidenavs(e)})},n.prototype.updateSidenavs=function(n){this.sidenavLeft.comp=n.left,this.sidenavRight.comp=n.right,n.left?this.sidenavLeft.open():this.sidenavLeft.close(),n.right?this.sidenavRight.open():this.sidenavRight.close()},n.prototype.onOpenProfile=function(n,e){this.store.dispatch(new("alliance"===e?pe:v)(n))},n.prototype.sidenavToggle=function(n,e){this.store.dispatch(new h([{side:n,name:e}]))},n.prototype.ngOnDestroy=function(){this.sidenavSubscription.unsubscribe(),this.townStateSubscription.unsubscribe()},n.prototype.logout=function(){this.store.dispatch(new zc.g)},n.prototype.selectTown=function(n){this.store.dispatch(new Vl(n))},n.prototype.restart=function(){this.store.dispatch(new g)},n.prototype.progressTutorial=function(){this.store.dispatch(new S)},n}(),Zc=l("vARd"),Gc=o["\u0275crt"]({encapsulation:0,styles:[["header[_ngcontent-%COMP%]{padding-bottom:43px}nav.navbar[_ngcontent-%COMP%]{padding:0;min-height:43px;position:absolute;width:100%;top:0;left:0;z-index:1}nav.navbar[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]{padding:0;margin:0}nav.navbar[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{padding:.5rem;background-color:rgba(255,255,255,0);border-top:3px solid transparent;transition:.25s}nav.navbar[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:hover{background-color:rgba(255,255,255,.5)}nav.navbar[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]   .nav-link.active[_ngcontent-%COMP%]{background-color:#fff;border-top:3px solid #2f0}nav.navbar[_ngcontent-%COMP%]   .collapse.show[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]{min-width:40%;text-align:center}.mat-sidenav-container[_ngcontent-%COMP%]{min-height:100vh}.mat-sidenav-container[_ngcontent-%COMP%]   .mat-sidenav[_ngcontent-%COMP%]{background-color:#fff}.game-chat[_ngcontent-%COMP%]{box-shadow:0 1px 4px rgba(0,0,0,.3);position:fixed;bottom:0;right:10%;z-index:1}"]],data:{}});function Yc(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,2,"movement",[],null,null,null,ei,Yt)),o["\u0275did"](1,638976,null,0,Gt,[],{town:[0,"town"],worldData:[1,"worldData"]},null),o["\u0275pid"](131072,yt.AsyncPipe,[o.ChangeDetectorRef])],function(n,e){var l=e.component;n(e,1,0,l.activeTown,o["\u0275unv"](e,1,1,o["\u0275nov"](e,2).transform(l.worldData$)))},null)}function Xc(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,2,"command",[],null,null,null,gi,ci)),o["\u0275did"](1,114688,null,0,ri,[ui.a,ii.a,si.c,O.n],{town:[0,"town"],worldData:[1,"worldData"]},null),o["\u0275pid"](131072,yt.AsyncPipe,[o.ChangeDetectorRef])],function(n,e){var l=e.component;n(e,1,0,l.activeTown,o["\u0275unv"](e,1,1,o["\u0275nov"](e,2).transform(l.worldData$)))},null)}function Qc(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,1,"alliance",[],null,[[null,"openAllianceProfile"],[null,"openPlayerProfile"]],function(n,e,l){var t=!0,i=n.component;return"openAllianceProfile"===e&&(t=!1!==i.onOpenProfile(l,"alliance")&&t),"openPlayerProfile"===e&&(t=!1!==i.onOpenProfile(l,"player")&&t),t},Cu,uu)),o["\u0275did"](1,114688,null,0,ua,[O.n,ti.f],null,{openAllianceProfile:"openAllianceProfile",openPlayerProfile:"openPlayerProfile"})],function(n,e){n(e,1,0)},null)}function Kc(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,2,"recruit",[],null,[[null,"upgradeBuilding"]],function(n,e,l){var t=!0;return"upgradeBuilding"===e&&(t=!1!==n.component.upgradeBuilding(l)&&t),t},$u,Fu)),o["\u0275did"](1,573440,null,0,Du,[O.n],{town:[0,"town"],worldData:[1,"worldData"]},null),o["\u0275pid"](131072,yt.AsyncPipe,[o.ChangeDetectorRef])],function(n,e){var l=e.component;n(e,1,0,l.activeTown,o["\u0275unv"](e,1,1,o["\u0275nov"](e,2).transform(l.worldData$)))},null)}function Jc(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,3,"report",[],null,null,null,Ju,Xu)),o["\u0275did"](1,704512,null,0,Yu,[],{reports:[0,"reports"],worldData:[1,"worldData"]},null),o["\u0275pid"](131072,yt.AsyncPipe,[o.ChangeDetectorRef]),o["\u0275pid"](131072,yt.AsyncPipe,[o.ChangeDetectorRef])],function(n,e){var l=e.component;n(e,1,0,o["\u0275unv"](e,1,0,o["\u0275nov"](e,2).transform(l.reports$)),o["\u0275unv"](e,1,1,o["\u0275nov"](e,3).transform(l.worldData$)))},null)}function nd(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,2,"support",[],null,null,null,ps,rs)),o["\u0275did"](1,49152,null,0,as,[O.n],{town:[0,"town"],worldData:[1,"worldData"]},null),o["\u0275pid"](131072,yt.AsyncPipe,[o.ChangeDetectorRef])],function(n,e){var l=e.component;n(e,1,0,l.activeTown,o["\u0275unv"](e,1,1,o["\u0275nov"](e,2).transform(l.worldData$)))},null)}function ed(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,2,"rankings",[],null,null,null,Es,ks)),o["\u0275did"](1,4767744,null,0,Ss,[],{positionRankings:[0,"positionRankings"]},null),o["\u0275pid"](131072,yt.AsyncPipe,[o.ChangeDetectorRef])],function(n,e){var l=e.component;n(e,1,0,o["\u0275unv"](e,1,0,o["\u0275nov"](e,2).transform(l.positionRankings$)))},null)}function ld(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,2,"alliance-profile",[],null,[[null,"openPlayerProfile"]],function(n,e,l){var t=!0;return"openPlayerProfile"===e&&(t=!1!==n.component.onOpenProfile(l,"player")&&t),t},ru,Zr)),o["\u0275did"](1,573440,null,0,Br,[Wr.e],{alliance:[0,"alliance"]},{openPlayerProfile:"openPlayerProfile"}),o["\u0275pid"](131072,yt.AsyncPipe,[o.ChangeDetectorRef])],function(n,e){var l=e.component;n(e,1,0,o["\u0275unv"](e,1,0,o["\u0275nov"](e,2).transform(l.viewedAlliance$)))},null)}function td(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,3,"player-profile",[],null,[[null,"openAllianceProfile"]],function(n,e,l){var t=!0;return"openAllianceProfile"===e&&(t=!1!==n.component.onOpenProfile(l,"alliance")&&t),t},Js,Ns)),o["\u0275did"](1,573440,null,0,Ms,[Wr.e],{player:[0,"player"],currentPlayer:[1,"currentPlayer"]},{openAllianceProfile:"openAllianceProfile"}),o["\u0275pid"](131072,yt.AsyncPipe,[o.ChangeDetectorRef]),o["\u0275pid"](131072,yt.AsyncPipe,[o.ChangeDetectorRef])],function(n,e){var l=e.component;n(e,1,0,o["\u0275unv"](e,1,0,o["\u0275nov"](e,2).transform(l.viewedPlayer$)),o["\u0275unv"](e,1,1,o["\u0275nov"](e,3).transform(l.player$)))},null)}function id(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,4,"a",[["class","nav-link"]],null,[[null,"click"]],function(n,e,l){var t=!0;return"click"===e&&(t=!1!==n.component.sidenavToggle("right","recruit")&&t),t},null,null)),(n()(),o["\u0275eld"](1,0,null,null,2,"fa-icon",[["aria-hidden","true"],["class","ng-fa-icon"]],[[8,"innerHTML",1]],null,null,Lt.b,Lt.a)),o["\u0275did"](2,573440,null,0,$t.a,[qt.c],{iconProp:[0,"iconProp"]},null),o["\u0275pad"](3,2),(n()(),o["\u0275ted"](-1,null,[" Recruit "]))],function(n,e){n(e,2,0,n(e,3,0,"fas","users"))},function(n,e){n(e,1,0,o["\u0275nov"](e,2).renderedIconHTML)})}function od(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,5,"div",[["class","nav-item mr-3"]],null,null,null,null,null)),(n()(),o["\u0275eld"](1,0,null,null,4,"a",[["class","nav-link"]],null,[[null,"click"]],function(n,e,l){var t=!0;return"click"===e&&(t=!1!==n.component.onOpenProfile(n.context.ngIf.id,"player")&&t),t},null,null)),(n()(),o["\u0275eld"](2,0,null,null,2,"fa-icon",[["aria-hidden","true"],["class","ng-fa-icon"]],[[8,"innerHTML",1]],null,null,Lt.b,Lt.a)),o["\u0275did"](3,573440,null,0,$t.a,[qt.c],{iconProp:[0,"iconProp"]},null),o["\u0275pad"](4,2),(n()(),o["\u0275ted"](-1,null,[" Profile"]))],function(n,e){n(e,3,0,n(e,4,0,"far","user-circle"))},function(n,e){n(e,2,0,o["\u0275nov"](e,3).renderedIconHTML)})}function ad(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,3,"button",[["class","dropdown-item"]],null,[[null,"click"]],function(n,e,l){var t=!0,i=n.component;return"click"===e&&(t=!1!==(i.activeTown.id!==n.context.$implicit.id&&i.selectTown(n.context.$implicit.id))&&t),t},null,null)),o["\u0275did"](1,278528,null,0,yt.NgClass,[o.IterableDiffers,o.KeyValueDiffers,o.ElementRef,o.Renderer2],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),o["\u0275pod"](2,{"bg-info text-white":0}),(n()(),o["\u0275ted"](3,null,[""," (",")"]))],function(n,e){n(e,1,0,"dropdown-item",n(e,2,0,e.component.activeTown.id===e.context.$implicit.id))},function(n,e){n(e,3,0,e.context.$implicit.name,e.context.$implicit.location)})}function rd(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,11,"div",[["class","nav-item mr-3"],["ngbDropdown",""],["placement","bottom-right"]],[[2,"show",null]],null,null,null,null)),o["\u0275did"](1,212992,null,2,nc.a,[o.ChangeDetectorRef,ec.a,yt.DOCUMENT,o.NgZone],{placement:[0,"placement"]},null),o["\u0275qud"](335544320,17,{_menu:0}),o["\u0275qud"](335544320,18,{_anchor:0}),(n()(),o["\u0275eld"](4,0,null,null,3,"button",[["aria-haspopup","true"],["class","btn btn-outline-info btn-sm dropdown-toggle"],["id","active-town"],["ngbDropdownToggle",""]],[[1,"aria-expanded",0]],[[null,"click"]],function(n,e,l){var t=!0;return"click"===e&&(t=!1!==o["\u0275nov"](n,5).toggleOpen()&&t),t},null,null)),o["\u0275did"](5,16384,null,0,nc.d,[nc.a,o.ElementRef],null,null),o["\u0275prd"](2048,[[18,4]],nc.b,null,[nc.d]),(n()(),o["\u0275ted"](-1,null,["Active town"])),(n()(),o["\u0275eld"](8,0,null,null,3,"div",[["aria-labelledby","active-town"],["ngbDropdownMenu",""]],[[2,"dropdown-menu",null],[2,"show",null],[1,"x-placement",0]],null,null,null,null)),o["\u0275did"](9,16384,[[17,4]],0,nc.c,[nc.a,o.ElementRef,o.Renderer2],null,null),(n()(),o["\u0275and"](16777216,null,null,1,null,ad)),o["\u0275did"](11,802816,null,0,yt.NgForOf,[o.ViewContainerRef,o.TemplateRef,o.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],function(n,e){var l=e.component;n(e,1,0,"bottom-right"),n(e,11,0,l.townList)},function(n,e){n(e,0,0,o["\u0275nov"](e,1).isOpen()),n(e,4,0,o["\u0275nov"](e,5).dropdown.isOpen()),n(e,8,0,!0,o["\u0275nov"](e,9).dropdown.isOpen(),o["\u0275nov"](e,9).placement)})}function ud(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,127,"mat-sidenav-container",[["class","backdrop-disabled mat-drawer-container mat-sidenav-container"]],[[2,"mat-drawer-container-explicit-backdrop",null]],null,null,_c,vc)),o["\u0275did"](1,1490944,null,2,dc,[[2,wt.b],o.ElementRef,o.NgZone,o.ChangeDetectorRef,oc,[2,Di.a]],null,null),o["\u0275qud"](603979776,3,{_drawers:1}),o["\u0275qud"](335544320,4,{_content:0}),(n()(),o["\u0275eld"](4,0,null,0,13,"mat-sidenav",[["class","col-xl-6 container-fluid mat-drawer mat-sidenav"],["mode","over"],["opened","false"],["position","start"],["tabIndex","-1"]],[[40,"@transform",0],[1,"align",0],[2,"mat-drawer-end",null],[2,"mat-drawer-over",null],[2,"mat-drawer-push",null],[2,"mat-drawer-side",null],[2,"mat-sidenav-fixed",null],[4,"top","px"],[4,"bottom","px"]],[[null,"closedStart"],["component","@transform.start"],["component","@transform.done"]],function(n,e,l){var t=!0,i=n.component;return"component:@transform.start"===e&&(t=!1!==o["\u0275nov"](n,5)._onAnimationStart(l)&&t),"component:@transform.done"===e&&(t=!1!==o["\u0275nov"](n,5)._onAnimationEnd(l)&&t),"closedStart"===e&&(t=!1!==i.sidenavToggle("left",null)&&t),t},gc,hc)),o["\u0275did"](5,3325952,[[3,4],[1,4],["sidenavLeft",4]],0,cc,[o.ElementRef,Rt.g,Rt.f,Ct.a,o.NgZone,[2,yt.DOCUMENT]],{position:[0,"position"],mode:[1,"mode"],opened:[2,"opened"]},{closedStart:"closedStart"}),o["\u0275did"](6,16384,null,0,yt.NgSwitch,[],{ngSwitch:[0,"ngSwitch"]},null),(n()(),o["\u0275eld"](7,0,null,0,4,"button",[["mat-mini-fab",""]],[[8,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"]],function(n,e,l){var t=!0;return"click"===e&&(t=!1!==n.component.sidenavToggle("left",null)&&t),t},ho.b,ho.a)),o["\u0275did"](8,180224,null,0,go.b,[o.ElementRef,Ct.a,Rt.f,[2,Di.a]],null,null),(n()(),o["\u0275eld"](9,0,null,0,2,"mat-icon",[["class","mat-icon"],["role","img"]],[[2,"mat-icon-inline",null]],null,null,mo,fo)),o["\u0275did"](10,638976,null,0,co,[o.ElementRef,ro,[8,null]],null,null),(n()(),o["\u0275ted"](-1,0,["\xd7"])),(n()(),o["\u0275and"](16777216,null,0,1,null,Yc)),o["\u0275did"](13,278528,null,0,yt.NgSwitchCase,[o.ViewContainerRef,o.TemplateRef,yt.NgSwitch],{ngSwitchCase:[0,"ngSwitchCase"]},null),(n()(),o["\u0275and"](16777216,null,0,1,null,Xc)),o["\u0275did"](15,278528,null,0,yt.NgSwitchCase,[o.ViewContainerRef,o.TemplateRef,yt.NgSwitch],{ngSwitchCase:[0,"ngSwitchCase"]},null),(n()(),o["\u0275and"](16777216,null,0,1,null,Qc)),o["\u0275did"](17,278528,null,0,yt.NgSwitchCase,[o.ViewContainerRef,o.TemplateRef,yt.NgSwitch],{ngSwitchCase:[0,"ngSwitchCase"]},null),(n()(),o["\u0275eld"](18,0,null,0,19,"mat-sidenav",[["class","col-xl-6 mat-drawer mat-sidenav"],["mode","over"],["opened","false"],["position","end"],["tabIndex","-1"]],[[40,"@transform",0],[1,"align",0],[2,"mat-drawer-end",null],[2,"mat-drawer-over",null],[2,"mat-drawer-push",null],[2,"mat-drawer-side",null],[2,"mat-sidenav-fixed",null],[4,"top","px"],[4,"bottom","px"]],[[null,"closedStart"],["component","@transform.start"],["component","@transform.done"]],function(n,e,l){var t=!0,i=n.component;return"component:@transform.start"===e&&(t=!1!==o["\u0275nov"](n,19)._onAnimationStart(l)&&t),"component:@transform.done"===e&&(t=!1!==o["\u0275nov"](n,19)._onAnimationEnd(l)&&t),"closedStart"===e&&(t=!1!==i.sidenavToggle("right",null)&&t),t},gc,hc)),o["\u0275did"](19,3325952,[[3,4],[2,4],["sidenavRight",4]],0,cc,[o.ElementRef,Rt.g,Rt.f,Ct.a,o.NgZone,[2,yt.DOCUMENT]],{position:[0,"position"],mode:[1,"mode"],opened:[2,"opened"]},{closedStart:"closedStart"}),o["\u0275did"](20,16384,null,0,yt.NgSwitch,[],{ngSwitch:[0,"ngSwitch"]},null),(n()(),o["\u0275eld"](21,0,null,0,4,"button",[["mat-mini-fab",""]],[[8,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"]],function(n,e,l){var t=!0;return"click"===e&&(t=!1!==n.component.sidenavToggle("right",null)&&t),t},ho.b,ho.a)),o["\u0275did"](22,180224,null,0,go.b,[o.ElementRef,Ct.a,Rt.f,[2,Di.a]],null,null),(n()(),o["\u0275eld"](23,0,null,0,2,"mat-icon",[["class","mat-icon"],["role","img"]],[[2,"mat-icon-inline",null]],null,null,mo,fo)),o["\u0275did"](24,638976,null,0,co,[o.ElementRef,ro,[8,null]],null,null),(n()(),o["\u0275ted"](-1,0,["\xd7"])),(n()(),o["\u0275and"](16777216,null,0,1,null,Kc)),o["\u0275did"](27,278528,null,0,yt.NgSwitchCase,[o.ViewContainerRef,o.TemplateRef,yt.NgSwitch],{ngSwitchCase:[0,"ngSwitchCase"]},null),(n()(),o["\u0275and"](16777216,null,0,1,null,Jc)),o["\u0275did"](29,278528,null,0,yt.NgSwitchCase,[o.ViewContainerRef,o.TemplateRef,yt.NgSwitch],{ngSwitchCase:[0,"ngSwitchCase"]},null),(n()(),o["\u0275and"](16777216,null,0,1,null,nd)),o["\u0275did"](31,278528,null,0,yt.NgSwitchCase,[o.ViewContainerRef,o.TemplateRef,yt.NgSwitch],{ngSwitchCase:[0,"ngSwitchCase"]},null),(n()(),o["\u0275and"](16777216,null,0,1,null,ed)),o["\u0275did"](33,278528,null,0,yt.NgSwitchCase,[o.ViewContainerRef,o.TemplateRef,yt.NgSwitch],{ngSwitchCase:[0,"ngSwitchCase"]},null),(n()(),o["\u0275and"](16777216,null,0,1,null,ld)),o["\u0275did"](35,278528,null,0,yt.NgSwitchCase,[o.ViewContainerRef,o.TemplateRef,yt.NgSwitch],{ngSwitchCase:[0,"ngSwitchCase"]},null),(n()(),o["\u0275and"](16777216,null,0,1,null,td)),o["\u0275did"](37,278528,null,0,yt.NgSwitchCase,[o.ViewContainerRef,o.TemplateRef,yt.NgSwitch],{ngSwitchCase:[0,"ngSwitchCase"]},null),(n()(),o["\u0275eld"](38,0,null,1,89,"mat-sidenav-content",[["class","mat-drawer-content mat-sidenav-content"]],[[4,"margin-left","px"],[4,"margin-right","px"]],null,null,mc,fc)),o["\u0275did"](39,1097728,[[4,4]],0,sc,[o.ChangeDetectorRef,dc],null,null),(n()(),o["\u0275eld"](40,0,null,0,84,"header",[],null,null,null,null,null)),(n()(),o["\u0275eld"](41,0,null,null,83,"nav",[["class","navbar navbar-expand-md navbar-light bg-faded"]],null,null,null,null,null)),(n()(),o["\u0275eld"](42,0,null,null,1,"button",[["class","navbar-toggler"],["type","button"]],[[1,"aria-expanded",0]],[[null,"click"]],function(n,e,l){var t=!0,i=n.component;return"click"===e&&(t=0!=(i.isVisible=!i.isVisible)&&t),t},null,null)),(n()(),o["\u0275eld"](43,0,null,null,0,"span",[["class","navbar-toggler-icon"]],null,null,null,null,null)),(n()(),o["\u0275eld"](44,0,null,null,80,"div",[["class","collapse navbar-collapse justify-content-between"]],[[2,"collapse",null],[2,"show",null]],null,null,null,null)),o["\u0275did"](45,16384,null,0,Ru.a,[],{collapsed:[0,"collapsed"]},null),(n()(),o["\u0275eld"](46,0,null,null,67,"ul",[["class","nav navbar-nav align-items-center"]],null,null,null,null,null)),(n()(),o["\u0275eld"](47,0,null,null,10,"li",[["class","nav-item"]],null,null,null,null,null)),(n()(),o["\u0275eld"](48,0,null,null,9,"a",[["class","nav-link"],["routerLinkActive","active"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(n,e,l){var t=!0;return"click"===e&&(t=!1!==o["\u0275nov"](n,49).onClick(l.button,l.ctrlKey,l.metaKey,l.shiftKey)&&t),t},null,null)),o["\u0275did"](49,671744,[[6,4]],0,wc.o,[wc.l,wc.a,yt.LocationStrategy],{routerLink:[0,"routerLink"]},null),o["\u0275pad"](50,1),o["\u0275did"](51,1720320,null,2,wc.n,[wc.l,o.ElementRef,o.Renderer2,o.ChangeDetectorRef],{routerLinkActive:[0,"routerLinkActive"]},null),o["\u0275qud"](603979776,5,{links:1}),o["\u0275qud"](603979776,6,{linksWithHrefs:1}),(n()(),o["\u0275eld"](54,0,null,null,2,"fa-icon",[["aria-hidden","true"],["class","ng-fa-icon"]],[[8,"innerHTML",1]],null,null,Lt.b,Lt.a)),o["\u0275did"](55,573440,null,0,$t.a,[qt.c],{iconProp:[0,"iconProp"]},null),o["\u0275pad"](56,2),(n()(),o["\u0275ted"](-1,null,[" Town "])),(n()(),o["\u0275eld"](58,0,null,null,5,"li",[["class","nav-item"]],null,null,null,null,null)),(n()(),o["\u0275eld"](59,0,null,null,4,"a",[["class","nav-link"]],null,[[null,"click"]],function(n,e,l){var t=!0;return"click"===e&&(t=!1!==n.component.sidenavToggle("left","alliance")&&t),t},null,null)),(n()(),o["\u0275eld"](60,0,null,null,2,"fa-icon",[["aria-hidden","true"],["class","ng-fa-icon"]],[[8,"innerHTML",1]],null,null,Lt.b,Lt.a)),o["\u0275did"](61,573440,null,0,$t.a,[qt.c],{iconProp:[0,"iconProp"]},null),o["\u0275pad"](62,2),(n()(),o["\u0275ted"](-1,null,[" Alliance "])),(n()(),o["\u0275eld"](64,0,null,null,10,"li",[["class","nav-item"]],null,null,null,null,null)),(n()(),o["\u0275eld"](65,0,null,null,9,"a",[["class","nav-link"],["routerLinkActive","active"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(n,e,l){var t=!0;return"click"===e&&(t=!1!==o["\u0275nov"](n,66).onClick(l.button,l.ctrlKey,l.metaKey,l.shiftKey)&&t),t},null,null)),o["\u0275did"](66,671744,[[8,4]],0,wc.o,[wc.l,wc.a,yt.LocationStrategy],{routerLink:[0,"routerLink"]},null),o["\u0275pad"](67,1),o["\u0275did"](68,1720320,null,2,wc.n,[wc.l,o.ElementRef,o.Renderer2,o.ChangeDetectorRef],{routerLinkActive:[0,"routerLinkActive"]},null),o["\u0275qud"](603979776,7,{links:1}),o["\u0275qud"](603979776,8,{linksWithHrefs:1}),(n()(),o["\u0275eld"](71,0,null,null,2,"fa-icon",[["aria-hidden","true"],["class","ng-fa-icon"]],[[8,"innerHTML",1]],null,null,Lt.b,Lt.a)),o["\u0275did"](72,573440,null,0,$t.a,[qt.c],{iconProp:[0,"iconProp"]},null),o["\u0275pad"](73,2),(n()(),o["\u0275ted"](-1,null,[" Map "])),(n()(),o["\u0275eld"](75,0,null,null,2,"li",[["class","nav-item"]],null,null,null,null,null)),(n()(),o["\u0275and"](16777216,null,null,1,null,id)),o["\u0275did"](77,16384,null,0,yt.NgIf,[o.ViewContainerRef,o.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),o["\u0275eld"](78,0,null,null,8,"li",[["class","nav-item"]],null,null,null,null,null)),(n()(),o["\u0275eld"](79,0,null,null,7,"a",[["class","nav-link"],["routerLinkActive","active"]],null,[[null,"click"]],function(n,e,l){var t=!0;return"click"===e&&(t=!1!==n.component.sidenavToggle("left","movement")&&t),t},null,null)),o["\u0275did"](80,1720320,null,2,wc.n,[wc.l,o.ElementRef,o.Renderer2,o.ChangeDetectorRef],{routerLinkActive:[0,"routerLinkActive"]},null),o["\u0275qud"](603979776,9,{links:1}),o["\u0275qud"](603979776,10,{linksWithHrefs:1}),(n()(),o["\u0275eld"](83,0,null,null,2,"fa-icon",[["aria-hidden","true"],["class","ng-fa-icon"]],[[8,"innerHTML",1]],null,null,Lt.b,Lt.a)),o["\u0275did"](84,573440,null,0,$t.a,[qt.c],{iconProp:[0,"iconProp"]},null),o["\u0275pad"](85,2),(n()(),o["\u0275ted"](-1,null,[" Movements "])),(n()(),o["\u0275eld"](87,0,null,null,8,"li",[["class","nav-item"]],null,null,null,null,null)),(n()(),o["\u0275eld"](88,0,null,null,7,"a",[["class","nav-link"],["routerLinkActive","active"]],null,[[null,"click"]],function(n,e,l){var t=!0;return"click"===e&&(t=!1!==n.component.sidenavToggle("right","support")&&t),t},null,null)),o["\u0275did"](89,1720320,null,2,wc.n,[wc.l,o.ElementRef,o.Renderer2,o.ChangeDetectorRef],{routerLinkActive:[0,"routerLinkActive"]},null),o["\u0275qud"](603979776,11,{links:1}),o["\u0275qud"](603979776,12,{linksWithHrefs:1}),(n()(),o["\u0275eld"](92,0,null,null,2,"fa-icon",[["aria-hidden","true"],["class","ng-fa-icon"]],[[8,"innerHTML",1]],null,null,Lt.b,Lt.a)),o["\u0275did"](93,573440,null,0,$t.a,[qt.c],{iconProp:[0,"iconProp"]},null),o["\u0275pad"](94,2),(n()(),o["\u0275ted"](-1,null,[" Support "])),(n()(),o["\u0275eld"](96,0,null,null,8,"li",[["class","nav-item"]],null,null,null,null,null)),(n()(),o["\u0275eld"](97,0,null,null,7,"a",[["class","nav-link"],["routerLinkActive","active"]],null,[[null,"click"]],function(n,e,l){var t=!0;return"click"===e&&(t=!1!==n.component.sidenavToggle("right","report")&&t),t},null,null)),o["\u0275did"](98,1720320,null,2,wc.n,[wc.l,o.ElementRef,o.Renderer2,o.ChangeDetectorRef],{routerLinkActive:[0,"routerLinkActive"]},null),o["\u0275qud"](603979776,13,{links:1}),o["\u0275qud"](603979776,14,{linksWithHrefs:1}),(n()(),o["\u0275eld"](101,0,null,null,2,"fa-icon",[["aria-hidden","true"],["class","ng-fa-icon"]],[[8,"innerHTML",1]],null,null,Lt.b,Lt.a)),o["\u0275did"](102,573440,null,0,$t.a,[qt.c],{iconProp:[0,"iconProp"]},null),o["\u0275pad"](103,2),(n()(),o["\u0275ted"](-1,null,[" Reports "])),(n()(),o["\u0275eld"](105,0,null,null,8,"li",[["class","nav-item"]],null,null,null,null,null)),(n()(),o["\u0275eld"](106,0,null,null,7,"a",[["class","nav-link"],["routerLinkActive","active"]],null,[[null,"click"]],function(n,e,l){var t=!0;return"click"===e&&(t=!1!==n.component.sidenavToggle("right","rankings")&&t),t},null,null)),o["\u0275did"](107,1720320,null,2,wc.n,[wc.l,o.ElementRef,o.Renderer2,o.ChangeDetectorRef],{routerLinkActive:[0,"routerLinkActive"]},null),o["\u0275qud"](603979776,15,{links:1}),o["\u0275qud"](603979776,16,{linksWithHrefs:1}),(n()(),o["\u0275eld"](110,0,null,null,2,"fa-icon",[["aria-hidden","true"],["class","ng-fa-icon"]],[[8,"innerHTML",1]],null,null,Lt.b,Lt.a)),o["\u0275did"](111,573440,null,0,$t.a,[qt.c],{iconProp:[0,"iconProp"]},null),o["\u0275pad"](112,2),(n()(),o["\u0275ted"](-1,null,[" Rankings "])),(n()(),o["\u0275eld"](114,0,null,null,10,"div",[["class","d-flex justify-content-center align-items-center"]],null,null,null,null,null)),(n()(),o["\u0275and"](16777216,null,null,2,null,od)),o["\u0275did"](116,16384,null,0,yt.NgIf,[o.ViewContainerRef,o.TemplateRef],{ngIf:[0,"ngIf"]},null),o["\u0275pid"](131072,yt.AsyncPipe,[o.ChangeDetectorRef]),(n()(),o["\u0275and"](16777216,null,null,1,null,rd)),o["\u0275did"](119,16384,null,0,yt.NgIf,[o.ViewContainerRef,o.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),o["\u0275eld"](120,0,null,null,4,"div",[["class","nav-item"]],null,null,null,null,null)),(n()(),o["\u0275eld"](121,0,null,null,3,"a",[["class","nav-link"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(n,e,l){var t=!0,i=n.component;return"click"===e&&(t=!1!==o["\u0275nov"](n,122).onClick(l.button,l.ctrlKey,l.metaKey,l.shiftKey)&&t),"click"===e&&(t=!1!==i.logout()&&t),t},null,null)),o["\u0275did"](122,671744,null,0,wc.o,[wc.l,wc.a,yt.LocationStrategy],{routerLink:[0,"routerLink"]},null),o["\u0275pad"](123,1),(n()(),o["\u0275ted"](-1,null,["Logout"])),(n()(),o["\u0275eld"](125,0,null,0,2,"div",[["class","container-fluid"]],null,null,null,null,null)),(n()(),o["\u0275eld"](126,16777216,null,null,1,"router-outlet",[],null,null,null,null,null)),o["\u0275did"](127,212992,null,0,wc.q,[wc.b,o.ViewContainerRef,o.ComponentFactoryResolver,[8,null],o.ChangeDetectorRef],null,null)],function(n,e){var l=e.component;n(e,1,0),n(e,5,0,"start","over","false"),n(e,6,0,o["\u0275nov"](e,5).comp),n(e,10,0),n(e,13,0,"movement"),n(e,15,0,"command"),n(e,17,0,"alliance"),n(e,19,0,"end","over","false"),n(e,20,0,o["\u0275nov"](e,19).comp),n(e,24,0),n(e,27,0,"recruit"),n(e,29,0,"report"),n(e,31,0,"support"),n(e,33,0,"rankings"),n(e,35,0,"allianceProfile"),n(e,37,0,"playerProfile"),n(e,45,0,!l.isVisible),n(e,49,0,n(e,50,0,"./town")),n(e,51,0,"active"),n(e,55,0,n(e,56,0,"fas","home")),n(e,61,0,n(e,62,0,"fas","hands-helping")),n(e,66,0,n(e,67,0,"./map")),n(e,68,0,"active"),n(e,72,0,n(e,73,0,"fas","globe")),n(e,77,0,l.canRecruit),n(e,80,0,"active"),n(e,84,0,n(e,85,0,"fas","arrows-alt")),n(e,89,0,"active"),n(e,93,0,n(e,94,0,"fas","shield-alt")),n(e,98,0,"active"),n(e,102,0,n(e,103,0,"fas","flag")),n(e,107,0,"active"),n(e,111,0,n(e,112,0,"fas","sort-amount-up")),n(e,116,0,o["\u0275unv"](e,116,0,o["\u0275nov"](e,117).transform(l.player$))),n(e,119,0,l.townList.length>1),n(e,122,0,n(e,123,0,"/")),n(e,127,0)},function(n,e){var l=e.component;n(e,0,0,o["\u0275nov"](e,1)._backdropOverride),n(e,4,0,o["\u0275nov"](e,5)._animationState,null,"end"===o["\u0275nov"](e,5).position,"over"===o["\u0275nov"](e,5).mode,"push"===o["\u0275nov"](e,5).mode,"side"===o["\u0275nov"](e,5).mode,o["\u0275nov"](e,5).fixedInViewport,o["\u0275nov"](e,5).fixedInViewport?o["\u0275nov"](e,5).fixedTopGap:null,o["\u0275nov"](e,5).fixedInViewport?o["\u0275nov"](e,5).fixedBottomGap:null),n(e,7,0,o["\u0275nov"](e,8).disabled||null,"NoopAnimations"===o["\u0275nov"](e,8)._animationMode),n(e,9,0,o["\u0275nov"](e,10).inline),n(e,18,0,o["\u0275nov"](e,19)._animationState,null,"end"===o["\u0275nov"](e,19).position,"over"===o["\u0275nov"](e,19).mode,"push"===o["\u0275nov"](e,19).mode,"side"===o["\u0275nov"](e,19).mode,o["\u0275nov"](e,19).fixedInViewport,o["\u0275nov"](e,19).fixedInViewport?o["\u0275nov"](e,19).fixedTopGap:null,o["\u0275nov"](e,19).fixedInViewport?o["\u0275nov"](e,19).fixedBottomGap:null),n(e,21,0,o["\u0275nov"](e,22).disabled||null,"NoopAnimations"===o["\u0275nov"](e,22)._animationMode),n(e,23,0,o["\u0275nov"](e,24).inline),n(e,38,0,o["\u0275nov"](e,39)._container._contentMargins.left,o["\u0275nov"](e,39)._container._contentMargins.right),n(e,42,0,l.isVisible),n(e,44,0,!0,!o["\u0275nov"](e,45).collapsed),n(e,48,0,o["\u0275nov"](e,49).target,o["\u0275nov"](e,49).href),n(e,54,0,o["\u0275nov"](e,55).renderedIconHTML),n(e,60,0,o["\u0275nov"](e,61).renderedIconHTML),n(e,65,0,o["\u0275nov"](e,66).target,o["\u0275nov"](e,66).href),n(e,71,0,o["\u0275nov"](e,72).renderedIconHTML),n(e,83,0,o["\u0275nov"](e,84).renderedIconHTML),n(e,92,0,o["\u0275nov"](e,93).renderedIconHTML),n(e,101,0,o["\u0275nov"](e,102).renderedIconHTML),n(e,110,0,o["\u0275nov"](e,111).renderedIconHTML),n(e,121,0,o["\u0275nov"](e,122).target,o["\u0275nov"](e,122).href)})}function sd(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,9,"div",[["class","pt-5 d-flex justify-content-center align-items-center"]],null,null,null,null,null)),(n()(),o["\u0275eld"](1,0,null,null,8,"p",[],null,null,null,null,null)),(n()(),o["\u0275ted"](-1,null,[" All your towns have been conquered."])),(n()(),o["\u0275eld"](3,0,null,null,0,"br",[],null,null,null,null,null)),(n()(),o["\u0275ted"](-1,null,[" You are no more."])),(n()(),o["\u0275eld"](5,0,null,null,0,"br",[],null,null,null,null,null)),(n()(),o["\u0275eld"](6,0,null,null,1,"strong",[["class","d-flex my-2"]],null,null,null,null,null)),(n()(),o["\u0275ted"](-1,null,["Care to try again?"])),(n()(),o["\u0275eld"](8,0,null,null,1,"button",[["class","btn btn-primary btn-lg"]],null,[[null,"click"]],function(n,e,l){var t=!0;return"click"===e&&(t=!1!==n.component.restart()&&t),t},null,null)),(n()(),o["\u0275ted"](-1,null,["Restart"]))],null,null)}function cd(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,3,"div",[["class","game-chat"]],null,null,null,null,null)),(n()(),o["\u0275eld"](1,0,null,null,2,"alliance-chat",[],null,null,null,Nc,Fc)),o["\u0275did"](2,114688,null,0,Dc,[O.n,u.a],{player:[0,"player"]},null),o["\u0275pid"](131072,yt.AsyncPipe,[o.ChangeDetectorRef])],function(n,e){var l=e.component;n(e,2,0,o["\u0275unv"](e,2,0,o["\u0275nov"](e,3).transform(l.player$)))},null)}function dd(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,1,"tutorial",[],null,[[null,"progressTutorial"]],function(n,e,l){var t=!0;return"progressTutorial"===e&&(t=!1!==n.component.progressTutorial()&&t),t},Vc,qc)),o["\u0275did"](1,114688,null,0,$c,[Wr.e],{stage:[0,"stage"]},{progressTutorial:"progressTutorial"})],function(n,e){n(e,1,0,e.context.ngIf.tutorialStage)},null)}function pd(n){return o["\u0275vid"](0,[o["\u0275qud"](671088640,1,{sidenavLeft:0}),o["\u0275qud"](671088640,2,{sidenavRight:0}),(n()(),o["\u0275and"](16777216,null,null,1,null,ud)),o["\u0275did"](3,16384,null,0,yt.NgIf,[o.ViewContainerRef,o.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),o["\u0275and"](16777216,null,null,2,null,sd)),o["\u0275did"](5,16384,null,0,yt.NgIf,[o.ViewContainerRef,o.TemplateRef],{ngIf:[0,"ngIf"]},null),o["\u0275pid"](131072,yt.AsyncPipe,[o.ChangeDetectorRef]),(n()(),o["\u0275and"](16777216,null,null,2,null,cd)),o["\u0275did"](8,16384,null,0,yt.NgIf,[o.ViewContainerRef,o.TemplateRef],{ngIf:[0,"ngIf"]},null),o["\u0275pid"](131072,yt.AsyncPipe,[o.ChangeDetectorRef]),(n()(),o["\u0275and"](16777216,null,null,2,null,dd)),o["\u0275did"](11,16384,null,0,yt.NgIf,[o.ViewContainerRef,o.TemplateRef],{ngIf:[0,"ngIf"]},null),o["\u0275pid"](131072,yt.AsyncPipe,[o.ChangeDetectorRef])],function(n,e){var l=e.component;n(e,3,0,l.activeTown),n(e,5,0,o["\u0275unv"](e,5,0,o["\u0275nov"](e,6).transform(l.noTowns$))),n(e,8,0,o["\u0275unv"](e,8,0,o["\u0275nov"](e,9).transform(l.alliance$))),n(e,11,0,o["\u0275unv"](e,11,0,o["\u0275nov"](e,12).transform(l.player$)))},null)}var fd=o["\u0275ccf"]("game-container",Wc,function(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,1,"game-container",[],null,null,null,pd,Gc)),o["\u0275did"](1,245760,null,0,Wc,[O.n,Zc.b,u.a],null,null)],function(n,e){n(e,1,0)},null)},{},{},[]),md=function(){function n(){}return n.prototype.ngOnChanges=function(){this.updateLoyalty()},n.prototype.updateLoyalty=function(){var n=Date.now(),e=this.calculateLoyaltyGrowth(+this.town.updatedAt,n),l=this.town.loyalty+e;this.loyalty=Math.floor(Math.min(100,l)),this.loyalty<100&&this.queueNextUpdate(l)},n.prototype.calculateLoyaltyGrowth=function(n,e){return this.loyaltyRegeneration*((e-n)/36e5)},n.prototype.queueNextUpdate=function(n){var e=this;setTimeout(function(){return e.updateLoyalty()},36e5/this.loyaltyRegeneration*(1-n%1))},n}(),hd=o["\u0275crt"]({encapsulation:0,styles:[[""]],data:{}});function gd(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,1,"strong",[["class","ml-4 text-danger"]],null,null,null,null,null)),(n()(),o["\u0275ted"](1,null,["Loyalty: ",""]))],null,function(n,e){n(e,1,0,e.component.loyalty)})}function vd(n){return o["\u0275vid"](0,[(n()(),o["\u0275and"](16777216,null,null,1,null,gd)),o["\u0275did"](1,16384,null,0,yt.NgIf,[o.ViewContainerRef,o.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(n,e){n(e,1,0,e.component.loyalty<100)},null)}var bd=Object.assign||function(n){for(var e,l=1,t=arguments.length;l<t;l++)for(var i in e=arguments[l])Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n},yd=function(){function n(){this.build=new o.EventEmitter,this.buildings=[],this.buildingDetails=oi,Wt.d.add(Zt.f)}return n.prototype.ngOnChanges=function(n){var e=this;Au(this.town).pipe(Object(Tl.a)(1)).subscribe(function(n){e.buildings=Object.entries(e.town.buildings).map(function(l){var t,i,o,a=l[0],r=l[1],u=r.queued||r.level,s=e.worldData.buildingMap[a],c=s.requirements,d=s.data[u],p=(o=e.town.production,!function(n,e){return n.wood>=e.wood&&n.clay>=e.clay&&n.iron>=e.iron}(t=n,i=d.costs)&&36e5*Math.max.apply(Math,Object.entries(t).map(function(n){var e=n[0];return(i[e]-n[1])/o[e]}))),f=!0;return!u&&c&&(f=c.every(function(n){return n.level<=e.town.buildings[n.item].level})),bd({},r,d,{name:a,next:u,requirements:c,available:f,availableIn:p})});var l=e.buildings.reduce(function(n,e){var l=e.availableIn;return e.available&&l>0?Math.min(n,l):n},1/0);l!==1/0&&(e.updateAvailability$&&e.updateAvailability$.unsubscribe(),e.updateAvailability$=Object(Ut.a)(l).subscribe(function(){return e.ngOnChanges()}))})},n.prototype.upgrade=function(n){this.build.emit({building:n.name,level:n.level})},n}(),_d=o["\u0275crt"]({encapsulation:0,styles:[[""]],data:{}});function wd(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,1,"span",[],null,null,null,null,null)),(n()(),o["\u0275ted"](1,null,["(building ",")"]))],null,function(n,e){n(e,1,0,e.parent.context.$implicit.queued)})}function Cd(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,15,"div",[["class","col-sm-5 d-flex"]],null,null,null,null,null)),(n()(),o["\u0275eld"](1,0,null,null,3,"div",[["class","resource"]],null,null,null,null,null)),(n()(),o["\u0275eld"](2,0,null,null,0,"div",[["class","resource-icon wood"]],null,null,null,null,null)),(n()(),o["\u0275ted"](3,null,["",""])),o["\u0275ppd"](4,2),(n()(),o["\u0275eld"](5,0,null,null,3,"div",[["class","resource"]],null,null,null,null,null)),(n()(),o["\u0275eld"](6,0,null,null,0,"div",[["class","resource-icon clay"]],null,null,null,null,null)),(n()(),o["\u0275ted"](7,null,["",""])),o["\u0275ppd"](8,2),(n()(),o["\u0275eld"](9,0,null,null,3,"div",[["class","resource"]],null,null,null,null,null)),(n()(),o["\u0275eld"](10,0,null,null,0,"div",[["class","resource-icon iron"]],null,null,null,null,null)),(n()(),o["\u0275ted"](11,null,["",""])),o["\u0275ppd"](12,2),(n()(),o["\u0275eld"](13,0,null,null,2,"div",[],null,null,null,null,null)),(n()(),o["\u0275ted"](14,null,["time ",""])),o["\u0275ppd"](15,2)],null,function(n,e){n(e,3,0,o["\u0275unv"](e,3,0,n(e,4,0,o["\u0275nov"](e.parent.parent,0),e.parent.context.$implicit.costs.wood,"1.0-0"))),n(e,7,0,o["\u0275unv"](e,7,0,n(e,8,0,o["\u0275nov"](e.parent.parent,0),e.parent.context.$implicit.costs.clay,"1.0-0"))),n(e,11,0,o["\u0275unv"](e,11,0,n(e,12,0,o["\u0275nov"](e.parent.parent,0),e.parent.context.$implicit.costs.iron,"1.0-0"))),n(e,14,0,o["\u0275unv"](e,14,0,n(e,15,0,o["\u0275nov"](e.parent.parent,1),e.parent.context.$implicit.buildTime,"HH:mm:ss")))})}function Rd(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,2,"div",[["class","col-sm-5 d-flex"]],null,null,null,null,null)),(n()(),o["\u0275eld"](1,0,null,null,1,"strong",[["class","text-warning"]],null,null,null,null,null)),(n()(),o["\u0275ted"](2,null,["Requires: "," - ",""]))],null,function(n,e){n(e,2,0,e.parent.context.$implicit.requirements[0].item,e.parent.context.$implicit.requirements[0].level)})}function xd(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,1,"button",[["class","btn btn-success"],["style","cursor: pointer;"]],null,[[null,"click"]],function(n,e,l){var t=!0;return"click"===e&&(t=!1!==n.component.upgrade(n.parent.parent.context.$implicit)&&t),t},null,null)),(n()(),o["\u0275ted"](-1,null,["Upgrade"]))],null,null)}function Sd(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,1,"strong",[["class","text-warning"]],null,null,null,null,null)),(n()(),o["\u0275ted"](-1,null,["Missing resources."]))],null,null)}function kd(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,4,"div",[["class","col-sm-3"]],null,null,null,null,null)),(n()(),o["\u0275and"](16777216,null,null,1,null,xd)),o["\u0275did"](2,16384,null,0,yt.NgIf,[o.ViewContainerRef,o.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),o["\u0275and"](16777216,null,null,1,null,Sd)),o["\u0275did"](4,16384,null,0,yt.NgIf,[o.ViewContainerRef,o.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(n,e){n(e,2,0,!e.parent.context.$implicit.availableIn),n(e,4,0,e.parent.context.$implicit.availableIn)},null)}function Id(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,4,"div",[["class","row pt-2"]],null,null,null,null,null)),(n()(),o["\u0275eld"](1,0,null,null,1,"div",[["class","col-md-6"]],null,null,null,null,null)),(n()(),o["\u0275ted"](2,null,["Current level ",": ",""])),(n()(),o["\u0275eld"](3,0,null,null,1,"div",[["class","col-md-6"]],null,null,null,null,null)),(n()(),o["\u0275ted"](4,null,["Next level ",": ",""]))],null,function(n,e){var l=e.component;n(e,2,0,e.parent.context.$implicit.detailText,l.worldData.buildingMap[e.parent.parent.context.$implicit.name].data[e.parent.parent.context.$implicit.level][e.parent.context.$implicit.details]),n(e,4,0,e.parent.context.$implicit.detailText,l.worldData.buildingMap[e.parent.parent.context.$implicit.name].data[e.parent.parent.context.$implicit.level+1][e.parent.context.$implicit.details])})}function Od(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,4,"div",[["class","card p-3"]],null,null,null,null,null)),(n()(),o["\u0275eld"](1,0,null,null,1,"div",[],null,null,null,null,null)),(n()(),o["\u0275ted"](2,null,["",""])),(n()(),o["\u0275and"](16777216,null,null,1,null,Id)),o["\u0275did"](4,16384,null,0,yt.NgIf,[o.ViewContainerRef,o.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(n,e){n(e,4,0,e.context.$implicit.details)},function(n,e){n(e,2,0,e.context.$implicit.description)})}function Pd(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,20,"div",[["class","py-1"]],null,null,null,null,null)),(n()(),o["\u0275eld"](1,0,null,null,14,"div",[["class","row align-items-center"]],null,null,null,null,null)),(n()(),o["\u0275eld"](2,0,null,null,7,"div",[["class","col-sm-4"],["style","cursor: pointer;"]],null,[[null,"click"]],function(n,e,l){var t=!0;return"click"===e&&(t=0!=(n.context.$implicit.visible=!n.context.$implicit.visible)&&t),t},null,null)),(n()(),o["\u0275eld"](3,0,null,null,2,"fa-icon",[["class","pr-1 ng-fa-icon"]],[[8,"innerHTML",1]],null,null,Lt.b,Lt.a)),o["\u0275did"](4,573440,null,0,$t.a,[qt.c],{iconProp:[0,"iconProp"],rotate:[1,"rotate"]},null),o["\u0275pad"](5,2),(n()(),o["\u0275eld"](6,0,null,null,1,"span",[["class","pr-2"]],null,null,null,null,null)),(n()(),o["\u0275ted"](7,null,[""," - ",""])),(n()(),o["\u0275and"](16777216,null,null,1,null,wd)),o["\u0275did"](9,16384,null,0,yt.NgIf,[o.ViewContainerRef,o.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),o["\u0275and"](16777216,null,null,1,null,Cd)),o["\u0275did"](11,16384,null,0,yt.NgIf,[o.ViewContainerRef,o.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),o["\u0275and"](16777216,null,null,1,null,Rd)),o["\u0275did"](13,16384,null,0,yt.NgIf,[o.ViewContainerRef,o.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),o["\u0275and"](16777216,null,null,1,null,kd)),o["\u0275did"](15,16384,null,0,yt.NgIf,[o.ViewContainerRef,o.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),o["\u0275eld"](16,0,null,null,4,"div",[["class","row my-1"]],[[2,"collapse",null],[2,"show",null]],null,null,null,null)),o["\u0275did"](17,16384,null,0,Ru.a,[],{collapsed:[0,"collapsed"]},null),(n()(),o["\u0275eld"](18,0,null,null,2,"div",[["class","col"]],null,null,null,null,null)),(n()(),o["\u0275and"](16777216,null,null,1,null,Od)),o["\u0275did"](20,16384,null,0,yt.NgIf,[o.ViewContainerRef,o.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(n,e){var l=e.component;n(e,4,0,n(e,5,0,"fas","chevron-right"),e.context.$implicit.visible?90:0),n(e,9,0,e.context.$implicit.queued),n(e,11,0,e.context.$implicit.costs),n(e,13,0,!e.context.$implicit.available),n(e,15,0,e.context.$implicit.available),n(e,17,0,!e.context.$implicit.visible),n(e,20,0,l.buildingDetails[e.context.$implicit.name])},function(n,e){var l=e.component;n(e,3,0,o["\u0275nov"](e,4).renderedIconHTML),n(e,7,0,l.buildingDetails[e.context.$implicit.name].name,e.context.$implicit.level),n(e,16,0,!0,!o["\u0275nov"](e,17).collapsed)})}function Td(n){return o["\u0275vid"](0,[o["\u0275pid"](0,yt.DecimalPipe,[o.LOCALE_ID]),o["\u0275pid"](0,Vt,[]),(n()(),o["\u0275eld"](2,0,null,null,4,"div",[],null,null,null,null,null)),(n()(),o["\u0275eld"](3,0,null,null,1,"strong",[],null,null,null,null,null)),(n()(),o["\u0275ted"](-1,null,["Buildings"])),(n()(),o["\u0275and"](16777216,null,null,1,null,Pd)),o["\u0275did"](6,802816,null,0,yt.NgForOf,[o.ViewContainerRef,o.TemplateRef,o.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],function(n,e){n(e,6,0,e.component.buildings)},null)}var Ad=function(){function n(){}return n.prototype.ngOnChanges=function(){this.availableResources$=Au(this.town)},n}(),Dd=o["\u0275crt"]({encapsulation:0,styles:[[""]],data:{}});function Fd(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,15,"div",[],null,null,null,null,null)),(n()(),o["\u0275eld"](1,0,null,null,4,"div",[["class","resource"]],null,null,null,null,null)),(n()(),o["\u0275eld"](2,0,null,null,0,"div",[["class","resource-icon wood"]],null,null,null,null,null)),(n()(),o["\u0275ted"](3,null,["","/"," (+",")"])),o["\u0275ppd"](4,2),o["\u0275ppd"](5,2),(n()(),o["\u0275eld"](6,0,null,null,4,"div",[["class","resource"]],null,null,null,null,null)),(n()(),o["\u0275eld"](7,0,null,null,0,"div",[["class","resource-icon clay"]],null,null,null,null,null)),(n()(),o["\u0275ted"](8,null,["","/"," (+",")"])),o["\u0275ppd"](9,2),o["\u0275ppd"](10,2),(n()(),o["\u0275eld"](11,0,null,null,4,"div",[["class","resource"]],null,null,null,null,null)),(n()(),o["\u0275eld"](12,0,null,null,0,"div",[["class","resource-icon iron"]],null,null,null,null,null)),(n()(),o["\u0275ted"](13,null,["","/"," (+",")"])),o["\u0275ppd"](14,2),o["\u0275ppd"](15,2)],null,function(n,e){var l=e.component;n(e,3,0,o["\u0275unv"](e,3,0,n(e,4,0,o["\u0275nov"](e.parent,0),e.context.$implicit.wood,"1.0-0")),l.town.storage,o["\u0275unv"](e,3,2,n(e,5,0,o["\u0275nov"](e.parent,0),l.town.production.wood,"1.0-0"))),n(e,8,0,o["\u0275unv"](e,8,0,n(e,9,0,o["\u0275nov"](e.parent,0),e.context.$implicit.clay,"1.0-0")),l.town.storage,o["\u0275unv"](e,8,2,n(e,10,0,o["\u0275nov"](e.parent,0),l.town.production.clay,"1.0-0"))),n(e,13,0,o["\u0275unv"](e,13,0,n(e,14,0,o["\u0275nov"](e.parent,0),e.context.$implicit.iron,"1.0-0")),l.town.storage,o["\u0275unv"](e,13,2,n(e,15,0,o["\u0275nov"](e.parent,0),l.town.production.iron,"1.0-0")))})}function jd(n){return o["\u0275vid"](0,[o["\u0275pid"](0,yt.DecimalPipe,[o.LOCALE_ID]),(n()(),o["\u0275and"](16777216,null,null,2,null,Fd)),o["\u0275did"](2,16384,null,0,yt.NgIf,[o.ViewContainerRef,o.TemplateRef],{ngIf:[0,"ngIf"]},null),o["\u0275pid"](131072,yt.AsyncPipe,[o.ChangeDetectorRef])],function(n,e){var l=e.component;n(e,2,0,o["\u0275unv"](e,2,0,o["\u0275nov"](e,3).transform(l.availableResources$)))},null)}var Ed=Object.assign||function(n){for(var e,l=1,t=arguments.length;l<t;l++)for(var i in e=arguments[l])Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n},Md=function(){function n(){this.unitDetails=ai,this.townUnits=[],this.townSupport=[]}return n.prototype.ngOnChanges=function(n){var e=this.originSupport.reduce(function(n,e){return Object.entries(e.units).reduce(function(n,e){var l=e[0];return n[l]=e[1]+(n[l]||0),n},n)},{}),l=this.originMovements.reduce(function(n,e){return Object.entries(e.units).reduce(function(n,e){var l=e[0];return n[l]=e[1]+(n[l]||0),n},n)},{}),t=this.targetMovements.reduce(function(n,e){return e.type!==q.MovementType.return?n:Object.entries(e.units).reduce(function(n,e){var l=e[0];return n[l]=e[1]+(n[l]||0),n},n)},{});this.townUnits=Object.entries(this.units).reduce(function(n,i){var o=i[0],a=i[1];return(a.inside||a.queued||l[o]||t[o]||e[o])&&n.push(Ed({name:o},a,{amount:a.inside+(l[o]||0)+(t[o]||0)+(e[o]||0)})),n},[]);var i=this.targetSupport.reduce(function(n,e){return Object.entries(e.units).reduce(function(n,e){var l=e[0];return n[l]=e[1]+(n[l]||0),n},n)},{});this.townSupport=Object.entries(i).reduce(function(n,e){return n.push({name:e[0],amount:e[1]}),n},[])},n}(),Nd=o["\u0275crt"]({encapsulation:0,styles:[[""]],data:{}});function Ld(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,1,"span",[],null,null,null,null,null)),(n()(),o["\u0275ted"](1,null,["\xa0(+",")"]))],null,function(n,e){n(e,1,0,e.parent.context.$implicit.queued)})}function $d(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,5,"div",[["class","unit d-flex"]],null,null,null,null,null)),(n()(),o["\u0275eld"](1,0,null,null,0,"i",[["class","unit-icon mr-1"]],[[1,"data-unit",0]],null,null,null,null)),(n()(),o["\u0275eld"](2,0,null,null,1,"span",[],null,null,null,null,null)),(n()(),o["\u0275ted"](3,null,[""," - ","/",""])),(n()(),o["\u0275and"](16777216,null,null,1,null,Ld)),o["\u0275did"](5,16384,null,0,yt.NgIf,[o.ViewContainerRef,o.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(n,e){n(e,5,0,e.context.$implicit.queued)},function(n,e){var l=e.component;n(e,1,0,e.context.$implicit.name),n(e,3,0,l.unitDetails[e.context.$implicit.name].name,e.context.$implicit.inside,e.context.$implicit.amount)})}function qd(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,4,"div",[],null,null,null,null,null)),(n()(),o["\u0275eld"](1,0,null,null,1,"strong",[],null,null,null,null,null)),(n()(),o["\u0275ted"](-1,null,["Units"])),(n()(),o["\u0275and"](16777216,null,null,1,null,$d)),o["\u0275did"](4,802816,null,0,yt.NgForOf,[o.ViewContainerRef,o.TemplateRef,o.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],function(n,e){n(e,4,0,e.component.townUnits)},null)}function Vd(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,3,"div",[["class","unit d-flex"]],null,null,null,null,null)),(n()(),o["\u0275eld"](1,0,null,null,0,"i",[["class","unit-icon mr-1"]],[[1,"data-unit",0]],null,null,null,null)),(n()(),o["\u0275eld"](2,0,null,null,1,"span",[],null,null,null,null,null)),(n()(),o["\u0275ted"](3,null,[""," - ",""]))],null,function(n,e){var l=e.component;n(e,1,0,e.context.$implicit.name),n(e,3,0,l.unitDetails[e.context.$implicit.name].name,e.context.$implicit.amount)})}function Ud(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,4,"div",[],null,null,null,null,null)),(n()(),o["\u0275eld"](1,0,null,null,1,"strong",[],null,null,null,null,null)),(n()(),o["\u0275ted"](-1,null,["Support"])),(n()(),o["\u0275and"](16777216,null,null,1,null,Vd)),o["\u0275did"](4,802816,null,0,yt.NgForOf,[o.ViewContainerRef,o.TemplateRef,o.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],function(n,e){n(e,4,0,e.component.townSupport)},null)}function zd(n){return o["\u0275vid"](0,[(n()(),o["\u0275and"](16777216,null,null,1,null,qd)),o["\u0275did"](1,16384,null,0,yt.NgIf,[o.ViewContainerRef,o.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),o["\u0275and"](16777216,null,null,1,null,Ud)),o["\u0275did"](3,16384,null,0,yt.NgIf,[o.ViewContainerRef,o.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(n,e){var l=e.component;n(e,1,0,l.townUnits.length),n(e,3,0,l.townSupport.length)},null)}var Hd=Object.assign||function(n){for(var e,l=1,t=arguments.length;l<t;l++)for(var i in e=arguments[l])Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n},Bd=function(){function n(){this.buildingQueue=[],this.buildingDetails=oi}return n.prototype.ngOnInit=function(){var n=this;this.queue$=Object(Ut.a)(0,1e3).pipe(Ht(),Object(c.a)(function(e){return n.buildingQueue.map(function(n){return Hd({},n,{timeLeft:+n.endsAt-e.timestamp})})}))},n.prototype.ngOnChanges=function(n){},n}(),Wd=o["\u0275crt"]({encapsulation:0,styles:[[""]],data:{}});function Zd(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,3,"div",[],null,null,null,null,null)),(n()(),o["\u0275ted"](1,null,[" "," "," - "," - "," "])),o["\u0275ppd"](2,2),o["\u0275ppd"](3,2)],null,function(n,e){n(e,1,0,e.component.buildingDetails[e.context.$implicit.name].name,e.context.$implicit.level+1,o["\u0275unv"](e,1,2,n(e,2,0,o["\u0275nov"](e.parent.parent,0),e.context.$implicit.timeLeft,"HH:mm:ss")),o["\u0275unv"](e,1,3,n(e,3,0,o["\u0275nov"](e.parent.parent,1),e.context.$implicit.endsAt,"HH:mm:ss")))})}function Gd(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,4,"div",[],null,null,null,null,null)),(n()(),o["\u0275eld"](1,0,null,null,1,"strong",[],null,null,null,null,null)),(n()(),o["\u0275ted"](-1,null,["Building Queue"])),(n()(),o["\u0275and"](16777216,null,null,1,null,Zd)),o["\u0275did"](4,802816,null,0,yt.NgForOf,[o.ViewContainerRef,o.TemplateRef,o.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],function(n,e){n(e,4,0,e.context.$implicit)},null)}function Yd(n){return o["\u0275vid"](0,[o["\u0275pid"](0,Vt,[]),o["\u0275pid"](0,yt.DatePipe,[o.LOCALE_ID]),(n()(),o["\u0275and"](16777216,null,null,2,null,Gd)),o["\u0275did"](3,16384,null,0,yt.NgIf,[o.ViewContainerRef,o.TemplateRef],{ngIf:[0,"ngIf"]},null),o["\u0275pid"](131072,yt.AsyncPipe,[o.ChangeDetectorRef])],function(n,e){var l=e.component;n(e,3,0,o["\u0275unv"](e,3,0,o["\u0275nov"](e,4).transform(l.queue$)))},null)}var Xd=function(){function n(n,e,l){this.socket=n,this.gameDataService=e,this.store=l,this.nameChange="",this.town$=this.store.select(tl),this.worldData$=this.store.select(Ql.a)}return n.prototype.ngOnInit=function(){},n.prototype.rename=function(n,e){n.length>3&&n!==e&&this.store.dispatch(new function(n){this.payload=n,this.type="[Town] Rename"}(n))},n.prototype.build=function(n){this.store.dispatch(new function(n){this.payload=n,this.type="[Town] Build"}(n))},n.prototype.ngOnDestroy=function(){},n}(),Qd=l("SGZX"),Kd=o["\u0275crt"]({encapsulation:0,styles:[[""]],data:{}});function Jd(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,2,"town-loyalty",[],null,null,null,vd,hd)),o["\u0275did"](1,573440,null,0,md,[],{town:[0,"town"],loyaltyRegeneration:[1,"loyaltyRegeneration"]},null),o["\u0275pid"](131072,yt.AsyncPipe,[o.ChangeDetectorRef])],function(n,e){var l,t=e.component;n(e,1,0,e.parent.context.$implicit,null==(l=o["\u0275unv"](e,1,1,o["\u0275nov"](e,2).transform(t.worldData$)))?null:l.world.loyaltyRegeneration)},null)}function np(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,29,"div",[["class","px-2 py-2 mb-3"]],null,null,null,null,null)),(n()(),o["\u0275eld"](1,0,null,null,13,"div",[["class","row my-2"]],null,null,null,null,null)),(n()(),o["\u0275eld"](2,0,null,null,12,"div",[["class","col"]],null,null,null,null,null)),(n()(),o["\u0275eld"](3,0,null,null,1,"strong",[],null,null,null,null,null)),(n()(),o["\u0275ted"](4,null,["",""])),(n()(),o["\u0275eld"](5,0,null,null,5,"input",[["name","town-name"],["type","text"]],[[8,"placeholder",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(n,e,l){var t=!0,i=n.component;return"input"===e&&(t=!1!==o["\u0275nov"](n,6)._handleInput(l.target.value)&&t),"blur"===e&&(t=!1!==o["\u0275nov"](n,6).onTouched()&&t),"compositionstart"===e&&(t=!1!==o["\u0275nov"](n,6)._compositionStart()&&t),"compositionend"===e&&(t=!1!==o["\u0275nov"](n,6)._compositionEnd(l.target.value)&&t),"ngModelChange"===e&&(t=!1!==(i.nameChange=l)&&t),t},null,null)),o["\u0275did"](6,16384,null,0,ti.d,[o.Renderer2,o.ElementRef,[2,ti.a]],null,null),o["\u0275prd"](1024,null,ti.l,function(n){return[n]},[ti.d]),o["\u0275did"](8,671744,null,0,ti.q,[[8,null],[8,null],[8,null],[6,ti.l]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),o["\u0275prd"](2048,null,ti.m,null,[ti.q]),o["\u0275did"](10,16384,null,0,ti.n,[[4,ti.m]],null,null),(n()(),o["\u0275eld"](11,0,null,null,1,"button",[["class","btn btn-info"]],null,[[null,"click"]],function(n,e,l){var t=!0,i=n.component;return"click"===e&&(t=!1!==i.rename(i.nameChange,n.context.$implicit.name)&&t),t},null,null)),(n()(),o["\u0275ted"](-1,null,["Save"])),(n()(),o["\u0275and"](16777216,null,null,1,null,Jd)),o["\u0275did"](14,16384,null,0,yt.NgIf,[o.ViewContainerRef,o.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),o["\u0275eld"](15,0,null,null,14,"div",[["class","row"]],null,null,null,null,null)),(n()(),o["\u0275eld"](16,0,null,null,2,"buildings",[["class","col-md-9"]],null,[[null,"build"]],function(n,e,l){var t=!0;return"build"===e&&(t=!1!==n.component.build(l)&&t),t},Td,_d)),o["\u0275did"](17,573440,null,0,yd,[],{town:[0,"town"],worldData:[1,"worldData"]},{build:"build"}),o["\u0275pid"](131072,yt.AsyncPipe,[o.ChangeDetectorRef]),(n()(),o["\u0275eld"](19,0,null,null,10,"div",[["class","col-md-3"]],null,null,null,null,null)),(n()(),o["\u0275eld"](20,0,null,null,3,"div",[["class","py-1"]],null,null,null,null,null)),(n()(),o["\u0275ted"](-1,null,["Population: "])),(n()(),o["\u0275eld"](22,0,null,null,1,"b",[],null,null,null,null,null)),(n()(),o["\u0275ted"](23,null,["","/",""])),(n()(),o["\u0275eld"](24,0,null,null,1,"resources",[],null,null,null,jd,Dd)),o["\u0275did"](25,573440,null,0,Ad,[],{town:[0,"town"]},null),(n()(),o["\u0275eld"](26,0,null,null,1,"units",[],null,null,null,zd,Nd)),o["\u0275did"](27,573440,null,0,Md,[],{units:[0,"units"],originMovements:[1,"originMovements"],targetMovements:[2,"targetMovements"],originSupport:[3,"originSupport"],targetSupport:[4,"targetSupport"]},null),(n()(),o["\u0275eld"](28,0,null,null,1,"building-queue",[],null,null,null,Yd,Wd)),o["\u0275did"](29,638976,null,0,Bd,[],{buildingQueue:[0,"buildingQueue"]},null)],function(n,e){var l=e.component;n(e,8,0,"town-name",l.nameChange),n(e,14,0,100!==e.context.$implicit.loyalty),n(e,17,0,e.context.$implicit,o["\u0275unv"](e,17,1,o["\u0275nov"](e,18).transform(l.worldData$))),n(e,25,0,e.context.$implicit),n(e,27,0,e.context.$implicit.units,e.context.$implicit.originMovements,e.context.$implicit.targetMovements,e.context.$implicit.originSupport,e.context.$implicit.targetSupport),n(e,29,0,e.context.$implicit.buildingQueues)},function(n,e){n(e,4,0,e.context.$implicit.name),n(e,5,0,o["\u0275inlineInterpolate"](1,"",e.context.$implicit.name,""),o["\u0275nov"](e,10).ngClassUntouched,o["\u0275nov"](e,10).ngClassTouched,o["\u0275nov"](e,10).ngClassPristine,o["\u0275nov"](e,10).ngClassDirty,o["\u0275nov"](e,10).ngClassValid,o["\u0275nov"](e,10).ngClassInvalid,o["\u0275nov"](e,10).ngClassPending),n(e,23,0,e.context.$implicit.population.used,e.context.$implicit.population.total)})}function ep(n){return o["\u0275vid"](0,[(n()(),o["\u0275and"](16777216,null,null,2,null,np)),o["\u0275did"](1,16384,null,0,yt.NgIf,[o.ViewContainerRef,o.TemplateRef],{ngIf:[0,"ngIf"]},null),o["\u0275pid"](131072,yt.AsyncPipe,[o.ChangeDetectorRef])],function(n,e){var l=e.component;n(e,1,0,o["\u0275unv"](e,1,0,o["\u0275nov"](e,2).transform(l.town$)))},null)}var lp=o["\u0275ccf"]("town",Xd,function(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,1,"town",[],null,null,null,ep,Kd)),o["\u0275did"](1,245760,null,0,Xd,[Qd.a,ii.a,O.n],null,null)],function(n,e){n(e,1,0)},null)},{},{},[]),tp=function(){return function(){this.openAllianceProfile=new o.EventEmitter,this.openPlayerProfile=new o.EventEmitter}}(),ip=o["\u0275crt"]({encapsulation:0,styles:[[""]],data:{}});function op(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,1,"a",[["href",""]],null,[[null,"click"]],function(n,e,l){var t=!0,i=n.component;return"click"===e&&(t=0!=!!i.openPlayerProfile.emit(i.data.owner.id)&&t),t},null,null)),(n()(),o["\u0275ted"](1,null,["",""]))],null,function(n,e){n(e,1,0,e.component.data.owner.name)})}function ap(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,1,"span",[],null,null,null,null,null)),(n()(),o["\u0275ted"](-1,null,["-"]))],null,null)}function rp(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,1,"a",[["href",""]],null,[[null,"click"]],function(n,e,l){var t=!0,i=n.component;return"click"===e&&(t=0!=!!i.openAllianceProfile.emit(i.data.alliance.id)&&t),t},null,null)),(n()(),o["\u0275ted"](1,null,["",""]))],null,function(n,e){n(e,1,0,e.component.data.alliance.name)})}function up(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,1,"span",[],null,null,null,null,null)),(n()(),o["\u0275ted"](-1,null,["-"]))],null,null)}function sp(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,34,"div",[],null,null,null,null,null)),(n()(),o["\u0275eld"](1,0,null,null,5,"div",[],null,null,null,null,null)),(n()(),o["\u0275eld"](2,0,null,null,2,"fa-icon",[["class","pr-2 ng-fa-icon"]],[[8,"innerHTML",1]],null,null,Lt.b,Lt.a)),o["\u0275did"](3,573440,null,0,$t.a,[qt.c],{iconProp:[0,"iconProp"],fixedWidth:[1,"fixedWidth"]},null),o["\u0275pad"](4,2),(n()(),o["\u0275eld"](5,0,null,null,1,"span",[],null,null,null,null,null)),(n()(),o["\u0275ted"](6,null,["",""])),(n()(),o["\u0275eld"](7,0,null,null,7,"div",[],null,null,null,null,null)),(n()(),o["\u0275eld"](8,0,null,null,2,"fa-icon",[["class","pr-2 ng-fa-icon"]],[[8,"innerHTML",1]],null,null,Lt.b,Lt.a)),o["\u0275did"](9,573440,null,0,$t.a,[qt.c],{iconProp:[0,"iconProp"],fixedWidth:[1,"fixedWidth"]},null),o["\u0275pad"](10,2),(n()(),o["\u0275and"](16777216,null,null,1,null,op)),o["\u0275did"](12,16384,null,0,yt.NgIf,[o.ViewContainerRef,o.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),o["\u0275and"](16777216,null,null,1,null,ap)),o["\u0275did"](14,16384,null,0,yt.NgIf,[o.ViewContainerRef,o.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),o["\u0275eld"](15,0,null,null,7,"div",[],null,null,null,null,null)),(n()(),o["\u0275eld"](16,0,null,null,2,"fa-icon",[["class","pr-2 ng-fa-icon"]],[[8,"innerHTML",1]],null,null,Lt.b,Lt.a)),o["\u0275did"](17,573440,null,0,$t.a,[qt.c],{iconProp:[0,"iconProp"],fixedWidth:[1,"fixedWidth"]},null),o["\u0275pad"](18,2),(n()(),o["\u0275and"](16777216,null,null,1,null,rp)),o["\u0275did"](20,16384,null,0,yt.NgIf,[o.ViewContainerRef,o.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),o["\u0275and"](16777216,null,null,1,null,up)),o["\u0275did"](22,16384,null,0,yt.NgIf,[o.ViewContainerRef,o.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),o["\u0275eld"](23,0,null,null,5,"div",[],null,null,null,null,null)),(n()(),o["\u0275eld"](24,0,null,null,2,"fa-icon",[["class","pr-2 ng-fa-icon"]],[[8,"innerHTML",1]],null,null,Lt.b,Lt.a)),o["\u0275did"](25,573440,null,0,$t.a,[qt.c],{iconProp:[0,"iconProp"],fixedWidth:[1,"fixedWidth"]},null),o["\u0275pad"](26,2),(n()(),o["\u0275eld"](27,0,null,null,1,"span",[],null,null,null,null,null)),(n()(),o["\u0275ted"](28,null,["",""])),(n()(),o["\u0275eld"](29,0,null,null,5,"div",[],null,null,null,null,null)),(n()(),o["\u0275eld"](30,0,null,null,2,"fa-icon",[["class","pr-2 ng-fa-icon"]],[[8,"innerHTML",1]],null,null,Lt.b,Lt.a)),o["\u0275did"](31,573440,null,0,$t.a,[qt.c],{iconProp:[0,"iconProp"],fixedWidth:[1,"fixedWidth"]},null),o["\u0275pad"](32,2),(n()(),o["\u0275eld"](33,0,null,null,1,"span",[],null,null,null,null,null)),(n()(),o["\u0275ted"](34,null,["",""]))],function(n,e){var l=e.component;n(e,3,0,n(e,4,0,"fas","home"),!0),n(e,9,0,n(e,10,0,"far","user-circle"),!0),n(e,12,0,l.data.owner),n(e,14,0,!l.data.owner),n(e,17,0,n(e,18,0,"fas","users"),!0),n(e,20,0,l.data.alliance),n(e,22,0,!l.data.alliance),n(e,25,0,n(e,26,0,"fas","sort-amount-up"),!0),n(e,31,0,n(e,32,0,"fas","exchange-alt"),!0)},function(n,e){var l=e.component;n(e,2,0,o["\u0275nov"](e,3).renderedIconHTML),n(e,6,0,l.data.name),n(e,8,0,o["\u0275nov"](e,9).renderedIconHTML),n(e,16,0,o["\u0275nov"](e,17).renderedIconHTML),n(e,24,0,o["\u0275nov"](e,25).renderedIconHTML),n(e,28,0,l.data.score||"-"),n(e,30,0,o["\u0275nov"](e,31).renderedIconHTML),n(e,34,0,l.data.distance)})}var cp=l("+umK"),dp=new s.a(cp.a);l("MGBS"),l("zotm");var pp={leading:!0,trailing:!1};function fp(n,e,l){return void 0===e&&(e=zt.a),void 0===l&&(l=pp),function(t){return t.lift(new mp(n,e,l.leading,l.trailing))}}var mp=function(){function n(n,e,l,t){this.duration=n,this.scheduler=e,this.leading=l,this.trailing=t}return n.prototype.call=function(n,e){return e.subscribe(new hp(n,this.duration,this.scheduler,this.leading,this.trailing))},n}(),hp=function(n){function e(e,l,t,i,o){var a=n.call(this,e)||this;return a.duration=l,a.scheduler=t,a.leading=i,a.trailing=o,a._hasTrailingValue=!1,a._trailingValue=null,a}return r.__extends(e,n),e.prototype._next=function(n){this.throttled?this.trailing&&(this._trailingValue=n,this._hasTrailingValue=!0):(this.add(this.throttled=this.scheduler.schedule(gp,this.duration,{subscriber:this})),this.leading&&this.destination.next(n))},e.prototype._complete=function(){this._hasTrailingValue?(this.destination.next(this._trailingValue),this.destination.complete()):this.destination.complete()},e.prototype.clearThrottle=function(){var n=this.throttled;n&&(this.trailing&&this._hasTrailingValue&&(this.destination.next(this._trailingValue),this._trailingValue=null,this._hasTrailingValue=!1),n.unsubscribe(),this.remove(n),this.throttled=null)},e}(Ki.a);function gp(n){n.subscriber.clearThrottle()}var vp=l("15JJ"),bp=function(){function n(n){this.predicate=n}return n.prototype.call=function(n,e){return e.subscribe(new yp(n,this.predicate))},n}(),yp=function(n){function e(e,l){var t=n.call(this,e)||this;return t.predicate=l,t.index=0,t}return r.__extends(e,n),e.prototype._next=function(n){var e,l=this.destination;try{e=this.predicate(n,this.index++)}catch(n){return void l.error(n)}this.nextOrComplete(n,e)},e.prototype.nextOrComplete=function(n,e){var l=this.destination;Boolean(e)?l.next(n):l.complete()},e}(Ki.a),_p=Object.assign||function(n){for(var e,l=1,t=arguments.length;l<t;l++)for(var i in e=arguments[l])Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n},wp=function(){function n(n){var e=this;this.mapService=n,this.openAllianceProfile=new o.EventEmitter,this.openPlayerProfile=new o.EventEmitter,this.openCommand=new o.EventEmitter,this.layout=new si.b,this.mapVisibility={x:1,y:1},this.mapSize={x:0,y:0},this.hexWidthCount=[{count:5,size:600},{count:7,size:900},{count:11,size:1400},{count:13,size:2e3},{count:19,size:4e3}],this.zoom={current:1,min:.25,max:2},this.elementReady=!1,this.shouldDraw=!1,this.targetCoord=[null,null],this.boxSize={x:260,y:140},this.dragging=0,this.hoverPauser=new ct.a,this.pausableMove=this.hoverPauser.pipe(Object(vp.a)(function(n){return n?dp:e.moveEvent})),Wt.d.add(Zt.n,ia,Zt.v,Zt.i,Zt.r,Zt.p),this.mapTiles=this.mapService.mapTiles,this.rng=this.mapService.rng}return n.prototype.ngOnChanges=function(n){n.townState&&(this.activeTownHex=this.layout.coordToHex(this.townState.playerTowns[this.townState.activeTown].location)),this.shouldDraw=!0},n.prototype.ngAfterViewChecked=function(){this.elementReady&&this.shouldDraw&&this.mapData&&(this.hoverPauser.next(!1),this.drawMap(this.layout,this.offset),this.shouldDraw=!1)},n.prototype.ngAfterContentInit=function(){var n=this;this.offscreenCanvas=document.createElement("canvas"),this.offscreenCtx=this.offscreenCanvas.getContext("2d",{alpha:!1}),this.offscreenCtx.imageSmoothingEnabled=!1,this.offscreenCtx.lineWidth=1,this.ctx=this.map.nativeElement.getContext("2d",{alpha:!1}),this.ctx.imageSmoothingEnabled=!1,this.ctx.lineWidth=1,this.setMapSettings({x:this.map.nativeElement.offsetWidth,y:this.map.nativeElement.offsetHeight});var e=this.townState.playerTowns[this.townState.activeTown];this.activeTownHex=this.layout.coordToHex(e.location),this.setCenterCoordOffset(e.location),this.elementReady=!0,this.shouldDraw=!0,this.moveEvent=Object(yi.a)(Object(lc.a)(this.map.nativeElement,"mousemove"),Object(lc.a)(this.map.nativeElement,"touchmove")).pipe(fp(50)),this.hoverSubscription=this.pausableMove.subscribe(function(e){return n.onHover(e)}),this.hoverPauser.next(!this.mapData)},n.prototype.setMapSettings=function(n){for(var e=Math.ceil(this.worldData.world.size/2),l=this.hexWidthCount[0].count,t=1;t<this.hexWidthCount.length&&n.x>this.hexWidthCount[t-1].size;t++)l=this.hexWidthCount[t].count;var i=n.x/l*this.zoom.current,o=i/this.layout.orientation.f0,a=2*o;this.hexSize={size:o,width:i,height:a},this.mapVisibility={x:Math.ceil(n.x/i)+2,y:Math.ceil(n.y/(.75*a))+2},this.mapSize=n,this.offscreenCanvas.width=n.x,this.offscreenCanvas.height=n.y,this.layout.size={x:this.hexSize.size,y:this.hexSize.size},this.layout.origin={x:this.hexSize.width*e,y:.75*this.hexSize.height*e},this.layout.centerCoord=e},n.prototype.onClick=function(n){this.hover&&this.openCommand.emit(this.hover.data)},n.prototype.onHover=function(n){var e=this.layout.pixelToHex({x:this.offset.x+n.offsetX,y:this.offset.y+n.offsetY}).round(),l=this.layout.hexToCoord(e).join(","),t=this.mapData[l]||null;if(t&&t.id!==this.townState.activeTown){var i=this.layout.polygonCorners(e),o={x:i[2].x-this.offset.x,y:i[2].y-this.offset.y-this.boxSize.y};o.y<0&&(o.y=i[5].y-this.offset.y),o.x+this.boxSize.x>this.mapSize.x&&(o.x-=this.boxSize.x),this.hover={data:_p({},t,{distance:this.activeTownHex.distance(e)}),position:"translate3d("+ +o.x+"px,"+o.y+"px,0)",transformOrigin:""}}else this.hover=null},n.prototype.onZoom=function(n){n.preventDefault();var e=this.zoom.current-.25*Math.sign(n.deltaY),l=Math.min(Math.max(e,this.zoom.min),this.zoom.max);this.zoom.current!==l&&(this.zoom.current=l,this.updateMap({x:this.map.nativeElement.offsetWidth,y:this.map.nativeElement.offsetHeight}))},n.prototype.onStartDrag=function(n){var e,l=this,t={x:n.offsetX||n.touches[0].pageX-n.touches[0].target.offsetLeft,y:n.offsetY||n.touches[0].pageY-n.touches[0].target.offsetTop},i={x:this.offset.x,y:this.offset.y};this.dragging=1,Object(yi.a)(Object(lc.a)(this.map.nativeElement,"mousemove"),Object(lc.a)(this.map.nativeElement,"touchmove")).pipe((e=function(){return!!l.dragging},function(n){return n.lift(new bp(e))}),fp(10)).subscribe(function(n){return l.onDrag(t,n,i)})},n.prototype.onStopDrag=function(n){this.dragging=0},n.prototype.onDrag=function(n,e,l){var t={x:n.x-(e.offsetX||e.touches[0].pageX-e.touches[0].target.offsetLeft),y:n.y-(e.offsetY||e.touches[0].pageY-e.touches[0].target.offsetTop)},i={x:l.x+t.x-this.offset.x,y:l.y+t.y-this.offset.y};Math.abs(t.x)<5&&Math.abs(t.y)<5||(this.dragging=2,this.hover=null,this.offset={x:this.offset.x+i.x,y:this.offset.y+i.y},this.drawMap(this.layout,this.offset,i))},n.prototype.onResize=function(n){this.updateMap({x:this.map.nativeElement.offsetWidth,y:this.map.nativeElement.offsetHeight})},n.prototype.updateMap=function(n){var e=this.layout.pixelToHex({x:this.offset.x+this.mapSize.x/2,y:this.offset.y+this.mapSize.y/2});this.setMapSettings(n);var l=this.layout.hexToPixel(e);l.x-=this.mapSize.x/2,l.y-=this.mapSize.y/2,this.offset=l,this.shouldDraw=!0},n.prototype.jumpToCoord=function(n){if(n[0]<0||n[0]>this.worldData.world.size||n[1]<0||n[1]>this.worldData.world.size)return this.targetCoord[0]=null,void(this.targetCoord[1]=null);this.setCenterCoordOffset(n),this.shouldDraw=!0,this.targetCoord[0]=null,this.targetCoord[1]=null},n.prototype.setCenterCoordOffset=function(n){var e=this.layout.coordToPixel(n);e.x-=this.mapSize.x/2+15,e.y-=this.mapSize.y/2-50,this.offset=e},n.prototype.screenHexes=function(){return this.shapeRectangle(this.mapVisibility.x,this.mapVisibility.y,{x:this.offset.x+this.mapSize.x/2,y:this.offset.y+this.mapSize.y/2})},n.prototype.shapeRectangle=function(n,e,l){for(var t=[],i=l?this.layout.pixelToHex(l).round():new si.a(0,0,0),o=-Math.floor(n/2),a=o+n,r=-Math.floor(e/2),u=r+e,s=r;s<u;s++)for(var c=-Math.floor(s/2),d=o+c;d<a+c;d++)t.push(new si.a(d+i.x,s+i.y,-d-s+i.z));return t},n.prototype.drawMap=function(n,e,l,t){var i,o=this;if(void 0===t&&(t=!1),l){if(this.offscreenCtx.drawImage(this.offscreenCanvas,-l.x,-l.y),i=[],l.x){var a=l.x>0?this.mapSize.x-l.x:-l.x,r=Math.max(Math.ceil(Math.abs(l.x)/(this.hexSize.width/2)),2);i.push.apply(i,this.shapeRectangle(r,this.mapVisibility.y,{x:e.x+a,y:e.y+this.mapSize.y/2}))}if(l.y){var u=l.y>0?this.mapSize.y-l.y:-l.y,s=Math.max(Math.ceil(Math.abs(l.y)/this.hexSize.size),3);i.push.apply(i,this.shapeRectangle(this.mapVisibility.x,s,{x:e.x+this.mapSize.x/2,y:e.y+u}))}if(l.x&&l.y){var c=i.reduce(function(n,e){return n.set(e.toString(),e),n},new Map);i=Array.from(c.values())}}else i=this.screenHexes();i.forEach(function(e){return o.drawHex(o.offscreenCtx,n,e,t)}),this.ctx.drawImage(this.offscreenCanvas,0,0,this.mapSize.x,this.mapSize.y)},n.prototype.drawHex=function(n,e,l,t,i){void 0===t&&(t=!1),void 0===i&&(i="#27ae60");var o=e.polygonCorners(l,this.offset);n.beginPath(),n.lineWidth=1,n.moveTo(o[5].x,o[5].y);for(var a=0;a<6;a++)n.lineTo(o[a].x,o[a].y);var r=e.hexToCoord(l),u=[o[3].x,o[2].y],s=r.join(","),c=this.mapData[s],d=this.mapTiles.tiles[Math.round(this.mapService.rng(s)*(this.mapTiles.tiles.length-1))];if(n.closePath(),c){var p=c.owner?this.mapTiles.object:this.mapTiles.objectType.abandoned;n.drawImage(this.mapTiles.image,p[0],p[1],this.mapTiles.size[0],this.mapTiles.size[1],u[0],u[1],this.hexSize.width,this.hexSize.height);var f=void 0;this.townState.ids.includes(c.id)?f=this.townState.activeTown===c.id?this.mapTiles.objectType.ownedActive:this.mapTiles.objectType.owned:this.allianceDiplomacy&&c.alliance&&this.allianceDiplomacy[c.alliance.id]&&(f=this.mapTiles.objectType[this.allianceDiplomacy[c.alliance.id][0]]),f&&n.drawImage(this.mapTiles.image,f[0],f[1],this.mapTiles.size[0],this.mapTiles.size[1],u[0],u[1],this.hexSize.width,this.hexSize.height)}else n.drawImage(this.mapTiles.image,d[0],d[1],this.mapTiles.size[0],this.mapTiles.size[1],u[0],u[1],this.hexSize.width,this.hexSize.height);i&&(n.strokeStyle=i,n.stroke()),t&&(n.fillStyle="hsl(0, 0%, 100%)",n.font="16px sans-serif",n.textAlign="center",n.textBaseline="middle",n.fillText(s,o[2].x,(o[2].y+o[5].y)/2))},n}(),Cp=o["\u0275crt"]({encapsulation:0,styles:[["canvas[_ngcontent-%COMP%]{width:100%;height:100%;background-color:#27ae60;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.map-navigation[_ngcontent-%COMP%]{background-color:#fff;position:absolute;bottom:0;left:0;max-width:40px;max-height:40px;overflow:hidden;transition:1s;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.map-navigation[_ngcontent-%COMP%]:hover{max-width:340px;max-height:80px}.map-navigation[_ngcontent-%COMP%]:hover   fa-icon[_ngcontent-%COMP%]{margin-top:0}.map-navigation[_ngcontent-%COMP%]   fa-icon[_ngcontent-%COMP%]{margin-top:-24px;transition:.2s}.map-navigation[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{max-width:80px}town-hover[_ngcontent-%COMP%]{min-width:180px;padding:8px;position:absolute;top:0;left:0;background-color:pink}town-hover[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:6px}"]],data:{}});function Rp(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,1,"town-hover",[["class","town-hover hidden-sm-down"]],[[4,"transform",null],[4,"width","px"],[4,"height","px"]],[[null,"openAllianceProfile"],[null,"openPlayerProfile"]],function(n,e,l){var t=!0,i=n.component;return"openAllianceProfile"===e&&(t=!1!==i.openAllianceProfile.emit(l)&&t),"openPlayerProfile"===e&&(t=!1!==i.openPlayerProfile.emit(l)&&t),t},sp,ip)),o["\u0275did"](1,49152,null,0,tp,[],{data:[0,"data"]},{openAllianceProfile:"openAllianceProfile",openPlayerProfile:"openPlayerProfile"})],function(n,e){n(e,1,0,e.component.hover.data)},function(n,e){var l=e.component;n(e,0,0,l.hover.position,l.boxSize.x,l.boxSize.y)})}function xp(n){return o["\u0275vid"](0,[o["\u0275qud"](402653184,1,{map:0}),(n()(),o["\u0275eld"](1,0,[[1,0],["map",1]],null,2,"canvas",[],[[8,"width",0],[8,"height",0]],[[null,"click"],["window","resize"],[null,"wheel"],[null,"mousedown"],[null,"touchstart"],[null,"mouseup"],[null,"touchend"],[null,"mouseout"],[null,"touchcancel"]],function(n,e,l){var t=!0,i=n.component;return"click"===e&&(t=!1!==i.onClick(l)&&t),"window:resize"===e&&(t=!1!==i.onResize(l)&&t),"wheel"===e&&(t=!1!==i.onZoom(l)&&t),"mousedown"===e&&(t=!1!==i.onStartDrag(l)&&t),"touchstart"===e&&(t=!1!==i.onStartDrag(l)&&t),"mouseup"===e&&(t=!1!==i.onStopDrag(l)&&t),"touchend"===e&&(t=!1!==i.onStopDrag(l)&&t),"mouseout"===e&&(t=!1!==i.onStopDrag(l)&&t),"touchcancel"===e&&(t=!1!==i.onStopDrag(l)&&t),t},null,null)),(n()(),o["\u0275eld"](2,0,null,null,1,"div",[],null,null,null,null,null)),(n()(),o["\u0275ted"](-1,null,["Loading map"])),(n()(),o["\u0275eld"](4,0,null,null,31,"div",[["class","map-navigation"]],null,null,null,null,null)),(n()(),o["\u0275eld"](5,0,null,null,30,"div",[["class","d-flex align-items-center p-1"]],null,null,null,null,null)),(n()(),o["\u0275eld"](6,0,null,null,2,"fa-icon",[["class","pl-2 pr-3 ng-fa-icon"]],[[8,"innerHTML",1]],null,null,Lt.b,Lt.a)),o["\u0275did"](7,573440,null,0,$t.a,[qt.c],{iconProp:[0,"iconProp"]},null),o["\u0275pad"](8,2),(n()(),o["\u0275eld"](9,0,null,null,26,"div",[["style","white-space: nowrap;"]],null,null,null,null,null)),(n()(),o["\u0275eld"](10,0,null,null,1,"div",[],null,null,null,null,null)),(n()(),o["\u0275ted"](-1,null,["Jump to coords"])),(n()(),o["\u0275eld"](12,0,null,null,23,"form",[["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngSubmit"],[null,"submit"],[null,"reset"]],function(n,e,l){var t=!0,i=n.component;return"submit"===e&&(t=!1!==o["\u0275nov"](n,14).onSubmit(l)&&t),"reset"===e&&(t=!1!==o["\u0275nov"](n,14).onReset()&&t),"ngSubmit"===e&&(t=!1!==i.jumpToCoord(i.targetCoord)&&t),t},null,null)),o["\u0275did"](13,16384,null,0,ti.y,[],null,null),o["\u0275did"](14,4210688,null,0,ti.p,[[8,null],[8,null]],null,{ngSubmit:"ngSubmit"}),o["\u0275prd"](2048,null,ti.c,null,[ti.p]),o["\u0275did"](16,16384,null,0,ti.o,[[4,ti.c]],null,null),(n()(),o["\u0275eld"](17,0,null,null,7,"input",[["min","0"],["placeholder","X-coord"],["type","number"]],[[8,"max",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(n,e,l){var t=!0,i=n.component;return"input"===e&&(t=!1!==o["\u0275nov"](n,18)._handleInput(l.target.value)&&t),"blur"===e&&(t=!1!==o["\u0275nov"](n,18).onTouched()&&t),"compositionstart"===e&&(t=!1!==o["\u0275nov"](n,18)._compositionStart()&&t),"compositionend"===e&&(t=!1!==o["\u0275nov"](n,18)._compositionEnd(l.target.value)&&t),"change"===e&&(t=!1!==o["\u0275nov"](n,19).onChange(l.target.value)&&t),"input"===e&&(t=!1!==o["\u0275nov"](n,19).onChange(l.target.value)&&t),"blur"===e&&(t=!1!==o["\u0275nov"](n,19).onTouched()&&t),"ngModelChange"===e&&(t=!1!==(i.targetCoord[0]=l)&&t),t},null,null)),o["\u0275did"](18,16384,null,0,ti.d,[o.Renderer2,o.ElementRef,[2,ti.a]],null,null),o["\u0275did"](19,16384,null,0,ti.x,[o.Renderer2,o.ElementRef],null,null),o["\u0275prd"](1024,null,ti.l,function(n,e){return[n,e]},[ti.d,ti.x]),o["\u0275did"](21,671744,null,0,ti.q,[[2,ti.c],[8,null],[8,null],[6,ti.l]],{model:[0,"model"],options:[1,"options"]},{update:"ngModelChange"}),o["\u0275pod"](22,{standalone:0}),o["\u0275prd"](2048,null,ti.m,null,[ti.q]),o["\u0275did"](24,16384,null,0,ti.n,[[4,ti.m]],null,null),(n()(),o["\u0275eld"](25,0,null,null,7,"input",[["min","0"],["placeholder","Y-coord"],["type","number"]],[[8,"max",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(n,e,l){var t=!0,i=n.component;return"input"===e&&(t=!1!==o["\u0275nov"](n,26)._handleInput(l.target.value)&&t),"blur"===e&&(t=!1!==o["\u0275nov"](n,26).onTouched()&&t),"compositionstart"===e&&(t=!1!==o["\u0275nov"](n,26)._compositionStart()&&t),"compositionend"===e&&(t=!1!==o["\u0275nov"](n,26)._compositionEnd(l.target.value)&&t),"change"===e&&(t=!1!==o["\u0275nov"](n,27).onChange(l.target.value)&&t),"input"===e&&(t=!1!==o["\u0275nov"](n,27).onChange(l.target.value)&&t),"blur"===e&&(t=!1!==o["\u0275nov"](n,27).onTouched()&&t),"ngModelChange"===e&&(t=!1!==(i.targetCoord[1]=l)&&t),t},null,null)),o["\u0275did"](26,16384,null,0,ti.d,[o.Renderer2,o.ElementRef,[2,ti.a]],null,null),o["\u0275did"](27,16384,null,0,ti.x,[o.Renderer2,o.ElementRef],null,null),o["\u0275prd"](1024,null,ti.l,function(n,e){return[n,e]},[ti.d,ti.x]),o["\u0275did"](29,671744,null,0,ti.q,[[2,ti.c],[8,null],[8,null],[6,ti.l]],{model:[0,"model"],options:[1,"options"]},{update:"ngModelChange"}),o["\u0275pod"](30,{standalone:0}),o["\u0275prd"](2048,null,ti.m,null,[ti.q]),o["\u0275did"](32,16384,null,0,ti.n,[[4,ti.m]],null,null),(n()(),o["\u0275eld"](33,0,null,null,2,"button",[["color","primary"],["mat-raised-button",""],["type","submit"]],[[8,"disabled",0],[2,"_mat-animation-noopable",null]],null,null,ho.b,ho.a)),o["\u0275did"](34,180224,null,0,go.b,[o.ElementRef,Ct.a,Rt.f,[2,Di.a]],{color:[0,"color"]},null),(n()(),o["\u0275ted"](-1,0,["Go"])),(n()(),o["\u0275and"](16777216,null,null,1,null,Rp)),o["\u0275did"](37,16384,null,0,yt.NgIf,[o.ViewContainerRef,o.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(n,e){var l=e.component;n(e,7,0,n(e,8,0,"fas","search")),n(e,21,0,l.targetCoord[0],n(e,22,0,!0)),n(e,29,0,l.targetCoord[1],n(e,30,0,!0)),n(e,34,0,"primary"),n(e,37,0,l.hover)},function(n,e){var l=e.component;n(e,1,0,l.mapSize.x,l.mapSize.y),n(e,6,0,o["\u0275nov"](e,7).renderedIconHTML),n(e,12,0,o["\u0275nov"](e,16).ngClassUntouched,o["\u0275nov"](e,16).ngClassTouched,o["\u0275nov"](e,16).ngClassPristine,o["\u0275nov"](e,16).ngClassDirty,o["\u0275nov"](e,16).ngClassValid,o["\u0275nov"](e,16).ngClassInvalid,o["\u0275nov"](e,16).ngClassPending),n(e,17,0,l.worldData.world.size,o["\u0275nov"](e,24).ngClassUntouched,o["\u0275nov"](e,24).ngClassTouched,o["\u0275nov"](e,24).ngClassPristine,o["\u0275nov"](e,24).ngClassDirty,o["\u0275nov"](e,24).ngClassValid,o["\u0275nov"](e,24).ngClassInvalid,o["\u0275nov"](e,24).ngClassPending),n(e,25,0,l.worldData.world.size,o["\u0275nov"](e,32).ngClassUntouched,o["\u0275nov"](e,32).ngClassTouched,o["\u0275nov"](e,32).ngClassPristine,o["\u0275nov"](e,32).ngClassDirty,o["\u0275nov"](e,32).ngClassValid,o["\u0275nov"](e,32).ngClassInvalid,o["\u0275nov"](e,32).ngClassPending),n(e,33,0,o["\u0275nov"](e,34).disabled||null,"NoopAnimations"===o["\u0275nov"](e,34)._animationMode)})}var Sp=Object.assign||function(n){for(var e,l=1,t=arguments.length;l<t;l++)for(var i in e=arguments[l])Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n},kp=function(){function n(n,e,l){this.mapService=n,this.store=e,this.commandService=l,this.worldData$=this.store.select(Ql.a),this.townState$=this.store.select(ll),this.allianceDiplomacy$=this.store.select(dl).pipe(Object(Il.a)(function(n){return!!n}),Object(c.a)(function(n){var e,l={};return l=n.diplomacyTarget.reduce(function(n,e){return e.status===q.DiplomacyStatus.ongoing&&(n[e.originAllianceId]=q.diplomacyTypeName[e.type]),n},l),l=n.diplomacyOrigin.reduce(function(n,e){return e.status===q.DiplomacyStatus.ongoing&&(n[e.targetAllianceId]=q.diplomacyTypeName[e.type]),n},l),Sp({},l,((e={})[n.id]="member",e))})),this.mapData$=this.store.select(yl),this.imagesLoaded$=this.mapService.imagesLoaded}return n.prototype.ngOnInit=function(){this.store.dispatch(new qe)},n.prototype.onOpenProfile=function(n,e){this.store.dispatch(new("alliance"===e?pe:v)(n))},n.prototype.onOpenCommand=function(n){this.commandService.targeting.next(n.location),this.toggleSidenav("left","command")},n.prototype.toggleSidenav=function(n,e){this.store.dispatch(new h([{side:n,name:e}]))},n}(),Ip=o["\u0275crt"]({encapsulation:0,styles:[[".map-container[_ngcontent-%COMP%]{position:relative;margin-left:-15px;width:100vw;height:calc(100vh - 43px);overflow:hidden}.map-container[_ngcontent-%COMP%]   canvas[_ngcontent-%COMP%]{width:100%;height:100%;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}"]],data:{}});function Op(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,5,"map-canvas",[],null,[[null,"openAllianceProfile"],[null,"openPlayerProfile"],[null,"openCommand"]],function(n,e,l){var t=!0,i=n.component;return"openAllianceProfile"===e&&(t=!1!==i.onOpenProfile(l,"alliance")&&t),"openPlayerProfile"===e&&(t=!1!==i.onOpenProfile(l,"player")&&t),"openCommand"===e&&(t=!1!==i.onOpenCommand(l)&&t),t},xp,Cp)),o["\u0275did"](1,10010624,null,0,wp,[si.c],{townState:[0,"townState"],worldData:[1,"worldData"],mapData:[2,"mapData"],allianceDiplomacy:[3,"allianceDiplomacy"]},{openAllianceProfile:"openAllianceProfile",openPlayerProfile:"openPlayerProfile",openCommand:"openCommand"}),o["\u0275pid"](131072,yt.AsyncPipe,[o.ChangeDetectorRef]),o["\u0275pid"](131072,yt.AsyncPipe,[o.ChangeDetectorRef]),o["\u0275pid"](131072,yt.AsyncPipe,[o.ChangeDetectorRef]),o["\u0275pid"](131072,yt.AsyncPipe,[o.ChangeDetectorRef])],function(n,e){var l=e.component;n(e,1,0,o["\u0275unv"](e,1,0,o["\u0275nov"](e,2).transform(l.townState$)),o["\u0275unv"](e,1,1,o["\u0275nov"](e,3).transform(l.worldData$)),o["\u0275unv"](e,1,2,o["\u0275nov"](e,4).transform(l.mapData$)),o["\u0275unv"](e,1,3,o["\u0275nov"](e,5).transform(l.allianceDiplomacy$)))},null)}function Pp(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,3,"div",[["class","map-container"]],null,null,null,null,null)),(n()(),o["\u0275and"](16777216,null,null,2,null,Op)),o["\u0275did"](2,16384,null,0,yt.NgIf,[o.ViewContainerRef,o.TemplateRef],{ngIf:[0,"ngIf"]},null),o["\u0275pid"](131072,yt.AsyncPipe,[o.ChangeDetectorRef])],function(n,e){var l=e.component;n(e,2,0,o["\u0275unv"](e,2,0,o["\u0275nov"](e,3).transform(l.imagesLoaded$)))},null)}var Tp=o["\u0275ccf"]("map",kp,function(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,1,"map",[],null,null,null,Pp,Ip)),o["\u0275did"](1,114688,null,0,kp,[si.c,O.n,ui.a],null,null)],function(n,e){n(e,1,0)},null)},{},{},[]),Ap=l("5xlC"),Dp=l("6QML"),Fp=o["\u0275crt"]({encapsulation:0,styles:[[""]],data:{}});function jp(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,0,"img",[["class","img-fluid"],["style","max-height: 100%;"]],[[8,"src",4]],null,null,null,null))],null,function(n,e){var l=e.component;n(e,0,0,l.imagePreview||l.data.avatarUrl)})}function Ep(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,1,"div",[["class","d-flex justify-content-center align-items-center"],["style","height: 100%; width: 100%; border: 2px dotted rgba(0,0,0,0.6);"]],null,null,null,null,null)),(n()(),o["\u0275ted"](-1,null,["No avatar"]))],null,null)}function Mp(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,2,"button",[["color","warn"],["mat-raised-button",""]],[[8,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"]],function(n,e,l){var t=!0;return"click"===e&&(t=!1!==n.component.removeAvatar()&&t),t},ho.b,ho.a)),o["\u0275did"](1,180224,null,0,go.b,[o.ElementRef,Ct.a,Rt.f,[2,Di.a]],{color:[0,"color"]},null),(n()(),o["\u0275ted"](-1,0,["Remove"]))],function(n,e){n(e,1,0,"warn")},function(n,e){n(e,0,0,o["\u0275nov"](e,1).disabled||null,"NoopAnimations"===o["\u0275nov"](e,1)._animationMode)})}function Np(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,2,"h1",[["class","mat-dialog-title"],["mat-dialog-title",""]],[[8,"id",0]],null,null,null,null)),o["\u0275did"](1,81920,null,0,Wr.m,[[2,Wr.l],o.ElementRef,Wr.e],null,null),(n()(),o["\u0275ted"](-1,null,["Edit profile"])),(n()(),o["\u0275eld"](3,0,null,null,40,"div",[["class","mat-dialog-content"],["mat-dialog-content",""]],null,null,null,null,null)),o["\u0275did"](4,16384,null,0,Wr.j,[],null,null),(n()(),o["\u0275eld"](5,0,null,null,14,"div",[],null,null,null,null,null)),(n()(),o["\u0275eld"](6,0,null,null,1,"div",[],null,null,null,null,null)),(n()(),o["\u0275ted"](-1,null,["Current avatar"])),(n()(),o["\u0275eld"](8,0,null,null,4,"div",[["class","avatar-container"],["style","max-width: 400px; height: 240px;"]],null,null,null,null,null)),(n()(),o["\u0275and"](16777216,null,null,1,null,jp)),o["\u0275did"](10,16384,null,0,yt.NgIf,[o.ViewContainerRef,o.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),o["\u0275and"](16777216,null,null,1,null,Ep)),o["\u0275did"](12,16384,null,0,yt.NgIf,[o.ViewContainerRef,o.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),o["\u0275eld"](13,0,null,null,1,"p",[],null,null,null,null,null)),(n()(),o["\u0275ted"](-1,null,["Image size is limited to 400x240. Larger images will be scaled down."])),(n()(),o["\u0275and"](16777216,null,null,1,null,Mp)),o["\u0275did"](16,16384,null,0,yt.NgIf,[o.ViewContainerRef,o.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),o["\u0275eld"](17,0,null,null,2,"div",[],null,null,null,null,null)),(n()(),o["\u0275eld"](18,0,null,null,1,"input",[["ng2FileSelect",""],["type","file"]],null,[[null,"onFileSelected"],[null,"change"]],function(n,e,l){var t=!0,i=n.component;return"change"===e&&(t=!1!==o["\u0275nov"](n,19).onChange()&&t),"onFileSelected"===e&&(t=!1!==i.fileSelected(l)&&t),t},null,null)),o["\u0275did"](19,16384,null,0,Ap.FileSelectDirective,[o.ElementRef],{uploader:[0,"uploader"]},{onFileSelected:"onFileSelected"}),(n()(),o["\u0275eld"](20,0,null,null,23,"div",[["class","mt-3"]],null,null,null,null,null)),(n()(),o["\u0275eld"](21,0,null,null,22,"mat-form-field",[["class","mat-form-field"],["ngDefaultControl",""]],[[2,"mat-form-field-appearance-standard",null],[2,"mat-form-field-appearance-fill",null],[2,"mat-form-field-appearance-outline",null],[2,"mat-form-field-appearance-legacy",null],[2,"mat-form-field-invalid",null],[2,"mat-form-field-can-float",null],[2,"mat-form-field-should-float",null],[2,"mat-form-field-hide-placeholder",null],[2,"mat-form-field-disabled",null],[2,"mat-form-field-autofilled",null],[2,"mat-focused",null],[2,"mat-accent",null],[2,"mat-warn",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null],[2,"_mat-animation-noopable",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(n,e,l){var t=!0,i=n.component;return"input"===e&&(t=!1!==o["\u0275nov"](n,30)._handleInput(l.target.value)&&t),"blur"===e&&(t=!1!==o["\u0275nov"](n,30).onTouched()&&t),"compositionstart"===e&&(t=!1!==o["\u0275nov"](n,30)._compositionStart()&&t),"compositionend"===e&&(t=!1!==o["\u0275nov"](n,30)._compositionEnd(l.target.value)&&t),"ngModelChange"===e&&(t=!1!==(i.description=l)&&t),t},vo.b,vo.a)),o["\u0275did"](22,7389184,null,7,bo.b,[o.ElementRef,o.ChangeDetectorRef,[2,St.j],[2,wt.b],[2,bo.a],Ct.a,o.NgZone,[2,Di.a]],null,null),o["\u0275qud"](335544320,1,{_control:0}),o["\u0275qud"](335544320,2,{_placeholderChild:0}),o["\u0275qud"](335544320,3,{_labelChild:0}),o["\u0275qud"](603979776,4,{_errorChildren:1}),o["\u0275qud"](603979776,5,{_hintChildren:1}),o["\u0275qud"](603979776,6,{_prefixChildren:1}),o["\u0275qud"](603979776,7,{_suffixChildren:1}),o["\u0275did"](30,16384,null,0,ti.d,[o.Renderer2,o.ElementRef,[2,ti.a]],null,null),o["\u0275prd"](1024,null,ti.l,function(n){return[n]},[ti.d]),o["\u0275did"](32,671744,null,0,ti.q,[[8,null],[8,null],[8,null],[6,ti.l]],{model:[0,"model"]},{update:"ngModelChange"}),o["\u0275prd"](2048,null,ti.m,null,[ti.q]),o["\u0275did"](34,16384,null,0,ti.n,[[4,ti.m]],null,null),(n()(),o["\u0275eld"](35,0,null,1,8,"textarea",[["class","mat-input-element mat-form-field-autofill-control cdk-textarea-autosize mat-autosize"],["matAutosizeMaxRows","5"],["matAutosizeMinRows","2"],["matInput",""],["matTextareaAutosize",""],["placeholder","Description"],["rows","1"]],[[2,"mat-input-server",null],[1,"id",0],[1,"placeholder",0],[8,"disabled",0],[8,"required",0],[8,"readOnly",0],[1,"aria-describedby",0],[1,"aria-invalid",0],[1,"aria-required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"focus"]],function(n,e,l){var t=!0;return"input"===e&&(t=!1!==o["\u0275nov"](n,36)._handleInput(l.target.value)&&t),"blur"===e&&(t=!1!==o["\u0275nov"](n,36).onTouched()&&t),"compositionstart"===e&&(t=!1!==o["\u0275nov"](n,36)._compositionStart()&&t),"compositionend"===e&&(t=!1!==o["\u0275nov"](n,36)._compositionEnd(l.target.value)&&t),"blur"===e&&(t=!1!==o["\u0275nov"](n,40)._focusChanged(!1)&&t),"focus"===e&&(t=!1!==o["\u0275nov"](n,40)._focusChanged(!0)&&t),"input"===e&&(t=!1!==o["\u0275nov"](n,40)._onInput()&&t),"input"===e&&(t=!1!==o["\u0275nov"](n,41)._noopInputHandler()&&t),t},null,null)),o["\u0275did"](36,16384,null,0,ti.d,[o.Renderer2,o.ElementRef,[2,ti.a]],null,null),o["\u0275prd"](1024,null,ti.l,function(n){return[n]},[ti.d]),o["\u0275did"](38,671744,null,0,ti.q,[[8,null],[8,null],[8,null],[6,ti.l]],{model:[0,"model"]},null),o["\u0275prd"](2048,null,ti.m,null,[ti.q]),o["\u0275did"](40,999424,null,0,yo.a,[o.ElementRef,Ct.a,[6,ti.m],[2,ti.p],[2,ti.h],St.d,[8,null],_o.a,o.NgZone],{placeholder:[0,"placeholder"]},null),o["\u0275did"](41,4603904,null,0,yo.c,[o.ElementRef,Ct.a,o.NgZone],{matAutosizeMinRows:[0,"matAutosizeMinRows"],matAutosizeMaxRows:[1,"matAutosizeMaxRows"],matTextareaAutosize:[2,"matTextareaAutosize"]},null),o["\u0275did"](42,16384,null,0,ti.n,[[4,ti.m]],null,null),o["\u0275prd"](2048,[[1,4]],bo.c,null,[yo.a]),(n()(),o["\u0275eld"](44,0,null,null,8,"div",[["class","mat-dialog-actions"],["mat-dialog-actions",""]],null,null,null,null,null)),o["\u0275did"](45,16384,null,0,Wr.f,[],null,null),(n()(),o["\u0275eld"](46,0,null,null,2,"button",[["color","primary"],["mat-raised-button",""]],[[8,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"]],function(n,e,l){var t=!0;return"click"===e&&(t=!1!==n.component.saveProfile()&&t),t},ho.b,ho.a)),o["\u0275did"](47,180224,null,0,go.b,[o.ElementRef,Ct.a,Rt.f,[2,Di.a]],{disabled:[0,"disabled"],color:[1,"color"]},null),(n()(),o["\u0275ted"](-1,0,["Save"])),(n()(),o["\u0275eld"](49,0,null,null,3,"button",[["class","float-right"],["color","warn"],["mat-dialog-close",""],["mat-raised-button",""],["type","button"]],[[8,"disabled",0],[2,"_mat-animation-noopable",null],[1,"aria-label",0]],[[null,"click"]],function(n,e,l){var t=!0;return"click"===e&&(t=!1!==o["\u0275nov"](n,51).dialogRef.close(o["\u0275nov"](n,51).dialogResult)&&t),t},ho.b,ho.a)),o["\u0275did"](50,180224,null,0,go.b,[o.ElementRef,Ct.a,Rt.f,[2,Di.a]],{color:[0,"color"]},null),o["\u0275did"](51,606208,null,0,Wr.g,[[2,Wr.l],o.ElementRef,Wr.e],{dialogResult:[0,"dialogResult"]},null),(n()(),o["\u0275ted"](-1,0,["Cancel"]))],function(n,e){var l=e.component;n(e,1,0),n(e,10,0,l.data.avatarUrl||l.imagePreview),n(e,12,0,!l.data.avatarUrl&&!l.imagePreview),n(e,16,0,l.data.avatarUrl||l.imagePreview),n(e,19,0,l.uploader),n(e,32,0,l.description),n(e,38,0,l.description),n(e,40,0,"Description"),n(e,41,0,"2","5",""),n(e,47,0,!l.uploader.queue.length&&l.data.description===l.description,"primary"),n(e,50,0,"warn"),n(e,51,0,"")},function(n,e){n(e,0,0,o["\u0275nov"](e,1).id),n(e,21,1,["standard"==o["\u0275nov"](e,22).appearance,"fill"==o["\u0275nov"](e,22).appearance,"outline"==o["\u0275nov"](e,22).appearance,"legacy"==o["\u0275nov"](e,22).appearance,o["\u0275nov"](e,22)._control.errorState,o["\u0275nov"](e,22)._canLabelFloat,o["\u0275nov"](e,22)._shouldLabelFloat(),o["\u0275nov"](e,22)._hideControlPlaceholder(),o["\u0275nov"](e,22)._control.disabled,o["\u0275nov"](e,22)._control.autofilled,o["\u0275nov"](e,22)._control.focused,"accent"==o["\u0275nov"](e,22).color,"warn"==o["\u0275nov"](e,22).color,o["\u0275nov"](e,22)._shouldForward("untouched"),o["\u0275nov"](e,22)._shouldForward("touched"),o["\u0275nov"](e,22)._shouldForward("pristine"),o["\u0275nov"](e,22)._shouldForward("dirty"),o["\u0275nov"](e,22)._shouldForward("valid"),o["\u0275nov"](e,22)._shouldForward("invalid"),o["\u0275nov"](e,22)._shouldForward("pending"),!o["\u0275nov"](e,22)._animationsEnabled,o["\u0275nov"](e,34).ngClassUntouched,o["\u0275nov"](e,34).ngClassTouched,o["\u0275nov"](e,34).ngClassPristine,o["\u0275nov"](e,34).ngClassDirty,o["\u0275nov"](e,34).ngClassValid,o["\u0275nov"](e,34).ngClassInvalid,o["\u0275nov"](e,34).ngClassPending]),n(e,35,1,[o["\u0275nov"](e,40)._isServer,o["\u0275nov"](e,40).id,o["\u0275nov"](e,40).placeholder,o["\u0275nov"](e,40).disabled,o["\u0275nov"](e,40).required,o["\u0275nov"](e,40).readonly,o["\u0275nov"](e,40)._ariaDescribedby||null,o["\u0275nov"](e,40).errorState,o["\u0275nov"](e,40).required.toString(),o["\u0275nov"](e,42).ngClassUntouched,o["\u0275nov"](e,42).ngClassTouched,o["\u0275nov"](e,42).ngClassPristine,o["\u0275nov"](e,42).ngClassDirty,o["\u0275nov"](e,42).ngClassValid,o["\u0275nov"](e,42).ngClassInvalid,o["\u0275nov"](e,42).ngClassPending]),n(e,46,0,o["\u0275nov"](e,47).disabled||null,"NoopAnimations"===o["\u0275nov"](e,47)._animationMode),n(e,49,0,o["\u0275nov"](e,50).disabled||null,"NoopAnimations"===o["\u0275nov"](e,50)._animationMode,o["\u0275nov"](e,51).ariaLabel)})}var Lp=o["\u0275ccf"]("edit-profile",Hr,function(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,1,"edit-profile",[],null,null,null,Np,Fp)),o["\u0275did"](1,49152,null,0,Hr,[Dp.Cloudinary,O.n,Wr.l,Wr.a],null,null)],null,null)},{},{},[]),$p=o["\u0275crt"]({encapsulation:0,styles:[[""]],data:{}});function qp(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,2,"h1",[["class","mat-dialog-title"],["mat-dialog-title",""]],[[8,"id",0]],null,null,null,null)),o["\u0275did"](1,81920,null,0,Wr.m,[[2,Wr.l],o.ElementRef,Wr.e],null,null),(n()(),o["\u0275ted"](2,null,["",""])),(n()(),o["\u0275eld"](3,0,null,null,1,"div",[["class","mat-dialog-content"],["mat-dialog-content",""]],[[8,"innerHTML",1]],null,null,null,null)),o["\u0275did"](4,16384,null,0,Wr.j,[],null,null),(n()(),o["\u0275eld"](5,0,null,null,5,"div",[["class","justify-content-end mat-dialog-actions"],["mat-dialog-actions",""]],null,null,null,null,null)),o["\u0275did"](6,16384,null,0,Wr.f,[],null,null),(n()(),o["\u0275eld"](7,0,null,null,3,"button",[["color","primary"],["mat-button",""],["mat-dialog-close",""],["type","button"]],[[8,"disabled",0],[2,"_mat-animation-noopable",null],[1,"aria-label",0]],[[null,"click"]],function(n,e,l){var t=!0;return"click"===e&&(t=!1!==o["\u0275nov"](n,9).dialogRef.close(o["\u0275nov"](n,9).dialogResult)&&t),t},ho.b,ho.a)),o["\u0275did"](8,180224,null,0,go.b,[o.ElementRef,Ct.a,Rt.f,[2,Di.a]],{color:[0,"color"]},null),o["\u0275did"](9,606208,null,0,Wr.g,[[2,Wr.l],o.ElementRef,Wr.e],{dialogResult:[0,"dialogResult"]},null),(n()(),o["\u0275ted"](-1,0,["Continue"]))],function(n,e){n(e,1,0),n(e,8,0,"primary"),n(e,9,0,"")},function(n,e){var l=e.component;n(e,0,0,o["\u0275nov"](e,1).id),n(e,2,0,l.data.title),n(e,3,0,l.data.content),n(e,7,0,o["\u0275nov"](e,8).disabled||null,"NoopAnimations"===o["\u0275nov"](e,8)._animationMode,o["\u0275nov"](e,9).ariaLabel)})}var Vp=o["\u0275ccf"]("tutorial-dialog",Lc,function(n){return o["\u0275vid"](0,[(n()(),o["\u0275eld"](0,0,null,null,1,"tutorial-dialog",[],null,null,null,qp,$p)),o["\u0275did"](1,49152,null,0,Lc,[Wr.l,Wr.a],null,null)],null,null)},{},{},[]),Up=l("iCtU"),zp=l("Ovjw"),Hp=l("O/bx"),Bp=l("LKjY"),Wp=l("bt6x"),Zp=l("0XGt"),Gp=l("PsaP"),Yp=l("nhl2"),Xp=l("InZo"),Qp=l("C9m0"),Kp=l("+NDo"),Jp=l("4WQT"),nf=l("wtSO"),ef=l("gpiN"),lf=l("NlYj"),tf=l("neuq"),of=l("y+WT"),af=l("MVL9"),rf=l("j2fZ"),uf=l("S6T7"),sf=l("FeSO");l.d(e,"GameModuleNgFactory",function(){return cf});var cf=o["\u0275cmf"](lt,[],function(n){return o["\u0275mod"]([o["\u0275mpd"](512,o.ComponentFactoryResolver,o["\u0275CodegenComponentFactoryResolver"],[[8,[tt.a,tt.b,Ot,Pt.a,Tt.a,At.a,Dt.a,Ft.a,jt.a,Et.a,Mt.a,Nt.a,fd,lp,Tp,qu,vi,li,Lp,Vp]],[3,o.ComponentFactoryResolver],o.NgModuleRef]),o["\u0275mpd"](4608,yt.NgLocalization,yt.NgLocaleLocalization,[o.LOCALE_ID,[2,yt["\u0275angular_packages_common_common_a"]]]),o["\u0275mpd"](4608,rt.c,rt.c,[rt.i,rt.e,o.ComponentFactoryResolver,rt.h,rt.f,o.Injector,o.NgZone,yt.DOCUMENT,wt.b]),o["\u0275mpd"](5120,rt.j,rt.k,[rt.c]),o["\u0275mpd"](5120,Ra.a,Ra.b,[rt.c]),o["\u0275mpd"](4608,_t.c,_t.c,[]),o["\u0275mpd"](4608,St.d,St.d,[]),o["\u0275mpd"](5120,ft,mt,[rt.c]),o["\u0275mpd"](5120,fs,ms,[[3,fs]]),o["\u0275mpd"](5120,Wr.c,Wr.d,[rt.c]),o["\u0275mpd"](4608,Wr.e,Wr.e,[rt.c,o.Injector,[2,yt.Location],[2,Wr.b],Wr.c,[3,Wr.e],rt.e]),o["\u0275mpd"](4608,ti.z,ti.z,[]),o["\u0275mpd"](4608,ti.f,ti.f,[]),o["\u0275mpd"](4608,Up.a,Up.a,[o.ComponentFactoryResolver,o.Injector,zp.a]),o["\u0275mpd"](5120,Dp.Cloudinary,Hp.createCloudinary,[Hp.CLOUDINARY_LIB,Hp.CLOUDINARY_CONFIGURATION]),o["\u0275mpd"](4608,si.c,si.c,[Qd.a]),o["\u0275mpd"](4608,ui.a,ui.a,[]),o["\u0275mpd"](1073742336,yt.CommonModule,yt.CommonModule,[]),o["\u0275mpd"](1073742336,wt.a,wt.a,[]),o["\u0275mpd"](1073742336,ut.g,ut.g,[]),o["\u0275mpd"](1073742336,Ct.b,Ct.b,[]),o["\u0275mpd"](1073742336,xt.b,xt.b,[]),o["\u0275mpd"](1073742336,rt.g,rt.g,[]),o["\u0275mpd"](1073742336,St.n,St.n,[[2,St.f]]),o["\u0275mpd"](1073742336,St.x,St.x,[]),o["\u0275mpd"](1073742336,St.v,St.v,[]),o["\u0275mpd"](1073742336,St.t,St.t,[]),o["\u0275mpd"](1073742336,bo.d,bo.d,[]),o["\u0275mpd"](1073742336,Ra.d,Ra.d,[]),o["\u0275mpd"](1073742336,pc,pc,[]),o["\u0275mpd"](1073742336,go.c,go.c,[]),o["\u0275mpd"](1073742336,Zc.e,Zc.e,[]),o["\u0275mpd"](1073742336,po,po,[]),o["\u0275mpd"](1073742336,_t.d,_t.d,[]),o["\u0275mpd"](1073742336,Rt.a,Rt.a,[]),o["\u0275mpd"](1073742336,Ai,Ai,[]),o["\u0275mpd"](1073742336,_o.c,_o.c,[]),o["\u0275mpd"](1073742336,yo.b,yo.b,[]),o["\u0275mpd"](1073742336,Ko,Ko,[]),o["\u0275mpd"](1073742336,bt,bt,[]),o["\u0275mpd"](1073742336,kc,kc,[]),o["\u0275mpd"](1073742336,Cr,Cr,[]),o["\u0275mpd"](1073742336,jr,jr,[]),o["\u0275mpd"](1073742336,gs,gs,[]),o["\u0275mpd"](1073742336,Wr.k,Wr.k,[]),o["\u0275mpd"](1073742336,ti.w,ti.w,[]),o["\u0275mpd"](1073742336,ti.j,ti.j,[]),o["\u0275mpd"](1073742336,ti.t,ti.t,[]),o["\u0275mpd"](1073742336,wc.p,wc.p,[[2,wc.v],[2,wc.l]]),o["\u0275mpd"](1073742336,Bp.a,Bp.a,[]),o["\u0275mpd"](1073742336,Wp.a,Wp.a,[]),o["\u0275mpd"](1073742336,Zp.a,Zp.a,[]),o["\u0275mpd"](1073742336,Gp.a,Gp.a,[]),o["\u0275mpd"](1073742336,Yp.a,Yp.a,[]),o["\u0275mpd"](1073742336,Xp.a,Xp.a,[]),o["\u0275mpd"](1073742336,Qp.a,Qp.a,[]),o["\u0275mpd"](1073742336,Kp.a,Kp.a,[]),o["\u0275mpd"](1073742336,Jp.a,Jp.a,[]),o["\u0275mpd"](1073742336,nf.a,nf.a,[]),o["\u0275mpd"](1073742336,ef.a,ef.a,[]),o["\u0275mpd"](1073742336,lf.a,lf.a,[]),o["\u0275mpd"](1073742336,tf.a,tf.a,[]),o["\u0275mpd"](1073742336,of.a,of.a,[]),o["\u0275mpd"](1073742336,af.a,af.a,[]),o["\u0275mpd"](1073742336,rf.a,rf.a,[]),o["\u0275mpd"](1073742336,a.a,a.a,[]),o["\u0275mpd"](1024,O.j,function(){return[{key:"game",reducerFactory:O.z,metaReducers:[],initialState:void 0}]},[]),o["\u0275mpd"](1024,O.q,function(){return[{player:A,alliance:Se,chat:$e,town:L,map:He,rankings:nl}]},[]),o["\u0275mpd"](1024,O.r,function(n){return[n]},[O.q]),o["\u0275mpd"](1024,O.b,function(n,e,l){return[O.w(n,e,l)]},[o.Injector,O.q,O.r]),o["\u0275mpd"](1073873408,O.o,O.o,[O.j,O.b,O.g,O.p]),o["\u0275mpd"](512,Sl,Sl,[u.a,wc.l,Qd.a,O.n]),o["\u0275mpd"](512,Ol,Ol,[u.a,wc.l,O.n,Qd.a]),o["\u0275mpd"](512,Pl,Pl,[u.a,wc.l,O.n,Qd.a]),o["\u0275mpd"](512,Jl,Jl,[u.a,wc.l,O.n,Qd.a]),o["\u0275mpd"](512,nt,nt,[u.a,O.n,Qd.a]),o["\u0275mpd"](512,et,et,[u.a,wc.l,Qd.a,O.n]),o["\u0275mpd"](1024,u.i,function(n,e,l,t,i,o){return[u.e(n,e,l,t,i,o)]},[Sl,Ol,Pl,Jl,nt,et]),o["\u0275mpd"](1073742336,u.g,u.g,[u.f,u.i,[2,O.p],[2,O.o]]),o["\u0275mpd"](1073742336,$t.e,$t.e,[]),o["\u0275mpd"](1073742336,uf.FileUploadModule,uf.FileUploadModule,[]),o["\u0275mpd"](1073742336,Hp.CloudinaryModule,Hp.CloudinaryModule,[]),o["\u0275mpd"](512,sf.a,sf.a,[]),o["\u0275mpd"](1073742336,lt,lt,[sf.a]),o["\u0275mpd"](1024,wc.j,function(){return[[{path:"",component:Wc,children:[{path:"",redirectTo:"town",pathMatch:"full"},{path:"town",component:Xd},{path:"map",component:kp},{path:"recruit",component:Du,pathMatch:"prefix",outlet:"popupRight"},{path:"command",component:ri,pathMatch:"prefix",outlet:"popupLeft"},{path:"movement",component:Gt,pathMatch:"prefix",outlet:"popupLeft"}]}]]},[]),o["\u0275mpd"](256,Hp.CLOUDINARY_LIB,null,[]),o["\u0275mpd"](256,Hp.CLOUDINARY_CONFIGURATION,{cloud_name:"divudlfux",upload_preset:"avatar"},[])])})},wfqj:function(n,e,l){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CombatOutcome=function(n){return n[n.attack=0]="attack",n[n.defense=1]="defense",n}(e.CombatOutcome||{})}}]);